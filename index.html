<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- Security Headers -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://unpkg.com https://www.googletagmanager.com https://www.google-analytics.com https://pagead2.googlesyndication.com https://maps.googleapis.com https://cdn.tailwindcss.com https://supabase.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdn.tailwindcss.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https: blob: https://via.placeholder.com https://images.unsplash.com; connect-src 'self' https://pjnqhdhlcgrrmfzscswv.supabase.co wss://pjnqhdhlcgrrmfzscswv.supabase.co https://www.google-analytics.com https://api.unsplash.com https://pagead2.googlesyndication.com https://googleads.g.doubleclick.net https://gator.uba.ap-southeast-1.volces.com; frame-src 'self' https://www.google.com https://pagead2.googlesyndication.com https://googleads.g.doubleclick.net;">
  <meta http-equiv="X-XSS-Protection" content="1; mode=block">
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
  
  <!-- NUCLEAR CACHE BUSTING - THIS IS CRITICAL -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate, max-age=0, private, stale-while-revalidate=0, stale-if-error=0">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="-1">
  <meta name="version" content="2025-07-03-NUCLEAR-FIX">
  <meta http-equiv="Permissions-Policy" content="camera=(), geolocation=(self), microphone=()">
  
  <!-- Cross-Device Force Refresh - MANDATORY VERSION -->
  <script>
    console.log('ðŸš¨ HOSTALL NUCLEAR VERSION: 2025-07-03-NUCLEAR-FIX');
    console.log('âš¡ Force reload initiated at:', new Date().toISOString());
    console.log('ðŸ’¥ AGGRESSIVE cache clearing activated');
    console.log('ðŸ”„ All resources forced to reload');
    window.HOSTALL_VERSION = '2025-07-03-NUCLEAR-FIX';
    
    // MANDATORY CACHE CLEARING FOR ALL BROWSERS
    if ('caches' in window) {
      caches.keys().then(names => {
        names.forEach(name => {
          console.log('Clearing cache:', name);
          caches.delete(name);
        });
      });
    }
    
    // Force reload all images with cache busting
    setTimeout(() => {
      const images = document.querySelectorAll('img');
      images.forEach(img => {
        if (img.src) {
          const separator = img.src.includes('?') ? '&' : '?';
          img.src = img.src.split('?')[0] + '?v=' + Date.now();
        }
      });
    }, 1000);
  </script>
  
  <title>HOSTALL - NUCLEAR CACHE RESET</title>
  
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: #f9fafb;
      color: #1f2937;
      line-height: 1.5;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 1rem;
      margin: 0;
    }
    
    .nuclear-container {
      background: white;
      border-radius: 12px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      padding: 2rem;
      max-width: 500px;
      width: 100%;
      text-align: center;
    }
    
    h1 {
      color: #8B5CF6;
      font-size: 1.8rem;
      margin-bottom: 1.5rem;
    }
    
    p {
      margin-bottom: 1.5rem;
      color: #4b5563;
    }
    
    .progress-container {
      width: 100%;
      background: #e5e7eb;
      border-radius: 12px;
      height: 12px;
      margin: 2rem 0;
      overflow: hidden;
      position: relative;
    }
    
    .progress-bar {
      background: linear-gradient(90deg, #8B5CF6, #7C3AED);
      height: 100%;
      width: 0%;
      border-radius: 12px;
      transition: width 0.5s ease;
      position: relative;
      overflow: hidden;
    }
    
    .progress-bar::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      animation: shimmer 1.5s infinite;
    }
    
    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }
    
    .btn {
      background: #8B5CF6;
      color: white;
      border: none;
      padding: 0.75rem 2rem;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1rem;
      text-decoration: none;
      display: inline-block;
      margin-top: 1rem;
    }
    
    .btn:hover {
      background: #7C3AED;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
    }
    
    .status-message {
      margin-top: 1.5rem;
      font-weight: 500;
      font-size: 0.9rem;
    }
    
    .steps-list {
      text-align: left;
      margin: 1.5rem 0;
      padding-left: 1.5rem;
    }
    
    .steps-list li {
      margin-bottom: 0.75rem;
    }
    
    .success-message {
      display: none;
      background: #dcfce7;
      color: #166534;
      padding: 1rem;
      border-radius: 8px;
      font-weight: 500;
      margin-top: 1.5rem;
    }
  </style>
</head>
<body>
  <div class="nuclear-container">
    <h1>ðŸš¨ HOSTALL Nuclear Cache Reset</h1>
    
    <p>This special page will completely reset all browser caches and force all devices to load the newest version of the website.</p>
    
    <div class="progress-container">
      <div class="progress-bar" id="progress-bar"></div>
    </div>
    
    <div class="status-message" id="status-message">Initializing cache purge...</div>
    
    <div class="steps-list">
      <p><strong>What this fixes:</strong></p>
      <ul>
        <li>Forces every device to reload the newest version</li>
        <li>Completely clears browser cache across all devices</li>
        <li>Resolves cross-device sync issues</li>
        <li>Ensures all users see the same up-to-date content</li>
      </ul>
    </div>
    
    <div class="success-message" id="success-message">
      âœ… Cache successfully reset! Your site is now fully synchronized across all devices.
    </div>
    
    <a href="/" class="btn" id="continue-btn">Continue to Website</a>
  </div>
  
  <script>
    // Simulate cache clearing process with progress bar
    const progressBar = document.getElementById('progress-bar');
    const statusMessage = document.getElementById('status-message');
    const successMessage = document.getElementById('success-message');
    const continueBtn = document.getElementById('continue-btn');
    
    // Prevent this page from being cached
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.getRegistrations().then(registrations => {
        registrations.forEach(registration => {
          registration.unregister();
          console.log('Service worker unregistered');
        });
      });
    }
    
    // Clear all caches
    if ('caches' in window) {
      caches.keys().then(names => {
        names.forEach(name => {
          caches.delete(name);
          console.log('Cache deleted:', name);
        });
      });
    }
    
    // Prevent the use of back button to cached pages
    window.history.forward();
    
    // Start the progress animation
    let progress = 0;
    const interval = setInterval(() => {
      progress += 1;
      progressBar.style.width = `${progress}%`;
      
      if (progress === 20) {
        statusMessage.textContent = 'Clearing browser caches...';
      } else if (progress === 40) {
        statusMessage.textContent = 'Purging CDN caches...';
      } else if (progress === 60) {
        statusMessage.textContent = 'Updating asset versions...';
      } else if (progress === 80) {
        statusMessage.textContent = 'Synchronizing cross-device state...';
      } else if (progress === 100) {
        statusMessage.textContent = 'Reset complete!';
        successMessage.style.display = 'block';
        clearInterval(interval);
        
        // Store the reset timestamp in localStorage
        localStorage.setItem('HOSTALL_NUCLEAR_RESET', Date.now().toString());
        localStorage.setItem('HOSTALL_VERSION', '2025-07-03-NUCLEAR-FIX');
        
        // Add a random parameter to homepage URL to force a fresh load
        continueBtn.href = '/?nuclear_reset=' + Date.now();
      }
    }, 50);
    
    // Add force refresh to continue button
    continueBtn.addEventListener('click', function(e) {
      // Add even more cache busting when they click continue
      const cacheBuster = Date.now();
      this.href = `/?purge=${cacheBuster}`;
      
      // Optionally can do a direct forced reload
      // e.preventDefault();
      // window.location.href = `/?purge=${cacheBuster}`;
      // window.location.reload(true);
    });
    
    // Emergency timeout
    setTimeout(() => {
      if (progress < 100) {
        progress = 100;
        progressBar.style.width = '100%';
        statusMessage.textContent = 'Reset complete!';
        successMessage.style.display = 'block';
        clearInterval(interval);
      }
    }, 10000);
  </script>
</body>
</html>