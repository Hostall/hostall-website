<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- Security Headers -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://unpkg.com https://www.googletagmanager.com https://www.google-analytics.com https://pagead2.googlesyndication.com https://maps.googleapis.com https://cdn.tailwindcss.com https://supabase.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdn.tailwindcss.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https: blob: https://via.placeholder.com https://images.unsplash.com; connect-src 'self' https://pjnqhdhlcgrrmfzscswv.supabase.co wss://pjnqhdhlcgrrmfzscswv.supabase.co https://www.google-analytics.com https://api.unsplash.com https://pagead2.googlesyndication.com https://googleads.g.doubleclick.net https://gator.uba.ap-southeast-1.volces.com; frame-src 'self' https://www.google.com https://pagead2.googlesyndication.com https://googleads.g.doubleclick.net;">
  <meta http-equiv="X-XSS-Protection" content="1; mode=block">
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
  
  <!-- NUCLEAR CACHE BUSTING - THIS IS CRITICAL -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate, max-age=0, private, stale-while-revalidate=0, stale-if-error=0">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="-1">
  <meta name="version" content="2025-07-03-NUCLEAR-FIX">
  <meta http-equiv="Permissions-Policy" content="camera=(), geolocation=(self), microphone=()">
  
  <!-- Cross-Device Force Refresh - MANDATORY VERSION -->
  <script>
    console.log('üö® HOSTALL NUCLEAR VERSION: 2025-07-03-NUCLEAR-FIX');
    console.log('‚ö° Force reload initiated at:', new Date().toISOString());
    console.log('üí• AGGRESSIVE cache clearing activated');
    console.log('üîÑ All resources forced to reload');
    window.HOSTALL_VERSION = '2025-07-03-NUCLEAR-FIX';
    
    // MANDATORY CACHE CLEARING FOR ALL BROWSERS
    if ('caches' in window) {
      caches.keys().then(names => {
        names.forEach(name => {
          console.log('Clearing cache:', name);
          caches.delete(name);
        });
      });
    }
    
    // Force reload all images with cache busting
    setTimeout(() => {
      const images = document.querySelectorAll('img');
      images.forEach(img => {
        if (img.src) {
          const separator = img.src.includes('?') ? '&' : '?';
          img.src = img.src.split('?')[0] + '?v=' + Date.now();
        }
      });
    }, 1000);
  </script>
  
  <!-- Enhanced SEO Meta Tags -->
  <title>HOSTALL - Best Hostels in Lahore | Boys & Girls Hostels | Affordable Accommodation</title>
  <meta name="description" content="Find the best boys and girls hostels in Lahore with HOSTALL. Compare prices, facilities, and locations for affordable student accommodation in Lahore, Pakistan. Browse verified hostels near universities and colleges.">
  <meta name="keywords" content="hostel, hostels in lahore, boys hostel in lahore, girls hostel in lahore, lahore hostel, student accommodation lahore, affordable hostels lahore, hostel near university lahore, pg accommodation lahore, hostall">
  
  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="HOSTALL - Best Hostels in Lahore | Boys & Girls Hostels">
  <meta property="og:description" content="Find verified boys and girls hostels in Lahore. Compare facilities, prices, and locations for the perfect student accommodation in Lahore, Pakistan.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://hostall.com">
  <meta property="og:image" content="https://hostall.com/og-image.jpg">
  <meta property="og:locale" content="en_US">
  
  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="HOSTALL - Best Hostels in Lahore">
  <meta name="twitter:description" content="Find verified boys and girls hostels in Lahore with HOSTALL. Compare prices and facilities for student accommodation.">
  <meta name="twitter:image" content="https://hostall.com/twitter-image.jpg">
  
  <!-- Additional SEO Meta Tags -->
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="author" content="HOSTALL Team">
  <meta name="geo.region" content="PK-PB">
  <meta name="geo.placename" content="Lahore">
  <meta name="geo.position" content="31.5204;74.3587">
  <meta name="ICBM" content="31.5204, 74.3587">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="https://hostall.com">
  
  <!-- Structured Data for Local Business -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    "name": "HOSTALL",
    "description": "Find the best hostels in Lahore for boys and girls. Student accommodation with verified listings and affordable prices.",
    "url": "https://hostall.com",
    "telephone": "+92-333-1536041",
    "email": "teamhostall@gmail.com",
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "Lahore",
      "addressRegion": "Punjab",
      "addressCountry": "Pakistan"
    },
    "geo": {
      "@type": "GeoCoordinates",
      "latitude": "31.5204",
      "longitude": "74.3587"
    },
    "serviceArea": {
      "@type": "City",
      "name": "Lahore"
    },
    "areaServed": [
      {
        "@type": "City",
        "name": "Lahore"
      }
    ],
    "knowsAbout": [
      "Boys Hostels in Lahore",
      "Girls Hostels in Lahore", 
      "Student Accommodation",
      "PG Accommodation",
      "University Hostels"
    ]
  }
  </script>
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-0NNWGNQE5Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-0NNWGNQE5Q');
  </script>
  
  <script>
    // Add event listeners for online/offline status
    window.addEventListener('online', function() {
      console.log('Connection restored, syncing data...');
      document.body.classList.remove('offline-mode');
      if (typeof syncOfflineData === 'function') {
        syncOfflineData();
      }
    });
    
    window.addEventListener('offline', function() {
      console.log('Connection lost, switching to offline mode...');
      document.body.classList.add('offline-mode');
    });
    
    // Set initial state
    document.addEventListener('DOMContentLoaded', function() {
      if (!navigator.onLine) {
        document.body.classList.add('offline-mode');
      }
    });
  </script>
  
  <!-- Google AdSense - Temporarily disabled to resolve CSP issues -->
  <!-- 
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXXX"
     crossorigin="anonymous"></script>
  -->
  
  <!-- HugeIcons CSS -->
  <link rel="stylesheet" href="https://cdn.hugeicons.com/font/hgi-stroke-rounded.css">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com/3.4.16"></script>
  
  <!-- Supabase JS -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    // Ensure Supabase is properly initialized
    // Set up the Supabase client globally once the library has loaded
    (function initSupabase() {
      const SUPABASE_URL = 'https://pjnqhdhlcgrrmfzscswv.supabase.co';
      const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBqbnFoZGhsY2dycm1menNjc3d2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODkyMTk3NTYsImV4cCI6MjAwNDc5NTc1Nn0.b3NzliWGRErqYK1FTyGXjH6V57Z5Y0MErGVeAm1OIwk';
      
      // Wait for the DOM to be fully loaded
      document.addEventListener('DOMContentLoaded', function() {
        console.log('üîÑ DOM loaded, attempting Supabase initialization');
        initializeSupabase();
      });
      
      // Also try on window load (backup)
      window.addEventListener('load', function() {
        console.log('üîÑ Window loaded, attempting Supabase initialization');
        initializeSupabase();
      });
      
      // Initial try
      setTimeout(function() {
        console.log('üîÑ Initial attempt at Supabase initialization');
        initializeSupabase();
      }, 100);
      
      // Function to initialize Supabase
      function initializeSupabase() {
        // First verify the library is loaded
        if (typeof window.supabase === 'undefined') {
          console.log('‚ö†Ô∏è Supabase library not yet loaded');
          return false;
        }
        
        try {
          // Check if createClient is available
          if (typeof window.supabase.createClient === 'function') {
            // Create a new client and store it globally
            const client = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
            window.supabase = client;
            console.log('‚úÖ Supabase client initialized successfully');
            return true;
          } else if (typeof window.supabase.from === 'function') {
            // If it's already a client instance, no need to recreate
            console.log('‚úÖ Supabase client already initialized');
            return true;
          } else {
            console.log('‚ö†Ô∏è Supabase loaded but missing required methods');
          }
        } catch (error) {
          console.error('‚ùå Error initializing Supabase:', error.message);
        }
        
        return false;
      }
      
      // Additional retries with exponential backoff
      [500, 1000, 2000, 4000].forEach(delay => {
        setTimeout(initializeSupabase, delay);
      });
    })();
  </script>
  
  <!-- Chart.js for Analytics Dashboard -->
  <script src="https://public.youware.com/users-website-assets/prod/eece562c-b820-4d93-ac82-ae67b689ba1d/cd1a54b51d05486492e95ad709ed7149.js"></script>
  <script src="https://public.youware.com/users-website-assets/prod/eece562c-b820-4d93-ac82-ae67b689ba1d/c1a352b6092148aa8f62ef92ee07acf7"></script>
  <script src="https://public.youware.com/users-website-assets/prod/eece562c-b820-4d93-ac82-ae67b689ba1d/13f058ccda9d463197edb587c6d2ba4b"></script>
  
  <!-- Security and Password Management -->
  <script src="password-manager.js?v=2025-01-02-20:21"></script>
  <script src="security-manager.js?v=2025-01-02-20:21"></script>
  
  <!-- Initialize Security and Password Management -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize password and security managers
      if (window.passwordManager) {
        window.passwordManager.init();
        console.log('‚úÖ Password manager initialized');
      } else {
        console.error('‚ùå Password manager not available');
      }
      
      if (window.securityManager) {
        window.securityManager.init();
        console.log('üîí Security manager initialized');
      } else {
        console.error('‚ùå Security manager not available');
      }
      
      // Setup click handlers for security buttons
      const changePasswordBtn = document.getElementById('change-password-btn');
      if (changePasswordBtn) {
        changePasswordBtn.addEventListener('click', function() {
          if (window.passwordManager) {
            // Show change password form or modal
            console.log('üëÜ Change password clicked');
            // This would typically show a modal or navigate to change password form
            // For now, we'll call handleChangePassword directly if there's a form
            const changePasswordForm = document.getElementById('change-password-form');
            if (changePasswordForm) {
              changePasswordForm.style.display = 'block';
            }
          }
        });
      }
      
      const enable2faBtn = document.getElementById('enable-2fa-btn');
      if (enable2faBtn) {
        enable2faBtn.addEventListener('click', function() {
          if (window.securityManager) {
            // Setup 2FA
            console.log('üëÜ Enable 2FA clicked');
            // This would typically show a 2FA setup process
            if (typeof window.securityManager.setup2FA === 'function') {
              window.securityManager.setup2FA();
            } else {
              console.error('‚ùå 2FA setup function not available');
              alert('Two-factor authentication setup is currently unavailable. Please try again later.');
            }
          }
        });
      }
      
      // Setup disable 2FA button
      const disable2faBtn = document.getElementById('disable-2fa-btn');
      if (disable2faBtn) {
        disable2faBtn.addEventListener('click', function() {
          if (window.securityManager && typeof window.securityManager.disableTwoFactor === 'function') {
            if (confirm('Are you sure you want to disable two-factor authentication? This will reduce the security of your account.')) {
              window.securityManager.disableTwoFactor();
            }
          }
        });
      }
      
      // Setup view login history button
      const viewLoginHistoryBtn = document.getElementById('view-login-history-btn');
      if (viewLoginHistoryBtn) {
        viewLoginHistoryBtn.addEventListener('click', function() {
          if (window.securityManager) {
            alert('Login history feature coming soon!');
          }
        });
      }
      

    });
  </script>
  
  <!-- Google Maps JavaScript API -->
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBKZlLFE0PClFElJlMzNjFwMTQyMzM4Q&libraries=places&callback=initMap"></script>
  
  <!-- Domain Fix Script - NUCLEAR FIX VERSION -->
  <script>
    // EMERGENCY INLINE DOMAIN FIX 
    // This is a nuclear option that forces all browsers to reload the file
    const forceCacheBust = function() {
      // Immediately attach to window load
      window.addEventListener('DOMContentLoaded', function() {
        console.log('üö® EMERGENCY CACHE BUST ACTIVATED');
        
        // Force clear caches
        if ('caches' in window) {
          caches.keys().then(names => {
            names.forEach(name => {
              console.log('Nuking cache:', name);
              caches.delete(name);
            });
          });
        }
        
        // Force reload all scripts with nuclear timestamp
        const timestamp = Date.now();
        const scripts = document.querySelectorAll('script[src]');
        scripts.forEach(script => {
          if (script.src && !script.src.includes('?nuclear=')) {
            const currentSrc = script.src;
            const newSrc = `${currentSrc.split('?')[0]}?nuclear=${timestamp}`;
            
            const newScript = document.createElement('script');
            Array.from(script.attributes).forEach(attr => {
              if (attr.name !== 'src') {
                newScript.setAttribute(attr.name, attr.value);
              }
            });
            newScript.src = newSrc;
            script.parentNode.replaceChild(newScript, script);
          }
        });
        
        // Force reload CSS
        document.querySelectorAll('link[rel="stylesheet"]').forEach(link => {
          if (link.href) {
            link.href = `${link.href.split('?')[0]}?nuclear=${timestamp}`;
          }
        });
        
        // Force reload images
        document.querySelectorAll('img').forEach(img => {
          if (img.src && !img.src.startsWith('data:')) {
            img.src = `${img.src.split('?')[0]}?nuclear=${timestamp}`;
          }
        });
      });
    };
    
    // Execute immediately
    forceCacheBust();
  </script>
  
  <!-- Load domain-fix.js with forced nuclear timestamp -->
  <script src="domain-fix.js?nuclear=FORCE-RELOAD-2025-07-03-15-30"></script>
  
  <!-- Site Configuration -->
  <style>
    :root {
      --primary-color: #8B5CF6;
      --secondary-color: #FF6B6B;
      --text-color: #1A1A1A;
      --background-color: #F8FFFE;
    }
    

    .security-option {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem 0;
      border-bottom: 1px solid #E5E7EB;
    }
    .security-option:last-child {
      border-bottom: none;
    }
    .security-option-info h3 {
      color: #1F2937;
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    .security-option-info p {
      color: #6B7280;
      font-size: 0.9rem;
      max-width: 500px;
    }
    .security-option-actions {
      display: flex;
      gap: 1rem;
      align-items: center;
    }
    .security-status {
      font-size: 0.8rem;
      font-weight: 500;
      padding: 0.3rem 0.8rem;
      border-radius: 12px;
    }
    .security-status.enabled {
      background: #DCFCE7;
      color: #166534;
    }
    .security-status.disabled {
      background: #FEF3C7;
      color: #92400E;
    }
    .security-button {
      background: #8B5CF6;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .security-button:hover {
      background: #7C3AED;
      transform: translateY(-1px);
    }
    .security-button.danger {
      background: #EF4444;
    }
    .security-button.danger:hover {
      background: #DC2626;
    }
    
    /* Change password form styles */
    #change-password-form {
      display: none;
      margin-top: 1rem;
      padding: 1rem;
      background: #F9FAFB;
      border-radius: 8px;
    }
    .password-form-group {
      margin-bottom: 1rem;
    }
    .password-form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: #374151;
      font-size: 0.9rem;
    }
    .password-form-group input {
      width: 100%;
      padding: 0.5rem;
      border: 1px solid #D1D5DB;
      border-radius: 4px;
      font-size: 0.9rem;
    }
    .password-form-actions {
      display: flex;
      justify-content: flex-end;
      gap: 1rem;
      margin-top: 1.5rem;
    }
    .password-form-actions button {
      padding: 0.5rem 1rem;
      border-radius: 4px;
      font-weight: 500;
      cursor: pointer;
    }
    .password-form-actions .cancel-btn {
      background: #F3F4F6;
      color: #374151;
      border: 1px solid #D1D5DB;
    }
    .password-form-actions .save-btn {
      background: #8B5CF6;
      color: white;
      border: none;
    }
    .password-strength, .password-match {
      font-size: 0.8rem;
      margin-top: 0.3rem;
    }
    .password-strength.weak {
      color: #DC2626;
    }
    .password-strength.medium {
      color: #D97706;
    }
    .password-strength.strong {
      color: #059669;
    }
    .password-match.match {
      color: #059669;
    }
    .password-match.no-match {
      color: #DC2626;
    }
    .success-message {
      padding: 0.5rem 1rem;
      background: #DCFCE7;
      color: #166534;
      border-radius: 4px;
      margin: 1rem 0;
      display: none;
    }
    .error-message {
      padding: 0.5rem 1rem;
      background: #FEE2E2;
      color: #991B1B;
      border-radius: 4px;
      margin: 1rem 0;
      display: none;
    }
    
    /* Offline indicator styles */
    .offline-mode:before {
      content: "üîÑ You're currently offline. Your changes will be saved locally and synced when connection is restored.";
      display: block;
      padding: 10px;
      background-color: #FEF6E4;
      color: #775E32;
      text-align: center;
      font-size: 14px;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 9999;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Inter', sans-serif; background: var(--background-color); color: var(--text-color); line-height: 1.6; }
    
    /* Header */
    header { 
      background: linear-gradient(135deg, var(--primary-color) 0%, #7C3AED 100%);
      position: sticky; 
      top: 0; 
      z-index: 100;
    }
    .header-content { 
      padding: 1rem 2rem; 
      max-width: 1400px; 
      margin: 0 auto;
    }
    .header-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }
    .header-controls {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .logo { 
      display: flex; 
      align-items: center; 
      font-size: 1.8rem; 
      font-weight: 700; 
      color: white;
      gap: 0px;
    }
    .logo .host { color: white; }
    .logo .all { color: var(--secondary-color); }
    .main-nav { 
      display: flex; 
      gap: 2rem; 
      justify-content: center;
      flex-wrap: wrap;
    }
    .main-nav a { 
      text-decoration: none; 
      color: rgba(255, 255, 255, 0.9); 
      font-weight: 500; 
      cursor: pointer; 
      transition: all 0.3s ease;
      position: relative;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      z-index: 10;
      pointer-events: auto;
    }
    .main-nav a:hover, .main-nav a.active { 
      color: white; 
      background: rgba(255, 255, 255, 0.1);
    }
    .main-nav a:after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: 0;
      left: 50%;
      background-color: var(--secondary-color);
      transition: all 0.3s ease;
    }
    .main-nav a:hover:after, .main-nav a.active:after {
      width: 100%;
      left: 0;
    }

    /* Corner Night Mode Toggle */
    .corner-night-mode-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, #1F2937, #374151);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
      z-index: 1001;
      backdrop-filter: blur(10px);
    }
    
    /* Mobile hamburger button below night mode toggle */
    .hamburger-below-night-mode {
      position: fixed;
      top: 80px; /* Position below night mode toggle */
      right: 20px;
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, #8B5CF6, #7C3AED);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      display: none; /* Hidden by default, shown in mobile */
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      z-index: 1001;
    }

    .corner-night-mode-toggle:hover {
      transform: scale(1.1) rotate(15deg);
      box-shadow: 0 6px 25px rgba(0, 0, 0, 0.4);
      background: linear-gradient(135deg, #374151, #4B5563);
    }

    .corner-night-mode-toggle .day-icon {
      display: none;
    }

    body.night-mode .corner-night-mode-toggle {
      background: linear-gradient(135deg, #F59E0B, #D97706);
      border-color: rgba(255, 255, 255, 0.2);
    }

    body.night-mode .corner-night-mode-toggle:hover {
      background: linear-gradient(135deg, #D97706, #B45309);
    }

    body.night-mode .corner-night-mode-toggle .night-icon {
      display: none;
    }

    body.night-mode .corner-night-mode-toggle .day-icon {
      display: block;
    }

    /* Mobile Menu Line & Toggle */
    .mobile-menu-line {
      display: none; /* Hidden by default, shown only on mobile */
      padding: 10px 0;
      margin-top: 10px;
    }
    
    .mobile-menu-toggle {
      background: none;
      border: none;
      display: flex;
      flex-direction: column;
      justify-content: space-around;
      width: 30px;
      height: 30px;
      cursor: pointer;
    }
    
    .mobile-menu-toggle span {
      display: block;
      height: 3px;
      width: 100%;
      background: white;
      border-radius: 3px;
      transition: 0.3s;
    }
    
    .mobile-menu-toggle.active span:nth-child(1) {
      transform: rotate(-45deg) translate(-5px, 6px);
    }
    
    .mobile-menu-toggle.active span:nth-child(2) {
      opacity: 0;
    }
    
    .mobile-menu-toggle.active span:nth-child(3) {
      transform: rotate(45deg) translate(-5px, -6px);
    }

    /* Mobile Side Panel */
    .mobile-side-panel {
      position: fixed;
      top: 0;
      left: -300px;
      width: 300px;
      height: 100vh;
      background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%);
      z-index: 1000;
      transition: left 0.3s ease;
      overflow-y: auto;
    }
    .mobile-side-panel.open {
      left: 0;
    }
    .side-panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    }
    .side-panel-header h2 {
      color: white;
      margin: 0;
      font-size: 1.5rem;
    }
    .close-panel {
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .close-panel:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    /* Filter Management Styles */
    .filters-management {
      background: #F8FAFC;
      padding: 2rem;
      border-radius: 12px;
      margin-top: 1rem;
    }

    .filter-category {
      margin-bottom: 2rem;
      background: white;
      padding: 1.5rem;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    .filter-category h4 {
      color: #374151;
      margin-bottom: 1rem;
      font-size: 1.1rem;
    }

    .filter-items {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .filter-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: #F9FAFB;
      padding: 0.5rem;
      border-radius: 6px;
    }

    .filter-item input {
      flex: 1;
      padding: 0.5rem;
      border: 1px solid #D1D5DB;
      border-radius: 4px;
      font-size: 0.9rem;
    }

    .remove-btn {
      background: #EF4444;
      color: white;
      border: none;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .remove-btn:hover {
      background: #DC2626;
    }

    .add-filter-btn {
      background: #8B5CF6;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: background 0.2s;
    }

    .add-filter-btn:hover {
      background: #7C3AED;
    }

    .save-filters-section {
      background: #EBF8FF;
      padding: 1.5rem;
      border-radius: 8px;
      text-align: center;
      border: 1px solid #BFDBFE;
    }

    .save-btn {
      background: #10B981;
      color: white;
      border: none;
      padding: 0.75rem 2rem;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: background 0.2s;
    }

    .save-btn:hover {
      background: #059669;
    }

    .save-status {
      margin-top: 1rem;
      font-size: 0.9rem;
      color: #374151;
    }

    /* Image Management Styles */
    .image-upload-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
      padding: 1rem;
      border: 2px dashed #E5E7EB;
      border-radius: 8px;
      margin-bottom: 1rem;
    }

    .current-image {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100px;
    }

    .current-image img {
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .upload-btn {
      background: #8B5CF6;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: background 0.2s;
    }

    .upload-btn:hover {
      background: #7C3AED;
    }

    .about-images-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
    }

    .image-upload-section label {
      font-weight: 600;
      color: #374151;
      margin-bottom: 0.5rem;
    }
    .side-panel-nav {
      padding: 1rem;
    }
    .side-panel-nav a {
      display: block;
      color: rgba(255, 255, 255, 0.9);
      text-decoration: none;
      padding: 1rem;
      margin: 0.5rem 0;
      border-radius: 8px;
      transition: all 0.3s ease;
      cursor: pointer;
      z-index: 1000;
      pointer-events: auto;
    }
    .side-panel-nav a:hover, .side-panel-nav a.active {
      background: rgba(255, 255, 255, 0.2);
      color: white;
    }
    .side-panel-controls {
      margin-top: 2rem;
      padding-top: 2rem;
      border-top: 1px solid rgba(255, 255, 255, 0.2);
    }
    .night-mode-side {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      padding: 1rem;
      border-radius: 8px;
      width: 100%;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .night-mode-side:hover {
      background: rgba(255, 255, 255, 0.3);
    }
    .night-mode-side .day-icon {
      display: none;
    }
    body.night-mode .night-mode-side .night-icon {
      display: none;
    }
    body.night-mode .night-mode-side .day-icon {
      display: block;
    }
    .mobile-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 999;
      display: none;
    }
    .mobile-overlay.show {
      display: block;
    }


    /* Back to Top Button */
    .back-to-top {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: linear-gradient(135deg, #8B5CF6, #7C3AED);
      color: white;
      border: none;
      width: 45px;
      height: 45px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.2rem;
      box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .back-to-top.visible {
      opacity: 1;
      visibility: visible;
    }
    
    .back-to-top:hover {
      background: linear-gradient(135deg, #7C3AED, #6B46C1);
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(139, 92, 246, 0.4);
    }

    /* Student Testimonials */
    .testimonials-section {
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      padding: 2rem 2rem;
      margin: 2rem 0;
      display: none; /* Hidden by default */
    }
    
    .testimonials-section.visible {
      display: block;
    }
    
    .testimonial-carousel {
      max-width: 800px;
      margin: 0 auto;
      text-align: center;
      position: relative;
      min-height: 100px;
    }
    
    .testimonial-item {
      opacity: 0;
      visibility: hidden;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      transition: all 0.5s ease;
      padding: 1rem;
    }
    
    .testimonial-item.active {
      opacity: 1;
      visibility: visible;
      position: relative;
    }
    
    .testimonial-quote {
      font-size: 1rem;
      font-style: italic;
      color: #4A5568;
      margin-bottom: 0.8rem;
      line-height: 1.5;
    }
    
    .testimonial-author {
      font-weight: 600;
      color: #8B5CF6;
      font-size: 1rem;
    }
    
    .testimonial-indicators {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    
    .indicator {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #CBD5E0;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .indicator.active {
      background: #8B5CF6;
      transform: scale(1.2);
    }




      display: flex;
      align-items: center;
      gap: 0.25rem;
    }

    /* Toggle Switch Styles */
    .switch input:checked + span {
      background-color: #8B5CF6 !important;
    }
    
    .switch input:checked + span span {
      transform: translateX(26px) !important;
    }

    /* Sections */
    /* All sections are hidden by default, and shown through JS */
    /* The active class is used for styling purposes */
    
    /* Hero Section */
    .hero { 
      background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 50%, #6366F1 100%);
      color: white;
      padding: 0;
      min-height: 70vh;
      display: flex;
      align-items: center;
      position: relative;
      overflow: hidden;
    }
    .hero-container {
      max-width: 1400px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 4rem;
      align-items: center;
      padding: 4rem 2rem;
      position: relative;
      z-index: 2;
    }
    .hero-content {
      padding-right: 2rem;
    }
    .hero h1 { 
      font-size: 3.5rem; 
      font-weight: 700; 
      margin-bottom: 1.5rem;
      line-height: 1.1;
    }
    .hero-subtitle {
      font-size: 1.2rem;
      margin-bottom: 2rem;
      opacity: 0.95;
      line-height: 1.6;
    }
    .hero-tagline {
      font-style: italic;
      font-size: 1.1rem;
      opacity: 0.8;
      margin-bottom: 3rem;
    }
    .hero-image {
      position: relative;
      height: 500px;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    }
    .hero-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
    }
    .search-container {
      background: white;
      border-radius: 15px;
      padding: 1.5rem;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      display: flex;
      gap: 1rem;
      align-items: center;
      flex-wrap: wrap;
      margin-top: 2rem;
    }
    .search-input {
      flex: 1;
      min-width: 200px;
      padding: 0.8rem;
      border: 2px solid #E2E8F0;
      border-radius: 8px;
      font-size: 1rem;
      outline: none;
      transition: border-color 0.3s ease;
      color: #1A1A1A;
    }
    .search-input:focus { border-color: #8B5CF6; }
    .search-btn {
      background: #8B5CF6;
      color: white;
      border: none;
      padding: 0.8rem 2rem;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    .search-btn:hover { background: #7C3AED; }

    /* Decorative Elements */
    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="40" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="40" cy="80" r="1.5" fill="rgba(255,255,255,0.1)"/></svg>');
      opacity: 0.5;
    }

    /* Stats Section */
    .stats {
      background: #fff;
      padding: 4rem 2rem;
      text-align: center;
      position: relative;
      margin-top: -50px;
      z-index: 3;
    }
    .stats-container {
      max-width: 1000px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      padding: 2rem;
      box-shadow: 0 10px 40px rgba(0,0,0,0.1);
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 2rem;
    }
    .stat-item {
      padding: 1.5rem;
    }
    .stat-number {
      font-size: 2.5rem;
      font-weight: 700;
      color: #8B5CF6;
      margin-bottom: 0.5rem;
    }
    .stat-label {
      color: #4A5568;
      font-weight: 500;
    }

    /* Content Sections */
    .content-section {
      padding: 4rem 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    /* Filters */
    .filters {
      background: #fff;
      padding: 0.8rem;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      margin-bottom: 1.5rem;
      display: flex;
      gap: 0.6rem;
      flex-wrap: wrap;
      align-items: center;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }
    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 0.2rem;
    }
    .filter-group label {
      font-weight: 500;
      color: #4A5568;
      font-size: 0.7rem;
    }
    .filter-select {
      padding: 0.4rem;
      border: 1px solid #E2E8F0;
      border-radius: 4px;
      background: white;
      min-width: 90px;
      font-size: 0.75rem;
    }

    /* Hostel Grid */
    .hostel-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 2rem;
    }
    
    /* Featured Header */
    .featured-header {
      text-align: left;
      margin-bottom: 3rem;
      padding-left: 2rem;
    }
    .featured-header h2 {
      font-size: 2.5rem;
      font-weight: 700;
      color: #2D3748;
      margin-bottom: 0.5rem;
    }
    .featured-underline {
      width: 60px;
      height: 4px;
      background: linear-gradient(90deg, #FF6B9D, #FF8E8E);
      border-radius: 2px;
    }

    /* Enhanced Hostel Cards */
    .hostel-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 2rem;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
    }
    .hostel-card {
      background: #fff;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 6px 24px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      max-width: 350px;
      margin: 0 auto;
    }
    .hostel-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.12);
    }
    .hostel-image-container {
      position: relative;
      height: 180px;
      overflow: hidden;
    }
    .hostel-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s ease;
    }
    .hostel-card:hover .hostel-image {
      transform: scale(1.03);
    }
    .hostel-gender-badge {
      position: absolute;
      top: 15px;
      right: 15px;
      padding: 0.4rem 1rem;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 600;
      color: white;
      background: #6C5CE7;
    }
    .hostel-gender-badge.male {
      background: #6C5CE7;
    }
    .hostel-gender-badge.female {
      background: #6C5CE7;
    }

    .hostel-content {
      padding: 1.5rem;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
    }
    .hostel-name {
      font-size: 1.3rem;
      font-weight: 700;
      color: #6C5CE7;
      margin-bottom: 0.5rem;
      line-height: 1.3;
    }
    .hostel-ratings {
      margin-bottom: 0.5rem;
    }
    .hostel-location-only {
      color: #6B7280;
      line-height: 1.4;
      margin-bottom: 1.2rem;
      font-size: 1rem;
      font-weight: 500;
    }
    .view-details-btn {
      background: #6C5CE7;
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 10px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-block;
      text-align: center;
      margin-top: 0.5rem;
    }
    }
    .view-details-btn:hover {
      background: linear-gradient(135deg, #553C9A 0%, #7C3AED 100%);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(107, 70, 193, 0.4);
    }
    .hostel-details {
      color: #4A5568;
      margin-bottom: 1rem;
      line-height: 1.5;
    }
    .hostel-actions {
      display: flex;
      gap: 0.5rem;
    }
    .btn-primary {
      background: #8B5CF6;
      color: white;
      border: none;
      padding: 0.6rem 1rem;
      border-radius: 6px;
      font-weight: 500;
      cursor: pointer;
      transition: background 0.3s ease;
      flex: 1;
    }
    .btn-primary:hover { background: #7C3AED; }
    .btn-secondary {
      background: transparent;
      color: #8B5CF6;
      border: 1px solid #8B5CF6;
      padding: 0.6rem 1rem;
      border-radius: 6px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .btn-secondary:hover {
      background: #8B5CF6;
      color: white;
    }

    /* Why HOSTALL Section */
    .why-hostall {
      background: linear-gradient(135deg, #8B5CF6 0%, #A855F7 50%, #C084FC 100%);
      padding: 2rem 1.5rem;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    .why-hostall::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" fill="white" opacity="0.1"><polygon points="0,0 1000,0 1000,100 0,80"/></svg>');
      background-size: cover;
    }
    .why-content {
      max-width: 1200px;
      margin: 0 auto;
      position: relative;
      z-index: 2;
    }
    .section-header {
      margin-bottom: 2.5rem;
    }
    .section-header h2 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 0.8rem;
      color: white;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .section-subtitle {
      font-size: 1.1rem;
      color: rgba(255,255,255,0.9);
      max-width: 500px;
      margin: 0 auto;
      line-height: 1.5;
    }
    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 0.8rem;
      margin-bottom: 1rem;
    }
    .feature-card {
      background: rgba(255,255,255,0.95);
      backdrop-filter: blur(10px);
      padding: 0.8rem;
      border-radius: 10px;
      box-shadow: 0 3px 12px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
      border: 1px solid rgba(255,255,255,0.2);
      text-align: left;
    }
    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 32px rgba(0,0,0,0.12);
      background: white;
    }
    .feature-icon-wrapper {
      background: linear-gradient(135deg, #8B5CF6, #A855F7);
      width: 55px;
      height: 55px;
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 1rem;
      box-shadow: 0 3px 15px rgba(139, 92, 246, 0.25);
    }
    .feature-icon {
      font-size: 1.6rem;
      filter: brightness(0) invert(1);
    }
    .feature-content h3 {
      font-size: 1.2rem;
      font-weight: 700;
      margin-bottom: 0.8rem;
      color: #1A1A1A;
    }
    .feature-content p {
      color: #4A5568;
      line-height: 1.5;
      margin-bottom: 0.8rem;
      font-size: 0.95rem;
    }
    .feature-highlight {
      display: inline-block;
      background: linear-gradient(135deg, #8B5CF6, #A855F7);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 25px;
      font-size: 0.85rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .why-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }
    .why-stats .stat-item {
      background: rgba(255,255,255,0.15);
      backdrop-filter: blur(10px);
      padding: 1.5rem;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.2);
    }
    .why-stats .stat-number {
      font-size: 2rem;
      font-weight: 700;
      color: white;
      margin-bottom: 0.4rem;
    }
    .why-stats .stat-label {
      color: rgba(255,255,255,0.9);
      font-weight: 500;
      font-size: 0.9rem;
    }

    /* Form Styles */
    .form-container {
      background: white;
      padding: 2rem;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      max-width: 500px;
      margin: 0 auto;
    }
    .form-group {
      margin-bottom: 1.5rem;
    }
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: #4A5568;
    }
    input, select, textarea {
      width: 100%;
      padding: 0.8rem;
      border: 1px solid #E2E8F0;
      border-radius: 8px;
      font-size: 1rem;
      transition: border-color 0.3s ease;
    }
    input:focus, select:focus, textarea:focus {
      border-color: #8B5CF6;
      outline: none;
    }
    button {
      background: #8B5CF6;
      color: white;
      border: none;
      padding: 0.8rem 2rem;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    button:hover { background: #7C3AED; }

    /* About Section Styles */
    .about-hero {
      text-align: center;
      padding: 4rem 0;
      background: linear-gradient(135deg, #F8FAFC 0%, #E2E8F0 100%);
      border-radius: 20px;
      margin-bottom: 4rem;
    }

    .about-main-title {
      font-size: 3.5rem;
      font-weight: 700;
      color: #1A202C;
      margin-bottom: 1rem;
      background: linear-gradient(135deg, #8B5CF6, #A855F7);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .about-subtitle {
      font-size: 1.3rem;
      color: #6B7280;
      margin-bottom: 2rem;
      font-weight: 500;
    }

    .about-intro-text {
      max-width: 800px;
      margin: 0 auto;
    }

    .about-intro-text p {
      font-size: 1.1rem;
      color: #4A5568;
      line-height: 1.8;
      font-weight: 400;
    }

    .about-content-grid {
      display: flex;
      flex-direction: column;
      gap: 4rem;
    }

    .about-content-block {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
      align-items: center;
      padding: 2rem 0;
    }

    .about-content-block.reverse {
      direction: rtl;
    }

    .about-content-block.reverse > * {
      direction: ltr;
    }

    .about-image-container {
      position: relative;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease;
    }

    .about-image-container:hover {
      transform: translateY(-8px);
    }

    .about-image {
      width: 100%;
      height: 320px;
      object-fit: cover;
      transition: transform 0.3s ease;
    }

    .about-image-overlay {
      position: absolute;
      top: 1rem;
      right: 1rem;
    }

    .about-image-badge {
      background: rgba(139, 92, 246, 0.9);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 600;
      backdrop-filter: blur(10px);
    }

    .about-text-content {
      padding: 1rem 0;
    }

    .about-section-title {
      font-size: 2.2rem;
      font-weight: 700;
      color: #1A202C;
      margin-bottom: 1.5rem;
      position: relative;
    }

    .about-section-title::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: -8px;
      width: 60px;
      height: 4px;
      background: linear-gradient(135deg, #8B5CF6, #A855F7);
      border-radius: 2px;
    }

    .about-description {
      font-size: 1.1rem;
      color: #4A5568;
      line-height: 1.8;
      margin-bottom: 1.5rem;
      font-weight: 400;
    }

    .about-mission-points {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-top: 2rem;
    }

    .mission-point {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem;
      background: #F8FAFC;
      border-radius: 12px;
      border-left: 4px solid #8B5CF6;
    }

    .mission-icon {
      font-size: 1.5rem;
      flex-shrink: 0;
    }

    .about-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 2rem;
      margin-top: 2rem;
    }

    .stat-item {
      text-align: center;
      padding: 1.5rem;
      background: linear-gradient(135deg, #8B5CF6, #A855F7);
      border-radius: 16px;
      color: white;
    }

    .stat-number {
      display: block;
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    .stat-label {
      font-size: 0.9rem;
      opacity: 0.9;
    }

    .about-cta {
      text-align: center;
      padding: 4rem 2rem;
      background: linear-gradient(135deg, #8B5CF6, #A855F7);
      border-radius: 20px;
      color: white;
      margin-top: 4rem;
    }

    .about-cta-title {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 1rem;
    }

    .about-cta-text {
      font-size: 1.2rem;
      margin-bottom: 2rem;
      opacity: 0.9;
    }

    .about-cta-button {
      background: white;
      color: #8B5CF6;
      padding: 1rem 2.5rem;
      border: none;
      border-radius: 50px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
    }

    .about-cta-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.15);
    }

    /* Responsive Design for About Section */
    @media (max-width: 768px) {
      .about-main-title {
        font-size: 2.5rem;
      }

      .about-content-block {
        grid-template-columns: 1fr;
        gap: 2rem;
        text-align: center;
      }

      .about-content-block.reverse {
        direction: ltr;
      }

      .about-stats {
        grid-template-columns: 1fr;
        gap: 1rem;
      }

      .about-mission-points {
        gap: 0.8rem;
      }

      .mission-point {
        padding: 0.8rem;
      }

      .about-cta-title {
        font-size: 2rem;
      }
    }

    /* Contact */
    .contact-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }
    .contact-item {
      background: white;
      padding: 2rem;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      text-align: center;
    }
    .contact-item h3 {
      color: #8B5CF6;
      margin-bottom: 1rem;
    }
    .contact-item a {
      color: #4A5568;
      text-decoration: none;
      font-weight: 500;
    }
    .contact-item a:hover {
      color: #8B5CF6;
    }




    .chat-welcome {
      text-align: center;
      margin-bottom: 1.5rem;
    }

    .chat-welcome p {
      margin: 0.5rem 0;
    }

    .chat-options {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }

    .chat-option-btn {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem;
      border: 2px solid #E5E7EB;
      border-radius: 12px;
      background: white;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: left;
      font-size: 0.95rem;
    }

    .chat-option-btn:hover {
      border-color: #10B981;
      background: #F0FDF4;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.15);
    }

    .chat-option-btn.whatsapp:hover {
      border-color: #25D366;
      background: #F0FDF4;
    }

    .chat-option-btn.email:hover {
      border-color: #3B82F6;
      background: #EFF6FF;
    }

    .chat-icon {
      font-size: 1.5rem;
      flex-shrink: 0;
    }
    .chat-option {
      padding: 0.8rem;
      border: 2px solid #E2E8F0;
      border-radius: 8px;
      background: white;
      cursor: pointer;
      text-align: center;
      transition: all 0.3s ease;
      font-size: 0.9rem;
      font-weight: 500;
    }
    .chat-option:hover {
      border-color: #8B5CF6;
      background: #F7FAFC;
    }
    .chat-option.active {
      border-color: #8B5CF6;
      background: #8B5CF6;
      color: white;
    }

    .chat-messages {
      max-height: 200px;
      overflow-y: auto;
      margin-bottom: 1rem;
      padding: 0.5rem;
      background: #F7FAFC;
      border-radius: 8px;
    }
    .chat-message {
      background: white;
      padding: 0.8rem;
      border-radius: 8px;
      margin-bottom: 0.5rem;
      border-left: 3px solid #8B5CF6;
    }
    .chat-message-info {
      font-size: 0.8rem;
      color: #4A5568;
      margin-bottom: 0.5rem;
    }
    .chat-input-group {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
    .chat-input {
      flex: 1;
      padding: 0.8rem;
      border: 1px solid #E2E8F0;
      border-radius: 8px;
      outline: none;
      font-size: 0.9rem;
    }
    .chat-send {
      background: #8B5CF6;
      color: white;
      border: none;
      padding: 0.8rem 1rem;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
    }
    .chat-send:hover {
      background: #7C3AED;
    }

    /* Admin Chat Styles */
    .chat-filters {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 2rem;
    }
    .chat-filter {
      padding: 0.8rem 1.5rem;
      background: #F7FAFC;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      color: #4A5568;
      transition: all 0.3s ease;
    }
    .chat-filter.active {
      background: #8B5CF6;
      color: white;
    }
    .admin-chat-messages {
      background: #F7FAFC;
      border-radius: 10px;
      padding: 1.5rem;
      min-height: 400px;
    }
    .admin-chat-item {
      background: white;
      padding: 1.5rem;
      border-radius: 10px;
      margin-bottom: 1rem;
      border-left: 4px solid #8B5CF6;
    }
    .admin-chat-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }
    .admin-chat-user {
      font-weight: 600;
      color: #2D3748;
    }
    .admin-chat-time {
      font-size: 0.8rem;
      color: #4A5568;
    }
    .admin-chat-message {
      color: #4A5568;
      margin-bottom: 1rem;
      line-height: 1.5;
    }
    .admin-chat-actions {
      display: flex;
      gap: 0.5rem;
    }
    .admin-chat-reply {
      background: #8B5CF6;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.8rem;
    }
    .admin-chat-mark {
      background: #22C55E;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.8rem;
    }
    .admin-chat-whatsapp {
      background: #25D366;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.8rem;
    }
    
    /* Auto Response Styles */
    .auto-response {
      background: #E8F5E8;
      border: 1px solid #C6F6D5;
      border-radius: 8px;
      padding: 0.8rem;
      margin: 0.5rem 0;
      font-size: 0.9rem;
      color: #22543D;
    }
    .quick-responses {
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid #E2E8F0;
    }
    .quick-response-btn {
      background: #F7FAFC;
      border: 1px solid #E2E8F0;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      margin: 0.3rem;
      font-size: 0.8rem;
      transition: all 0.3s ease;
    }
    .quick-response-btn:hover {
      background: #8B5CF6;
      color: white;
      border-color: #8B5CF6;
    }
    .typing-indicator {
      background: #F7FAFC;
      padding: 0.8rem;
      border-radius: 8px;
      margin: 0.5rem 0;
      font-style: italic;
      color: #4A5568;
      animation: fadeInOut 2s infinite;
    }
    @keyframes fadeInOut {
      0%, 100% { opacity: 0.5; }
      50% { opacity: 1; }
    }

    /* Mobile Bottom Navigation */
    .mobile-bottom-nav {
      display: none;
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: white;
      border-top: 1px solid #E5E7EB;
      padding: 0.5rem 0;
      z-index: 999;
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
    }

    .mobile-bottom-nav-content {
      display: flex;
      justify-content: space-around;
      align-items: center;
      max-width: 600px;
      margin: 0 auto;
    }

    .mobile-nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 0.5rem 0.3rem;
      color: #6B7280;
      text-decoration: none;
      font-size: 0.7rem;
      min-width: 60px;
      transition: all 0.3s ease;
      border-radius: 8px;
      cursor: pointer;
      z-index: 1000;
      pointer-events: auto;
    }

    .mobile-nav-item.active {
      color: #8B5CF6;
      background: rgba(139, 92, 246, 0.1);
    }

    .mobile-nav-item:hover {
      color: #8B5CF6;
      background: rgba(139, 92, 246, 0.05);
    }

    .mobile-nav-icon {
      font-size: 1.4rem;
      margin-bottom: 0.2rem;
    }

    .mobile-nav-label {
      font-weight: 500;
      line-height: 1;
    }

    /* Add padding to body when mobile nav is visible */
    body.mobile-nav-visible {
      padding-bottom: 70px;
    }

    /* Night mode for mobile nav */
    body.night-mode .mobile-bottom-nav {
      background: #1A1A2E;
      border-top-color: #2A2A3E;
    }

    body.night-mode .mobile-nav-item {
      color: #9CA3AF;
    }

    body.night-mode .mobile-nav-item.active {
      color: #A855F7;
      background: rgba(168, 85, 247, 0.2);
    }

    body.night-mode .mobile-nav-item:hover {
      color: #A855F7;
      background: rgba(168, 85, 247, 0.1);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .header-content { padding: 1rem; }
      .main-nav {
        display: none;
      }
      .desktop-only {
        display: none;
      }
      .hamburger-below-night-mode {
        display: flex; /* Show hamburger below night mode on mobile */
      }
      .mobile-bottom-nav {
        display: block;
      }
      body {
        padding-bottom: 70px;
      }
      
      /* Adjust floating chat button position on mobile */
      .floating-chat-btn {
        bottom: 85px !important;
      }
      .hero-container { 
        grid-template-columns: 1fr; 
        gap: 2rem; 
        text-align: center;
      }
      .hero h1 { font-size: 2.5rem; }
      .hero-content { padding-right: 0; }
      .hero-image { height: 300px; }
      .search-container { flex-direction: column; }
      .filters { 
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        padding: 0.3rem !important;
        gap: 0.3rem !important;
      }
      
      .filter-group {
        margin-bottom: 0 !important;
        width: calc(50% - 5px) !important; /* Two columns with small gap */
        flex-shrink: 0;
      }
      
      .filter-group label {
        font-size: 0.65rem !important;
        margin-bottom: 0 !important;
        white-space: nowrap;
      }
      
      .filter-select {
        padding: 0.25rem !important;
        font-size: 0.7rem !important;
        height: 24px !important;
      }
      
      /* Clear filters button */
      .filters .btn-secondary {
        font-size: 0.65rem !important;
        padding: 0.25rem 0.5rem !important;
        margin-top: 0.2rem !important;
        height: 24px !important;
      }
      .hostel-grid { grid-template-columns: 1fr; }

    }

    .toggle-pass {
      cursor: pointer;
      font-size: 0.9rem;
      color: #8B5CF6;
      margin-left: 0.5rem;
    }

    /* Analytics Overview Styles */
    .analytics-overview {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
      padding: 0 1rem;
    }
    .analytics-card {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 4px 16px rgba(0,0,0,0.08);
      display: flex;
      align-items: center;
      gap: 1rem;
      transition: all 0.3s ease;
      border: 1px solid #E2E8F0;
    }
    .analytics-card:hover {
      box-shadow: 0 6px 24px rgba(0,0,0,0.12);
      transform: translateY(-2px);
    }
    .analytics-icon {
      font-size: 2rem;
      background: linear-gradient(135deg, #8B5CF6, #A855F7);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      min-width: 48px;
    }
    .analytics-content {
      flex: 1;
    }
    .analytics-number {
      font-size: 1.8rem;
      font-weight: 700;
      color: #1A1A1A;
      margin-bottom: 0.2rem;
    }
    .analytics-label {
      color: #6B7280;
      font-size: 0.9rem;
      font-weight: 500;
    }

    /* Admin Dashboard Styles */
    .admin-header {
      background: white;
      padding: 2rem;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      margin-bottom: 2rem;
    }
    .admin-header h2 {
      color: #2D3748;
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      position: relative;
    }
    .admin-header h2::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 0;
      width: 60px;
      height: 4px;
      background: linear-gradient(90deg, #FF6B6B, #8B5CF6);
      border-radius: 2px;
    }
    
    /* Admin Navigation Tabs */
    .admin-nav {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      padding: 1rem;
      background: white;
      border-radius: 15px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    .admin-nav-item {
      padding: 0.8rem 1.5rem;
      background: #F7FAFC;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      color: #4A5568;
      transition: all 0.3s ease;
      min-width: 80px;
      text-align: center;
    }
    .admin-nav-item:hover {
      background: #E2E8F0;
      color: #2D3748;
    }
    .admin-nav-item.active {
      background: #8B5CF6;
      color: white;
    }
    
    /* Admin Content Sections */
    .admin-content {
      background: white;
      padding: 2rem;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }
    .admin-section {
      display: none;
    }
    .admin-section.active {
      display: block;
    }
    .admin-section h3 {
      color: #2D3748;
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
      font-weight: 600;
    }
    
    /* Content Management Styles */
    .content-editor {
      margin-bottom: 2rem;
    }
    .content-selector {
      margin-bottom: 1.5rem;
    }
    .content-selector label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: #2D3748;
    }
    .content-selector select {
      width: 100%;
      padding: 0.8rem;
      border: 2px solid #E2E8F0;
      border-radius: 8px;
      font-size: 1rem;
      background: white;
    }
    .editor-field {
      margin-bottom: 1rem;
    }
    .editor-field label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: #4A5568;
    }
    .editor-field input,
    .editor-field textarea {
      width: 100%;
      padding: 0.8rem;
      border: 1px solid #E2E8F0;
      border-radius: 6px;
      font-size: 0.9rem;
    }
    .editor-field textarea {
      min-height: 100px;
      resize: vertical;
    }
    
    /* Grid layouts for different sections */
    .admin-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-top: 1.5rem;
    }
    .admin-card {
      background: #F7FAFC;
      padding: 1.5rem;
      border-radius: 10px;
      border: 1px solid #E2E8F0;
    }
    .admin-card h4 {
      color: #2D3748;
      margin-bottom: 1rem;
      font-weight: 600;
    }
    
    /* Form styles in admin */
    .admin-form {
      display: grid;
      gap: 1rem;
      margin-top: 1rem;
    }
    .admin-form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }
    .admin-form-section {
      margin-bottom: 2rem;
      padding-bottom: 2rem;
      border-bottom: 1px solid #E2E8F0;
    }
    .admin-form-section:last-child {
      border-bottom: none;
    }
    .admin-form-section h4 {
      color: #2D3748;
      margin-bottom: 1rem;
      font-size: 1.1rem;
      font-weight: 600;
    }
    
    /* Image management */
    .image-gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }
    .image-item {
      position: relative;
      aspect-ratio: 1;
      background: #F7FAFC;
      border-radius: 8px;
      overflow: hidden;
      border: 2px dashed #E2E8F0;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: border-color 0.3s ease;
    }
    .image-item:hover {
      border-color: #8B5CF6;
    }
    .image-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    /* Responsive admin */
    @media (max-width: 768px) {
      .admin-nav {
        flex-direction: column;
      }
      .admin-nav-item {
        text-align: left;
      }
      .admin-form-row {
        grid-template-columns: 1fr;
      }
    }

    /* Footer */
    footer {
      background: linear-gradient(135deg, #2D3748 0%, #1A202C 100%);
      color: white;
      padding: 3rem 2rem 1rem 2rem;
      margin-top: 4rem;
    }
    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 2fr 1fr 1.5fr;
      gap: 3rem;
      margin-bottom: 2rem;
    }
    .footer-section h3 {
      color: #8B5CF6;
      font-size: 1.2rem;
      margin-bottom: 1rem;
      font-weight: 600;
    }
    .footer-about p {
      color: rgba(255, 255, 255, 0.8);
      line-height: 1.6;
      margin-bottom: 1.5rem;
    }
    .footer-contact {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }
    .footer-contact-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: rgba(255, 255, 255, 0.8);
      font-size: 0.9rem;
    }
    .footer-social {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
    }
    .social-icon {
      width: 40px;
      height: 40px;
      background: #8B5CF6;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      text-decoration: none;
      transition: transform 0.3s ease, background 0.3s ease;
    }
    .social-icon:hover {
      transform: translateY(-2px);
      background: #7C3AED;
    }
    .social-icon.facebook:hover {
      background: #1877F2;
    }
    .social-icon.instagram:hover {
      background: linear-gradient(45deg, #F58529, #DD2A7B, #8134AF, #515BD4);
    }
    .social-icon.tiktok:hover {
      background: #000000;
    }
    .social-icon.whatsapp:hover {
      background: #25D366;
    }
    .social-link {
      color: #4A5568;
      text-decoration: none;
      display: flex;
      align-items: center;
      padding: 0.3rem 0;
      transition: color 0.3s ease;
    }
    .social-link:hover {
      color: #8B5CF6;
    }

    /* Analytics & Backup Styles */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin: 1rem 0;
    }
    .stat-card {
      background: linear-gradient(135deg, #8B5CF6, #7C3AED);
      color: white;
      padding: 1.5rem;
      border-radius: 10px;
      text-align: center;
    }
    .stat-card h5 {
      margin: 0 0 0.5rem 0;
      font-size: 0.9rem;
      opacity: 0.9;
    }
    .stat-value {
      font-size: 2rem;
      font-weight: bold;
    }
    .backup-buttons {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin: 1rem 0;
    }
    .backup-btn {
      background: #8B5CF6;
      color: white;
      border: none;
      padding: 1rem;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      transition: background 0.3s ease;
    }
    .backup-btn:hover {
      background: #7C3AED;
    }
    .backup-btn.export {
      background: #22C55E;
    }
    .backup-btn.export:hover {
      background: #16A34A;
    }
    .backup-btn.import {
      background: #3B82F6;
    }
    .backup-btn.import:hover {
      background: #2563EB;
    }
    .danger-buttons {
      display: flex;
      gap: 1rem;
    }
    .danger-btn {
      background: #EF4444;
      color: white;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      transition: background 0.3s ease;
    }
    .danger-btn:hover {
      background: #DC2626;
    }
    .import-options {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.5rem;
      margin: 1rem 0;
    }
    .import-options label {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: #4A5568;
    }

    /* Night Mode Styles */
    body.night-mode {
      background: #1A1A1A;
      color: #E5E5E5;
    }
    body.night-mode header {
      background: linear-gradient(135deg, #2D1B69 0%, #1E1A52 100%);
    }
    body.night-mode .content-section {
      background: #2D2D2D;
      color: #E5E5E5;
    }
    body.night-mode .hero {
      background: linear-gradient(135deg, #2D1B69 0%, #1E1A52 100%);
    }
    body.night-mode .search-container {
      background: rgba(45, 45, 45, 0.9);
    }
    body.night-mode .search-container input,
    body.night-mode .search-container select {
      background: #3D3D3D;
      color: #E5E5E5;
      border-color: #555;
    }
    body.night-mode .btn {
      background: #8B5CF6;
    }
    body.night-mode .hostel-card {
      background: #3D3D3D;
      border-color: #555;
    }
    body.night-mode .hostel-card h3 {
      color: #E5E5E5;
    }
    body.night-mode .admin-header {
      background: #2D2D2D;
    }
    body.night-mode .admin-header h2 {
      color: #E5E5E5;
    }
    body.night-mode .admin-nav-item {
      background: #3D3D3D;
      color: #E5E5E5;
      border-color: #555;
    }
    body.night-mode .admin-nav-item.active,
    body.night-mode .admin-nav-item:hover {
      background: #8B5CF6;
    }
    body.night-mode .admin-section {
      background: #2D2D2D;
    }
    body.night-mode .editor-field label {
      color: #E5E5E5;
    }
    body.night-mode .editor-field input,
    body.night-mode .editor-field select,
    body.night-mode .editor-field textarea {
      background: #3D3D3D;
      color: #E5E5E5;
      border-color: #555;
    }

    body.night-mode .chat-message {
      background: #3D3D3D;
    }
    body.night-mode footer {
      background: #1A1A1A;
      color: #E5E5E5;
    }
    body.night-mode .footer-section h3 {
      color: #E5E5E5;
    }

    /* Star Rating System */
    .star {
      color: #FFC107;
      font-size: 1.2rem;
      margin-right: 2px;
    }
    .full-star {
      color: #FFC107;
    }
    .half-star {
      color: #FFC107;
      position: relative;
    }
    .empty-star {
      color: #E2E8F0;
    }
    .hostel-ratings {
      display: flex;
      align-items: center;
      margin-bottom: 0.5rem;
    }
    .rating-count {
      font-size: 0.9rem;
      color: #6B7280;
      margin-left: 5px;
    }
    .details-rating {
      margin-bottom: 1rem;
      padding: 0.5rem 0;
      border-bottom: 1px solid #E2E8F0;
    }
    .current-rating {
      display: flex;
      align-items: center;
      margin-bottom: 0.5rem;
    }
    .rate-this-hostel p {
      font-size: 0.9rem;
      color: #4B5563;
      margin-bottom: 0.5rem;
    }
    .rating-buttons {
      display: flex;
      gap: 0.5rem;
    }
    .rating-btn {
      background: #F3F4F6;
      border: 1px solid #E5E7EB;
      color: #374151;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .rating-btn:hover {
      background: #E5E7EB;
    }
    .rating-thank-you {
      margin-top: 0.5rem;
      color: #10B981;
      font-size: 0.9rem;
    }
    .review-form-container {
      margin-top: 0.5rem;
    }
    .selected-rating {
      margin-bottom: 0.5rem;
    }
    .review-actions {
      display: flex;
      gap: 0.5rem;
      margin-top: 0.5rem;
    }
    .submit-review-btn {
      background: #8B5CF6;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 0.25rem;
      cursor: pointer;
    }
    .cancel-review-btn {
      background: #E5E7EB;
      color: #4B5563;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 0.25rem;
      cursor: pointer;
    }
    .hostel-reviews-container {
      max-height: 300px;
      overflow-y: auto;
      padding-right: 0.5rem;
    }
    .review-item {
      padding: 0.75rem;
      border: 1px solid #E5E7EB;
      border-radius: 0.5rem;
      margin-bottom: 0.75rem;
      background: #F9FAFB;
    }
    .review-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
      align-items: center;
    }
    .review-date {
      font-size: 0.8rem;
      color: #6B7280;
    }
    .review-text {
      font-size: 0.95rem;
      color: #4B5563;
      line-height: 1.5;
    }
    .no-reviews {
      color: #6B7280;
      font-style: italic;
      text-align: center;
      padding: 1rem;
    }

    /* Hostel Details Modal */
    .hostel-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 1000;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }
    .hostel-modal.show {
      display: flex;
    }
    .hostel-modal-content {
      background: white;
      border-radius: 20px;
      max-width: 800px;
      width: 100%;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
    }
    .hostel-modal-header {
      position: relative;
    }
    .hostel-modal-image {
      width: 100%;
      height: 300px;
      object-fit: cover;
      border-radius: 20px 20px 0 0;
    }
    .hostel-modal-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: rgba(0, 0, 0, 0.5);
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      font-size: 1.2rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .hostel-modal-close:hover {
      background: rgba(0, 0, 0, 0.7);
    }
    .hostel-modal-body {
      padding: 2rem;
    }
    .hostel-modal-title {
      font-size: 2rem;
      font-weight: 700;
      color: #1A1A1A;
      margin-bottom: 1rem;
    }
    .hostel-modal-meta {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }
    .hostel-modal-badge {
      background: #8B5CF6;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 25px;
      font-size: 0.9rem;
      font-weight: 500;
    }
    .hostel-modal-section {
      margin-bottom: 2rem;
    }
    .hostel-modal-section h3 {
      font-size: 1.3rem;
      font-weight: 600;
      color: #2D3748;
      margin-bottom: 1rem;
    }
    .hostel-modal-section p {
      color: #4A5568;
      line-height: 1.6;
      margin-bottom: 1rem;
    }
    .hostel-modal-actions {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }
    .hostel-modal-btn {
      padding: 0.8rem 2rem;
      border-radius: 10px;
      font-weight: 500;
      cursor: pointer;
      border: none;
      transition: all 0.3s ease;
    }
    .hostel-modal-btn.primary {
      background: #8B5CF6;
      color: white;
    }
    .hostel-modal-btn.primary:hover {
      background: #7C3AED;
    }
    .hostel-modal-btn.secondary {
      background: #E2E8F0;
      color: #4A5568;
    }
    .hostel-modal-btn.secondary:hover {
      background: #CBD5E0;
    }
    body.night-mode .hostel-modal-content {
      background: #2D2D2D;
    }
    body.night-mode .hostel-modal-title {
      color: #E5E5E5;
    }
    body.night-mode .hostel-modal-section h3 {
      color: #E5E5E5;
    }
    body.night-mode .hostel-modal-section p {
      color: #CBD5E0;
    }

    /* Enhanced Modal Styles */
    .description-text {
      font-size: 1rem;
      line-height: 1.6;
      color: #4A5568;
    }
    .features-list {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }
    .feature-item {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      font-size: 1rem;
      color: #4A5568;
    }
    .feature-check {
      color: #10B981;
      font-weight: bold;
      font-size: 1.1rem;
      background: #F0FDF4;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid #10B981;
    }
    .location-section {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .map-link {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .location-icon {
      font-size: 1.2rem;
    }
    .map-link a {
      color: #3B82F6;
      text-decoration: underline;
      font-weight: 500;
    }
    .map-link a:hover {
      color: #1D4ED8;
    }
    .map-container {
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .contact-text {
      font-size: 1rem;
      color: #6B7280;
      font-style: italic;
    }
    .disclaimer-section {
      background: #F8FAFC;
      border: 1px solid #E2E8F0;
      border-radius: 10px;
      padding: 1rem;
      margin-top: 1rem;
    }
    .disclaimer-note {
      display: flex;
      align-items: flex-start;
      gap: 0.8rem;
      font-size: 0.9rem;
      line-height: 1.5;
      color: #374151;
    }
    .info-icon {
      font-size: 1.2rem;
      flex-shrink: 0;
      margin-top: 0.1rem;
    }
    .disclaimer-note strong {
      color: #1F2937;
    }

    /* Night mode for enhanced modal */
    body.night-mode .description-text {
      color: #CBD5E0;
    }
    body.night-mode .feature-item {
      color: #CBD5E0;
    }
    body.night-mode .feature-check {
      background: #065F46;
      border-color: #10B981;
      color: #10B981;
    }
    body.night-mode .map-link a {
      color: #60A5FA;
    }
    body.night-mode .map-link a:hover {
      color: #93C5FD;
    }
    body.night-mode .contact-text {
      color: #9CA3AF;
    }
    body.night-mode .disclaimer-section {
      background: #374151;
      border-color: #4B5563;
    }
    body.night-mode .disclaimer-note {
      color: #D1D5DB;
    }
    body.night-mode .disclaimer-note strong {
      color: #F9FAFB;
    }

    /* Media Gallery Styles */
    .media-gallery {
      position: relative;
    }
    .media-main {
      position: relative;
      width: 100%;
      height: 300px;
      overflow: hidden;
      border-radius: 20px 20px 0 0;
      background: #f8f9fa;
    }
    .hostel-modal-video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 20px 20px 0 0;
    }
    
    /* Carousel Navigation */
    .carousel-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0, 0, 0, 0.7);
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      transition: all 0.3s ease;
      z-index: 10;
    }
    .carousel-nav:hover {
      background: rgba(0, 0, 0, 0.9);
      transform: translateY(-50%) scale(1.1);
    }
    .carousel-nav.prev {
      left: 15px;
    }
    .carousel-nav.next {
      right: 15px;
    }
    .carousel-nav:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }
    
    /* Media Counter */
    .media-counter {
      position: absolute;
      bottom: 15px;
      right: 15px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 5px 12px;
      border-radius: 15px;
      font-size: 12px;
      font-weight: 500;
    }
    
    /* Thumbnails */
    .media-thumbnails {
      display: flex;
      gap: 8px;
      padding: 1rem;
      background: rgba(0,0,0,0.05);
      overflow-x: auto;
      scrollbar-width: thin;
    }
    .media-thumbnails::-webkit-scrollbar {
      height: 4px;
    }
    .media-thumbnails::-webkit-scrollbar-track {
      background: rgba(0,0,0,0.1);
    }
    .media-thumbnails::-webkit-scrollbar-thumb {
      background: rgba(0,0,0,0.3);
      border-radius: 2px;
    }
    .media-thumbnail {
      width: 70px;
      height: 70px;
      border-radius: 8px;
      object-fit: cover;
      cursor: pointer;
      border: 2px solid transparent;
      transition: all 0.3s ease;
      flex-shrink: 0;
    }
    .media-thumbnail:hover {
      border-color: #8B5CF6;
      transform: scale(1.05);
    }
    .media-thumbnail.active {
      border-color: #8B5CF6;
      box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.3);
    }
    .media-thumbnail.video {
      position: relative;
    }
    .media-thumbnail.video::after {
      content: '‚ñ∂Ô∏è';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 16px;
      background: rgba(0, 0, 0, 0.7);
      border-radius: 50%;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
      border: 2px solid transparent;
      transition: all 0.3s ease;
      flex-shrink: 0;
    }
    .media-thumbnail:hover,
    .media-thumbnail.active {
      border-color: #8B5CF6;
      transform: scale(1.05);
    }
    .media-thumbnail.video-thumb {
      position: relative;
    }
    .media-thumbnail.video-thumb::after {
      content: '‚ñ∂';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 1.2rem;
      text-shadow: 0 2px 4px rgba(0,0,0,0.8);
    }

    /* Contact Section Styles */
    .contact-section {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .contact-buttons {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }
    .contact-btn {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.8rem 1.5rem;
      border: none;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }
    .call-btn {
      background: linear-gradient(135deg, #10B981 0%, #059669 100%);
      color: white;
      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    }
    .call-btn:hover {
      background: linear-gradient(135deg, #059669 0%, #047857 100%);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
    }
    .whatsapp-btn {
      background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
      color: white;
      box-shadow: 0 4px 12px rgba(37, 211, 102, 0.3);
    }
    .whatsapp-btn:hover {
      background: linear-gradient(135deg, #128C7E 0%, #075E54 100%);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4);
    }
    .contact-icon {
      font-size: 1.1rem;
    }
    .contact-note {
      color: #6B7280;
      font-size: 0.9rem;
      margin: 0;
    }

    .contact-info-display {
      margin-bottom: 1rem;
      padding: 1rem;
      background: #F8FAFC;
      border-radius: 8px;
    }

    .contact-info-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
      color: #374151;
      font-weight: 500;
    }

    .contact-info-item:last-child {
      margin-bottom: 0;
    }

    /* Night mode for new elements */
    body.night-mode .media-thumbnails {
      background: rgba(255,255,255,0.1);
    }
    body.night-mode .carousel-nav {
      background: rgba(255, 255, 255, 0.2);
    }
    body.night-mode .carousel-nav:hover {
      background: rgba(255, 255, 255, 0.4);
    }
    body.night-mode .media-counter {
      background: rgba(255, 255, 255, 0.2);
    }

    /* Warning Dialog Styles */
    .warning-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      backdrop-filter: blur(4px);
    }
    .warning-dialog {
      background: white;
      border-radius: 16px;
      padding: 2rem;
      max-width: 450px;
      margin: 1rem;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      animation: warningSlideIn 0.3s ease-out;
    }
    @keyframes warningSlideIn {
      from {
        opacity: 0;
        transform: scale(0.9) translateY(-20px);
      }
      to {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }
    .warning-icon {
      font-size: 3rem;
      text-align: center;
      margin-bottom: 1rem;
    }
    .warning-title {
      font-size: 1.4rem;
      font-weight: 700;
      color: #1F2937;
      text-align: center;
      margin-bottom: 0.5rem;
    }
    .warning-message {
      color: #4A5568;
      text-align: center;
      margin-bottom: 1.5rem;
      line-height: 1.5;
    }
    .warning-item {
      background: #FEF2F2;
      border: 1px solid #FECACA;
      border-radius: 8px;
      padding: 0.75rem;
      margin-bottom: 1rem;
      font-weight: 500;
      color: #991B1B;
    }
    .warning-actions {
      display: flex;
      gap: 0.75rem;
      justify-content: center;
    }
    .warning-btn {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      min-width: 100px;
    }
    .warning-btn.cancel {
      background: #F3F4F6;
      color: #374151;
    }
    .warning-btn.cancel:hover {
      background: #E5E7EB;
    }
    .warning-btn.confirm {
      background: #EF4444;
      color: white;
    }
    .warning-btn.confirm:hover {
      background: #DC2626;
    }
    
    /* Night mode for warning dialogs */
    body.night-mode .warning-dialog {
      background: #2D2D2D;
      border: 1px solid #404040;
    }
    body.night-mode .warning-title {
      color: #E5E5E5;
    }
    body.night-mode .warning-message {
      color: #CBD5E0;
    }
    body.night-mode .warning-item {
      background: rgba(239, 68, 68, 0.1);
      border-color: rgba(239, 68, 68, 0.3);
      color: #F87171;
    }
    body.night-mode .warning-btn.cancel {
      background: #404040;
      color: #E5E5E5;
    }
    body.night-mode .warning-btn.cancel:hover {
      background: #525252;
    }

    /* Registration Modal Styles */
    .registration-steps {
      display: flex;
      justify-content: center;
      margin-bottom: 2rem;
    }
    .registration-steps .step {
      padding: 0.5rem 1rem;
      border-radius: 20px;
      margin: 0 0.5rem;
      font-size: 0.8rem;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    .registration-steps .step.active {
      background: #8B5CF6;
      color: white;
      transform: scale(1.05);
    }
    .registration-steps .step:not(.active) {
      background: #E2E8F0;
      color: #4A5568;
    }
    .registration-step {
      animation: fadeInStep 0.3s ease-out;
    }
    @keyframes fadeInStep {
      from {
        opacity: 0;
        transform: translateX(20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    .registration-card {
      transition: all 0.3s ease;
    }
    .registration-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    .registration-card button:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
    }
    
    /* Night mode for registration */
    body.night-mode .registration-card {
      background: linear-gradient(135deg, #3D3D3D 0%, #2D2D2D 100%);
      border-color: #404040;
    }
    body.night-mode .registration-card h4 {
      color: #E5E5E5;
    }
    body.night-mode .registration-card p {
      color: #CBD5E0;
    }

    /* Ad Container Styles */
    .ad-container {
      margin: 2rem 0;
      padding: 1rem;
      background: #F9FAFB;
      border: 1px solid #E5E7EB;
      border-radius: 8px;
      text-align: center;
      position: relative;
    }
    .ad-container.header-ad {
      margin: 1rem 0;
      background: rgba(255, 255, 255, 0.1);
      border-color: rgba(255, 255, 255, 0.2);
    }
    .ad-container.sidebar-ad {
      position: sticky;
      top: 120px;
      margin: 1rem 0;
    }
    .ad-container.footer-ad {
      margin-top: 2rem;
      background: #F7FAFC;
    }
    .ad-label {
      font-size: 0.75rem;
      color: #6B7280;
      margin-bottom: 0.5rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .manual-ad {
      display: block;
      width: 100%;
      height: 100%;
      text-decoration: none;
      transition: all 0.3s ease;
    }
    .manual-ad:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    .manual-ad img {
      width: 100%;
      height: auto;
      border-radius: 6px;
    }
    
    /* Responsive Ad Sizes */
    .ad-banner { min-height: 90px; } /* 728x90 */
    .ad-rectangle { min-height: 250px; } /* 300x250 */
    .ad-leaderboard { min-height: 90px; } /* 728x90 */
    .ad-mobile-banner { min-height: 50px; } /* 320x50 */
    
    /* Night mode for ads */
    body.night-mode .ad-container {
      background: #2D2D2D;
      border-color: #404040;
    }
    body.night-mode .ad-label {
      color: #9CA3AF;
    }

    /* FAQ Layout Container - Optimized for Reading */
    .faq-layout-container {
      display: grid;
      grid-template-columns: 200px 1fr 200px;
      gap: 2rem;
      align-items: start;
      margin-top: 2rem;
      max-width: 1400px;
      margin-left: auto;
      margin-right: auto;
      padding: 0 1rem;
    }
    
    /* FAQ Sidebar Ads - Optimized */
    .faq-sidebar-ad {
      position: relative;
      width: 200px;
      height: 600px;
    }
    
    .ad-banner-vertical {
      border-radius: 15px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      color: white;
      letter-spacing: 2px;
      position: sticky;
      top: 120px;
      transition: all 0.3s ease;
      cursor: pointer;
      overflow: hidden;
    }
    
    .ad-banner-vertical:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15) !important;
    }
    
    .manual-ad-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: none;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .manual-ad-overlay:hover {
      transform: scale(1.02);
    }
    
    /* FAQ Category Buttons - Enhanced */
    .faq-category-btn {
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .faq-category-btn:hover {
      background: linear-gradient(135deg, #8B5CF6, #7C3AED) !important;
      color: white !important;
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);
    }
    
    .faq-category-btn.active {
      background: linear-gradient(135deg, #8B5CF6, #7C3AED) !important;
      color: white !important;
      box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
    }
    
    /* FAQ Search Container - Enhanced */
    .faq-search-container {
      position: relative;
    }
    
    .faq-search-input:focus {
      outline: none;
      border-color: #7C3AED;
      box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
      transform: translateY(-2px);
    }
    
    /* FAQ Controls Grid - Enhanced */
    .faq-controls-grid {
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }
    
    /* Responsive FAQ Layout - Optimized for Reading */
    @media (max-width: 1400px) {
      .faq-layout-container {
        grid-template-columns: 180px 1fr 180px;
        gap: 1.8rem;
        max-width: 1300px;
      }
      .faq-sidebar-ad {
        width: 180px;
        height: 550px;
      }
    }
    
    @media (max-width: 1200px) {
      .faq-layout-container {
        grid-template-columns: 160px 1fr 160px;
        gap: 1.5rem;
        max-width: 1100px;
      }
      .faq-sidebar-ad {
        width: 160px;
        height: 500px;
      }
    }
    
    @media (max-width: 992px) {
      .faq-layout-container {
        grid-template-columns: 1fr;
        gap: 1.5rem;
        max-width: 900px;
      }
      .faq-sidebar-ad {
        width: 100%;
        height: 140px;
        margin: 1rem 0;
      }
      .ad-banner-vertical {
        min-height: 140px;
        flex-direction: row;
        position: relative;
        top: auto;
      }
      .ad-banner-vertical div:first-child {
        transform: none !important;
        margin: 0 1rem !important;
        font-size: 1.2rem !important;
      }
      .ad-banner-vertical > div:last-child {
        transform: none !important;
      }
      .faq-main-content {
        max-width: 100% !important;
      }
    }
    
    @media (max-width: 768px) {
      .faq-sidebar-ad {
        display: none;
      }
      .faq-layout-container {
        grid-template-columns: 1fr;
        padding: 0 1rem;
        max-width: 100%;
      }
      .faq-main-content {
        max-width: 100% !important;
      }
      .faq-controls-grid {
        gap: 1.2rem;
      }
      .faq-categories {
        flex-wrap: wrap;
        gap: 0.6rem;
        justify-content: center;
      }
      .faq-category-btn {
        font-size: 0.85rem;
        padding: 0.7rem 1rem;
      }
      .faq-header-section {
        padding: 5rem 1.5rem !important;
        min-height: 200px !important;
      }
      .faq-header-section h2 {
        font-size: 2.2rem !important;
      }
      .faq-container {
        font-size: 0.95rem !important;
        padding: 1.5rem !important;
      }
    }
    
    @media (max-width: 480px) {
      .faq-layout-container {
        padding: 0 0.8rem;
      }
      .faq-header-section {
        padding: 4rem 1rem !important;
        min-height: 180px !important;
      }
      .faq-header-section h2 {
        font-size: 1.8rem !important;
      }
      .faq-category-btn {
        font-size: 0.8rem;
        padding: 0.6rem 0.9rem;
      }
      .faq-container {
        font-size: 0.9rem !important;
        padding: 1.2rem !important;
      }
      .faq-search-input {
        font-size: 0.9rem !important;
        padding: 0.9rem 1rem !important;
      }
      
      /* Enhanced mobile styling for FAQ */
      .faq-item {
        margin-bottom: 1.5rem !important;
        border-radius: 10px !important;
        border: 1px solid #e0e0e0 !important;
      }
      
      .faq-question {
        padding: 1.2rem !important;
        font-size: 1rem !important;
        line-height: 1.4 !important;
      }
      
      .faq-answer {
        padding: 1.2rem !important;
        font-size: 0.95rem !important;
        line-height: 1.5 !important;
        text-align: justify !important;
      }
      
      /* Make all FAQ answers justified on mobile */
      div[class*="faq-answer"] {
        text-align: left !important;
      }
      
      /* Mobile advertisement between questions */
      .mobile-faq-ad {
        display: flex !important;
        margin: 1.5rem 0;
        padding: 1rem;
        background: #f8f8f8;
        border-radius: 10px;
        justify-content: center;
        align-items: center;
        text-align: center;
        font-weight: bold;
        color: #666;
        height: 100px;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      
      .mobile-faq-ad:hover {
        background: #e5e7eb;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      }
      
      /* Hide side ads on mobile */
      .faq-side-ad {
        display: none !important;
      }
      
      /* Adjust padding for mobile */
      #faq-container {
        padding: 1rem !important;
      }
      
      /* Adjust grid for mobile */
      .faq-layout-grid {
        grid-template-columns: 1fr !important;
      }
      
      /* Global mobile font size reductions */
      body, .content-section, .section-content {
        font-size: 0.85rem !important;
      }
      
      h1 {
        font-size: 1.8rem !important;
      }
      
      h2 {
        font-size: 1.5rem !important;
      }
      
      h3 {
        font-size: 1.3rem !important;
      }
      
      h4 {
        font-size: 1.1rem !important;
      }
      
      p, span, div, li, td {
        font-size: 0.85rem !important;
        line-height: 1.4 !important;
      }
      
      .btn, button {
        font-size: 0.8rem !important;
        padding: 0.6rem 1rem !important;
      }
      
      input, textarea, select {
        font-size: 0.9rem !important;
      }
      
      /* Improve register/login buttons on mobile */
      .admin-login-container, .admin-register-container {
        padding: 1.5rem !important;
        margin: 1rem !important;
        border-radius: 15px !important;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1) !important;
      }
      
      .admin-login-form input, .admin-register-form input {
        padding: 1rem !important;
        font-size: 1rem !important;
        border-radius: 10px !important;
        margin-bottom: 1rem !important;
      }
      
      .admin-login-btn, .admin-register-btn {
        padding: 1rem 2rem !important;
        font-size: 1rem !important;
        border-radius: 10px !important;
        width: 100% !important;
      }
      
      /* Remove header below content on mobile */
      .mobile-bottom-nav {
        display: none !important;
      }
      
      /* Increase logo font size on mobile */
      .logo {
        font-size: 2.2rem !important;
      }
      

      
      /* Mobile hostel registration form */
      div[style*="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;"] {
        display: flex !important;
        flex-direction: column !important;
        gap: 0.5rem !important;
      }
    }
    
    /* Night mode support for enhanced FAQ layout */
    body.night-mode .ad-banner-vertical {
      background: linear-gradient(135deg, #374151 0%, #4B5563 100%) !important;
      border-color: #6B7280;
      color: #E5E7EB;
    }
    
    body.night-mode .faq-header-section {
      background: linear-gradient(135deg, #7C3AED 0%, #8B5CF6 100%) !important;
    }
    

    
    body.night-mode .faq-qa-section {
      background: linear-gradient(135deg, #374151 0%, #4B5563 100%) !important;
      color: #E5E7EB;
      border-color: #6B7280;
    }
    
    body.night-mode .faq-search-input {
      background: #4B5563;
      color: #E5E7EB;
      border-color: #8B5CF6;
    }
    
    body.night-mode .faq-container {
      background: #4B5563 !important;
      color: #E5E7EB;
    }
    
    /* Enhanced animations and effects */
    .faq-header-section {
      animation: fadeInUp 0.8s ease-out;
    }
    

    
    .faq-qa-section {
      animation: fadeInUp 0.8s ease-out 0.4s both;
    }
    
    .faq-sidebar-ad {
      animation: fadeInSide 0.8s ease-out 0.1s both;
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes fadeInSide {
      from {
        opacity: 0;
        transform: translateX(20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    body.night-mode .contact-note {
      color: #9CA3AF;
    }

    /* Feedback Form Styles */
    .feedback-form-container {
      background: #F8FAFC;
      border-radius: 15px;
      padding: 2rem;
    }
    .feedback-form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .form-group {
      display: flex;
      flex-direction: column;
    }
    .feedback-form input,
    .feedback-form select,
    .feedback-form textarea {
      padding: 0.8rem;
      border: 1px solid #E2E8F0;
      border-radius: 8px;
      font-family: inherit;
      font-size: 0.9rem;
      transition: border-color 0.3s ease;
    }
    .feedback-form input:focus,
    .feedback-form select:focus,
    .feedback-form textarea:focus {
      outline: none;
      border-color: #8B5CF6;
      box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
    }
    .feedback-form textarea {
      resize: vertical;
      min-height: 100px;
    }
    .feedback-form button {
      background: linear-gradient(135deg, #8B5CF6 0%, #A855F7 100%);
      color: white;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .feedback-form button:hover {
      background: linear-gradient(135deg, #7C3AED 0%, #9333EA 100%);
      transform: translateY(-1px);
    }

    /* Feedback Thank You Modal */
    .feedback-thank-you-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      z-index: 10000;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }
    .feedback-thank-you-modal.show {
      display: flex;
    }
    .feedback-thank-you-content {
      background: white;
      border-radius: 20px;
      padding: 3rem;
      text-align: center;
      max-width: 500px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    .feedback-thank-you-icon {
      font-size: 4rem;
      margin-bottom: 1rem;
    }
    .feedback-thank-you-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: #1A1A1A;
      margin-bottom: 1rem;
    }
    .feedback-thank-you-message {
      color: #4A5568;
      line-height: 1.6;
      margin-bottom: 2rem;
    }
    .feedback-thank-you-close {
      background: linear-gradient(135deg, #8B5CF6 0%, #A855F7 100%);
      color: white;
      border: none;
      padding: 0.8rem 2rem;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .feedback-thank-you-close:hover {
      background: linear-gradient(135deg, #7C3AED 0%, #9333EA 100%);
      transform: translateY(-1px);
    }

    /* Night mode for feedback elements */
    body.night-mode .feedback-form-container {
      background: #374151;
    }
    body.night-mode .feedback-form input,
    body.night-mode .feedback-form select,
    body.night-mode .feedback-form textarea {
      background: #4B5563;
      border-color: #6B7280;
      color: #F9FAFB;
    }
    body.night-mode .feedback-form input::placeholder,
    body.night-mode .feedback-form textarea::placeholder {
      color: #D1D5DB;
    }
    body.night-mode .feedback-thank-you-content {
      background: #2D2D2D;
    }
    body.night-mode .feedback-thank-you-title {
      color: #E5E5E5;
    }
    body.night-mode .feedback-thank-you-message {
      color: #CBD5E0;
    }

    /* FAQ Styles */
    .faq-container {
      max-width: 800px;
      margin: 0 auto;
    }
    .faq-item {
      background: white;
      border-radius: 12px;
      margin-bottom: 1rem;
      box-shadow: 0 4px 16px rgba(0,0,0,0.08);
      overflow: hidden;
      transition: all 0.3s ease;
    }
    .faq-item:hover {
      box-shadow: 0 6px 24px rgba(0,0,0,0.12);
    }
    
    /* Search Tag Hover Effects */
    .search-tag:hover {
      transform: scale(1.05) !important;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }
    
    .search-tag:active {
      transform: scale(0.98) !important;
    }
    .faq-question {
      padding: 1.5rem;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-weight: 600;
      color: #2D3748;
      border: none;
      background: none;
      width: 100%;
      text-align: left;
    }
    .faq-question:hover {
      background: #F8FAFC;
    }
    .faq-toggle {
      font-size: 1.2rem;
      transition: transform 0.3s ease;
      color: #8B5CF6;
    }
    .faq-toggle.active {
      transform: rotate(180deg);
    }
    .faq-answer {
      padding: 0 1.5rem 1.5rem;
      color: #4A5568;
      line-height: 1.6;
      display: none;
    }
    .faq-answer.show {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    /* New Open FAQ Styles */
    .faq-item-open {
      background: white;
      border-radius: 12px;
      margin-bottom: 1.5rem;
      box-shadow: 0 4px 16px rgba(0,0,0,0.08);
      overflow: hidden;
      transition: all 0.3s ease;
    }
    .faq-item-open:hover {
      box-shadow: 0 6px 24px rgba(0,0,0,0.12);
    }
    .faq-question-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      padding: 1.5rem;
      gap: 1rem;
    }
    .faq-question-text {
      margin: 0;
      font-size: 1.1rem;
      font-weight: 600;
      color: #2D3748;
      line-height: 1.4;
      flex: 1;
    }
    .faq-answer-open {
      padding: 0 1.5rem 1.5rem;
      color: #4A5568;
      line-height: 1.6;
      margin-top: -0.5rem;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Modal Styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      z-index: 10000;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }
    .modal-content {
      background: white;
      border-radius: 15px;
      width: 100%;
      max-height: 80vh;
      overflow-y: auto;
    }
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem;
      border-bottom: 1px solid #E2E8F0;
    }
    .modal-header h4 {
      margin: 0;
      color: #1A1A1A;
    }
    .modal-close {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: #666;
      padding: 0;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .modal-close:hover {
      background: #F1F5F9;
    }
    .modal-body {
      padding: 1.5rem;
    }
    .form-group {
      margin-bottom: 1rem;
    }
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: #374151;
    }
    .form-group input,
    .form-group textarea {
      width: 100%;
      padding: 0.8rem;
      border: 1px solid #E2E8F0;
      border-radius: 8px;
      font-family: inherit;
      font-size: 0.9rem;
      transition: border-color 0.3s ease;
    }
    .form-group input:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #8B5CF6;
      box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
    }
    .form-group textarea {
      resize: vertical;
      min-height: 100px;
    }
    .form-group input[type="checkbox"] {
      width: auto;
      margin-right: 0.5rem;
    }
    .form-actions {
      margin-top: 1.5rem;
    }

    /* Admin FAQ List Styles */
    .admin-faq-item {
      background: white;
      border: 1px solid #E2E8F0;
      border-radius: 10px;
      padding: 1rem;
      margin-bottom: 1rem;
      position: relative;
    }
    .admin-faq-item.draft {
      border-left: 4px solid #F59E0B;
      background: #FFFBEB;
    }
    .admin-faq-item.published {
      border-left: 4px solid #10B981;
    }
    .admin-faq-actions {
      display: flex;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    .admin-faq-actions button {
      padding: 0.4rem 0.8rem;
      border: none;
      border-radius: 6px;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .edit-btn {
      background: #3B82F6;
      color: white;
    }
    .edit-btn:hover {
      background: #2563EB;
    }
    .delete-btn {
      background: #EF4444;
      color: white;
    }
    .delete-btn:hover {
      background: #DC2626;
    }
    .toggle-btn {
      background: #F59E0B;
      color: white;
    }
    .toggle-btn:hover {
      background: #D97706;
    }
    .toggle-btn.published {
      background: #10B981;
    }
    .toggle-btn.published:hover {
      background: #059669;
    }

    /* Night mode for FAQ and Modal */
    body.night-mode .faq-item {
      background: #374151;
    }

    body.night-mode .faq-item-open {
      background: #374151;
    }

    body.night-mode .faq-question-text {
      color: #F3F4F6;
    }

    body.night-mode .faq-answer-open {
      color: #D1D5DB;
    }
    body.night-mode .faq-question {
      color: #E5E5E5;
    }
    body.night-mode .faq-question:hover {
      background: #4B5563;
    }
    body.night-mode .faq-answer {
      color: #CBD5E0;
    }
    body.night-mode .modal-content {
      background: #2D2D2D;
    }
    body.night-mode .modal-header {
      border-bottom-color: #4B5563;
    }
    body.night-mode .modal-header h4 {
      color: #E5E5E5;
    }
    body.night-mode .form-group label {
      color: #E5E5E5;
    }
    body.night-mode .form-group input,
    body.night-mode .form-group textarea {
      background: #374151;
      border-color: #4B5563;
      color: #E5E5E5;
    }
    body.night-mode .form-group input::placeholder,
    body.night-mode .form-group textarea::placeholder {
      color: #9CA3AF;
    }
    body.night-mode .admin-faq-item {
      background: #374151;
      border-color: #4B5563;
    }
    body.night-mode .admin-faq-item.draft {
      background: #451A03;
      border-left-color: #F59E0B;
    }

    /* Night mode for analytics */
    body.night-mode .analytics-card {
      background: #374151;
      border-color: #4B5563;
    }
    body.night-mode .analytics-number {
      color: #E5E5E5;
    }
    body.night-mode .analytics-label {
      color: #CBD5E0;
    }

    /* Media Upload Styles */
    .media-upload-section {
      border: 2px dashed #E2E8F0;
      border-radius: 8px;
      padding: 1rem;
      margin-top: 0.5rem;
    }
    
    /* Fix for hostel media control visibility */
    .hostel-media-group {
      display: none;
    }
    
    #admin-hostels .hostel-media-group {
      display: block;
    }
    
    /* Fix for hostel save button visibility */
    .hostel-save-button {
      display: none;
    }
    
    #admin-hostels .hostel-save-button {
      display: block;
    }
    .media-upload-controls {
      margin-bottom: 1rem;
    }
    .media-uploads-container {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }
    .media-upload-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 0.8rem;
      background: #F8FAFC;
      border-radius: 8px;
      border: 1px solid #E2E8F0;
    }
    .media-upload-item input[type="file"] {
      flex: 1;
      margin: 0;
    }
    .media-upload-item .media-type-label {
      background: #8B5CF6;
      color: white;
      padding: 0.3rem 0.6rem;
      border-radius: 6px;
      font-size: 0.8rem;
      font-weight: 500;
      min-width: 60px;
      text-align: center;
    }
    .media-upload-item.video .media-type-label {
      background: #EF4444;
    }
    .media-remove-btn {
      background: #EF4444;
      color: white;
      border: none;
      padding: 0.4rem 0.8rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.8rem;
    }
    .media-remove-btn:hover {
      background: #DC2626;
    }
    .media-preview {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border-radius: 6px;
      border: 1px solid #E2E8F0;
    }

    /* Night mode for media uploads */
    body.night-mode .media-upload-section {
      border-color: #4B5563;
      background: #374151;
    }
    body.night-mode .media-upload-item {
      background: #4B5563;
      border-color: #6B7280;
    }
    body.night-mode .media-upload-item input[type="file"] {
      background: #374151;
      color: #E5E5E5;
    }

    /* Floating Chat Button Styles */
    .floating-chat-button {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #10B981, #059669);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: white;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(16, 185, 129, 0.4);
      transition: all 0.3s ease;
      z-index: 1000;
      border: none;
    }
    .floating-chat-button:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 25px rgba(16, 185, 129, 0.6);
    }
    .floating-chat-button:active {
      transform: scale(0.95);
    }
    
    .chat-notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background: #EF4444;
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      font-size: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }

    /* Chat Widget Styles */
    .chat-widget {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 320px;
      height: 420px;
      background: white;
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(16, 185, 129, 0.2);
      z-index: 10000;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      transition: all 0.3s ease;
      border: 2px solid #10B981;
    }
    .chat-widget-header {
      background: linear-gradient(135deg, #10B981, #059669);
      color: white;
      padding: 12px 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .chat-widget-title {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
    }
    .status-indicator {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #10B981;
    }
    .chat-widget-close {
      background: none;
      border: none;
      color: white;
      font-size: 20px;
      cursor: pointer;
      padding: 0;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .chat-widget-content {
      flex: 1;
      overflow-y: auto;
      position: relative;
      display: flex;
    }
    
    /* Chat Steps */
    .chat-step {
      width: 100%;
      height: 100%;
      padding: 20px;
      display: none;
      flex-direction: column;
      box-sizing: border-box;
    }
    .chat-step.active {
      display: flex;
    }
    
    /* Chat Welcome */
    .chat-welcome {
      text-align: center;
      margin-bottom: 20px;
      padding: 10px;
    }
    .welcome-icon {
      font-size: 32px;
      margin-bottom: 8px;
    }
    .chat-welcome h3 {
      margin: 0 0 8px 0;
      color: #10B981;
      font-size: 18px;
      font-weight: 600;
    }
    .chat-welcome p {
      margin: 0;
      color: #6B7280;
      font-size: 14px;
    }
    
    /* Chat Form */
    .chat-form {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    .form-group {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .form-group label {
      font-size: 13px;
      font-weight: 600;
      color: #374151;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .form-group input,
    .form-group textarea {
      padding: 10px 12px;
      border: 2px solid #E5E7EB;
      border-radius: 8px;
      font-size: 14px;
      transition: all 0.3s ease;
      font-family: inherit;
    }
    .form-group input:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #10B981;
      box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
    }
    .form-group textarea {
      resize: vertical;
      min-height: 60px;
    }
    .option-text small {
      color: #6B7280;
      font-size: 12px;
    }
    
    /* Chat Form */
    .chat-form-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid #E5E7EB;
    }
    .back-btn {
      background: none;
      border: none;
      font-size: 18px;
      cursor: pointer;
      color: #8B5CF6;
      padding: 0;
    }
    .chat-form {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    .form-group input,
    .form-group textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid #E5E7EB;
      border-radius: 8px;
      font-size: 14px;
      transition: border-color 0.3s ease;
      resize: none;
    }
    .form-group input:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #8B5CF6;
    }
    .submit-btn {
      background: linear-gradient(135deg, #10B981, #059669);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 14px;
    }
    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
      background: linear-gradient(135deg, #059669, #047857);
    }
    
    /* Success Message */
    .success-message {
      text-align: center;
      margin-top: 50px;
    }
    .success-icon {
      font-size: 48px;
      margin-bottom: 20px;
    }
    .success-message h3 {
      color: #374151;
      margin: 0 0 10px 0;
    }
    .success-message p {
      color: #6B7280;
      margin: 0 0 30px 0;
    }
    .new-message-btn {
      background: #F3F4F6;
      color: #8B5CF6;
      border: 2px solid #8B5CF6;
      padding: 10px 20px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .new-message-btn:hover {
      background: #8B5CF6;
      color: white;
    }
    
    /* Animations */
    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Mobile Responsive */
    @media (max-width: 768px) {
      .chat-widget {
        width: 300px;
        height: 400px;
        bottom: 10px; /* Restored to original position */
        right: 10px;
      }
      .floating-chat-button {
        bottom: 15px; /* Restored to original position */
        right: 15px;
        width: 55px;
        height: 55px;
        font-size: 22px;
      }
    }
    
    /* Night Mode for Chat */
    body.night-mode .chat-widget {
      background: #1F2937;
    }
    body.night-mode .avatar {
      background: #374151;
    }
    body.night-mode .message-content p {
      color: #E5E7EB;
    }
    body.night-mode .contact-option-btn {
      background: #374151;
      border-color: #4B5563;
      color: #E5E7EB;
    }
    body.night-mode .contact-option-btn:hover {
      border-color: #8B5CF6;
      background: #4B5563;
    }
    body.night-mode .option-text strong {
      color: #E5E7EB;
    }
    body.night-mode .chat-form-header {
      border-color: #4B5563;
    }
    body.night-mode .form-group input,
    body.night-mode .form-group textarea {
      background: #374151;
      border-color: #4B5563;
      color: #E5E7EB;
    }
    body.night-mode .form-group input::placeholder,
    body.night-mode .form-group textarea::placeholder {
      color: #9CA3AF;
    }
    body.night-mode .success-message h3 {
      color: #E5E7EB;
    }
    body.night-mode .new-message-btn {
      background: #374151;
      border-color: #8B5CF6;
    }

    /* FAQ Search and Filter Styles */
    .faq-controls {
      max-width: 800px;
      margin: 0 auto 2rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .faq-search-container {
      position: relative;
      width: 100%;
    }
    .faq-search-input {
      width: 100%;
      padding: 1rem 1.5rem;
      border: 2px solid #E2E8F0;
      border-radius: 25px;
      font-size: 1rem;
      transition: all 0.3s ease;
      background: white;
    }
    .faq-search-input:focus {
      outline: none;
      border-color: #8B5CF6;
      box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.1);
    }
    .faq-search-clear {
      position: absolute;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%);
      background: #6B7280;
      color: white;
      border: none;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      cursor: pointer;
      font-size: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .faq-search-clear:hover {
      background: #4B5563;
    }
    .faq-categories {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      justify-content: center;
    }
    .faq-category-btn {
      background: #F8FAFC;
      border: 2px solid #E2E8F0;
      color: #4A5568;
      padding: 0.6rem 1rem;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .faq-category-btn:hover {
      background: #EDF2F7;
      border-color: #CBD5E0;
    }
    .faq-category-btn.active {
      background: #8B5CF6;
      border-color: #8B5CF6;
      color: white;
    }
    .faq-category-btn span {
      background: rgba(255,255,255,0.2);
      color: inherit;
      padding: 0.1rem 0.4rem;
      border-radius: 10px;
      font-size: 0.8rem;
      min-width: 18px;
      text-align: center;
    }
    .faq-category-btn.active span {
      background: rgba(255,255,255,0.3);
    }


      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .faq-vote-btn:hover {
      border-color: #CBD5E0;
      background: #F1F5F9;
    }
    .faq-vote-btn.voted {
      background: #8B5CF6;
      border-color: #8B5CF6;
      color: white;
    }
    .faq-vote-btn.voted:hover {
      background: #7C3AED;
      border-color: #7C3AED;
    }
    .faq-vote-count {
      font-weight: 600;
    }

    /* FAQ Public Stats */
    .faq-stats-public {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin-top: 3rem;
      padding: 2rem;
      background: #F8FAFC;
      border-radius: 15px;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }
    .faq-stat-item {
      text-align: center;
    }
    .faq-stat-number {
      display: block;
      font-size: 2rem;
      font-weight: 700;
      color: #8B5CF6;
      margin-bottom: 0.5rem;
    }
    .faq-stat-label {
      color: #4A5568;
      font-size: 0.9rem;
      font-weight: 500;
    }

    /* FAQ Category Badge */
    .faq-category-badge {
      background: #E2E8F0;
      color: #4A5568;
      padding: 0.2rem 0.6rem;
      border-radius: 12px;
      font-size: 0.8rem;
      font-weight: 500;
      text-transform: capitalize;
      margin-bottom: 0.5rem;
      display: inline-block;
    }
    .faq-category-badge.booking {
      background: #DBEAFE;
      color: #1E40AF;
    }
    .faq-category-badge.payment {
      background: #D1FAE5;
      color: #047857;
    }
    .faq-category-badge.facilities {
      background: #FEF3C7;
      color: #92400E;
    }
    .faq-category-badge.general {
      background: #E5E7EB;
      color: #374151;
    }

    /* Night mode for new FAQ elements */
    body.night-mode .faq-search-input {
      background: #374151;
      border-color: #4B5563;
      color: #E5E5E5;
    }
    body.night-mode .faq-search-input::placeholder {
      color: #9CA3AF;
    }
    body.night-mode .faq-search-input:focus {
      border-color: #A855F7;
    }
    body.night-mode .faq-category-btn {
      background: #374151;
      border-color: #4B5563;
      color: #E5E5E5;
    }
    body.night-mode .faq-category-btn:hover {
      background: #4B5563;
      border-color: #6B7280;
    }
    body.night-mode .faq-voting {
      background: #374151;
      border-top-color: #4B5563;
    }
    body.night-mode .faq-voting-text {
      color: #CBD5E0;
    }
    body.night-mode .faq-vote-btn {
      background: #4B5563;
      border-color: #6B7280;
      color: #E5E5E5;
    }
    body.night-mode .faq-vote-btn:hover {
      background: #6B7280;
    }
    body.night-mode .faq-stats-public {
      background: #374151;
    }
    body.night-mode .faq-stat-label {
      color: #CBD5E0;
    }

    /* Filter Results Info Styles */
    .filter-badge {
      background: #8B5CF6;
      color: white;
      padding: 0.25rem 0.5rem;
      border-radius: 12px;
      font-size: 0.8rem;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
    }
    .filter-badge .remove-filter {
      cursor: pointer;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      width: 16px;
      height: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      transition: background 0.2s;
    }
    .filter-badge .remove-filter:hover {
      background: rgba(255, 255, 255, 0.3);
    }
    
    /* Facilities Filter Dropdown Styles */
    .facilities-dropdown {
      position: relative;
    }
    .facilities-dropdown-btn {
      width: 100%;
      padding: 0.5rem;
      background: white;
      border: 1px solid #E2E8F0;
      border-radius: 4px;
      text-align: left;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 0.9rem;
      color: #4A5568;
    }
    .facilities-dropdown-btn:hover {
      border-color: #CBD5E0;
    }
    .facilities-dropdown-btn:focus {
      outline: none;
      border-color: #8B5CF6;
      box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.3);
    }
    .facility-filter-btn {
      background: #F3F4F6;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.2s;
    }
    .facility-filter-btn:hover {
      background: #E5E7EB;
    }
    .facility-filter-btn.apply {
      background: #8B5CF6;
      color: white;
    }
    .facility-filter-btn.apply:hover {
      background: #7C3AED;
    }
    
    /* Night mode for facilities filter */
    body.night-mode .facilities-dropdown-btn {
      background: #374151;
      border-color: #4B5563;
      color: #E5E5E5;
    }
    body.night-mode .facilities-dropdown-btn:hover {
      border-color: #6B7280;
    }
    body.night-mode .facilities-filter-content {
      background: #1F2937;
      border-color: #4B5563;
      color: #E5E5E5;
    }
    body.night-mode .facilities-filter-content h5 {
      color: #E5E5E5;
    }
    body.night-mode .facility-filter-btn {
      background: #4B5563;
      color: #E5E5E5;
    }
    body.night-mode .facility-filter-btn:hover {
      background: #6B7280;
    }
    body.night-mode .facility-filter-btn.apply {
      background: #7C3AED;
    }
    body.night-mode .facility-filter-btn.apply:hover {
      background: #6D28D9;
    }

    /* Night mode for filter results */
    body.night-mode #filter-results-info {
      background: #374151;
      border-color: #8B5CF6;
      color: #E5E5E5;
    }

    /* Mobile responsive for FAQ controls */
    @media (max-width: 768px) {
      .faq-controls {
        padding: 0 1rem;
      }
      .faq-categories {
        justify-content: flex-start;
        overflow-x: auto;
        padding-bottom: 0.5rem;
      }
      .faq-category-btn {
        flex-shrink: 0;
      }
      .faq-stats-public {
        flex-direction: column;
        gap: 1rem;
      }
      .faq-voting {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
      }
    }

    /* Night mode for Why HOSTALL section */
    body.night-mode .why-hostall {
      background: linear-gradient(135deg, #1A1A2E 0%, #16213E 50%, #0F3460 100%);
    }
    body.night-mode .section-header h2 {
      color: #E5E5E5;
    }
    body.night-mode .section-subtitle {
      color: rgba(229, 229, 229, 0.8);
    }
    body.night-mode .feature-card {
      background: rgba(45, 45, 45, 0.95);
      border-color: #555;
    }
    body.night-mode .feature-card:hover {
      background: #3D3D3D;
    }
    body.night-mode .feature-content h3 {
      color: #E5E5E5;
    }
    body.night-mode .feature-content p {
      color: #CBD5E0;
    }
    body.night-mode .why-stats .stat-item {
      background: rgba(45, 45, 45, 0.3);
      border-color: rgba(229, 229, 229, 0.1);
    }

    /* Night mode for Featured Hostels */
    body.night-mode .featured-header h2 {
      color: #E5E5E5;
    }
    body.night-mode .hostel-card {
      background: #3D3D3D;
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
    }
    body.night-mode .hostel-card:hover {
      box-shadow: 0 16px 48px rgba(0,0,0,0.4);
    }
    body.night-mode .hostel-name {
      color: #A855F7;
    }
    body.night-mode .hostel-location-only {
      color: #CBD5E0;
    }
    body.night-mode .view-details-btn {
      background: linear-gradient(135deg, #7C3AED 0%, #A855F7 100%);
      box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
    }
    body.night-mode .view-details-btn:hover {
      background: linear-gradient(135deg, #6D28D9 0%, #9333EA 100%);
      box-shadow: 0 6px 20px rgba(124, 58, 237, 0.4);
    }

    /* Tablet Responsive for Featured Hostels */
    @media (max-width: 1024px) {
      .hostel-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 1.2rem;
      }
    }

    /* Mobile Responsive for Featured Hostels */
    @media (max-width: 768px) {
      .hostel-grid {
        grid-template-columns: 1fr;
        padding: 0 1rem;
        gap: 1.5rem;
      }
      .featured-header {
        padding-left: 1rem;
      }
      .featured-header h2 {
        font-size: 2rem;
      }
      .hostel-card {
        height: 280px;
      }
      .hostel-image-container {
        height: 180px;
      }
      .hostel-content {
        padding: 1.2rem;
      }
      .hostel-name {
        font-size: 1.2rem;
      }
      .hostel-location-only {
        font-size: 0.95rem;
      }
      .view-details-btn {
        padding: 0.7rem 1.3rem;
        font-size: 0.85rem;
      }
    }
    .footer-links {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }
    .footer-links a {
      color: rgba(255, 255, 255, 0.8);
      text-decoration: none;
      transition: color 0.3s ease;
    }
    .footer-links a:hover {
      color: #8B5CF6;
    }
    .footer-subscribe {
      display: flex;
      flex-direction: column;
    }
    .subscribe-form {
      display: flex;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    .subscribe-input {
      flex: 1;
      padding: 0.8rem;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.1);
      color: white;
      placeholder-color: rgba(255, 255, 255, 0.6);
    }
    .subscribe-input::placeholder {
      color: rgba(255, 255, 255, 0.6);
    }
    .subscribe-btn {
      background: #8B5CF6;
      border: none;
      padding: 0.8rem 1rem;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    .subscribe-btn:hover {
      background: #7C3AED;
    }
    .footer-bottom {
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      padding-top: 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
    }
    .footer-bottom-text {
      color: rgba(255, 255, 255, 0.6);
      font-size: 0.9rem;
    }
    .footer-bottom-links {
      display: flex;
      gap: 2rem;
    }
    .footer-bottom-links a {
      color: rgba(255, 255, 255, 0.6);
      text-decoration: none;
      font-size: 0.9rem;
      transition: color 0.3s ease;
    }
    .footer-bottom-links a:hover {
      color: #8B5CF6;
    }

    @media (max-width: 768px) {
      .footer-content {
        grid-template-columns: 1fr;
        gap: 2rem;
      }
      .footer-bottom {
        flex-direction: column;
        text-align: center;
      }
      .subscribe-form {
        flex-direction: column;
      }
    }
  </style>

<script>
// Force refresh if version changed
const CURRENT_VERSION = "2025-07-05";
if (localStorage.getItem("SITE_VERSION") !== CURRENT_VERSION) {
  localStorage.setItem("SITE_VERSION", CURRENT_VERSION);
  caches.keys().then(names => names.forEach(name => caches.delete(name)));
  location.reload(true);
}
</script>

</head>
<body>
  <!-- Fixed hamburger button below night mode toggle for mobile -->
  <div class="hamburger-below-night-mode" onclick="toggleMobileMenu()">
    <div class="mobile-menu-toggle">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>
  
  <header>
    <div class="header-content">
      <div class="header-top">
        <div class="logo" style="display: flex; align-items: center;">
          <img src="3ubwkhp51z.png" style="max-height: 35px; margin-right: 8px;" alt="HOSTALL Logo">
          <span style="font-weight: 700; letter-spacing: 0.5px; font-size: 1.3rem; color: white;">HOSTALL</span>
        </div>
        <div class="header-controls desktop-only">
          <!-- This div will only show on desktop -->
        </div>
      </div>
      <!-- The main nav is now hidden on mobile and shown via the mobile menu toggle -->
      <nav class="main-nav">
        <a onclick="show('home')" class="active">Home</a>
        <a onclick="showAboutSection()">About Us</a>
        <a onclick="show('faq')">FAQ</a>
        <a onclick="show('admin')">Admin</a>
      </nav>
    </div>
    
    <!-- Mobile Side Panel -->
    <div class="mobile-side-panel" id="mobile-side-panel">
      <div class="side-panel-header">
        <h2><span class="host">HOST</span><span class="all">ALL</span></h2>
        <button class="close-panel" onclick="toggleMobileMenu()">√ó</button>
      </div>
      <nav class="side-panel-nav">
        <a onclick="show('home'); toggleMobileMenu();" class="active">üè† Home</a>
        <a onclick="showAboutSection(); toggleMobileMenu();">‚ÑπÔ∏è About Us</a>
        <a onclick="show('faq'); toggleMobileMenu();">‚ùì FAQ</a>
        <a onclick="show('admin'); toggleMobileMenu();">üë®‚Äçüíº Admin</a>
        <a onclick="show('admin'); toggleMobileMenu(); setTimeout(() => document.getElementById('admin-register-form').style.display = 'block', 100);">üìù Register Now</a>
      </nav>
    </div>
    <div class="mobile-overlay" id="mobile-overlay" onclick="toggleMobileMenu()"></div>
  </header>

  <!-- Mobile Bottom Navigation -->
  <nav class="mobile-bottom-nav" id="mobile-bottom-nav">
    <div class="mobile-bottom-nav-content">
      <a href="#" class="mobile-nav-item active" onclick="show('home'); setActiveMobileNav(this)">
        <span class="mobile-nav-icon">üè†</span>
        <span class="mobile-nav-label">Home</span>
      </a>
      <a href="#" class="mobile-nav-item" onclick="showAboutSection(); setActiveMobileNav(this)">
        <span class="mobile-nav-icon">‚ÑπÔ∏è</span>
        <span class="mobile-nav-label">About</span>
      </a>
      <a href="#" class="mobile-nav-item" onclick="show('faq'); setActiveMobileNav(this)">
        <span class="mobile-nav-icon">‚ùì</span>
        <span class="mobile-nav-label">FAQ</span>
      </a>

      <a href="#" class="mobile-nav-item" onclick="show('admin'); setActiveMobileNav(this)">
        <span class="mobile-nav-icon">üë®‚Äçüíº</span>
        <span class="mobile-nav-label">Admin</span>
      </a>
      <a href="#" class="mobile-nav-item" onclick="toggleMobileMenu()">
        <span class="mobile-nav-icon">‚ò∞</span>
        <span class="mobile-nav-label">Menu</span>
      </a>
    </div>
  </nav>

  <!-- Hostel Details Modal -->
  <div class="hostel-modal" id="hostel-modal" onclick="closeHostelModal(event)">
    <div class="hostel-modal-content" onclick="event.stopPropagation()">
      <div class="hostel-modal-header">
        <div id="modal-media-gallery" class="media-gallery">
          <div class="media-main">
            <img id="modal-image" class="hostel-modal-image" alt="Hostel">
            <video id="modal-video" class="hostel-modal-video" controls style="display: none;">
              Your browser does not support the video tag.
            </video>
            <button class="carousel-nav prev" id="carousel-prev" onclick="previousMedia()">‚Äπ</button>
            <button class="carousel-nav next" id="carousel-next" onclick="nextMedia()">‚Ä∫</button>
            <div class="media-counter" id="media-counter">1 / 1</div>
          </div>
          <div id="media-thumbnails" class="media-thumbnails"></div>
        </div>
        <button class="hostel-modal-close" onclick="closeHostelModal()">√ó</button>
      </div>
      <div class="hostel-modal-body">
        <h2 id="modal-title" class="hostel-modal-title"></h2>
        
        <!-- Rating Section -->
        <div id="modal-rating" class="details-rating">
          <div class="current-rating">
            <div class="stars-container" id="modal-stars"></div>
            <span class="rating-count" id="modal-rating-count">(0)</span>
          </div>
          <div class="rate-this-hostel">
            <p>Rate this hostel:</p>
            <div class="rating-buttons">
              <button class="rating-btn" onclick="openReviewForm(document.getElementById('modal-title').textContent, 1)">1‚òÖ</button>
              <button class="rating-btn" onclick="openReviewForm(document.getElementById('modal-title').textContent, 2)">2‚òÖ</button>
              <button class="rating-btn" onclick="openReviewForm(document.getElementById('modal-title').textContent, 3)">3‚òÖ</button>
              <button class="rating-btn" onclick="openReviewForm(document.getElementById('modal-title').textContent, 4)">4‚òÖ</button>
              <button class="rating-btn" onclick="openReviewForm(document.getElementById('modal-title').textContent, 5)">5‚òÖ</button>
            </div>
          </div>
        </div>
        
        <div id="modal-meta" class="hostel-modal-meta"></div>
        
        <!-- Reviews Section -->
        <div class="hostel-modal-section">
          <h3>Reviews</h3>
          <div id="hostel-reviews" class="hostel-reviews-container">
            <p class="no-reviews">No reviews yet. Be the first to review this hostel!</p>
          </div>
        </div>
        
        <div class="hostel-modal-section">
          <h3>Description</h3>
          <div id="modal-details" class="description-text"></div>

          <h3 style="margin-top: 1.5rem;">Features & Amenities</h3>
          <div id="modal-features" class="features-list"></div>
        </div>
        
        <div class="hostel-modal-section">
          <h3>Location</h3>
          <div class="location-section">
            <div class="map-link">
              <span class="location-icon">üìç</span>
              <a href="#" id="modal-map-link" target="_blank">View on Google Maps</a>
            </div>
            <div id="modal-map" class="map-container">
              <iframe id="modal-map-iframe" width="100%" height="200" frameborder="0" style="border:0; border-radius: 10px;" allowfullscreen="" loading="lazy"></iframe>
            </div>
          </div>
        </div>
        
        <div class="hostel-modal-section">
          <h3>Contact Information</h3>
          <div id="modal-contact" class="contact-section">
            <div class="contact-info-display">
              <div id="modal-phone-display" class="contact-info-item"></div>
              <div id="modal-whatsapp-display" class="contact-info-item"></div>
            </div>
            <div class="contact-buttons">
              <button id="modal-call-btn" class="contact-btn call-btn" onclick="trackClick('contact')">
                <span class="contact-icon">üìû</span>
                <span>Call Now</span>
              </button>
              <button id="modal-whatsapp-btn" class="contact-btn whatsapp-btn" onclick="trackClick('contact')">
                <span class="contact-icon">üí¨</span>
                <span>WhatsApp</span>
              </button>
            </div>
            <p class="contact-note">Contact the hostel directly for booking inquiries and visits.</p>
          </div>
        </div>
        
        <div class="hostel-modal-section disclaimer-section">
          <div class="disclaimer-note" style="background: #FFF9C4; border-left: 4px solid #F59E0B; padding: 0.75rem; border-radius: 4px; margin-top: 1rem;">
            <p style="margin: 0; font-size: 0.85rem; color: #92400E; text-align: justify; line-height: 1.4;">
              <span style="font-weight: 600; font-size: 0.9rem;">Note:</span> This hostel information is based on in-person or phone-based data collection by the HOSTALL team. Facilities and prices may change. Please verify with the hostel before making any decisions.
            </p>
          </div>
        </div>
        
        <div class="hostel-modal-actions">
          <button class="hostel-modal-btn secondary" onclick="closeHostelModal()">Close</button>
        </div>
      </div>
    </div>
  </div>

  <section id="home" class="active">
    <!-- Hero Section -->
    <div class="hero">
      <div class="hero-container">
        <div class="hero-content">
          <h1>Find Your Perfect Hostel Experience</h1>
          <p class="hero-subtitle">Discover comfortable, verified, and affordable hostels in Lahore. View real photos. Make direct deals. Pay no platform fees.</p>
          <p class="hero-tagline">Your hostel search starts here.</p>
          

        </div>
        
        <div class="hero-image">
          <img id="homepage-hero-image" src="n59c5pt71c.png" alt="HOSTALL - Quality Hostel Accommodation">
        </div>
      </div>
    </div>



    <!-- Featured Hostels -->
    <div class="content-section">
      <!-- Ad Space before Featured Hostels -->
      <div class="advertisement-banner" style="width: 100%; height: 120px; background: #f0f0f0; margin-bottom: 2rem; border-radius: 10px; display: flex; align-items: center; justify-content: center; cursor: pointer;" onclick="openAdLink('#')">
        <div style="text-align: center; padding: 1rem;">
          <span style="font-weight: bold; color: #666; font-size: 1.2rem; display: block; margin-bottom: 0.5rem;">ADVERTISEMENT</span>
          <span style="color: #888; font-size: 0.9rem;">Click to inquire about advertising opportunities</span>
        </div>
      </div>

      <div class="featured-header">
        <h2>Featured Hostels</h2>
        <div class="featured-underline"></div>
      </div>
      
      <!-- Filters -->
      <div class="filters">
        <div class="filter-group">
          <label>Price Range</label>
          <select class="filter-select" id="price-filter" onchange="applyFilters()">
            <option value="">All Prices</option>
            <option value="budget">Under PKR 8,000</option>
            <option value="mid">PKR 8,000 - 15,000</option>
            <option value="premium">Above PKR 15,000</option>
          </select>
        </div>
        <div class="filter-group">
          <label>Location</label>
          <select class="filter-select" id="location-filter" onchange="applyFilters()">
            <option value="">All Areas</option>
            <option value="gulberg">Gulberg</option>
            <option value="pu">Near PU</option>
            <option value="dha">DHA</option>
            <option value="johar">Johar Town</option>
          </select>
        </div>
        <div class="filter-group">
          <label>Gender</label>
          <select class="filter-select" id="gender-filter" onchange="applyFilters()">
            <option value="">All Hostels</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
          </select>
        </div>
        <div class="filter-group">
          <label>Facilities</label>
          <div class="facilities-dropdown">
            <button class="facilities-dropdown-btn" onclick="toggleFacilitiesFilter(event)">Select Facilities ‚ñæ</button>
            <div id="facilities-filter-dropdown" class="facilities-filter-content" style="display: none; position: absolute; background: white; border: 1px solid #E2E8F0; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); padding: 1rem; z-index: 100; width: 300px; max-height: 400px; overflow-y: auto;">
              <!-- Mess Services -->
              <div style="margin-bottom: 0.75rem;">
                <h5 style="margin: 0 0 0.5rem 0; font-size: 0.9rem; color: #4A5568;">üçΩÔ∏è Mess Services</h5>
                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                  <label style="display: flex; align-items: center; gap: 0.3rem; flex: 1 0 30%; font-size: 0.85rem; cursor: pointer;">
                    <input type="checkbox" class="facility-checkbox" value="breakfast" onchange="updateFacilitiesFilterButton()"> Breakfast
                  </label>
                  <label style="display: flex; align-items: center; gap: 0.3rem; flex: 1 0 30%; font-size: 0.85rem; cursor: pointer;">
                    <input type="checkbox" class="facility-checkbox" value="lunch" onchange="updateFacilitiesFilterButton()"> Lunch
                  </label>
                  <label style="display: flex; align-items: center; gap: 0.3rem; flex: 1 0 30%; font-size: 0.85rem; cursor: pointer;">
                    <input type="checkbox" class="facility-checkbox" value="dinner" onchange="updateFacilitiesFilterButton()"> Dinner
                  </label>
                </div>
              </div>
              
              <!-- Cooling & Heating -->
              <div style="margin-bottom: 0.75rem;">
                <h5 style="margin: 0 0 0.5rem 0; font-size: 0.9rem; color: #4A5568;">‚ùÑÔ∏è Cooling & Heating</h5>
                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                  <label style="display: flex; align-items: center; gap: 0.3rem; flex: 1 0 30%; font-size: 0.85rem; cursor: pointer;">
                    <input type="checkbox" class="facility-checkbox" value="ac" onchange="updateFacilitiesFilterButton()"> AC
                  </label>
                  <label style="display: flex; align-items: center; gap: 0.3rem; flex: 1 0 30%; font-size: 0.85rem; cursor: pointer;">
                    <input type="checkbox" class="facility-checkbox" value="cooler" onchange="updateFacilitiesFilterButton()"> Cooler
                  </label>
                </div>
              </div>
              
              <!-- Security -->
              <div style="margin-bottom: 0.75rem;">
                <h5 style="margin: 0 0 0.5rem 0; font-size: 0.9rem; color: #4A5568;">üîí Security</h5>
                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                  <label style="display: flex; align-items: center; gap: 0.3rem; flex: 1 0 30%; font-size: 0.85rem; cursor: pointer;">
                    <input type="checkbox" class="facility-checkbox" value="security" onchange="updateFacilitiesFilterButton()"> Security
                  </label>
                  <label style="display: flex; align-items: center; gap: 0.3rem; flex: 1 0 30%; font-size: 0.85rem; cursor: pointer;">
                    <input type="checkbox" class="facility-checkbox" value="cctv" onchange="updateFacilitiesFilterButton()"> CCTV
                  </label>
                </div>
              </div>
              
              <!-- Internet & Amenities -->
              <div style="margin-bottom: 0.75rem;">
                <h5 style="margin: 0 0 0.5rem 0; font-size: 0.9rem; color: #4A5568;">üì∂ Internet & Services</h5>
                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                  <label style="display: flex; align-items: center; gap: 0.3rem; flex: 1 0 30%; font-size: 0.85rem; cursor: pointer;">
                    <input type="checkbox" class="facility-checkbox" value="wifi" onchange="updateFacilitiesFilterButton()"> WiFi
                  </label>
                  <label style="display: flex; align-items: center; gap: 0.3rem; flex: 1 0 30%; font-size: 0.85rem; cursor: pointer;">
                    <input type="checkbox" class="facility-checkbox" value="laundry" onchange="updateFacilitiesFilterButton()"> Laundry
                  </label>
                  <label style="display: flex; align-items: center; gap: 0.3rem; flex: 1 0 30%; font-size: 0.85rem; cursor: pointer;">
                    <input type="checkbox" class="facility-checkbox" value="cleaning" onchange="updateFacilitiesFilterButton()"> Cleaning
                  </label>
                </div>
              </div>
              
              <!-- Kitchen & Cooking -->
              <div style="margin-bottom: 0.75rem;">
                <h5 style="margin: 0 0 0.5rem 0; font-size: 0.9rem; color: #4A5568;">üç≥ Kitchen Facilities</h5>
                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                  <label style="display: flex; align-items: center; gap: 0.3rem; flex: 1 0 30%; font-size: 0.85rem; cursor: pointer;">
                    <input type="checkbox" class="facility-checkbox" value="kitchen" onchange="updateFacilitiesFilterButton()"> Kitchen
                  </label>
                  <label style="display: flex; align-items: center; gap: 0.3rem; flex: 1 0 30%; font-size: 0.85rem; cursor: pointer;">
                    <input type="checkbox" class="facility-checkbox" value="oven" onchange="updateFacilitiesFilterButton()"> Oven
                  </label>
                  <label style="display: flex; align-items: center; gap: 0.3rem; flex: 1 0 30%; font-size: 0.85rem; cursor: pointer;">
                    <input type="checkbox" class="facility-checkbox" value="refrigerator" onchange="updateFacilitiesFilterButton()"> Fridge
                  </label>
                </div>
              </div>
              
              <!-- Power & Utilities -->
              <div style="margin-bottom: 0.75rem;">
                <h5 style="margin: 0 0 0.5rem 0; font-size: 0.9rem; color: #4A5568;">‚ö° Power Backup</h5>
                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                  <label style="display: flex; align-items: center; gap: 0.3rem; flex: 1 0 30%; font-size: 0.85rem; cursor: pointer;">
                    <input type="checkbox" class="facility-checkbox" value="ups" onchange="updateFacilitiesFilterButton()"> UPS
                  </label>
                  <label style="display: flex; align-items: center; gap: 0.3rem; flex: 1 0 30%; font-size: 0.85rem; cursor: pointer;">
                    <input type="checkbox" class="facility-checkbox" value="generator" onchange="updateFacilitiesFilterButton()"> Generator
                  </label>
                </div>
              </div>
              
              <!-- Parking -->
              <div style="margin-bottom: 0.75rem;">
                <h5 style="margin: 0 0 0.5rem 0; font-size: 0.9rem; color: #4A5568;">üöó Parking</h5>
                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                  <label style="display: flex; align-items: center; gap: 0.3rem; flex: 1 0 30%; font-size: 0.85rem; cursor: pointer;">
                    <input type="checkbox" class="facility-checkbox" value="parking" onchange="updateFacilitiesFilterButton()"> Parking
                  </label>
                </div>
              </div>
              
              <div style="display: flex; justify-content: space-between; margin-top: 1rem; border-top: 1px solid #E2E8F0; padding-top: 0.75rem;">
                <button class="facility-filter-btn" onclick="clearFacilityFilters(event)">Clear All</button>
                <button class="facility-filter-btn apply" onclick="applyFacilityFilters(event)">Apply Filters</button>
              </div>
            </div>
          </div>
        </div>
        <button onclick="clearFilters()" class="btn-secondary" style="font-size: 0.75rem; padding: 0.4rem 0.8rem;">Clear Filters</button>
      </div>

      <!-- Filter Results Info -->
      <div id="filter-results-info" style="display: none; background: #F0F9FF; border: 1px solid #0EA5E9; border-radius: 8px; padding: 1rem; margin: 1rem 0; text-align: center;">
        <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; color: #0369A1; font-weight: 600;">
          <span>üîç</span>
          <span id="results-count">0 hostels found</span>
        </div>
        <div id="active-filters" style="margin-top: 0.5rem; display: flex; flex-wrap: wrap; justify-content: center; gap: 0.5rem;"></div>
      </div>

      <div class="hostel-grid" id="public-list">
        
        <!-- Loading indicator -->
        <div id="loading-hostels" style="grid-column: 1/-1; text-align: center; padding: 3rem;">
          <div style="display: inline-block; width: 50px; height: 50px; border: 5px solid #f3f3f3; border-top: 5px solid #8B5CF6; border-radius: 50%; animation: spin 1s linear infinite;"></div>
          <p style="margin-top: 1rem; font-size: 1.2rem; color: #4B5563;">Loading hostels...</p>
        </div>
      </div>
      
      <style>
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      </style>
      
      <!-- Emergency direct data loading script -->
      <script>
        // Emergency features for public mode
        (function setupEmergencyFeatures() {
          // 1. Remove any sync buttons (should only be visible to admins)
          const syncButton = document.getElementById('direct-sync-button');
          if (syncButton && !window.location.hash.includes('admin')) {
            syncButton.remove();
            console.log('üóëÔ∏è Removed sync button from home page');
          }
          
          // 2. Set up observer to remove any sync button that might appear later
          const observer = new MutationObserver(mutations => {
            mutations.forEach(mutation => {
              if (mutation.addedNodes && mutation.addedNodes.length > 0) {
                for (let i = 0; i < mutation.addedNodes.length; i++) {
                  const node = mutation.addedNodes[i];
                  if (node.id === 'direct-sync-button' || 
                      (node.querySelector && node.querySelector('#direct-sync-button'))) {
                    const button = node.id === 'direct-sync-button' ? 
                                   node : node.querySelector('#direct-sync-button');
                    if (!window.location.hash.includes('admin')) {
                      button.remove();
                      console.log('üóëÔ∏è Removed dynamically added sync button');
                    }
                  }
                }
              }
            });
          });
          
          observer.observe(document.body, {
            childList: true,
            subtree: true
          });
          
          // 3. Add console debugging helpers
          if (!console.debugMode) {
            console.debugMode = true;
            console.supabaseStatus = function() {
              if (window.supabase) {
                if (typeof window.supabase.from === 'function') {
                  console.log('‚úÖ Supabase client is properly initialized');
                  window.supabase.from('hostels').select('count').then(({data, error}) => {
                    if (error) {
                      console.error('‚ùå Supabase query test failed:', error.message);
                    } else {
                      console.log('‚úÖ Supabase connection test successful:', data);
                    }
                  });
                } else {
                  console.log('‚ö†Ô∏è window.supabase exists but is not a proper client instance');
                }
              } else {
                console.log('‚ùå No supabase client found');
              }
            };
            
            console.reloadHostels = function() {
              console.log('üîÑ Manually reloading hostels...');
              waitForSupabaseAndLoad();
            };
          }
        })();
        
        // Direct emergency hostel loading
        (function loadHostelsDirectly() {
          // Show loading indicator
          const loadingIndicator = document.getElementById('loading-hostels');
          const hostelGrid = document.getElementById('public-list');
          
          if (!hostelGrid) return;
          
          // Supabase configuration
          const SUPABASE_URL = 'https://pjnqhdhlcgrrmfzscswv.supabase.co';
          const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBqbnFoZGhsY2dycm1menNjc3d2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODkyMTk3NTYsImV4cCI6MjAwNDc5NTc1Nn0.b3NzliWGRErqYK1FTyGXjH6V57Z5Y0MErGVeAm1OIwk';
          
          // Initialize Supabase client properly
          function initializeSupabaseClient() {
            try {
              if (typeof window.supabase === 'undefined' && window.supabase) {
                console.log('‚úÖ Supabase client already initialized');
                return window.supabase;
              }
              
              // Check if Supabase library is loaded
              if (typeof window.supabase === 'undefined' || !window.supabase.createClient) {
                console.log('‚ö†Ô∏è Supabase library not loaded, using fetch API');
                return null;
              }
              
              const client = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
              window.supabase = client;
              console.log('‚úÖ Supabase client initialized successfully');
              return client;
            } catch (error) {
              console.error('‚ùå Error initializing Supabase client:', error);
              return null;
            }
          }
          
          // Function to load hostels directly (with fallback methods)
          async function fetchHostelsFromDatabase() {
            try {
              console.log('üîç Starting hostel fetch process...');
              
              // CRITICAL VALIDATION: Check window.supabase
              if (window.supabase && typeof window.supabase === 'object') {
                console.log('‚úì window.supabase exists');
                
                // Check if from method exists directly on window.supabase
                if (typeof window.supabase.from === 'function') {
                  console.log('üìä Using main Supabase client directly');
                  try {
                    const { data, error } = await window.supabase
                      .from('hostels')
                      .select('*');
                    
                    if (error) {
                      console.error('‚ùå Supabase query error:', error.message);
                    } else if (data) {
                      console.log('‚úÖ Direct Supabase client loaded', data.length, 'hostels');
                      return data;
                    }
                  } catch (directError) {
                    console.error('‚ùå Direct Supabase client error:', directError.message);
                  }
                } else {
                  console.log('‚ö†Ô∏è window.supabase exists but .from() is not a function');
                }
                
                // Try createClient method if available
                if (typeof window.supabase.createClient === 'function') {
                  console.log('üìä Creating new Supabase client instance');
                  try {
                    const newClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
                    const { data, error } = await newClient
                      .from('hostels')
                      .select('*');
                      
                    if (error) {
                      console.error('‚ùå New Supabase client error:', error.message);
                    } else if (data) {
                      console.log('‚úÖ New Supabase client loaded', data.length, 'hostels');
                      return data;
                    }
                  } catch (newClientError) {
                    console.error('‚ùå Create client error:', newClientError.message);
                  }
                }
              } else {
                console.log('‚ö†Ô∏è window.supabase is not available');
              }
              
              // Method 2: Fallback to direct fetch API
              console.log('üìä Using direct fetch API method');
              
              // Hard-code the full URL and avoid template literals for better reliability
              const response = await fetch('https://pjnqhdhlcgrrmfzscswv.supabase.co/rest/v1/hostels?select=*', {
                method: 'GET',
                headers: {
                  'apikey': SUPABASE_KEY,
                  'Authorization': 'Bearer ' + SUPABASE_KEY,
                  'Content-Type': 'application/json'
                }
              });
              
              if (response.ok) {
                try {
                  const hostels = await response.json();
                  console.log('‚úÖ Direct fetch loaded', hostels.length, 'hostels');
                  return hostels;
                } catch (jsonError) {
                  console.error('‚ùå Error parsing JSON:', jsonError.message);
                }
              } else {
                console.error(`‚ùå HTTP Error ${response.status}: ${response.statusText}`);
              }
              
              // Method 3: Try alternative endpoint without additional parameters
              console.log('üìä Trying simplified endpoint');
              try {
                const simpleResponse = await fetch('https://pjnqhdhlcgrrmfzscswv.supabase.co/rest/v1/hostels', {
                  method: 'GET',
                  headers: {
                    'apikey': SUPABASE_KEY,
                    'Authorization': 'Bearer ' + SUPABASE_KEY,
                    'Content-Type': 'application/json'
                  }
                });
                
                if (simpleResponse.ok) {
                  const hostels = await simpleResponse.json();
                  console.log('‚úÖ Simplified fetch loaded', hostels.length, 'hostels');
                  return hostels;
                } else {
                  console.error(`‚ùå Simplified HTTP Error ${simpleResponse.status}: ${simpleResponse.statusText}`);
                }
              } catch (simpleError) {
                console.error('‚ùå Simplified fetch error:', simpleError.message);
              }
              
            } catch (error) {
              console.error('‚ùå Error loading hostels:', error);
              
              // Method 4: Load from cache if available
              console.log('üìä Trying localStorage cache');
              const cachedHostels = localStorage.getItem('hostels_cache');
              if (cachedHostels) {
                try {
                  const parsed = JSON.parse(cachedHostels);
                  console.log('üì¶ Using cached hostels:', parsed.length, 'hostels');
                  return parsed;
                } catch (e) {
                  console.error('‚ùå Error parsing cached hostels:', e);
                }
              }
              
              // Method 5: Final fallback - hardcoded sample hostels
              console.log('‚ö†Ô∏è All fetch methods failed, using hardcoded hostels');
              return [
                {
                  id: 'emergency-1',
                  name: 'Al-Noor Boys Hostel',
                  gender: 'Male',
                  location: 'Near Punjab University, Lahore',
                  details: 'Affordable hostel with all basic facilities. Monthly rent ranges from 15,000 to 25,000 PKR depending on room type.',
                  phone: '+92-300-1234567',
                  facilities: ['wifi', 'security', 'meals', 'laundry'],
                  other_facilities: 'Study room, prayer area'
                },
                {
                  id: 'emergency-2',
                  name: 'Al-Noor Girls Hostel',
                  gender: 'Female',
                  location: 'Muslim Town, Lahore',
                  details: 'Secure female hostel with 24/7 security. Monthly rent includes all utilities and three meals daily.',
                  phone: '+92-300-7654321',
                  facilities: ['wifi', 'security', 'meals', 'laundry', 'ac'],
                  other_facilities: 'Study room, common area'
                },
                {
                  id: 'emergency-3',
                  name: 'Student Living Hostel',
                  gender: 'Male',
                  location: 'Johar Town, Lahore',
                  details: 'Modern hostel with air-conditioned rooms. Monthly rent starts from 20,000 PKR.',
                  phone: '+92-300-1122334',
                  facilities: ['wifi', 'security', 'ac'],
                  other_facilities: 'Gaming area, parking'
                },
                {
                  id: 'emergency-4',
                  name: 'University Lodge',
                  gender: 'Female',
                  location: 'Gulberg, Lahore',
                  details: 'Premium hostel for female students with deluxe facilities.',
                  phone: '+92-300-5566778',
                  facilities: ['wifi', 'security', 'meals', 'laundry', 'ac'],
                  other_facilities: 'Gym, study hall'
                }
              ];
            }
          }
          
          // Function to render hostel cards
          function renderHostelCards(hostels) {
            if (!hostelGrid) return;
            
            // Remove loading indicator
            if (loadingIndicator) {
              loadingIndicator.remove();
            }
            
            if (hostels.length === 0) {
              hostelGrid.innerHTML = `
                <div style="grid-column: 1/-1; text-align: center; padding: 2rem; background: #f9fafb; border-radius: 10px; margin: 1rem;">
                  <h3 style="color: #dc2626; margin-bottom: 1rem;">‚ö†Ô∏è No Hostels Found</h3>
                  <p style="color: #6b7280; margin-bottom: 1rem;">We're having trouble loading hostel data right now.</p>
                  <button onclick="location.reload()" style="background: #8B5CF6; color: white; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer;">
                    üîÑ Refresh Page
                  </button>
                  <p style="font-size: 0.8rem; color: #9ca3af; margin-top: 1rem;">
                    If this problem persists, please contact support.
                  </p>
                </div>
              `;
              return;
            }
            
            // Clear existing content
            hostelGrid.innerHTML = '';
            console.log('üèóÔ∏è Rendering hostel cards for:', hostels.map(h => h.name));
            
            // Create hostel cards
            hostels.forEach((hostel, index) => {
              console.log(`üè† Creating card ${index + 1}:`, hostel.name, '- Gender:', hostel.gender);
              const hostelCard = document.createElement('div');
              hostelCard.className = 'hostel-card';
              
              // Handle image with better fallback
              let imageUrl = hostel.img || hostel.image;
              if (!imageUrl || imageUrl === 'null' || imageUrl === null) {
                const genderColor = hostel.gender === 'Female' ? 'ff69b4' : hostel.gender === 'Male' ? '4169e1' : '6b7280';
                imageUrl = `https://via.placeholder.com/300x200/${genderColor}/ffffff?text=${encodeURIComponent(hostel.name || 'Hostel')}`;
              }
              
              const locationDisplay = (hostel.location || 'Location not specified').split(',')[0].trim();
              
              hostelCard.innerHTML = `
                <div class="hostel-image-container">
                  <img src="${imageUrl}" class="hostel-image" alt="${hostel.name}" 
                       onerror="this.src='https://via.placeholder.com/300x200/6b7280/ffffff?text=Hostel+Image'">
                  <div class="hostel-gender-badge ${hostel.gender ? hostel.gender.toLowerCase() : ''}">
                    ${hostel.gender || 'Any'}
                  </div>
                </div>
                <div class="hostel-content">
                  <h3 class="hostel-name">${hostel.name || 'Unnamed Hostel'}</h3>
                  <div class="hostel-location-only">
                    üìç ${locationDisplay}
                  </div>
                  <div class="hostel-contact" style="font-size: 0.9rem; color: #6b7280; margin: 0.5rem 0; display: flex; gap: 1rem;">
                    ${hostel.phone ? `<a href="tel:${hostel.phone}" style="color: #10b981; text-decoration: none; display: flex; align-items: center; gap: 0.25rem;"><i class="hgi-stroke hgi-call" style="color: #10b981;"></i> ${hostel.phone}</a>` : ''}
                    ${hostel.whatsapp ? `<a href="https://wa.me/${hostel.whatsapp.replace(/[^0-9]/g, '')}" target="_blank" style="color: #25d366; text-decoration: none; display: flex; align-items: center; gap: 0.25rem;"><i class="hgi-stroke hgi-whatsapp" style="color: #25d366;"></i> WhatsApp</a>` : ''}
                  </div>
                  <button class="view-details-btn" onclick="showHostelDetails(${JSON.stringify(hostel).replace(/"/g, '&quot;')})">View Details</button>
                </div>
              `;
              hostelGrid.appendChild(hostelCard);
            });
            
            // Update results count
            const resultsCount = document.getElementById('results-count');
            if (resultsCount) {
              resultsCount.textContent = `${hostels.length} hostels found`;
            }
            
            console.log('‚úÖ Rendered', hostels.length, 'hostel cards');
          }
          
          // Function to display hostel details - Smart format based on available data
          window.showHostelDetails = function(hostel) {
            // Ensure map URL is properly formatted for Google Maps
            if (hostel.map && !hostel.map.startsWith('http')) {
              hostel.map = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(hostel.map)}`;
            }
            
            const facilities = hostel.facilities ? 
              (Array.isArray(hostel.facilities) ? hostel.facilities.join(', ') : 
              typeof hostel.facilities === 'string' ? hostel.facilities : 
              JSON.stringify(hostel.facilities)) : 'Not specified';
            
            // Check if hostel has enhanced data (pricing, policies, etc.)
            const hasEnhancedData = hostel.rent || hostel.monthly_rent || hostel.security_deposit || 
                                   hostel.contact_person || hostel.office_hours || hostel.checkin_time ||
                                   hostel.other_facilities || hostel.email || hostel.website;
            
            if (hasEnhancedData) {
              // Show enhanced details for hostels with comprehensive information
              let roomPricing = '';
              if (hostel.room_prices) {
                const prices = Array.isArray(hostel.room_prices) ? hostel.room_prices : 
                              typeof hostel.room_prices === 'string' ? JSON.parse(hostel.room_prices) : [];
                
                if (Array.isArray(prices) && prices.length > 0) {
                  roomPricing = '\n\nüí∞ Room Pricing:\n' + prices.map(price => {
                    if (price.type && price.price) {
                      return `‚Ä¢ ${price.type}: ${price.price} ${price.currency || 'PKR'}${price.per ? ' per ' + price.per : ''}`;
                    }
                    return '';
                  }).filter(item => item).join('\n');
                }
              }
              
              const details = `
üè† HOSTEL DETAILS (Enhanced Information Available)

üìç Name: ${hostel.name || 'Not specified'}
üë• Gender: ${hostel.gender || 'Any'}
üè† Location: ${hostel.location || 'Not specified'}
üìû Phone: ${hostel.phone || 'Not provided'}
üì± WhatsApp: ${hostel.whatsapp || hostel.phone || 'Not provided'}
üìß Email: ${hostel.email || 'Not provided'}
üåê Website: ${hostel.website || 'Not provided'}

üíµ PRICING & FEES:
‚Ä¢ Monthly Rent: ${hostel.rent || hostel.monthly_rent || 'Contact for pricing'}
‚Ä¢ Security Deposit: ${hostel.security_deposit || 'Contact for details'}
‚Ä¢ Admission Fee: ${hostel.admission_fee || 'Contact for details'}
‚Ä¢ Utilities: ${hostel.utilities_included ? 'Included' : (hostel.utilities_cost || 'Ask hostel')}${roomPricing}

üè¢ FACILITIES & AMENITIES:
‚Ä¢ Basic Facilities: ${facilities}
‚Ä¢ Additional Facilities: ${hostel.other_facilities || 'None mentioned'}
‚Ä¢ Room Type: ${hostel.room_type || 'Standard rooms'}
‚Ä¢ Meals: ${hostel.meals_included ? 'Included' : (hostel.meal_plan || 'Not included')}

üë§ CONTACT PERSON:
‚Ä¢ Contact Person: ${hostel.contact_person || 'Hostel Manager'}
‚Ä¢ Office Hours: ${hostel.office_hours || '9 AM - 6 PM'}
‚Ä¢ Emergency Contact: ${hostel.emergency_contact || hostel.phone || 'Same as main number'}

üìã RULES & POLICIES:
‚Ä¢ Check-in Time: ${hostel.checkin_time || '12:00 PM onwards'}
‚Ä¢ Check-out Time: ${hostel.checkout_time || '11:00 AM'}
‚Ä¢ Visitor Policy: ${hostel.visitor_policy || 'Check with management'}
‚Ä¢ Curfew: ${hostel.curfew || 'Ask hostel for details'}
‚Ä¢ Age Limit: ${hostel.age_limit || '18-30 years'}

üöó TRANSPORTATION:
‚Ä¢ Nearby Universities: ${hostel.nearby_universities || 'Contact for details'}
‚Ä¢ Public Transport: ${hostel.transport_access || 'Available'}
‚Ä¢ Parking: ${hostel.parking || 'Check availability'}

‚ÑπÔ∏è ADDITIONAL INFORMATION:
${hostel.details || 'No additional details provided'}

üìç LOCATION & MAP:
${hostel.map ? 'üó∫Ô∏è View on Google Maps: ' + hostel.map : '‚ùå Map not provided - Ask for address details'}

---
üìù Note: Please contact the hostel directly to confirm all details, pricing, and availability before making any decisions.
              `;
              
              alert(details);
            } else {
              // Show simple format for basic hostels (old style)
              const details = `HOSTEL DETAILS

üìç Name: ${hostel.name || 'Not specified'}
üë• Gender: ${hostel.gender || 'Any'}
üè† Location: ${hostel.location || 'Not specified'}
üìû Phone: ${hostel.phone || 'Not provided'}
üì± WhatsApp: ${hostel.whatsapp || hostel.phone || 'Not provided'}
üè¢ Facilities: ${facilities}

Additional Information:
${hostel.details || 'No additional details'}

${hostel.map ? 'üó∫Ô∏è View on map: ' + hostel.map : '‚ùå Map not provided'}`;
              
              alert(details);
            }
          };
          
          // Wait for Supabase to be ready, then execute loading
          function waitForSupabaseAndLoad() {
            console.log('üè† Starting hostel loading process...');
            
            // Try loading immediately
            fetchHostelsFromDatabase().then(hostels => {
              if (hostels.length > 0) {
                renderHostelCards(hostels);
                
                // Store in localStorage for caching
                localStorage.setItem('hostels_cache', JSON.stringify(hostels));
                localStorage.setItem('hostels_cache_timestamp', Date.now().toString());
              } else {
                console.log('‚ö†Ô∏è No hostels received, will retry...');
              }
            });
            
            // Additional retry attempts with exponential backoff
            const retryDelays = [2000, 5000, 10000];
            retryDelays.forEach((delay, index) => {
              setTimeout(() => {
                const hasHostels = hostelGrid.querySelectorAll('.hostel-card').length > 0;
                if (!hasHostels) {
                  console.log(`üîÑ Retry attempt ${index + 1} - No hostels rendered yet, trying again...`);
                  fetchHostelsFromDatabase().then(hostels => {
                    if (hostels.length > 0) {
                      renderHostelCards(hostels);
                    }
                  });
                }
              }, delay);
            });
          }
          
          // Start the loading process
          waitForSupabaseAndLoad();
        })();
      </script>
      
      <!-- Hostel loading script -->
      <script>
        // Simple loading indicator management
        
        window.addEventListener('DOMContentLoaded', () => {
          console.log('‚úÖ Page loaded');
          
          // Hide the loading indicator after hostels are loaded
          setTimeout(() => {
            const loadingIndicator = document.getElementById('loading-hostels');
            if (loadingIndicator) {
              loadingIndicator.style.display = 'none';
              console.log('‚úÖ Loading indicator hidden');
            }
          }, 3000);
        });
      </script>
      
      <!-- Student Testimonials Section -->
      <div class="testimonials-section">
        <div class="testimonial-carousel">
          <h2 style="font-size: 1.5rem; font-weight: 700; color: #2D3748; margin-bottom: 1rem;">What Users Say About HOSTALL</h2>
          
          <div class="testimonial-item active">
            <div class="testimonial-quote">
              "HOSTALL helped me find a perfect hostel near Punjab University within my budget! The verification process gave me confidence that I was choosing a safe place."
            </div>
            <div class="testimonial-author">- Sarah Ahmed, LUMS Student</div>
          </div>
          
          <div class="testimonial-item">
            <div class="testimonial-quote">
              "The detailed listings saved me from visiting multiple hostels. I could compare facilities and prices easily before making my decision."
            </div>
            <div class="testimonial-author">- Ahmad Ali, Punjab University Student</div>
          </div>
          
          <div class="testimonial-item">
            <div class="testimonial-quote">
              "Moving from Karachi to Lahore was stressful, but HOSTALL made finding accommodation so much easier. Highly recommended for all students!"
            </div>
            <div class="testimonial-author">- Fatima Khan, UET Student</div>
          </div>
          
          <div class="testimonial-item">
            <div class="testimonial-quote">
              "The team physically visits each hostel, so I knew I could trust the listings. Found my ideal hostel in just 2 days!"
            </div>
            <div class="testimonial-author">- Hassan Malik, FAST University Student</div>
          </div>
          
          <div class="testimonial-indicators">
            <div class="indicator active" onclick="showTestimonial(0)"></div>
            <div class="indicator" onclick="showTestimonial(1)"></div>
            <div class="indicator" onclick="showTestimonial(2)"></div>
            <div class="indicator" onclick="showTestimonial(3)"></div>
          </div>
        </div>
      </div>
      
      <!-- Manual Ad Space (Rectangle) -->
      <div class="ad-container">
        <div class="ad-label">Sponsored</div>
        <div id="manual-ad-1" class="manual-ad-space ad-rectangle" onclick="trackAdClick('manual-ad-1')">
          <!-- Manual ad content will be loaded here -->
          <div style="display: flex; align-items: center; justify-content: center; height: 250px; background: linear-gradient(135deg, #F3F4F6 0%, #E5E7EB 100%); border-radius: 8px; color: #6B7280;">
            <div style="text-align: center;">
              <div style="font-size: 2rem; margin-bottom: 0.5rem;">üì¢</div>
              <div style="font-weight: 600;">Your Ad Here</div>
              <div style="font-size: 0.9rem;">Contact us for advertising</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Why HOSTALL Section -->
    <div class="why-hostall">
      <div class="why-content">
        <div class="section-header">
          <h2>Why Choose HOSTALL?</h2>
          <p class="section-subtitle">Discover what makes us the most trusted hostel platform in Lahore</p>
        </div>
        
        <div class="features-grid">

          
          <div class="feature-card">
            <div class="feature-icon-wrapper">
              <div class="feature-icon">üìç</div>
            </div>
            <div class="feature-content">
              <h3 class="feature-title">Smart Location Selection</h3>
              <p class="feature-desc">Hostels near major universities and commercial areas with easy transport access</p>
              <div class="feature-highlight">Strategic Positioning</div>
            </div>
          </div>
          
          <div class="feature-card">
            <div class="feature-icon-wrapper">
              <div class="feature-icon">üéØ</div>
            </div>
            <div class="feature-content">
              <h3 class="feature-title">Smart Matching</h3>
              <p class="feature-desc">Advanced filters help you find hostels matching your budget and preferences</p>
              <div class="feature-highlight">Perfect Fit Every Time</div>
            </div>
          </div>
          
          <div class="feature-card">
            <div class="feature-icon-wrapper">
              <div class="feature-icon">‚úÖ</div>
            </div>
            <div class="feature-content">
              <h3 class="feature-title">Verified Listings</h3>
              <p class="feature-desc">Every hostel listed is physically visited by our team for verification</p>
              <div class="feature-highlight">Quality Guaranteed</div>
            </div>
          </div>
        </div>
        
        <div class="why-stats" id="why-stats-container">
          <!-- Statistics will be loaded dynamically from admin settings -->
        </div>
      </div>
    </div>
  </section>

  <section id="about">
    <div class="content-section">
      <!-- Hero Section -->
      <div class="about-hero">
        <h1 class="about-main-title">HOSTALL</h1>
        <p class="about-subtitle">Transforming Student Accommodation in Lahore</p>
        <div class="about-intro-text">
          <p>Welcome to HOSTALL ‚Äì helping you find a home among the Zinda Dilan-e-Lahore.</p>
        </div>
      </div>
      
      <!-- Main Content Grid -->
      <div class="about-content-grid">
        <!-- Our Story -->
        <div class="about-story-section">
          <div class="about-content-block">
            <div class="about-image-container">
              <img src="https://public.youware.com/users-website-assets/prod/eece562c-b820-4d93-ac82-ae67b689ba1d/f55329116b65461d87b2a1feafb59939.jpg" alt="Modern hostel accommodation" class="about-image">
              <div class="about-image-overlay">
                <span class="about-image-badge">üè† Quality Living</span>
              </div>
            </div>
            <div class="about-text-content">
              <h2 class="about-section-title">Helping you find a replica of your home</h2>
              <p class="about-description">
                Moving to a new city like Lahore, whether for studies or a job, can be exciting, but finding the right place to live isn't always easy. That's where we come in.
              </p>
              <p class="about-description">
                HOSTALL is your reliable guide to discovering verified hostels, complete with smart filters, and all the details you need to make the best decision. Whether you're a student looking for a quiet place to focus or a professional needing comfort and convenience, we have got you covered.
              </p>
            </div>
          </div>
        </div>
        
        <!-- Our Mission -->
        <div class="about-mission-section">
          <div class="about-content-block reverse">
            <div class="about-text-content">
              <h2 class="about-section-title">Your Local Friend in Lahore</h2>
              <p class="about-description">
                We gather and share all the details you need, rent, facilities, nearby landmarks, and real photos, so you can make the right decision before even packing your bags. Think of us as your local friend in Lahore, helping you explore your options and find a place that fits your lifestyle and budget.
              </p>
              <div class="about-mission-points">
                <div class="mission-point">
                  <span class="mission-icon">üîç</span>
                  <span>Verified listings with real photos and honest reviews</span>
                </div>
                <div class="mission-point">
                  <span class="mission-icon">üí∞</span>
                  <span>Transparent pricing with no hidden costs</span>
                </div>
                <div class="mission-point">
                  <span class="mission-icon">‚ö°</span>
                  <span>Instant connectivity with hostel management</span>
                </div>
                <div class="mission-point">
                  <span class="mission-icon">üë•</span>
                  <span>Dedicated Team to support you through every step.</span>
                </div>
                <div class="mission-point">
                  <span class="mission-icon">üéØ</span>
                  <span>24/7 Customer Support</span>
                </div>
              </div>
              <p class="about-description" style="margin-top: 1rem; font-style: italic;">
                Because your peace of mind matters.
              </p>
            </div>
            <div class="about-image-container">
              <img src="https://public.youware.com/users-website-assets/prod/eece562c-b820-4d93-ac82-ae67b689ba1d/44384731a3d24267b148320520632ee8.jpg" alt="Our dedicated team" class="about-image">
              <div class="about-image-overlay">
                <span class="about-image-badge">üë• Our Team</span>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Our Commitment -->
        <div class="about-commitment-section">
          <div class="about-content-block">
            <div class="about-image-container">
              <img src="https://public.youware.com/users-website-assets/prod/eece562c-b820-4d93-ac82-ae67b689ba1d/8fae1e4c427849ca8f695d5f0ad7b282.jpg" alt="24/7 customer support" class="about-image">
              <div class="about-image-overlay">
                <span class="about-image-badge">üéØ Support</span>
              </div>
            </div>
            <div class="about-text-content">
              <h2 class="about-section-title">Start Your Journey on the Right Foot</h2>
              <p class="about-description">
                Lahore has so much to offer, and your journey begins with the right place to stay.
                Let HOSTALL help you find a hostel that truly feels like home, so you can focus on what really matters: your future.
              </p>

            </div>
          </div>
        </div>
      </div>
      

    </div>
  </section>

  <!-- FAQ Section -->
  <section id="faq" class="section-content">
    <!-- Top Section: Header and Filters with Side Ads -->
    <div style="max-width: 1200px; margin: 2rem auto; padding: 0 1rem;">
      <div class="faq-layout-grid" style="display: grid; grid-template-columns: 150px 1fr 150px; gap: 2rem; align-items: stretch;">
        
        <!-- Left Advertisement - Hidden on mobile -->
        <div class="faq-side-ad" style="height: 420px; background: #f0f0f0; display: flex; align-items: center; justify-content: center;">
          <span style="transform: rotate(-90deg); font-weight: bold; color: #999; font-size: 1rem; letter-spacing: 2px; white-space: nowrap;">ADVERTISEMENT</span>
        </div>

        <!-- Center Content -->
        <div style="width: 100%; height: 420px; display: flex; flex-direction: column;">
          <!-- Purple Header Section -->
          <div style="background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%); color: white; padding: 3rem 2rem; border-radius: 20px; margin-bottom: 1rem; position: relative; flex: 1; display: flex; flex-direction: column; justify-content: center;">
            <div style="position: absolute; top: 20px; left: 50%; transform: translateX(-50%); font-size: 2rem;">‚ùì</div>
            <h1 style="font-size: 2.2rem; font-weight: bold; margin: 1rem 0 0.5rem 0; letter-spacing: 1px;">FREQUENTLY ASKED QUESTIONS</h1>
            <p style="font-size: 1rem; opacity: 0.9; max-width: 500px; margin: 0 auto; line-height: 1.4;">Find answers to common questions about our hostel platform and booking process</p>
          </div>


        </div>

        <!-- Right Advertisement - Hidden on mobile -->
        <div class="faq-side-ad" style="height: 420px; background: #f0f0f0; display: flex; align-items: center; justify-content: center;">
          <span style="transform: rotate(90deg); font-weight: bold; color: #999; font-size: 1rem; letter-spacing: 2px; white-space: nowrap;">ADVERTISEMENT</span>
        </div>
      </div>
    </div>
    
    <!-- Bottom Section: Full Width Q&A Content -->
    <div style="width: 100%; background: #f8f9fa; padding: 2rem 0; margin-top: 1rem;">
      <div style="max-width: 1200px; margin: 0 auto; padding: 0 1rem;">
        <div style="background: white; border: 1px solid #e0e0e0; border-radius: 12px; padding: 3rem; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
          <div id="faq-container" style="min-height: 400px; background: #fafafa; border-radius: 8px; padding: 2rem; border: 1px solid #e0e0e0; font-size: 1rem; line-height: 1.6; width: 100%;">
            
            <!-- FAQ Categories Legend at the top -->

            
            <!-- Search Bar - NEW -->
            <div class="faq-search-container" style="margin-bottom: 1.5rem; position: relative;">
              <input type="text" id="faq-search-input" placeholder="üîç Search for questions or keywords..." 
                    style="width: 100%; padding: 0.8rem 1.2rem; border-radius: 30px; border: 2px solid #E2E8F0; 
                    font-size: 1rem; box-shadow: 0 2px 10px rgba(0,0,0,0.05); transition: all 0.3s ease;">
              <button id="faq-search-clear" onclick="clearFAQSearchInput()" 
                    style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); 
                    background: #CBD5E0; color: white; border: none; width: 24px; height: 24px; 
                    border-radius: 50%; cursor: pointer; display: none; font-size: 14px;">√ó</button>
            </div>
            
            <!-- Quick Search Tags -->
            <div class="faq-quick-search" style="margin-bottom: 2rem; padding: 1rem; background: #FAFAFA; border-radius: 8px; border: 1px solid #E2E8F0;">
              <h4 style="margin: 0 0 1rem 0; color: #4B5563; font-size: 1rem; font-weight: 600; text-align: center;">üîç Quick Search Topics</h4>
              <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; justify-content: center;">
                <button onclick="searchFAQByKeyword('payment')" class="search-tag" style="background: #FEF3C7; color: #92400E; border: 1px solid #F59E0B; padding: 0.4rem 0.8rem; border-radius: 20px; font-size: 0.85rem; cursor: pointer; font-weight: 500; transition: all 0.2s;">
                  üí∞ Payment & Fees
                </button>
                <button onclick="searchFAQByKeyword('booking')" class="search-tag" style="background: #DBEAFE; color: #1E40AF; border: 1px solid #3B82F6; padding: 0.4rem 0.8rem; border-radius: 20px; font-size: 0.85rem; cursor: pointer; font-weight: 500; transition: all 0.2s;">
                  üìù Booking Process
                </button>
                <button onclick="searchFAQByKeyword('safety')" class="search-tag" style="background: #D1FAE5; color: #065F46; border: 1px solid #10B981; padding: 0.4rem 0.8rem; border-radius: 20px; font-size: 0.85rem; cursor: pointer; font-weight: 500; transition: all 0.2s;">
                  üõ°Ô∏è Safety & Trust
                </button>
                <button onclick="searchFAQByKeyword('admin')" class="search-tag" style="background: #EDE9FE; color: #5B21B6; border: 1px solid #8B5CF6; padding: 0.4rem 0.8rem; border-radius: 20px; font-size: 0.85rem; cursor: pointer; font-weight: 500; transition: all 0.2s;">
                  üë®‚Äçüíª Admin Access
                </button>
                <button onclick="searchFAQByKeyword('facilities')" class="search-tag" style="background: #FEF2F2; color: #991B1B; border: 1px solid #EF4444; padding: 0.4rem 0.8rem; border-radius: 20px; font-size: 0.85rem; cursor: pointer; font-weight: 500; transition: all 0.2s;">
                  üè† Room Facilities
                </button>
                <button onclick="searchFAQByKeyword('scam')" class="search-tag" style="background: #FDF2F8; color: #BE185D; border: 1px solid #EC4899; padding: 0.4rem 0.8rem; border-radius: 20px; font-size: 0.85rem; cursor: pointer; font-weight: 500; transition: all 0.2s;">
                  ‚ö†Ô∏è Scam Protection
                </button>
                <button onclick="searchFAQByKeyword('verify')" class="search-tag" style="background: #F0FDF4; color: #166534; border: 1px solid #22C55E; padding: 0.4rem 0.8rem; border-radius: 20px; font-size: 0.85rem; cursor: pointer; font-weight: 500; transition: all 0.2s;">
                  ‚úÖ Verification
                </button>
                <button onclick="searchFAQByKeyword('listing')" class="search-tag" style="background: #F3F4F6; color: #374151; border: 1px solid #6B7280; padding: 0.4rem 0.8rem; border-radius: 20px; font-size: 0.85rem; cursor: pointer; font-weight: 500; transition: all 0.2s;">
                  üìã Add Listings
                </button>
                <button onclick="clearFAQSearch()" class="search-tag" style="background: #F9FAFB; color: #6B7280; border: 1px solid #D1D5DB; padding: 0.4rem 0.8rem; border-radius: 20px; font-size: 0.85rem; cursor: pointer; font-weight: 500; transition: all 0.2s;">
                  üîÑ Show All
                </button>
              </div>
              <div id="search-results-info" style="margin-top: 0.8rem; text-align: center; font-size: 0.9rem; color: #6B7280; font-weight: 500; display: none;">
                <!-- Search results info will appear here -->
              </div>
            </div>
            
            <div class="faq-categories-legend" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 0.5rem; margin-bottom: 2rem; border-bottom: 1px solid #e0e0e0; padding-bottom: 1rem;">
              <div onclick="filterFAQsByCategory('all')" data-category="all" style="padding: 0.5rem 1.2rem; background: #8B5CF6; color: white; border-radius: 20px; font-weight: 600; font-size: 0.9rem; cursor: pointer; display: flex; align-items: center; gap: 0.5rem;">
                <span style="font-size: 1.1rem;">üîç</span> All <span id="legend-count-all" style="background: rgba(255,255,255,0.3); padding: 0 6px; border-radius: 10px; margin-left: 3px; font-size: 0.8rem;">24</span>
              </div>
              <div onclick="filterFAQsByCategory('general')" data-category="general" style="padding: 0.5rem 1.2rem; background: #EDF2F7; color: #4A5568; border-radius: 20px; font-weight: 600; font-size: 0.9rem; cursor: pointer; display: flex; align-items: center; gap: 0.5rem;">
                <span style="font-size: 1.1rem;">‚ÑπÔ∏è</span> General <span id="legend-count-general" style="background: rgba(0,0,0,0.1); padding: 0 6px; border-radius: 10px; margin-left: 3px; font-size: 0.8rem;">3</span>
              </div>
              <div onclick="filterFAQsByCategory('booking')" data-category="booking" style="padding: 0.5rem 1.2rem; background: #EDF2F7; color: #4A5568; border-radius: 20px; font-weight: 600; font-size: 0.9rem; cursor: pointer; display: flex; align-items: center; gap: 0.5rem;">
                <span style="font-size: 1.1rem;">üìù</span> Booking <span id="legend-count-booking" style="background: rgba(0,0,0,0.1); padding: 0 6px; border-radius: 10px; margin-left: 3px; font-size: 0.8rem;">2</span>
              </div>
              <div onclick="filterFAQsByCategory('payment')" data-category="payment" style="padding: 0.5rem 1.2rem; background: #EDF2F7; color: #4A5568; border-radius: 20px; font-weight: 600; font-size: 0.9rem; cursor: pointer; display: flex; align-items: center; gap: 0.5rem;">
                <span style="font-size: 1.1rem;">üí∞</span> Payment <span id="legend-count-payment" style="background: rgba(0,0,0,0.1); padding: 0 6px; border-radius: 10px; margin-left: 3px; font-size: 0.8rem;">3</span>
              </div>
              <div onclick="filterFAQsByCategory('facilities')" data-category="facilities" style="padding: 0.5rem 1.2rem; background: #EDF2F7; color: #4A5568; border-radius: 20px; font-weight: 600; font-size: 0.9rem; cursor: pointer; display: flex; align-items: center; gap: 0.5rem;">
                <span style="font-size: 1.1rem;">üè†</span> Facilities <span id="legend-count-facilities" style="background: rgba(0,0,0,0.1); padding: 0 6px; border-radius: 10px; margin-left: 3px; font-size: 0.8rem;">4</span>
              </div>
              <div onclick="filterFAQsByCategory('listing')" data-category="listing" style="padding: 0.5rem 1.2rem; background: #EDF2F7; color: #4A5568; border-radius: 20px; font-weight: 600; font-size: 0.9rem; cursor: pointer; display: flex; align-items: center; gap: 0.5rem;">
                <span style="font-size: 1.1rem;">üìã</span> Listing <span id="legend-count-listing" style="background: rgba(0,0,0,0.1); padding: 0 6px; border-radius: 10px; margin-left: 3px; font-size: 0.8rem;">3</span>
              </div>
              <div onclick="filterFAQsByCategory('admin')" data-category="admin" style="padding: 0.5rem 1.2rem; background: #EDF2F7; color: #4A5568; border-radius: 20px; font-weight: 600; font-size: 0.9rem; cursor: pointer; display: flex; align-items: center; gap: 0.5rem;">
                <span style="font-size: 1.1rem;">üë®‚Äçüíª</span> Admin <span id="legend-count-admin" style="background: rgba(0,0,0,0.1); padding: 0 6px; border-radius: 10px; margin-left: 3px; font-size: 0.8rem;">3</span>
              </div>
              <div onclick="filterFAQsByCategory('safety')" data-category="safety" style="padding: 0.5rem 1.2rem; background: #EDF2F7; color: #4A5568; border-radius: 20px; font-weight: 600; font-size: 0.9rem; cursor: pointer; display: flex; align-items: center; gap: 0.5rem;">
                <span style="font-size: 1.1rem;">üõ°Ô∏è</span> Safety <span id="legend-count-safety" style="background: rgba(0,0,0,0.1); padding: 0 6px; border-radius: 10px; margin-left: 3px; font-size: 0.8rem;">4</span>
              </div>
              <div onclick="filterFAQsByCategory('security')" data-category="security" style="padding: 0.5rem 1.2rem; background: #EDF2F7; color: #4A5568; border-radius: 20px; font-weight: 600; font-size: 0.9rem; cursor: pointer; display: flex; align-items: center; gap: 0.5rem;">
                <span style="font-size: 1.1rem;">‚ö†Ô∏è</span> Scam <span id="legend-count-security" style="background: rgba(0,0,0,0.1); padding: 0 6px; border-radius: 10px; margin-left: 3px; font-size: 0.8rem;">2</span>
              </div>
            </div>
          
            <!-- Mobile Horizontal Ad (shown only on mobile) -->
            <div class="mobile-faq-ad" style="display: none; height: 100px; background: #f0f0f0; border-radius: 8px; margin-bottom: 1.5rem; align-items: center; justify-content: center;">
              <span style="font-weight: bold; color: #999; font-size: 1rem; letter-spacing: 1px;">ADVERTISEMENT</span>
            </div>
            
            <!-- General Section -->
            <div class="faq-category-section" data-category="general" style="background-color: #f0f0f0; padding: 1rem; margin: 2rem 0 1rem 0; border-radius: 8px; text-align: center; width: 100%; display: flex; justify-content: center; align-items: center; gap: 0.5rem;">
              <span style="font-size: 1.5rem;">‚ÑπÔ∏è</span>
              <h3 style="color: #8B5CF6; font-size: 1.3rem; font-weight: 700; margin: 0;">GENERAL</h3>
            </div>
            
            <div class="faq-item" data-category="general" style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 1rem; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
              <div class="faq-question" style="padding: 1.5rem; cursor: pointer; background: #f8f9fa; border-bottom: 1px solid #e0e0e0; font-weight: 600; color: #333; display: flex; justify-content: space-between; align-items: center;" onclick="toggleFAQ(this)">
                <span>What is HOSTALL?</span>
                <span class="faq-icon" style="font-size: 1.2rem; color: #8B5CF6;">+</span>
              </div>
              <div class="faq-answer" style="padding: 1.5rem; background: white; color: #666; line-height: 1.6; display: none;">
                HOSTALL is an online platform where users can explore, compare, and contact hostels based on their preferences for location, rent, room type, and facilities.

              </div>
            </div>

            <div class="faq-item" data-category="general" style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 1rem; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
              <div class="faq-question" style="padding: 1.5rem; cursor: pointer; background: #f8f9fa; border-bottom: 1px solid #e0e0e0; font-weight: 600; color: #333; display: flex; justify-content: space-between; align-items: center;" onclick="toggleFAQ(this)">
                <span>Who can use HOSTALL?</span>
                <span class="faq-icon" style="font-size: 1.2rem; color: #8B5CF6;">+</span>
              </div>
              <div class="faq-answer" style="padding: 1.5rem; background: white; color: #666; line-height: 1.6; display: none;">
                Students, working professionals, and hostel seekers from any city can use HOSTALL to find accommodation easily.

              </div>
            </div>

            <div class="faq-item" data-category="general" style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 1rem; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
              <div class="faq-question" style="padding: 1.5rem; cursor: pointer; background: #f8f9fa; border-bottom: 1px solid #e0e0e0; font-weight: 600; color: #333; display: flex; justify-content: space-between; align-items: center;" onclick="toggleFAQ(this)">
                <span>Does HOSTALL manage the hostels listed on the website?</span>
                <span class="faq-icon" style="font-size: 1.2rem; color: #8B5CF6;">+</span>
              </div>
              <div class="faq-answer" style="padding: 1.5rem; background: white; color: #666; line-height: 1.6; display: none;">
                No, HOSTALL only provides listing services. The actual management, bookings, and services are handled by the hostel management themselves.
              </div>
            </div>

            <!-- Booking FAQs -->
            <!-- Mobile Horizontal Ad (shown only on mobile) -->
            <div class="mobile-faq-ad" style="display: none; height: 100px; background: #f0f0f0; border-radius: 8px; margin-bottom: 1.5rem; align-items: center; justify-content: center;">
              <span style="font-weight: bold; color: #999; font-size: 1rem; letter-spacing: 1px;">ADVERTISEMENT</span>
            </div>
            
            <!-- Booking Section -->
            <div class="faq-category-section" data-category="booking" style="background-color: #f0f0f0; padding: 1rem; margin: 2rem 0 1rem 0; border-radius: 8px; text-align: center; width: 100%; display: flex; justify-content: center; align-items: center; gap: 0.5rem;">
              <span style="font-size: 1.5rem;">üìù</span>
              <h3 style="color: #8B5CF6; font-size: 1.3rem; font-weight: 700; margin: 0;">BOOKING</h3>
            </div>
            
            <div class="faq-item" data-category="booking" style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 1rem; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
              <div class="faq-question" style="padding: 1.5rem; cursor: pointer; background: #f8f9fa; border-bottom: 1px solid #e0e0e0; font-weight: 600; color: #333; display: flex; justify-content: space-between; align-items: center;" onclick="toggleFAQ(this)">
                <span>How do I book a room through HOSTALL?</span>
                <span class="faq-icon" style="font-size: 1.2rem; color: #8B5CF6;">+</span>
              </div>
              <div class="faq-answer" style="padding: 1.5rem; background: white; color: #666; line-height: 1.6; display: none;">
                Browse listings, choose a hostel, and contact the owner directly through the provided contact number or WhatsApp. Bookings are finalized directly with the hostel.

              </div>
            </div>

            <div class="faq-item" data-category="booking" style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 1rem; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
              <div class="faq-question" style="padding: 1.5rem; cursor: pointer; background: #f8f9fa; border-bottom: 1px solid #e0e0e0; font-weight: 600; color: #333; display: flex; justify-content: space-between; align-items: center;" onclick="toggleFAQ(this)">
                <span>Can I reserve a room online through HOSTALL?</span>
                <span class="faq-icon" style="font-size: 1.2rem; color: #8B5CF6;">+</span>
              </div>
              <div class="faq-answer" style="padding: 1.5rem; background: white; color: #666; line-height: 1.6; display: none;">
                No, HOSTALL does not offer an online reservation system. All bookings are made by communicating directly with the hostel provider.
              </div>
            </div>

            <div class="faq-item" data-category="booking" style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 1rem; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
              <div class="faq-question" style="padding: 1.5rem; cursor: pointer; background: #f8f9fa; border-bottom: 1px solid #e0e0e0; font-weight: 600; color: #333; display: flex; justify-content: space-between; align-items: center;" onclick="toggleFAQ(this)">
                <span>Is it necessary to visit the hostel before booking?</span>
                <span class="faq-icon" style="font-size: 1.2rem; color: #8B5CF6;">+</span>
              </div>
              <div class="faq-answer" style="padding: 1.5rem; background: white; color: #666; line-height: 1.6; display: none;">
                It is highly recommended to visit the hostel or ask for a video call tour before confirming any booking or making payments.
              </div>
            </div>

            <div class="faq-item" data-category="booking" style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 1rem; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
              <div class="faq-question" style="padding: 1.5rem; cursor: pointer; background: #f8f9fa; border-bottom: 1px solid #e0e0e0; font-weight: 600; color: #333; display: flex; justify-content: space-between; align-items: center;" onclick="toggleFAQ(this)">
                <span>How early should I book to secure a room?</span>
                <span class="faq-icon" style="font-size: 1.2rem; color: #8B5CF6;">+</span>
              </div>
              <div class="faq-answer" style="padding: 1.5rem; background: white; color: #666; line-height: 1.6; display: none;">
                It's best to book at least 1‚Äì2 weeks in advance, especially during academic admissions or job joining periods when demand is high.
              </div>
            </div>

            <!-- Mobile Ad before Payment Section -->
            <div class="mobile-faq-ad" style="display: none; height: 100px; background: #f0f0f0; border-radius: 8px; margin-bottom: 1.5rem; align-items: center; justify-content: center;">
              <span style="font-weight: bold; color: #999; font-size: 1rem; letter-spacing: 1px;">ADVERTISEMENT</span>
            </div>

            <!-- Payment Section -->
            <div class="faq-category-section" data-category="payment" style="background-color: #f0f0f0; padding: 1rem; margin: 2rem 0 1rem 0; border-radius: 8px; text-align: center; width: 100%; display: flex; justify-content: center; align-items: center; gap: 0.5rem;">
              <span style="font-size: 1.5rem;">üí∞</span>
              <h3 style="color: #8B5CF6; font-size: 1.3rem; font-weight: 700; margin: 0;">PAYMENT</h3>
            </div>
            
            <div class="faq-item" data-category="payment" style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 1rem; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
              <div class="faq-question" style="padding: 1.5rem; cursor: pointer; background: #f8f9fa; border-bottom: 1px solid #e0e0e0; font-weight: 600; color: #333; display: flex; justify-content: space-between; align-items: center;" onclick="toggleFAQ(this)">
                <span>Does HOSTALL accept or process payments?</span>
                <span class="faq-icon" style="font-size: 1.2rem; color: #8B5CF6;">+</span>
              </div>
              <div class="faq-answer" style="padding: 1.5rem; background: white; color: #666; line-height: 1.6; display: none;">
                No, all payments are handled directly between the user and the hostel management. HOSTALL does not receive or process any transactions.
              </div>
            </div>

            <div class="faq-item" data-category="payment" style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 1rem; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
              <div class="faq-question" style="padding: 1.5rem; cursor: pointer; background: #f8f9fa; border-bottom: 1px solid #e0e0e0; font-weight: 600; color: #333; display: flex; justify-content: space-between; align-items: center;" onclick="toggleFAQ(this)">
                <span>Is there any registration or usage fee for using HOSTALL?</span>
                <span class="faq-icon" style="font-size: 1.2rem; color: #8B5CF6;">+</span>
              </div>
              <div class="faq-answer" style="padding: 1.5rem; background: white; color: #666; line-height: 1.6; display: none;">
                No, HOSTALL is completely free for users. You can browse listings, apply filters, and contact hostels without any charges.
              </div>
            </div>

            <div class="faq-item" data-category="payment" style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 1rem; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
              <div class="faq-question" style="padding: 1.5rem; cursor: pointer; background: #f8f9fa; border-bottom: 1px solid #e0e0e0; font-weight: 600; color: #333; display: flex; justify-content: space-between; align-items: center;" onclick="toggleFAQ(this)">
                <span>What should I do if a hostel demands advance payment?</span>
                <span class="faq-icon" style="font-size: 1.2rem; color: #8B5CF6;">+</span>
              </div>
              <div class="faq-answer" style="padding: 1.5rem; background: white; color: #666; line-height: 1.6; display: none;">
                Always verify the hostel's authenticity through calls or visits. Avoid paying large amounts in advance unless you are confident and have proof of communication.
              </div>
            </div>

            <div class="faq-item" data-category="payment" style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 1rem; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
              <div class="faq-question" style="padding: 1.5rem; cursor: pointer; background: #f8f9fa; border-bottom: 1px solid #e0e0e0; font-weight: 600; color: #333; display: flex; justify-content: space-between; align-items: center;" onclick="toggleFAQ(this)">
                <span>Are payment terms mentioned in the listings?</span>
                <span class="faq-icon" style="font-size: 1.2rem; color: #8B5CF6;">+</span>
              </div>
              <div class="faq-answer" style="padding: 1.5rem; background: white; color: #666; line-height: 1.6; display: none;">
                Some hostels may mention deposit or monthly rent terms in their descriptions. For exact details, confirm directly with the hostel owner.
              </div>
            </div>

            <!-- Mobile Ad before Facilities Section -->
            <div class="mobile-faq-ad" style="display: none; height: 100px; background: #f0f0f0; border-radius: 8px; margin-bottom: 1.5rem; align-items: center; justify-content: center;">
              <span style="font-weight: bold; color: #999; font-size: 1rem; letter-spacing: 1px;">ADVERTISEMENT</span>
            </div>

            <!-- Facilities Section -->
            <div class="faq-category-section" data-category="facilities" style="background-color: #f0f0f0; padding: 1rem; margin: 2rem 0 1rem 0; border-radius: 8px; text-align: center; width: 100%; display: flex; justify-content: center; align-items: center; gap: 0.5rem;">
              <span style="font-size: 1.5rem;">üè†</span>
              <h3 style="color: #8B5CF6; font-size: 1.3rem; font-weight: 700; margin: 0;">FACILITIES</h3>
            </div>
            
            <div class="faq-item" data-category="facilities" style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 1rem; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
              <div class="faq-question" style="padding: 1.5rem; cursor: pointer; background: #f8f9fa; border-bottom: 1px solid #e0e0e0; font-weight: 600; color: #333; display: flex; justify-content: space-between; align-items: center;" onclick="toggleFAQ(this)">
                <span>What types of rooms are available in hostels listed on HOSTALL?</span>
                <span class="faq-icon" style="font-size: 1.2rem; color: #8B5CF6;">+</span>
              </div>
              <div class="faq-answer" style="padding: 1.5rem; background: white; color: #666; line-height: 1.6; display: none;">
                Hostels usually offer single, double, triple-sharing, or dorm-style rooms. Room types are mentioned in each listing.
              </div>
            </div>

            <div class="faq-item" data-category="facilities" style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 1rem; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
              <div class="faq-question" style="padding: 1.5rem; cursor: pointer; background: #f8f9fa; border-bottom: 1px solid #e0e0e0; font-weight: 600; color: #333; display: flex; justify-content: space-between; align-items: center;" onclick="toggleFAQ(this)">
                <span>Can I find hostels with mess or kitchen facilities?</span>
                <span class="faq-icon" style="font-size: 1.2rem; color: #8B5CF6;">+</span>
              </div>
              <div class="faq-answer" style="padding: 1.5rem; background: white; color: #666; line-height: 1.6; display: none;">
                Yes, use the filters to find hostels offering mess, kitchen access, or cooking space for residents.
              </div>
            </div>

            <div class="faq-item" data-category="facilities" style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 1rem; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
              <div class="faq-question" style="padding: 1.5rem; cursor: pointer; background: #f8f9fa; border-bottom: 1px solid #e0e0e0; font-weight: 600; color: #333; display: flex; justify-content: space-between; align-items: center;" onclick="toggleFAQ(this)">
                <span>Are there female-only or male-only hostels on the site?</span>
                <span class="faq-icon" style="font-size: 1.2rem; color: #8B5CF6;">+</span>
              </div>
              <div class="faq-answer" style="padding: 1.5rem; background: white; color: #666; line-height: 1.6; display: none;">
                Yes, HOSTALL features gender-specific hostels. You can filter listings by gender preference to find suitable accommodation.
              </div>
            </div>

            <div class="faq-item" data-category="facilities" style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 1rem; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
              <div class="faq-question" style="padding: 1.5rem; cursor: pointer; background: #f8f9fa; border-bottom: 1px solid #e0e0e0; font-weight: 600; color: #333; display: flex; justify-content: space-between; align-items: center;" onclick="toggleFAQ(this)">
                <span>What amenities can I search for using filters?</span>
                <span class="faq-icon" style="font-size: 1.2rem; color: #8B5CF6;">+</span>
              </div>
              <div class="faq-answer" style="padding: 1.5rem; background: white; color: #666; line-height: 1.6; display: none;">
                You can filter hostels based on Wi-Fi, laundry, AC/non-AC, attached bathroom, electricity backup, parking, and location.
              </div>
            </div>

            <div class="faq-item" data-category="facilities" style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 1rem; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
              <div class="faq-question" style="padding: 1.5rem; cursor: pointer; background: #f8f9fa; border-bottom: 1px solid #e0e0e0; font-weight: 600; color: #333; display: flex; justify-content: space-between; align-items: center;" onclick="toggleFAQ(this)">
                <span>How can I know if a hostel is safe and secure?</span>
                <span class="faq-icon" style="font-size: 1.2rem; color: #8B5CF6;">+</span>
              </div>
              <div class="faq-answer" style="padding: 1.5rem; background: white; color: #666; line-height: 1.6; display: none;">
                Look for listings that mention CCTV, warden availability, or gated premises. It's also a good idea to ask about safety directly from the hostel owner.
              </div>
            </div>
            
            <!-- New Category Sections for Additional FAQs -->
            
            <!-- Mobile Ad before Listing Section -->
            <div class="mobile-faq-ad" style="display: none; height: 100px; background: #f0f0f0; border-radius: 8px; margin-bottom: 1.5rem; align-items: center; justify-content: center;">
              <span style="font-weight: bold; color: #999; font-size: 1rem; letter-spacing: 1px;">ADVERTISEMENT</span>
            </div>

            <!-- Listing & Management Section -->
            <div class="faq-category-section" data-category="listing" style="background-color: #f0f0f0; padding: 1rem; margin: 2rem 0 1rem 0; border-radius: 8px; text-align: center; width: 100%; display: flex; justify-content: center; align-items: center; gap: 0.5rem;">
              <span style="font-size: 1.5rem;">üìã</span>
              <h3 style="color: #8B5CF6; font-size: 1.3rem; font-weight: 700; margin: 0;">LISTING & MANAGEMENT</h3>
            </div>

            <!-- Admin Panel Section -->
            <div class="faq-category-section" data-category="admin" style="background-color: #f0f0f0; padding: 1rem; margin: 2rem 0 1rem 0; border-radius: 8px; text-align: center; width: 100%; display: flex; justify-content: center; align-items: center; gap: 0.5rem;">
              <span style="font-size: 1.5rem;">üë®‚Äçüíª</span>
              <h3 style="color: #8B5CF6; font-size: 1.3rem; font-weight: 700; margin: 0;">ADMIN PANEL</h3>
            </div>

            <!-- Trust & Safety Section -->
            <div class="faq-category-section" data-category="safety" style="background-color: #f0f0f0; padding: 1rem; margin: 2rem 0 1rem 0; border-radius: 8px; text-align: center; width: 100%; display: flex; justify-content: center; align-items: center; gap: 0.5rem;">
              <span style="font-size: 1.5rem;">üõ°Ô∏è</span>
              <h3 style="color: #8B5CF6; font-size: 1.3rem; font-weight: 700; margin: 0;">TRUST, SAFETY & VERIFICATION</h3>
            </div>

            <!-- Scam Protection Section -->
            <div class="faq-category-section" data-category="security" style="background-color: #f0f0f0; padding: 1rem; margin: 2rem 0 1rem 0; border-radius: 8px; text-align: center; width: 100%; display: flex; justify-content: center; align-items: center; gap: 0.5rem;">
              <span style="font-size: 1.5rem;">‚ö†Ô∏è</span>
              <h3 style="color: #8B5CF6; font-size: 1.3rem; font-weight: 700; margin: 0;">SCAM PROTECTION</h3>
            </div>

            <!-- FAQ Summary Box at the end -->
            <div style="background: #8B5CF6; color: white; border-radius: 10px; padding: 1.5rem; margin-top: 2rem; display: flex; text-align: center;">
              <div style="flex: 1; border-right: 1px solid rgba(255, 255, 255, 0.2); padding: 1rem;">
                <div style="font-size: 2.5rem; font-weight: 700; margin-bottom: 0.5rem;" id="faq-helpful-count">0</div>
                <div style="font-size: 1rem; opacity: 0.9;">Helpful<br>Votes</div>
              </div>
              <div style="flex: 1; padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.2);">
                <div style="font-size: 2.5rem; font-weight: 700; margin-bottom: 0.5rem;" id="faq-questions-count">24</div>
                <div style="font-size: 1rem; opacity: 0.9;">Questions<br>Answered</div>
              </div>
              <div style="flex: 1; padding: 1rem;">
                <div style="font-size: 2.5rem; font-weight: 700; margin-bottom: 0.5rem;" id="faq-helpful-questions-count">0</div>
                <div style="font-size: 1rem; opacity: 0.9;">Helpful<br>Questions</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="contact">
    <div class="content-section">
      <!-- Sidebar Ad Container -->
      <div style="display: grid; grid-template-columns: 1fr 300px; gap: 2rem; align-items: start;">
        <div>
          <h2 style="text-align: center; font-size: 2.5rem; margin-bottom: 2rem; color: #1A1A1A;">Connect Us</h2>
      <p style="text-align: center; margin-bottom: 3rem; color: #4A5568; font-size: 1.1rem;">
        Have questions? Need help finding the perfect hostel? We're here to assist you!
      </p>
      
      <div class="contact-grid">
        <div class="contact-item">
          <h3>üìß Email Support</h3>
          <p><a href="mailto:teamhostall@gmail.com">teamhostall@gmail.com</a></p>
          <p style="font-size: 0.9rem; margin-top: 0.5rem; color: #4A5568;">Response within 24 hours</p>
        </div>
        
        <div class="contact-item feedback-form-container">
          <h3>üí¨ Send Feedback</h3>
          <form id="feedback-form" class="feedback-form">
            <div class="form-group">
              <input type="text" id="feedback-name" placeholder="Your Name" required>
            </div>
            <div class="form-group">
              <input type="email" id="feedback-email" placeholder="Your Email" required>
            </div>
            <div class="form-group">
              <select id="feedback-type" required>
                <option value="">Select Feedback Type</option>
                <option value="suggestion">Suggestion</option>
                <option value="complaint">Complaint</option>
                <option value="compliment">Compliment</option>
                <option value="bug-report">Bug Report</option>
                <option value="other">Other</option>
              </select>
            </div>
            <div class="form-group">
              <textarea id="feedback-message" placeholder="Your feedback..." rows="4" required></textarea>
            </div>
            <button type="submit" class="btn-primary">Send Feedback</button>
          </form>
        </div>
        
        <div class="contact-item">
          <h3>üì± Follow Us</h3>
          <div class="social-links-list">
            <p>
              <a href="https://www.facebook.com/share/v/1YbEMKcYBW/?mibextid=wwXIfr" target="_blank" class="social-link">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="#1877F2" style="vertical-align: middle; margin-right: 8px;">
                  <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                </svg>
                Facebook
              </a>
            </p>
            <p>
              <a href="https://www.instagram.com/yourhostall/" target="_blank" class="social-link">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="#E4405F" style="vertical-align: middle; margin-right: 8px;">
                  <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                </svg>
                Instagram
              </a>
            </p>
            <p>
              <a href="https://tiktok.com/@teamhostall" target="_blank" class="social-link">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="#000000" style="vertical-align: middle; margin-right: 8px;">
                  <path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/>
                </svg>
                TikTok
              </a>
            </p>
            <p>
              <a href="https://whatsapp.com/channel/0029VbAikYk4o7qO5966Ux3u" target="_blank" class="social-link">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="#25D366" style="vertical-align: middle; margin-right: 8px;">
                  <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.893 3.488"/>
                </svg>
                WhatsApp Channel
              </a>
            </p>
          </div>
          <p style="font-size: 0.9rem; margin-top: 0.5rem; color: #4A5568;">Latest updates & tips</p>
        </div>
        
        <div class="contact-item">
          <h3>üïí Support Hours</h3>
          <p>Monday - Friday: 9 AM - 8 PM</p>
          <p>Saturday - Sunday: 10 AM - 6 PM</p>
          <p style="font-size: 0.9rem; margin-top: 0.5rem; color: #4A5568;">Pakistan Standard Time</p>
        </div>
      </div>
    </div>
  </section>

  <section id="feedback">
    <div class="content-section">
      <h2 style="text-align: center; font-size: 2.5rem; margin-bottom: 2rem; color: #1A1A1A;">Your Feedback Matters</h2>
      <p style="text-align: center; margin-bottom: 3rem; color: #4A5568; font-size: 1.1rem;">
        Help us improve HOSTALL by sharing your thoughts and suggestions
      </p>
      
      <div class="form-container">
        <div class="form-group">
          <label>Your Name (Optional)</label>
          <input type="text" placeholder="Enter your name">
        </div>
        <div class="form-group">
          <label>Email (Optional)</label>
          <input type="email" placeholder="your@email.com">
        </div>
        <div class="form-group">
          <label>Feedback Type</label>
          <select>
            <option>General Feedback</option>
            <option>Bug Report</option>
            <option>Feature Request</option>
            <option>Hostel Suggestion</option>
            <option>Complaint</option>
          </select>
        </div>
        <div class="form-group">
          <label>Your Message</label>
          <textarea placeholder="Share your thoughts, suggestions, or report any issues..." rows="6"></textarea>
        </div>
        <button style="width: 100%;">Submit Feedback</button>
        </div>
        </div>
        
        <!-- Sidebar Ad -->
        <div class="ad-container sidebar-ad">
          <div class="ad-label">Advertisement</div>
          <ins class="adsbygoogle ad-rectangle"
               style="display:block"
               data-ad-client="ca-pub-XXXXXXXXXXXXXXXXX"
               data-ad-slot="XXXXXXXXXX"
               data-ad-format="auto"
               data-full-width-responsive="true"></ins>
          <script>
               (adsbygoogle = window.adsbygoogle || []).push({});
          </script>
        </div>
      </div>
    </div>
  </section>

  <!-- Hostel Owner Registration Page -->
  <section id="register">
    <div class="content-section">
      <!-- Hero Section -->
      <div class="registration-hero" style="background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%); color: white; padding: 4rem 2rem; border-radius: 20px; margin-bottom: 3rem; text-align: center;">
        <div style="font-size: 4rem; margin-bottom: 1rem;">üè†</div>
        <h1 style="font-size: 3rem; margin-bottom: 1rem; font-weight: 700;">Join Our Platform</h1>
        <p style="font-size: 1.2rem; opacity: 0.9; max-width: 600px; margin: 0 auto;">Register your hostel and connect with hundreds of students looking for accommodation in Lahore</p>
      </div>

      <!-- Benefits Section -->


      <!-- Registration Form -->
      <div style="background: white; border-radius: 20px; padding: 3rem; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); max-width: 800px; margin: 0 auto;">
        <div style="text-align: center; margin-bottom: 3rem;">
          <h2 style="color: #2D3748; font-size: 2.5rem; margin-bottom: 1rem;">Register Your Hostel</h2>
          <p style="color: #4A5568; font-size: 1.1rem;">Fill out the form below and we'll get you started within 24-48 hours</p>
        </div>

        <!-- Progress Steps -->
        <div class="registration-progress" style="display: flex; justify-content: center; margin-bottom: 3rem;">
          <div class="progress-step active" id="reg-step-1" style="display: flex; align-items: center; margin: 0 1rem;">
            <div style="width: 30px; height: 30px; border-radius: 50%; background: #8B5CF6; color: white; display: flex; align-items: center; justify-content: center; font-weight: 600; margin-right: 0.5rem;">1</div>
            <span style="color: #8B5CF6; font-weight: 600;">Personal Info</span>
          </div>
          <div style="width: 50px; height: 2px; background: #E2E8F0; align-self: center;"></div>
          <div class="progress-step" id="reg-step-2" style="display: flex; align-items: center; margin: 0 1rem;">
            <div style="width: 30px; height: 30px; border-radius: 50%; background: #E2E8F0; color: #4A5568; display: flex; align-items: center; justify-content: center; font-weight: 600; margin-right: 0.5rem;">2</div>
            <span style="color: #4A5568;">Hostel Details</span>
          </div>
          <div style="width: 50px; height: 2px; background: #E2E8F0; align-self: center;"></div>
          <div class="progress-step" id="reg-step-3" style="display: flex; align-items: center; margin: 0 1rem;">
            <div style="width: 30px; height: 30px; border-radius: 50%; background: #E2E8F0; color: #4A5568; display: flex; align-items: center; justify-content: center; font-weight: 600; margin-right: 0.5rem;">3</div>
            <span style="color: #4A5568;">Review</span>
          </div>
        </div>

        <!-- Step 1: Personal Information -->
        <div id="reg-form-step-1" class="reg-form-step">
          <h3 style="color: #2D3748; margin-bottom: 2rem; display: flex; align-items: center;">
            <span style="font-size: 1.5rem; margin-right: 0.5rem;">üë§</span>
            Personal Information
          </h3>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 2rem;">
            <div class="form-group">
              <label style="display: block; margin-bottom: 0.5rem; color: #374151; font-weight: 600;">Full Name *</label>
              <input id="reg-owner-name" type="text" placeholder="Enter your full name" style="width: 100%; padding: 0.75rem; border: 2px solid #E2E8F0; border-radius: 8px; font-size: 1rem;" required>
            </div>
            <div class="form-group">
              <label style="display: block; margin-bottom: 0.5rem; color: #374151; font-weight: 600;">Email Address *</label>
              <input id="reg-owner-email" type="email" placeholder="Enter your email" style="width: 100%; padding: 0.75rem; border: 2px solid #E2E8F0; border-radius: 8px; font-size: 1rem;" required>
            </div>
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 2rem;">
            <div class="form-group">
              <label style="display: block; margin-bottom: 0.5rem; color: #374151; font-weight: 600;">Phone Number *</label>
              <input id="reg-owner-phone" type="tel" placeholder="Enter your phone" style="width: 100%; padding: 0.75rem; border: 2px solid #E2E8F0; border-radius: 8px; font-size: 1rem;" required>
            </div>
            <div class="form-group">
              <label style="display: block; margin-bottom: 0.5rem; color: #374151; font-weight: 600;">WhatsApp Number</label>
              <input id="reg-owner-whatsapp" type="tel" placeholder="Enter WhatsApp number" style="width: 100%; padding: 0.75rem; border: 2px solid #E2E8F0; border-radius: 8px; font-size: 1rem;">
            </div>
          </div>
          <button onclick="nextRegStep(2)" style="width: 100%; padding: 1rem; background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%); color: white; border: none; border-radius: 10px; font-size: 1.1rem; font-weight: 600; cursor: pointer;">
            Next: Hostel Details ‚Üí
          </button>
        </div>

        <!-- Step 2: Hostel Details -->
        <div id="reg-form-step-2" class="reg-form-step" style="display: none;">
          <h3 style="color: #2D3748; margin-bottom: 2rem; display: flex; align-items: center;">
            <span style="font-size: 1.5rem; margin-right: 0.5rem;">üè†</span>
            Hostel Information
          </h3>
          <div class="form-group" style="margin-bottom: 1.5rem;">
            <label style="display: block; margin-bottom: 0.5rem; color: #374151; font-weight: 600;">Hostel Name *</label>
            <input id="reg-hostel-name" type="text" placeholder="Enter your hostel name" style="width: 100%; padding: 0.75rem; border: 2px solid #E2E8F0; border-radius: 8px; font-size: 1rem;" required>
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
            <div class="form-group">
              <label style="display: block; margin-bottom: 0.5rem; color: #374151; font-weight: 600;">Location/Address *</label>
              <input id="reg-hostel-location" type="text" placeholder="Enter location" style="width: 100%; padding: 0.75rem; border: 2px solid #E2E8F0; border-radius: 8px; font-size: 1rem;" required>
            </div>
            <div class="form-group">
              <label style="display: block; margin-bottom: 0.5rem; color: #374151; font-weight: 600;">Gender Type *</label>
              <select id="reg-hostel-gender" style="width: 100%; padding: 0.75rem; border: 2px solid #E2E8F0; border-radius: 8px; font-size: 1rem;" required>
                <option value="">Select type</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
              </select>
            </div>
          </div>
          <div class="form-group" style="margin-bottom: 1.5rem;">
            <label style="display: block; margin-bottom: 0.5rem; color: #374151; font-weight: 600;">Room Types & Pricing *</label>
            <div style="background: #F9FAFB; padding: 1rem; border-radius: 8px; border: 2px solid #E2E8F0;">
              <p style="margin-top: 0; margin-bottom: 0.75rem; font-size: 0.9rem; color: #6B7280;">Add room types and their price ranges. Prices should be monthly rent in PKR.</p>
              
              <div id="reg-room-types-container">
                <div class="reg-room-type-item" style="display: flex; gap: 1rem; margin-bottom: 0.5rem; align-items: center; background: white; padding: 0.75rem; border-radius: 6px;">
                  <div style="flex: 1;">
                    <select class="reg-room-type-select" style="width: 100%; padding: 0.5rem; border: 1px solid #E2E8F0; border-radius: 4px;">
                      <option value="1-bed">1-Bed Room</option>
                      <option value="2-bed">2-Bed Room</option>
                      <option value="3-bed">3-Bed Room</option>
                      <option value="4-bed">4-Bed Room</option>
                      <option value="5-bed">5-Bed Room</option>
                      <option value="6-bed">6-Bed Room</option>
                      <option value="dormitory">Dormitory</option>
                    </select>
                  </div>
                  <div style="flex: 1; display: flex; align-items: center; gap: 0.5rem;">
                    <span style="font-size: 0.9rem;">PKR</span>
                    <input type="number" class="reg-room-min-price" placeholder="Min" style="flex: 1; padding: 0.5rem; border: 1px solid #E2E8F0; border-radius: 4px;">
                  </div>
                  <span style="font-size: 0.9rem;">to</span>
                  <div style="flex: 1; display: flex; align-items: center; gap: 0.5rem;">
                    <span style="font-size: 0.9rem;">PKR</span>
                    <input type="number" class="reg-room-max-price" placeholder="Max" style="flex: 1; padding: 0.5rem; border: 1px solid #E2E8F0; border-radius: 4px;">
                  </div>
                  <button type="button" class="remove-reg-room-type" onclick="this.closest('.reg-room-type-item').remove(); validateRegRoomPrices();" style="background: #EF4444; color: white; border: none; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 1.1rem;">√ó</button>
                </div>
              </div>
              
              <button type="button" onclick="addRegRoomType()" style="background: #8B5CF6; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; margin-top: 0.5rem; cursor: pointer; font-size: 0.9rem;">+ Add Another Room Type</button>
            </div>
          </div>
          <div class="form-group" style="margin-bottom: 1.5rem;">
            <label style="display: block; margin-bottom: 0.5rem; color: #374151; font-weight: 600;">Available Facilities *</label>
            <div style="background: #F9FAFB; padding: 1rem; border-radius: 8px; border: 2px solid #E2E8F0;">
              <p style="margin-top: 0; margin-bottom: 0.75rem; font-size: 0.9rem; color: #6B7280;">Select all facilities available at your hostel. Only selected facilities will be displayed to potential residents.</p>
              
              <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.75rem;">
                <!-- Mess Services -->
                <div style="background: white; padding: 0.75rem; border-radius: 6px; border: 1px solid #E2E8F0;">
                  <h5 style="margin: 0 0 0.5rem 0; color: #374151; font-size: 0.9rem; font-weight: 600;">üçΩÔ∏è Mess Services</h5>
                  <div style="display: flex; flex-direction: column; gap: 0.3rem;">
                    <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                      <input type="checkbox" id="reg-facility-breakfast" class="reg-facility-checkbox" value="breakfast">
                      <span>Breakfast</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                      <input type="checkbox" id="reg-facility-lunch" class="reg-facility-checkbox" value="lunch">
                      <span>Lunch</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                      <input type="checkbox" id="reg-facility-dinner" class="reg-facility-checkbox" value="dinner">
                      <span>Dinner</span>
                    </label>
                  </div>
                </div>
                
                <!-- Cooling & Heating -->
                <div style="background: white; padding: 0.75rem; border-radius: 6px; border: 1px solid #E2E8F0;">
                  <h5 style="margin: 0 0 0.5rem 0; color: #374151; font-size: 0.9rem; font-weight: 600;">‚ùÑÔ∏è Cooling & Heating</h5>
                  <div style="display: flex; flex-direction: column; gap: 0.3rem;">
                    <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                      <input type="checkbox" id="reg-facility-ac" class="reg-facility-checkbox" value="ac">
                      <span>Air Conditioning</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                      <input type="checkbox" id="reg-facility-cooler" class="reg-facility-checkbox" value="cooler">
                      <span>Air Cooler</span>
                    </label>
                  </div>
                </div>
                
                <!-- Security -->
                <div style="background: white; padding: 0.75rem; border-radius: 6px; border: 1px solid #E2E8F0;">
                  <h5 style="margin: 0 0 0.5rem 0; color: #374151; font-size: 0.9rem; font-weight: 600;">üîí Security</h5>
                  <div style="display: flex; flex-direction: column; gap: 0.3rem;">
                    <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                      <input type="checkbox" id="reg-facility-security" class="reg-facility-checkbox" value="security">
                      <span>Security Guard</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                      <input type="checkbox" id="reg-facility-cctv" class="reg-facility-checkbox" value="cctv">
                      <span>CCTV Surveillance</span>
                    </label>
                  </div>
                </div>
                
                <!-- Internet & Communication -->
                <div style="background: white; padding: 0.75rem; border-radius: 6px; border: 1px solid #E2E8F0;">
                  <h5 style="margin: 0 0 0.5rem 0; color: #374151; font-size: 0.9rem; font-weight: 600;">üì∂ Internet</h5>
                  <div style="display: flex; flex-direction: column; gap: 0.3rem;">
                    <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                      <input type="checkbox" id="reg-facility-wifi" class="reg-facility-checkbox" value="wifi">
                      <span>WiFi Internet</span>
                    </label>
                  </div>
                </div>
                
                <!-- Laundry & Cleaning -->
                <div style="background: white; padding: 0.75rem; border-radius: 6px; border: 1px solid #E2E8F0;">
                  <h5 style="margin: 0 0 0.5rem 0; color: #374151; font-size: 0.9rem; font-weight: 600;">üß∫ Laundry & Cleaning</h5>
                  <div style="display: flex; flex-direction: column; gap: 0.3rem;">
                    <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                      <input type="checkbox" id="reg-facility-laundry" class="reg-facility-checkbox" value="laundry">
                      <span>Laundry Service</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                      <input type="checkbox" id="reg-facility-cleaning" class="reg-facility-checkbox" value="cleaning">
                      <span>Cleaning Services</span>
                    </label>
                  </div>
                </div>
                
                <!-- Kitchen & Cooking -->
                <div style="background: white; padding: 0.75rem; border-radius: 6px; border: 1px solid #E2E8F0;">
                  <h5 style="margin: 0 0 0.5rem 0; color: #374151; font-size: 0.9rem; font-weight: 600;">üç≥ Kitchen & Cooking</h5>
                  <div style="display: flex; flex-direction: column; gap: 0.3rem;">
                    <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                      <input type="checkbox" id="reg-facility-kitchen" class="reg-facility-checkbox" value="kitchen">
                      <span>Kitchen for Self Cooking</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                      <input type="checkbox" id="reg-facility-oven" class="reg-facility-checkbox" value="oven">
                      <span>Oven/Microwave</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                      <input type="checkbox" id="reg-facility-refrigerator" class="reg-facility-checkbox" value="refrigerator">
                      <span>Refrigerator</span>
                    </label>
                  </div>
                </div>
                
                <!-- Power & Utilities -->
                <div style="background: white; padding: 0.75rem; border-radius: 6px; border: 1px solid #E2E8F0;">
                  <h5 style="margin: 0 0 0.5rem 0; color: #374151; font-size: 0.9rem; font-weight: 600;">‚ö° Power & Utilities</h5>
                  <div style="display: flex; flex-direction: column; gap: 0.3rem;">
                    <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                      <input type="checkbox" id="reg-facility-ups" class="reg-facility-checkbox" value="ups">
                      <span>UPS Backup</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                      <input type="checkbox" id="reg-facility-generator" class="reg-facility-checkbox" value="generator">
                      <span>Generator Backup</span>
                    </label>
                  </div>
                </div>
                
                <!-- Parking -->
                <div style="background: white; padding: 0.75rem; border-radius: 6px; border: 1px solid #E2E8F0;">
                  <h5 style="margin: 0 0 0.5rem 0; color: #374151; font-size: 0.9rem; font-weight: 600;">üöó Parking</h5>
                  <div style="display: flex; flex-direction: column; gap: 0.3rem;">
                    <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                      <input type="checkbox" id="reg-facility-parking" class="reg-facility-checkbox" value="parking">
                      <span>Parking Space</span>
                    </label>
                  </div>
                </div>
              </div>
              
              <p style="margin-top: 1rem; margin-bottom: 0; font-size: 0.8rem; color: #EF4444; font-style: italic;">Note: Facilities not selected will be shown as "Please inquire for details" to potential residents.</p>
            </div>
          </div>
          
          <div class="form-group" style="margin-bottom: 2rem;">
            <label style="display: block; margin-bottom: 0.5rem; color: #374151; font-weight: 600;">Additional Description</label>
            <textarea id="reg-hostel-description" placeholder="Describe your hostel rules, location details, special features, etc." rows="4" style="width: 100%; padding: 0.75rem; border: 2px solid #E2E8F0; border-radius: 8px; font-size: 1rem; resize: vertical;"></textarea>
            <p style="margin-top: 0.5rem; margin-bottom: 0; font-size: 0.8rem; color: #6B7280;">Optional: Add any additional information not covered by the facilities checkboxes above.</p>
          </div>
          <div style="display: flex; gap: 1rem;">
            <button onclick="nextRegStep(1)" style="flex: 1; padding: 1rem; background: #6B7280; color: white; border: none; border-radius: 10px; font-size: 1rem; font-weight: 600; cursor: pointer;">
              ‚Üê Previous
            </button>
            <button onclick="nextRegStep(3)" style="flex: 2; padding: 1rem; background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%); color: white; border: none; border-radius: 10px; font-size: 1rem; font-weight: 600; cursor: pointer;">
              Review Information ‚Üí
            </button>
          </div>
        </div>

        <!-- Step 3: Review & Submit -->
        <div id="reg-form-step-3" class="reg-form-step" style="display: none;">
          <h3 style="color: #2D3748; margin-bottom: 2rem; display: flex; align-items: center;">
            <span style="font-size: 1.5rem; margin-right: 0.5rem;">‚úÖ</span>
            Review & Submit
          </h3>
          <div style="background: #F9FAFB; border-radius: 12px; padding: 2rem; margin-bottom: 2rem;">
            <h4 style="color: #2D3748; margin-bottom: 1rem;">üìã Registration Summary</h4>
            <div id="reg-summary" style="color: #4A5568; line-height: 1.8;"></div>
          </div>
          
          <div style="background: #FEF9E7; border: 1px solid #F6E05E; border-radius: 10px; padding: 1.5rem; margin-bottom: 2rem;">
            <h4 style="color: #744210; margin-bottom: 1rem;">üìù What happens next?</h4>
            <ul style="color: #744210; margin: 0; padding-left: 1.5rem;">
              <li>Our team will review your application within 24-48 hours</li>
              <li>We'll contact you via phone/email for verification</li>
              <li>Once approved, you'll receive admin access credentials</li>
              <li>Your hostel will be listed on our platform</li>
            </ul>
          </div>

          <div style="margin-bottom: 2rem;">
            <label style="display: flex; align-items: center; cursor: pointer;">
              <input type="checkbox" id="reg-terms" style="margin-right: 0.75rem; transform: scale(1.2);" required>
              <span style="color: #374151;">I agree to the terms and conditions and confirm all information is accurate</span>
            </label>
          </div>
          
          <div style="display: flex; gap: 1rem;">
            <button onclick="nextRegStep(2)" style="flex: 1; padding: 1rem; background: #6B7280; color: white; border: none; border-radius: 10px; font-size: 1rem; font-weight: 600; cursor: pointer;">
              ‚Üê Previous
            </button>
            <button onclick="submitRegistration()" style="flex: 2; padding: 1rem; background: linear-gradient(135deg, #10B981 0%, #059669 100%); color: white; border: none; border-radius: 10px; font-size: 1rem; font-weight: 600; cursor: pointer;">
              Submit Registration ‚úì
            </button>
          </div>
        </div>
      </div>

      <!-- Contact Support -->
      <div style="text-align: center; margin-top: 3rem; padding: 2rem; background: #F7FAFC; border-radius: 16px;">
        <h3 style="color: #2D3748; margin-bottom: 1rem;">Need Help?</h3>
        <p style="color: #4A5568; margin-bottom: 1.5rem;">Our support team is here to help you get started</p>
        <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
          <a href="tel:+923001234567" style="display: flex; align-items: center; padding: 0.75rem 1.5rem; background: #8B5CF6; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;">
            üìû Call Support
          </a>
          <a href="https://wa.me/923331536041" target="_blank" style="display: flex; align-items: center; padding: 0.75rem 1.5rem; background: #10B981; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;">
            üí¨ WhatsApp Chat
          </a>
        </div>
      </div>
    </div>
  </section>


  
  <section id="admin">
    <div class="content-section">
      <div class="admin-header">
        <h2>Admin Dashboard</h2>
      </div>
      
      <!-- Enhanced Admin Dashboard Overview -->
      <div id="admin-dashboard-overview" style="display: none; margin-bottom: 2rem;">
        <div class="analytics-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
          <div class="analytics-card">
            <div class="analytics-icon">üè†</div>
            <div class="analytics-content">
              <div class="analytics-number" id="total-hostels">0</div>
              <div class="analytics-label">Total Hostels</div>
            </div>
          </div>
          <div class="analytics-card">
            <div class="analytics-icon">üí¨</div>
            <div class="analytics-content">
              <div class="analytics-number" id="unread-messages">0</div>
              <div class="analytics-label">Unread Messages</div>
            </div>
          </div>
          <div class="analytics-card">
            <div class="analytics-icon">üìù</div>
            <div class="analytics-content">
              <div class="analytics-number" id="new-feedback">0</div>
              <div class="analytics-label">New Feedback</div>
            </div>
          </div>
          <div class="analytics-card">
            <div class="analytics-icon">üìß</div>
            <div class="analytics-content">
              <div class="analytics-number" id="pending-emails">0</div>
              <div class="analytics-label">Pending Emails</div>
            </div>
          </div>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
          <div style="background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
            <h3 style="margin-bottom: 1rem; color: #374151;">Recent Messages</h3>
            <div id="admin-messages-list" style="max-height: 300px; overflow-y: auto;">
              <!-- Messages will be populated here -->
            </div>
          </div>
          
          <div style="background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
            <h3 style="margin-bottom: 1rem; color: #374151;">Recent Feedback</h3>
            <div id="admin-feedback-list" style="max-height: 300px; overflow-y: auto;">
              <!-- Feedback will be populated here -->
            </div>
          </div>
        </div>
        
        <button onclick="updateAdminDashboard()" style="background: #8B5CF6; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; font-weight: 600; cursor: pointer; margin-bottom: 1rem;">
          üîÑ Refresh Dashboard
        </button>
      </div>

      
      <!-- Admin Login Form -->
      <div id="admin-login-form" class="form-container">
        <h3 style="text-align: center; margin-bottom: 2rem; color: #8B5CF6; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
          <i class="hgi-stroke hgi-security-lock"></i>
          Admin Login
        </h3>
        <div class="form-group">
          <label style="display: flex; align-items: center; gap: 0.5rem;">
            <i class="hgi-stroke hgi-user"></i>
            Email
          </label>
          <input id="login-user" placeholder="Enter admin email" type="email">
        </div>
        <div class="form-group">
          <label style="display: flex; align-items: center; gap: 0.5rem;">
            <i class="hgi-stroke hgi-lock-password"></i>
            Password
          </label>
          <div style="position: relative;">
            <input id="login-pass" type="password" placeholder="Enter password">
            <span class="toggle-pass" onclick="togglePass('login-pass')" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); cursor: pointer;">
              <i class="hgi-stroke hgi-view"></i>
            </span>
          </div>
        </div>

        <button onclick="adminLogin()" style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 0.5rem; background: #8B5CF6; color: white; border: none; padding: 0.75rem; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
          <i class="hgi-stroke hgi-login-01"></i>
          Login to Dashboard
        </button>
        
        <script>
          // Show admin dashboard when logged in and initialize
          document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
              if (localStorage.getItem('currentAdmin')) {
                const overview = document.getElementById('admin-dashboard-overview');
                if (overview) {
                  overview.style.display = 'block';
                  if (typeof updateAdminDashboard === 'function') {
                    updateAdminDashboard();
                  }
                }
              }
            }, 500);
          });
        </script>
        
        <div class="login-options" style="margin-top: 1.5rem; text-align: center;">
          <button onclick="showForgotPassword()" class="link-button" style="color: #8B5CF6; background: none; border: none; text-decoration: underline; cursor: pointer; margin-right: 1rem; display: inline-flex; align-items: center; gap: 0.3rem;">
            <i class="hgi-stroke hgi-forgot-password"></i>
            Forgot Password?
          </button>
          <button onclick="showNewAdminRequest()" class="link-button" style="color: #8B5CF6; background: none; border: none; text-decoration: underline; cursor: pointer; display: inline-flex; align-items: center; gap: 0.3rem;">
            <i class="hgi-stroke hgi-user-add-01"></i>
            Request Admin Access
          </button>
        </div>

        <!-- Security Dashboard Section -->
        <div id="security-dashboard" style="margin-top: 2rem; padding: 1.5rem; background: #F8FAFC; border-radius: 12px; border: 1px solid #E2E8F0; display: none;">
          <h4 style="margin: 0 0 1rem 0; color: #2D3748; font-size: 1rem; display: flex; align-items: center; gap: 0.5rem;">
            <i class="hgi-stroke hgi-security"></i>
            Security Status
          </h4>
          <div id="security-metrics" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem; margin-bottom: 1rem;">
            <!-- Security metrics will be populated here -->
          </div>
          <div style="font-size: 0.8rem; color: #6B7280; text-align: center;">
            <i class="hgi-stroke hgi-security-check"></i>
            System protected by advanced security measures
          </div>
        </div>
        
        <div class="registration-card" style="margin-top: 2rem; padding: 1.5rem; background: linear-gradient(135deg, #F7FAFC 0%, #EDF2F7 100%); border-radius: 12px; border: 1px solid #E2E8F0;">
          <div style="text-align: center; margin-bottom: 1rem;">
            <div style="font-size: 2rem; margin-bottom: 0.5rem;">üè†</div>
            <h4 style="margin: 0 0 0.5rem 0; color: #2D3748; font-size: 1.1rem;">Own a Hostel?</h4>
            <p style="margin: 0; color: #4A5568; font-size: 0.9rem; line-height: 1.4;">Join our platform to manage your hostel listings and reach more students.</p>
          </div>
          <button onclick="showRegistrationPage()" style="width: 100%; background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%); color: white; border: none; padding: 0.75rem; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
            Register as Hostel Owner
          </button>
        </div>
      </div>

      <!-- Enhanced Forgot Password Modal -->
      <div id="forgot-password-modal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 450px;">
          <span class="close" onclick="closeForgotPassword()">&times;</span>
          <div style="text-align: center; margin-bottom: 2rem;">
            <i class="hgi-stroke hgi-forgot-password" style="font-size: 3rem; color: #f59e0b; margin-bottom: 1rem;"></i>
            <h3 style="margin: 0; color: #1f2937;">Reset Your Password</h3>
            <p style="color: #6b7280; margin: 0.5rem 0 0 0; font-size: 0.9rem;">Enter your email address and we'll send you a secure reset link</p>
          </div>
          <form id="forgot-password-form">
            <div class="form-group">
              <label style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                <i class="hgi-stroke hgi-user"></i>
                Email Address
              </label>
              <input id="forgot-email" type="email" placeholder="Enter your admin email address" required style="width: 100%; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem;">
            </div>
            <button type="submit" id="forgot-password-submit" style="width: 100%; margin-bottom: 1rem; background: #f59e0b; border: none; color: white; padding: 0.75rem; border-radius: 8px; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
              <i class="hgi-stroke hgi-reset-password"></i>
              Send Reset Link
            </button>
          </form>
          <div id="forgot-password-error" class="error-message" style="display: none;"></div>
          <div id="forgot-password-success" class="success-message" style="display: none;"></div>
          <div style="text-align: center; margin-top: 1rem;">
            <button onclick="closeForgotPassword()" style="background: none; border: none; color: #6b7280; text-decoration: underline; cursor: pointer; font-size: 0.9rem;">
              Back to Login
            </button>
          </div>
        </div>
      </div>

      <!-- Enhanced Reset Password Modal -->
      <div id="reset-password-modal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 450px;">
          <span class="close" onclick="closeResetPassword()">&times;</span>
          <div style="text-align: center; margin-bottom: 2rem;">
            <i class="hgi-stroke hgi-reset-password" style="font-size: 3rem; color: #10b981; margin-bottom: 1rem;"></i>
            <h3 style="margin: 0; color: #1f2937;">Set New Password</h3>
            <p style="color: #6b7280; margin: 0.5rem 0 0 0; font-size: 0.9rem;">Create a strong, secure password for your account</p>
          </div>
          <form id="reset-password-form">
            <div class="form-group">
              <label>Reset Token</label>
              <input id="reset-token" type="text" placeholder="Enter the token from your email" required style="width: 100%; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem;">
            </div>
            <div class="form-group">
              <label style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                <i class="hgi-stroke hgi-lock-password"></i>
                New Password
              </label>
              <div style="position: relative;">
                <input id="new-password" type="password" placeholder="Enter new password" data-validate required style="width: 100%; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem;">
                <button type="button" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; color: #6b7280; cursor: pointer;" onclick="togglePasswordVisibility('new-password')">
                  <i class="hgi-stroke hgi-view" id="new-password-toggle"></i>
                </button>
              </div>
              <div id="password-strength" class="password-strength" style="margin-top: 0.5rem;"></div>
            </div>
            <div class="form-group">
              <label style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                <i class="hgi-stroke hgi-checkmark-circle-01"></i>
                Confirm Password
              </label>
              <input id="confirm-new-password" type="password" name="confirm-password" placeholder="Confirm your new password" required style="width: 100%; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem;">
              <div id="password-match" class="password-match" style="margin-top: 0.5rem;"></div>
            </div>
            <button type="submit" id="reset-password-submit" style="width: 100%; margin-bottom: 1rem; background: #10b981; border: none; color: white; padding: 0.75rem; border-radius: 8px; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
              <i class="hgi-stroke hgi-checkmark-circle-01"></i>
              Update Password
            </button>
          </form>
          <div id="reset-password-error" class="error-message" style="display: none;"></div>
          <div id="reset-password-success" class="success-message" style="display: none;"></div>
          <div style="text-align: center; margin-top: 1rem;">
            <button onclick="closeResetPassword()" style="background: none; border: none; color: #6b7280; text-decoration: underline; cursor: pointer; font-size: 0.9rem;">
              Back to Login
            </button>
          </div>
        </div>
      </div>

      <!-- New Admin Request Modal -->
      <div id="new-admin-modal" class="modal" style="display: none;">
        <div class="modal-content">
          <span class="close" onclick="closeNewAdminRequest()">&times;</span>
          <h3>Request Admin Access</h3>
          <div class="form-group">
            <label>Full Name</label>
            <input id="new-admin-name" type="text" placeholder="Enter your full name">
          </div>
          <div class="form-group">
            <label>Email Address</label>
            <input id="new-admin-email" type="email" placeholder="Enter your email">
          </div>
          <div class="form-group">
            <label>Access Type</label>
            <select id="new-admin-type" onchange="toggleHostelSelection()">
              <option value="full">Full Website Admin</option>
              <option value="hostel">Hostel Owner (Single Hostel)</option>
            </select>
          </div>
          <div class="form-group" id="hostel-selection" style="display: none;">
            <label>Select Your Hostel</label>
            <select id="new-admin-hostel">
              <option value="">Select a hostel...</option>
            </select>
          </div>
          <div class="form-group">
            <label>Reason for Access</label>
            <textarea id="new-admin-reason" placeholder="Please explain why you need admin access..." rows="3"></textarea>
          </div>
          <button onclick="submitAdminRequest()" style="width: 100%; margin-bottom: 1rem;">Submit Request</button>
          <p style="color: #6B7280; font-size: 0.9rem; text-align: center;">
            Your request will be reviewed by existing administrators.
          </p>
        </div>
      </div>

      <!-- Hostel Owner Registration Modal -->
      <div id="hostel-owner-modal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 600px;">
          <span class="close" onclick="closeHostelOwnerRegistration()">&times;</span>
          <div style="text-align: center; margin-bottom: 2rem;">
            <div style="font-size: 3rem; margin-bottom: 0.5rem;">üè†</div>
            <h3 style="margin: 0; color: #2D3748;">Register as Hostel Owner</h3>
            <p style="color: #4A5568; margin: 0.5rem 0 0 0;">Join our platform to list and manage your hostel</p>
            <a href="https://whatsapp.com/channel/0029VbAikYk4o7qO5966Ux3u" target="_blank" style="display: inline-flex; align-items: center; margin-top: 0.5rem; text-decoration: none; color: #25D366; font-size: 0.9rem; background: #f0f9f0; border-radius: 20px; padding: 0.25rem 0.75rem;">
              <svg viewBox="0 0 24 24" width="16" height="16" fill="#25D366" style="margin-right: 5px;">
                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.893 3.488"/>
              </svg>
              Need help with registration? Join our WhatsApp channel
            </a>
          </div>
          
          <div class="registration-steps" style="display: flex; justify-content: center; margin-bottom: 2rem;">
            <div class="step active" id="step-1" style="padding: 0.5rem 1rem; background: #8B5CF6; color: white; border-radius: 20px; margin: 0 0.5rem; font-size: 0.8rem; font-weight: 600;">1. Personal Info</div>
            <div class="step" id="step-2" style="padding: 0.5rem 1rem; background: #E2E8F0; color: #4A5568; border-radius: 20px; margin: 0 0.5rem; font-size: 0.8rem; font-weight: 600;">2. Hostel Details</div>
            <div class="step" id="step-3" style="padding: 0.5rem 1rem; background: #E2E8F0; color: #4A5568; border-radius: 20px; margin: 0 0.5rem; font-size: 0.8rem; font-weight: 600;">3. Verification</div>
          </div>

          <!-- Step 1: Personal Information -->
          <div id="registration-step-1" class="registration-step">
            <h4 style="margin-bottom: 1rem; color: #2D3748;">üë§ Personal Information</h4>
            <div style="text-align: right; margin-bottom: 1rem;">
              <a href="https://whatsapp.com/channel/0029VbAikYk4o7qO5966Ux3u" target="_blank" style="display: inline-flex; align-items: center; font-size: 0.85rem; color: #25D366; text-decoration: none;">
                <svg viewBox="0 0 24 24" width="14" height="14" fill="#25D366" style="margin-right: 4px;">
                  <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.893 3.488"/>
                </svg>
                Need help? Contact us on WhatsApp
              </a>
            </div>
            <div class="form-group">
              <label>Full Name *</label>
              <input id="owner-name" type="text" placeholder="Enter your full name" required>
            </div>
            <div class="form-group">
              <label>Email Address *</label>
              <input id="owner-email" type="email" placeholder="Enter your email address" required>
            </div>
            <div class="form-group">
              <label>Phone Number *</label>
              <input id="owner-phone" type="tel" placeholder="Enter your phone number" required>
            </div>
            <div class="form-group">
              <label>WhatsApp Number</label>
              <input id="owner-whatsapp" type="tel" placeholder="Enter WhatsApp number (optional)">
            </div>
            <button onclick="nextRegistrationStep(2)" style="width: 100%; background: #8B5CF6; color: white;">Next: Hostel Details ‚Üí</button>
          </div>

          <!-- Step 2: Hostel Details -->
          <div id="registration-step-2" class="registration-step" style="display: none;">
            <h4 style="margin-bottom: 1rem; color: #2D3748;">üè† Hostel Information</h4>
            <div style="text-align: right; margin-bottom: 1rem;">
              <a href="https://whatsapp.com/channel/0029VbAikYk4o7qO5966Ux3u" target="_blank" style="display: inline-flex; align-items: center; font-size: 0.85rem; color: #25D366; text-decoration: none;">
                <svg viewBox="0 0 24 24" width="14" height="14" fill="#25D366" style="margin-right: 4px;">
                  <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.893 3.488"/>
                </svg>
                Need help? Contact us on WhatsApp
              </a>
            </div>
            <div class="form-group">
              <label>Hostel Name *</label>
              <input id="hostel-name" type="text" placeholder="Enter your hostel name" required>
            </div>
            <div class="form-group">
              <label>Location *</label>
              <input id="hostel-location" type="text" placeholder="Enter hostel location/address" required>
            </div>
            <div class="form-group">
              <label>Gender Type *</label>
              <select id="hostel-gender" required>
                <option value="">Select gender type</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
              </select>
            </div>
            <div class="form-group">
              <label>Monthly Rent (PKR) *</label>
              <input id="hostel-rent" type="number" placeholder="Enter monthly rent amount" required>
            </div>
            <div class="form-group">
              <label>Facilities & Description *</label>
              <textarea id="hostel-description" placeholder="Describe your hostel facilities, rules, and other details..." rows="4" required></textarea>
            </div>
            <div style="display: flex; gap: 1rem;">
              <button onclick="nextRegistrationStep(1)" style="flex: 1; background: #6B7280; color: white;">‚Üê Previous</button>
              <button onclick="nextRegistrationStep(3)" style="flex: 1; background: #8B5CF6; color: white;">Next: Verification ‚Üí</button>
            </div>
          </div>

          <!-- Step 3: Verification -->
          <div id="registration-step-3" class="registration-step" style="display: none;">
            <h4 style="margin-bottom: 1rem; color: #2D3748;">‚úÖ Verification & Submission</h4>
            <div style="background: #F7FAFC; border: 1px solid #E2E8F0; border-radius: 8px; padding: 1.5rem; margin-bottom: 1.5rem;">
              <h5 style="margin: 0 0 1rem 0; color: #2D3748;">üìã Registration Summary</h5>
              <div id="registration-summary" style="font-size: 0.9rem; color: #4A5568; line-height: 1.6;"></div>
            </div>
            
            <div style="background: #E6FFFA; border: 1px solid #38B2AC; border-radius: 8px; padding: 1rem; margin-bottom: 1.5rem; display: flex; align-items: center;">
              <div style="margin-right: 10px; color: #234E52; font-size: 1.5rem;">üí¨</div>
              <div>
                <p style="margin: 0; color: #234E52; font-size: 0.9rem; line-height: 1.4;">
                  <strong>Having trouble?</strong> Get immediate assistance by contacting us on WhatsApp:
                </p>
                <a href="https://whatsapp.com/channel/0029VbAikYk4o7qO5966Ux3u" target="_blank" style="display: inline-flex; align-items: center; margin-top: 0.5rem; text-decoration: none; color: #25D366; font-weight: 600;">
                  <svg viewBox="0 0 24 24" width="16" height="16" fill="#25D366" style="margin-right: 5px;">
                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.893 3.488"/>
                  </svg>
                  Join our WhatsApp channel
                </a>
              </div>
            </div>
            
            <div class="form-group">
              <label style="display: flex; align-items: center;">
                <input type="checkbox" id="terms-agreement" style="margin-right: 0.5rem;" required>
                I agree to the terms and conditions for listing my hostel on this platform
              </label>
            </div>
            
            <div class="form-group">
              <label style="display: flex; align-items: center;">
                <input type="checkbox" id="info-accuracy" style="margin-right: 0.5rem;" required>
                I confirm that all information provided is accurate and up-to-date
              </label>
            </div>
            
            <div style="background: #FEF9E7; border: 1px solid #F6E05E; border-radius: 8px; padding: 1rem; margin-bottom: 1.5rem;">
              <p style="margin: 0; color: #744210; font-size: 0.9rem; line-height: 1.4;">
                <strong>üìù Next Steps:</strong> After submission, our team will review your application and contact you within 24-48 hours for verification and account setup.
              </p>
            </div>
            
            <div style="display: flex; gap: 1rem;">
              <button onclick="nextRegistrationStep(2)" style="flex: 1; background: #6B7280; color: white;">‚Üê Previous</button>
              <button onclick="submitHostelOwnerRegistration()" style="flex: 1; background: #10B981; color: white;">Submit Registration ‚úì</button>
            </div>
          </div>
        </div>
      </div>

      <div id="dashboard" style="display:none;">
        <!-- Hostel Owner Message (visible only to hostel owners) -->
        <div id="hostel-owner-message" class="hostel-owner-message" style="display: none;">
          <h3 style="margin-top: 0; color: #0c4a6e; margin-bottom: 0.5rem;">üëã Welcome to Your Hostel Owner Dashboard</h3>
          <p>You are logged in as a hostel owner. From here, you can manage your hostel listing, update information, and respond to inquiries.</p>
          <p style="margin-bottom: 0;">Need help? Contact our support team at <strong>teamhostall@gmail.com</strong> or via WhatsApp.</p>
        </div>

        <!-- Admin Navigation -->
        <div class="admin-nav">
          <button class="admin-nav-item active" onclick="showAdminSection('hostels')">Hostels</button>
          <!-- Admin-only menu items -->
          <button class="admin-nav-item admin-only-section" onclick="showAdminSection('registrations')">Registrations</button>
          <button class="admin-nav-item admin-only-section" onclick="showAdminSection('content')">Content</button>
          <button class="admin-nav-item admin-only-section" onclick="showAdminSection('filters')">Filters</button>
          <button class="admin-nav-item admin-only-section" onclick="showAdminSection('images')">Images</button>
          <button class="admin-nav-item admin-only-section" onclick="showAdminSection('branding')">Branding</button>
          <button class="admin-nav-item admin-only-section" onclick="showAdminSection('typography')">Typography</button>
          <button class="admin-nav-item admin-only-section" onclick="showAdminSection('social')">Social Media</button>
          <button class="admin-nav-item admin-only-section" onclick="showAdminSection('seo')">SEO Settings</button>
          <button class="admin-nav-item admin-only-section" onclick="showAdminSection('ads')">Analytics</button>
          <button class="admin-nav-item admin-only-section" onclick="showAdminSection('backup')">Backup & Export</button>
          <button class="admin-nav-item admin-only-section" onclick="showAdminSection('chat')">Chat</button>
          <button class="admin-nav-item admin-only-section" onclick="showAdminSection('feedback')">Feedback</button>
          <button class="admin-nav-item admin-only-section" onclick="showAdminSection('faq')">FAQ</button>
          <button class="admin-nav-item admin-only-section" onclick="showAdminSection('faq-analytics')">FAQ Analytics</button>
          <button class="admin-nav-item admin-only-section" onclick="showAdminSection('footer')">Footer</button>
          <button class="admin-nav-item admin-only-section" onclick="showAdminSection('testimonials')">Testimonials</button>
          <button class="admin-nav-item admin-only-section" onclick="showAdminSection('advertisements')">Advertisements</button>
          <button class="admin-nav-item admin-only-section" onclick="showAdminSection('policies')">Policies</button>
          <button class="admin-nav-item admin-only-section" onclick="showAdminSection('admins')">Admins</button>
          <button class="admin-nav-item" onclick="showAdminSection('security')">üîê Security</button>
        </div>

        <!-- Admin Content -->
        <div class="admin-content">
          <!-- Hostels Section -->
          <div id="admin-hostels" class="admin-section active">
            <h3>üè† Hostel Management</h3>
            
            <!-- Admin-only statistics and import section -->
            <div class="admin-only-section" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; margin-bottom: 2rem;">
              <div style="text-align: center; padding: 1.5rem; background: #F7FAFC; border-radius: 10px;">
                <div style="font-size: 2rem; font-weight: 700; color: #8B5CF6;" id="admin-hostel-count">0</div>
                <div style="font-size: 0.9rem; color: #4A5568;">Total Hostels</div>
              </div>
              <div style="text-align: center; padding: 1.5rem; background: #F7FAFC; border-radius: 10px;">
                <div style="font-size: 2rem; font-weight: 700; color: #22C55E;">3</div>
                <div style="font-size: 0.9rem; color: #4A5568;">Male Hostels</div>
              </div>
              <div style="text-align: center; padding: 1.5rem; background: #F7FAFC; border-radius: 10px;">
                <div style="font-size: 2rem; font-weight: 700; color: #F59E0B;">3</div>
                <div style="font-size: 0.9rem; color: #4A5568;">Female Hostels</div>
              </div>
            </div>
            
            <!-- Admin-only Excel import section -->
            <div class="excel-import-section admin-only-section" style="margin-bottom: 2rem; padding: 1.5rem; background: #F8FAFC; border-radius: 10px; border: 2px dashed #CBD5E0;">
              <h4 style="margin-bottom: 1rem; color: #2D3748;">üìä Bulk Import from Excel</h4>
              <div style="display: flex; gap: 1rem; align-items: center; flex-wrap: wrap;">
                <input type="file" id="excel-file-input" accept=".xlsx,.xls,.csv" style="display: none;">
                <button onclick="document.getElementById('excel-file-input').click()" class="btn-secondary" style="margin: 0;">
                  üìÅ Choose Excel File
                </button>
                <button onclick="downloadExcelTemplate()" class="btn-secondary" style="margin: 0;">
                  üì• Download Template
                </button>
                <span id="excel-file-name" style="color: #4A5568; font-size: 0.9rem;"></span>
              </div>
              <p style="margin: 0.5rem 0 0 0; font-size: 0.8rem; color: #6B7280;">
                Upload an Excel file with hostel data. Supported formats: .xlsx, .xls, .csv
              </p>
            </div>
            
            <!-- Full Admin Hostel List (visible to admins) -->
            <div class="admin-hostel-list admin-only-section" id="admin-hostel-list" style="margin-bottom: 1.5rem;"></div>
            
            <!-- Hostel Owner Section for their specific hostel -->
            <div class="hostel-owner-section" id="hostels-management">
              <!-- Hostel owner's hostel(s) will be displayed here -->
              <div class="owner-hostel-card">
                <p style="padding: 1rem; text-align: center;">Loading your hostel information...</p>
              </div>
            </div>
            
            <!-- Add New Hostel Button (visible to both roles) -->
            <button onclick="showForm('hostel')" style="width: 100%;">+ Add New Hostel</button>
          </div>

          <!-- Registrations Section -->
          <div id="admin-registrations" class="admin-section">
            <h3>üìù Hostel Owner Registrations</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; margin-bottom: 2rem;">
              <div style="text-align: center; padding: 1.5rem; background: #F7FAFC; border-radius: 10px;">
                <div style="font-size: 2rem; font-weight: 700; color: #F59E0B;" id="pending-registrations-count">0</div>
                <div style="font-size: 0.9rem; color: #4A5568;">Pending Registrations</div>
              </div>
              <div style="text-align: center; padding: 1.5rem; background: #F7FAFC; border-radius: 10px;">
                <div style="font-size: 2rem; font-weight: 700; color: #10B981;" id="approved-registrations-count">0</div>
                <div style="font-size: 0.9rem; color: #4A5568;">Approved Registrations</div>
              </div>
              <div style="text-align: center; padding: 1.5rem; background: #F7FAFC; border-radius: 10px;">
                <div style="font-size: 2rem; font-weight: 700; color: #EF4444;" id="rejected-registrations-count">0</div>
                <div style="font-size: 0.9rem; color: #4A5568;">Rejected Registrations</div>
              </div>
            </div>
            
            <div class="registration-filters" style="margin-bottom: 1.5rem; display: flex; gap: 1rem; align-items: center;">
              <select id="registration-status-filter" onchange="filterRegistrations()" style="padding: 0.5rem; border-radius: 6px; border: 1px solid #D1D5DB;">
                <option value="">All Registrations</option>
                <option value="pending">Pending</option>
                <option value="approved">Approved</option>
                <option value="rejected">Rejected</option>
              </select>
              <button onclick="refreshRegistrations()" style="padding: 0.5rem 1rem; background: #8B5CF6; color: white; border: none; border-radius: 6px;">Refresh</button>
            </div>
            
            <div id="registrations-list" style="margin-bottom: 1.5rem;"></div>
          </div>

          <!-- Content Section -->
          <div id="admin-content" class="admin-section">
            <h3>üìù Content Management</h3>
            <div class="content-editor">
              <div class="content-selector">
                <label>Select Section</label>
                <select id="content-section-select" onchange="loadContentSection()">
                  <option value="hero">Hero Section</option>
                  <option value="about">About Us</option>
                  <option value="why-hostall">Why Choose HOSTALL</option>
                  <option value="contact">Contact Information</option>
                </select>
              </div>
              <div id="content-editor-fields">
                <!-- Dynamic content fields will be loaded here -->
              </div>
              <button onclick="saveContent()" style="margin-top: 1rem;">Save Changes</button>
            </div>
          </div>

          <!-- Filters Management Section -->
          <div id="admin-filters" class="admin-section">
            <h3>üîç Filter Options Management</h3>
            <p style="color: #6B7280; margin-bottom: 1.5rem;">Manage the filter options available for hostel search</p>
            
            <div class="filters-management">
              <div class="filter-category">
                <h4>üìç Location Filters</h4>
                <div class="filter-items" id="location-filters">
                  <div class="filter-item">
                    <input type="text" placeholder="Location name" value="Near Punjab University">
                    <button onclick="removeFilterItem(this)" class="remove-btn">√ó</button>
                  </div>
                  <div class="filter-item">
                    <input type="text" placeholder="Location name" value="Gulberg">
                    <button onclick="removeFilterItem(this)" class="remove-btn">√ó</button>
                  </div>
                  <div class="filter-item">
                    <input type="text" placeholder="Location name" value="DHA">
                    <button onclick="removeFilterItem(this)" class="remove-btn">√ó</button>
                  </div>
                </div>
                <button onclick="addFilterItem('location-filters')" class="add-filter-btn">+ Add Location</button>
              </div>

              <div class="filter-category">
                <h4>üè† Facility Filters</h4>
                <div class="filter-items" id="facility-filters">
                  <div class="filter-item">
                    <input type="text" placeholder="Facility name" value="WiFi">
                    <button onclick="removeFilterItem(this)" class="remove-btn">√ó</button>
                  </div>
                  <div class="filter-item">
                    <input type="text" placeholder="Facility name" value="AC">
                    <button onclick="removeFilterItem(this)" class="remove-btn">√ó</button>
                  </div>
                  <div class="filter-item">
                    <input type="text" placeholder="Facility name" value="Parking">
                    <button onclick="removeFilterItem(this)" class="remove-btn">√ó</button>
                  </div>
                  <div class="filter-item">
                    <input type="text" placeholder="Facility name" value="Laundry">
                    <button onclick="removeFilterItem(this)" class="remove-btn">√ó</button>
                  </div>
                </div>
                <button onclick="addFilterItem('facility-filters')" class="add-filter-btn">+ Add Facility</button>
              </div>

              <div class="filter-category">
                <h4>üí∞ Price Range Filters</h4>
                <div class="filter-items" id="price-filters">
                  <div class="filter-item">
                    <input type="text" placeholder="Price range" value="Under PKR 10,000">
                    <button onclick="removeFilterItem(this)" class="remove-btn">√ó</button>
                  </div>
                  <div class="filter-item">
                    <input type="text" placeholder="Price range" value="PKR 10,000 - 15,000">
                    <button onclick="removeFilterItem(this)" class="remove-btn">√ó</button>
                  </div>
                  <div class="filter-item">
                    <input type="text" placeholder="Price range" value="Above PKR 15,000">
                    <button onclick="removeFilterItem(this)" class="remove-btn">√ó</button>
                  </div>
                </div>
                <button onclick="addFilterItem('price-filters')" class="add-filter-btn">+ Add Price Range</button>
              </div>

              <div class="save-filters-section">
                <button onclick="saveFilterOptions()" class="save-btn">üíæ Save Filter Options</button>
                <p class="save-status" id="filter-save-status"></p>
              </div>
            </div>
          </div>

          <!-- Images Section -->
          <div id="admin-images" class="admin-section">
            <h3>üñºÔ∏è Image Management</h3>
            
            <div class="admin-card">
              <h4>Website Logo</h4>
              <div class="image-upload-section">
                <div class="current-image" id="logo-preview">
                  <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjOEI1Q0Y2Ii8+Cjx0ZXh0IHg9IjUwIiB5PSI1NSIgZm9udC1mYW1pbHk9IkludGVyLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkhPU1RBTEw8L3RleHQ+Cjwvc3ZnPg==" alt="Logo" style="max-width: 100px; max-height: 100px;">
                </div>
                <input type="file" id="logo-upload" accept="image/*" style="display: none;" onchange="handleImageUpload('logo', this)">
                <button onclick="document.getElementById('logo-upload').click()" class="upload-btn">Change Logo</button>
              </div>
            </div>

            <div class="admin-card">
              <h4>Homepage Hero Image</h4>
              <div class="image-upload-section">
                <div class="current-image" id="hero-preview">
                  <img src="dpoac1ats0.jpg" alt="Current Hero" style="width: 200px; height: 100px; object-fit: cover; border-radius: 8px;">
                </div>
                <input type="file" id="hero-upload" accept="image/*" style="display: none;" onchange="handleImageUpload('homepage-hero', this)">
                <button onclick="document.getElementById('hero-upload').click()" class="upload-btn">Change Homepage Hero Image</button>
              </div>
            </div>

            <div class="admin-card">
              <h4>About Section Images</h4>
              <div class="about-images-grid">
                <div class="image-upload-section">
                  <label>Left Image</label>
                  <div class="current-image" id="about-left-preview">
                    <img src="https://public.youware.com/users-website-assets/prod/eece562c-b820-4d93-ac82-ae67b689ba1d/f55329116b65461d87b2a1feafb59939.jpg" alt="About Left" style="max-width: 150px; max-height: 100px; object-fit: cover; border-radius: 8px;">
                  </div>
                  <input type="file" id="about-left-upload" accept="image/*" style="display: none;" onchange="handleImageUpload('about-left', this)">
                  <button onclick="document.getElementById('about-left-upload').click()" class="upload-btn">Change Image</button>
                </div>
                
                <div class="image-upload-section">
                  <label>Center Image</label>
                  <div class="current-image" id="about-center-preview">
                    <img src="https://public.youware.com/users-website-assets/prod/eece562c-b820-4d93-ac82-ae67b689ba1d/44384731a3d24267b148320520632ee8.jpg" alt="About Center" style="max-width: 150px; max-height: 100px; object-fit: cover; border-radius: 8px;">
                  </div>
                  <input type="file" id="about-center-upload" accept="image/*" style="display: none;" onchange="handleImageUpload('about-center', this)">
                  <button onclick="document.getElementById('about-center-upload').click()" class="upload-btn">Change Image</button>
                </div>
                
                <div class="image-upload-section">
                  <label>Right Image</label>
                  <div class="current-image" id="about-right-preview">
                    <img src="https://public.youware.com/users-website-assets/prod/eece562c-b820-4d93-ac82-ae67b689ba1d/8fae1e4c427849ca8f695d5f0ad7b282.jpg=ws1280x960" alt="About Right" style="max-width: 150px; max-height: 100px; object-fit: cover; border-radius: 8px;">
                  </div>
                  <input type="file" id="about-right-upload" accept="image/*" style="display: none;" onchange="handleImageUpload('about-right', this)">
                  <button onclick="document.getElementById('about-right-upload').click()" class="upload-btn">Change Image</button>
                </div>
              </div>
            </div>
            
            <div class="admin-card">
              <h4>Featured Hostel Images</h4>
              <div class="featured-hostels-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem;">
                <div class="image-upload-section">
                  <label>Hostel 1</label>
                  <div class="current-image" id="hostel1-preview">
                    <img src="./a0h4bezyrn.png" alt="Hostel 1" style="width: 200px; height: 150px; object-fit: cover; border-radius: 8px;">
                  </div>
                  <input type="file" id="hostel1-upload" accept="image/*" style="display: none;" onchange="handleImageUpload('hostel1', this)">
                  <button onclick="document.getElementById('hostel1-upload').click()" class="upload-btn">Change Image</button>
                </div>
                
                <div class="image-upload-section">
                  <label>Hostel 2</label>
                  <div class="current-image" id="hostel2-preview">
                    <img src="./csklkyz4qg.png" alt="Hostel 2" style="width: 200px; height: 150px; object-fit: cover; border-radius: 8px;">
                  </div>
                  <input type="file" id="hostel2-upload" accept="image/*" style="display: none;" onchange="handleImageUpload('hostel2', this)">
                  <button onclick="document.getElementById('hostel2-upload').click()" class="upload-btn">Change Image</button>
                </div>
                
                <div class="image-upload-section">
                  <label>Hostel 3</label>
                  <div class="current-image" id="hostel3-preview">
                    <img src="./gy4uspau99.png" alt="Hostel 3" style="width: 200px; height: 150px; object-fit: cover; border-radius: 8px;">
                  </div>
                  <input type="file" id="hostel3-upload" accept="image/*" style="display: none;" onchange="handleImageUpload('hostel3', this)">
                  <button onclick="document.getElementById('hostel3-upload').click()" class="upload-btn">Change Image</button>
                </div>
                
                <div class="image-upload-section">
                  <label>Hostel 4</label>
                  <div class="current-image" id="hostel4-preview">
                    <img src="./jlkdqzmy1t.png" alt="Hostel 4" style="width: 200px; height: 150px; object-fit: cover; border-radius: 8px;">
                  </div>
                  <input type="file" id="hostel4-upload" accept="image/*" style="display: none;" onchange="handleImageUpload('hostel4', this)">
                  <button onclick="document.getElementById('hostel4-upload').click()" class="upload-btn">Change Image</button>
                </div>
                
                <div class="image-upload-section">
                  <label>Hostel 5</label>
                  <div class="current-image" id="hostel5-preview">
                    <img src="./u3ttz0cbn6.png" alt="Hostel 5" style="width: 200px; height: 150px; object-fit: cover; border-radius: 8px;">
                  </div>
                  <input type="file" id="hostel5-upload" accept="image/*" style="display: none;" onchange="handleImageUpload('hostel5', this)">
                  <button onclick="document.getElementById('hostel5-upload').click()" class="upload-btn">Change Image</button>
                </div>
                
                <div class="image-upload-section">
                  <label>Hostel 6</label>
                  <div class="current-image" id="hostel6-preview">
                    <img src="./z6ln3kuuig.png" alt="Hostel 6" style="width: 200px; height: 150px; object-fit: cover; border-radius: 8px;">
                  </div>
                  <input type="file" id="hostel6-upload" accept="image/*" style="display: none;" onchange="handleImageUpload('hostel6', this)">
                  <button onclick="document.getElementById('hostel6-upload').click()" class="upload-btn">Change Image</button>
                </div>
              </div>
            </div>
            
            <div class="admin-card">
              <h4>Social Media Preview Images</h4>
              <div class="social-images-grid">
                <div class="image-upload-section">
                  <label>Open Graph Image (Facebook/LinkedIn)</label>
                  <div class="current-image" id="og-image-preview">
                    <img src="53e91bqjp6.png" alt="OG Image" style="width: 200px; height: 120px; object-fit: cover; border-radius: 8px;">
                  </div>
                  <input type="file" id="og-image-upload" accept="image/*" style="display: none;" onchange="handleImageUpload('og-image', this)">
                  <button onclick="document.getElementById('og-image-upload').click()" class="upload-btn">Change Image</button>
                </div>
                
                <div class="image-upload-section">
                  <label>Twitter Card Image</label>
                  <div class="current-image" id="twitter-image-preview">
                    <img src="dpoac1ats0.jpg" alt="Twitter Image" style="width: 200px; height: 120px; object-fit: cover; border-radius: 8px;">
                  </div>
                  <input type="file" id="twitter-image-upload" accept="image/*" style="display: none;" onchange="handleImageUpload('twitter-image', this)">
                  <button onclick="document.getElementById('twitter-image-upload').click()" class="upload-btn">Change Image</button>
                </div>
              </div>
            </div>
            
            <div class="admin-card">
              <h4>Background Images</h4>
              <div class="bg-images-grid">
                <div class="image-upload-section">
                  <label>Hero Background</label>
                  <div class="current-image" id="hero-bg-preview">
                    <div style="width: 200px; height: 100px; background: linear-gradient(135deg, var(--primary-color), #7C3AED); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white;">Current Background</div>
                  </div>
                  <input type="file" id="hero-bg-upload" accept="image/*" style="display: none;" onchange="handleImageUpload('hero', this)">
                  <button onclick="document.getElementById('hero-bg-upload').click()" class="upload-btn">Change Background</button>
                </div>
                
                <div class="image-upload-section">
                  <label>Why HOSTALL Background</label>
                  <div class="current-image" id="why-hostall-bg-preview">
                    <div style="width: 200px; height: 100px; background: linear-gradient(135deg, var(--primary-color), #A855F7); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white;">Current Background</div>
                  </div>
                  <input type="file" id="why-hostall-bg-upload" accept="image/*" style="display: none;" onchange="handleImageUpload('why-hostall-bg', this)">
                  <button onclick="document.getElementById('why-hostall-bg-upload').click()" class="upload-btn">Change Background</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Branding Section -->
          <div id="admin-branding" class="admin-section">
            <h3>üé® Branding</h3>
            <div class="admin-form">
              <div class="editor-field">
                <label>Primary Color</label>
                <input type="color" value="#8B5CF6" id="primary-color">
              </div>
              <div class="editor-field">
                <label>Secondary Color</label>
                <input type="color" value="#FF6B6B" id="secondary-color">
              </div>
              <div class="editor-field">
                <label>Logo Text</label>
                <input type="text" value="HOSTALL" id="logo-text">
              </div>
              <div class="editor-field">
                <label>HOSTALL Text Color</label>
                <input type="color" value="#FFFFFF" id="hostall-text-color">
              </div>
              <div class="editor-field">
                <label>Split Colors (HOST/ALL)</label>
                <div style="display: flex; gap: 10px;">
                  <div style="flex: 1;">
                    <label style="font-size: 0.8rem;">HOST Color</label>
                    <input type="color" value="#FFFFFF" id="host-color" style="width: 100%;">
                  </div>
                  <div style="flex: 1;">
                    <label style="font-size: 0.8rem;">ALL Color</label>
                    <input type="color" value="#FF6B6B" id="all-color" style="width: 100%;">
                  </div>
                </div>
              </div>
              <button onclick="saveBranding()" style="background: var(--primary-color); color: white; padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; width: 100%; margin-top: 1rem;">üíæ Save Branding Changes</button>
            </div>
          </div>

          <!-- Typography Section -->
          <div id="admin-typography" class="admin-section">
            <h3>‚úèÔ∏è Typography</h3>
            <div class="admin-form">
              <div class="editor-field">
                <label>Primary Font</label>
                <select id="primary-font">
                  <option value="Inter">Inter</option>
                  <option value="Roboto">Roboto</option>
                  <option value="Open Sans">Open Sans</option>
                  <option value="Poppins">Poppins</option>
                </select>
              </div>
              <div class="admin-form-row">
                <div class="editor-field">
                  <label>Heading Size</label>
                  <input type="range" min="24" max="48" value="35" id="heading-size">
                </div>
                <div class="editor-field">
                  <label>Body Size</label>
                  <input type="range" min="14" max="20" value="16" id="body-size">
                </div>
              </div>
              <button onclick="saveTypography()">Update Typography</button>
            </div>
          </div>

          <!-- Social Media Section -->
          <div id="admin-social" class="admin-section">
            <h3>üì± Social Media & Contact</h3>
            <div class="admin-form">
              <div class="admin-form-section">
                <h4>Social Media Links</h4>
                <div class="admin-form-row">
                  <div class="editor-field">
                    <label>
                      <svg viewBox="0 0 24 24" width="16" height="16" fill="#1877F2" style="vertical-align: middle; margin-right: 5px;">
                        <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                      </svg>
                      Facebook URL
                    </label>
                    <input type="url" id="facebook-url" value="https://www.facebook.com/share/v/1YbEMKcYBW/?mibextid=wwXIfr" placeholder="https://facebook.com/yourpage" onchange="previewSocialChange(this, 'facebook')">
                  </div>
                  <div class="editor-field">
                    <label>
                      <svg viewBox="0 0 24 24" width="16" height="16" fill="#E4405F" style="vertical-align: middle; margin-right: 5px;">
                        <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                      </svg>
                      Instagram URL
                    </label>
                    <input type="url" id="instagram-url" value="https://www.instagram.com/yourhostall/" placeholder="https://instagram.com/youraccount" onchange="previewSocialChange(this, 'instagram')">
                  </div>
                </div>
                <div class="admin-form-row">
                  <div class="editor-field">
                    <label>
                      <svg viewBox="0 0 24 24" width="16" height="16" fill="#000000" style="vertical-align: middle; margin-right: 5px;">
                        <path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/>
                      </svg>
                      TikTok URL
                    </label>
                    <input type="url" id="tiktok-url" value="https://tiktok.com/@teamhostall" placeholder="https://tiktok.com/@youraccount" onchange="previewSocialChange(this, 'tiktok')">
                  </div>
                  <div class="editor-field">
                    <label>
                      <svg viewBox="0 0 24 24" width="16" height="16" fill="#25D366" style="vertical-align: middle; margin-right: 5px;">
                        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.893 3.488"/>
                      </svg>
                      WhatsApp Number
                    </label>
                    <input type="tel" id="social-whatsapp-number" value="+923001234567" placeholder="+92300xxxxxxx" onchange="previewSocialChange(this, 'whatsapp')">
                  </div>
                </div>
              </div>
              
              <div class="admin-form-section">
                <h4>Contact Information</h4>
                <div class="admin-form-row">
                  <div class="editor-field">
                    <label>Business Email</label>
                    <input type="email" id="business-email" value="teamhostall@gmail.com" placeholder="contact@yourdomain.com">
                  </div>
                  <div class="editor-field">
                    <label>Support Phone</label>
                    <input type="tel" id="support-phone" value="+92 300 1234567" placeholder="+92 xxx xxxxxxx">
                  </div>
                </div>
                <div class="editor-field">
                  <label>Business Address</label>
                  <input type="text" id="business-address" value="Lahore, Pakistan" placeholder="City, Country">
                </div>
              </div>
              
              <div class="admin-form-section">
                <h4>Social Media Display</h4>
                <div class="admin-form-row">
                  <div class="editor-field">
                    <label>Show Facebook</label>
                    <input type="checkbox" id="show-facebook" checked>
                  </div>
                  <div class="editor-field">
                    <label>Show Instagram</label>
                    <input type="checkbox" id="show-instagram" checked>
                  </div>
                  <div class="editor-field">
                    <label>Show TikTok</label>
                    <input type="checkbox" id="show-tiktok" checked>
                  </div>
                  <div class="editor-field">
                    <label>Show WhatsApp</label>
                    <input type="checkbox" id="show-whatsapp" checked>
                  </div>
                </div>
              </div>
              
              <button onclick="saveSocialSettings()">Save Social Media Settings</button>
            </div>
          </div>

          <!-- SEO Settings Section -->
          <div id="admin-seo" class="admin-section">
            <h3>üîç SEO Settings</h3>
            <div class="admin-form">
              <div class="admin-form-section">
                <h4>Basic SEO</h4>
                <div class="editor-field">
                  <label>Website Title</label>
                  <input type="text" id="seo-title" value="HOSTALL - Premium Hostel Listings in Lahore" placeholder="Your website title">
                </div>
                <div class="editor-field">
                  <label>Meta Description</label>
                  <textarea id="seo-description" placeholder="Brief description of your website for search engines" rows="3">Find the perfect hostel in Lahore with HOSTALL. Verified listings, transparent pricing, and quality accommodations for students and professionals.</textarea>
                </div>
                <div class="admin-form-row">
                  <div class="editor-field">
                    <label>Keywords</label>
                    <input type="text" id="seo-keywords" value="hostels lahore, student accommodation, hostel booking, lahore hostels" placeholder="keyword1, keyword2, keyword3">
                  </div>
                  <div class="editor-field">
                    <label>Website Language</label>
                    <select id="seo-language">
                      <option value="en">English</option>
                      <option value="ur">Urdu</option>
                      <option value="en-PK">English (Pakistan)</option>
                    </select>
                  </div>
                </div>
              </div>
              
              <div class="admin-form-section">
                <h4>Open Graph (Social Media)</h4>
                <div class="admin-form-row">
                  <div class="editor-field">
                    <label>OG Title</label>
                    <input type="text" id="og-title" value="HOSTALL - Premium Hostel Listings" placeholder="Title when shared on social media">
                  </div>
                  <div class="editor-field">
                    <label>OG Type</label>
                    <select id="og-type">
                      <option value="website">Website</option>
                      <option value="business.business">Business</option>
                      <option value="place">Place</option>
                    </select>
                  </div>
                </div>
                <div class="editor-field">
                  <label>OG Description</label>
                  <textarea id="og-description" placeholder="Description when shared on social media" rows="2">Find verified hostels in Lahore with transparent pricing and quality accommodations.</textarea>
                </div>
              </div>
              
              <div class="admin-form-section">
                <h4>Technical SEO</h4>
                <div class="admin-form-row">
                  <div class="editor-field">
                    <label>Canonical URL</label>
                    <input type="url" id="canonical-url" value="https://hostall.org" placeholder="https://yourdomain.com">
                  </div>
                  <div class="editor-field">
                    <label>Robots</label>
                    <select id="robots-meta">
                      <option value="index,follow">Index, Follow</option>
                      <option value="noindex,follow">No Index, Follow</option>
                      <option value="index,nofollow">Index, No Follow</option>
                      <option value="noindex,nofollow">No Index, No Follow</option>
                    </select>
                  </div>
                </div>
              </div>
              
              <button onclick="saveSEOSettings()">Save SEO Settings</button>
            </div>
          </div>

          <!-- Analytics Section -->
          <div id="admin-ads" class="admin-section">
            <h3>üìä Website Analytics</h3>
            
            <!-- Ad Statistics -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
              <div style="background: #F7FAFC; padding: 1.5rem; border-radius: 10px; text-align: center;">
                <div style="font-size: 2rem; font-weight: 700; color: #3B82F6;" id="ad-clicks-count">0</div>
                <div style="font-size: 0.9rem; color: #4A5568;">Total Ad Clicks</div>
              </div>
              <div style="background: #F7FAFC; padding: 1.5rem; border-radius: 10px; text-align: center;">
                <div style="font-size: 2rem; font-weight: 700; color: #10B981;" id="ad-revenue">$0</div>
                <div style="font-size: 0.9rem; color: #4A5568;">Estimated Revenue</div>
              </div>
              <div style="background: #F7FAFC; padding: 1.5rem; border-radius: 10px; text-align: center;">
                <div style="font-size: 2rem; font-weight: 700; color: #F59E0B;" id="active-ads">3</div>
                <div style="font-size: 0.9rem; color: #4A5568;">Active Ad Spaces</div>
              </div>
            </div>

            <!-- Google AdSense Settings -->
            <div class="admin-card">
              <h4>üè¢ Google AdSense Configuration</h4>
              <div class="form-group">
                <label>AdSense Client ID</label>
                <input id="adsense-client" type="text" placeholder="ca-pub-XXXXXXXXXXXXXXXXX" value="ca-pub-XXXXXXXXXXXXXXXXX">
              </div>
              <div class="form-group">
                <label>AdSense Status</label>
                <select id="adsense-status">
                  <option value="enabled">Enabled</option>
                  <option value="disabled">Disabled</option>
                  <option value="test">Test Mode</option>
                </select>
              </div>
              <button onclick="saveAdSenseSettings()" style="background: #10B981; color: white;">Save AdSense Settings</button>
            </div>

            <!-- Manual Ad Management -->
            <div class="admin-card">
              <h4>üì± Manual Advertisement Spaces</h4>
              <div id="manual-ads-list"></div>
              <button onclick="showAddManualAd()" style="width: 100%; margin-top: 1rem;">+ Add Manual Ad</button>
            </div>

            <!-- Ad Performance -->
            <div class="admin-card">
              <h4>üìà Ad Performance</h4>
              <div style="background: #F9FAFB; padding: 1rem; border-radius: 8px;">
                <div style="margin-bottom: 1rem;">
                  <strong>Top Performing Ads:</strong>
                </div>
                <div id="ad-performance-list">
                  <div style="display: flex; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid #E5E7EB;">
                    <span>Header Banner</span>
                    <span style="color: #10B981;">45 clicks</span>
                  </div>
                  <div style="display: flex; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid #E5E7EB;">
                    <span>Sidebar Rectangle</span>
                    <span style="color: #10B981;">32 clicks</span>
                  </div>
                  <div style="display: flex; justify-content: space-between; padding: 0.5rem 0;">
                    <span>Manual Ad #1</span>
                    <span style="color: #10B981;">18 clicks</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Analytics Section -->
          <div id="admin-analytics" class="admin-section">
            <h3>üìä Analytics & Statistics</h3>
            
            <!-- Website Statistics Overview -->
            <div class="analytics-overview">
              <div class="analytics-card">
                <div class="analytics-icon">üëÅÔ∏è</div>
                <div class="analytics-content">
                  <div class="analytics-number" id="total-visits">0</div>
                  <div class="analytics-label">Total Visits</div>
                </div>
              </div>
              <div class="analytics-card">
                <div class="analytics-icon">üì±</div>
                <div class="analytics-content">
                  <div class="analytics-number" id="today-visits">0</div>
                  <div class="analytics-label">Today's Visits</div>
                </div>
              </div>
              <div class="analytics-card">
                <div class="analytics-icon">üñ±Ô∏è</div>
                <div class="analytics-content">
                  <div class="analytics-number" id="total-clicks">0</div>
                  <div class="analytics-label">Total Clicks</div>
                </div>
              </div>
              <div class="analytics-card">
                <div class="analytics-icon">üìû</div>
                <div class="analytics-content">
                  <div class="analytics-number" id="contact-clicks">0</div>
                  <div class="analytics-label">Contact Clicks</div>
                </div>
              </div>
              <div class="analytics-card">
                <div class="analytics-icon">üè†</div>
                <div class="analytics-content">
                  <div class="analytics-number" id="hostel-views">0</div>
                  <div class="analytics-label">Hostel Views</div>
                </div>
              </div>
              <div class="analytics-card">
                <div class="analytics-icon">üí¨</div>
                <div class="analytics-content">
                  <div class="analytics-number" id="chat-opens">0</div>
                  <div class="analytics-label">Chat Opens</div>
                </div>
              </div>
              <div class="analytics-card">
                <div class="analytics-icon">üë®‚Äçüíº</div>
                <div class="analytics-content">
                  <div class="analytics-number" id="admin-hostel-views">0</div>
                  <div class="analytics-label">Admin Hostel Views</div>
                </div>
              </div>
            </div>

            <div class="admin-form">
              <div class="admin-form-section">
                <h4>Google Analytics Setup</h4>
                <div class="info-box" style="background: #EBF8FF; border: 1px solid #90CDF4; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                  <h5 style="color: #2B6CB0; margin: 0 0 0.5rem 0;">üìä What is Google Analytics?</h5>
                  <p style="color: #2D3748; margin: 0; font-size: 0.9rem; line-height: 1.5;">
                    Google Analytics is a free web analytics service that tracks and reports website traffic. It helps you understand:
                  </p>
                  <ul style="color: #2D3748; margin: 0.5rem 0 0 1rem; font-size: 0.9rem;">
                    <li>How many people visit your website</li>
                    <li>Which pages they view most</li>
                    <li>Where your visitors come from</li>
                    <li>How long they stay on your site</li>
                    <li>What devices they use (mobile, desktop, tablet)</li>
                  </ul>
                  <p style="color: #2D3748; margin: 0.5rem 0 0 0; font-size: 0.9rem;">
                    <strong>GA4 Measurement ID:</strong> This is your unique tracking code (looks like "G-XXXXXXXXXX") that you get when you create a Google Analytics account. 
                    <a href="https://analytics.google.com" target="_blank" style="color: #3182CE;">Create free account here</a>
                  </p>
                </div>
                <div class="admin-form-row">
                  <div class="editor-field">
                    <label>GA4 Measurement ID</label>
                    <input type="text" id="ga4-id" placeholder="G-XXXXXXXXXX" value="">
                    <small style="color: #6B7280;">Get this from your Google Analytics dashboard</small>
                  </div>
                  <div class="editor-field">
                    <label>Google Tag Manager ID</label>
                    <input type="text" id="gtm-id" placeholder="GTM-XXXXXXX" value="">
                    <small style="color: #6B7280;">Optional: For advanced tracking setup</small>
                  </div>
                </div>
                <div class="editor-field">
                  <label>Enable Analytics</label>
                  <input type="checkbox" id="analytics-enabled" checked>
                  <small style="color: #6B7280;">Turn on/off visitor tracking</small>
                </div>
                <button onclick="saveAnalyticsSettings()" class="save-btn" style="margin-top: 1rem;">üíæ Save Analytics Settings</button>
              </div>
              
              <div class="admin-form-section">
                <h4>Website Performance</h4>
                <div class="stats-grid">
                  <div class="stat-card">
                    <h5>Total Hostels</h5>
                    <div class="stat-value" id="total-hostels">0</div>
                  </div>
                  <div class="stat-card">
                    <h5>Chat Messages</h5>
                    <div class="stat-value" id="total-messages">0</div>
                  </div>
                  <div class="stat-card">
                    <h5>Admin Users</h5>
                    <div class="stat-value" id="total-admins">0</div>
                  </div>
                  <div class="stat-card">
                    <h5>Page Load Time</h5>
                    <div class="stat-value" id="load-time">--</div>
                  </div>
                </div>
              </div>
              
              <div class="admin-form-section">
                <h4>Other Tracking</h4>
                <div class="editor-field">
                  <label>Facebook Pixel ID</label>
                  <input type="text" id="facebook-pixel" placeholder="Enter Facebook Pixel ID">
                </div>
                <div class="editor-field">
                  <label>Custom Head Code</label>
                  <textarea id="custom-head-code" placeholder="Add custom tracking codes or scripts" rows="4"></textarea>
                </div>
              </div>
              
              <button onclick="saveAnalyticsSettings()">Save Analytics Settings</button>
            </div>
          </div>

          <!-- Backup & Export Section -->
          <div id="admin-backup" class="admin-section">
            <h3>üíæ Backup & Export</h3>
            <div class="admin-form">
              <div class="admin-form-section">
                <h4>Data Export</h4>
                <p style="color: #4A5568; margin-bottom: 1rem;">Download all your website data for backup or migration purposes.</p>
                <div class="backup-buttons">
                  <button onclick="exportAllData()" class="backup-btn export">
                    üì¶ Export All Data
                  </button>
                  <button onclick="exportHostels()" class="backup-btn">
                    üè† Export Hostels Only
                  </button>
                  <button onclick="exportChatMessages()" class="backup-btn">
                    üí¨ Export Chat Messages
                  </button>
                  <button onclick="exportSettings()" class="backup-btn">
                    ‚öôÔ∏è Export Settings
                  </button>
                </div>
              </div>
              
              <div class="admin-form-section">
                <h4>Data Import</h4>
                <p style="color: #4A5568; margin-bottom: 1rem;">Restore data from a previous backup.</p>
                <div class="editor-field">
                  <label>Import Data File</label>
                  <input type="file" id="import-file" accept=".json" onchange="handleFileImport(this)">
                </div>
                <div class="import-options">
                  <label><input type="checkbox" id="import-hostels" checked> Import Hostels</label>
                  <label><input type="checkbox" id="import-chats" checked> Import Chat Messages</label>
                  <label><input type="checkbox" id="import-settings" checked> Import Settings</label>
                  <label><input type="checkbox" id="import-admins"> Import Admin Users</label>
                </div>
                <button onclick="importData()" class="backup-btn import">
                  üì• Import Data
                </button>
              </div>
              
              <div class="admin-form-section">
                <h4>Automatic Backup</h4>
                <div class="admin-form-row">
                  <div class="editor-field">
                    <label>Enable Auto Backup</label>
                    <input type="checkbox" id="auto-backup-enabled">
                  </div>
                  <div class="editor-field">
                    <label>Backup Frequency</label>
                    <select id="backup-frequency">
                      <option value="daily">Daily</option>
                      <option value="weekly">Weekly</option>
                      <option value="monthly">Monthly</option>
                    </select>
                  </div>
                </div>
                <div class="editor-field">
                  <label>Last Backup</label>
                  <input type="text" id="last-backup" readonly value="Never" style="background: #F7FAFC;">
                </div>
                <button onclick="saveBackupSettings()">Save Backup Settings</button>
              </div>
              
              <div class="admin-form-section">
                <h4>Website Reset</h4>
                <p style="color: #E53E3E; margin-bottom: 1rem;">‚ö†Ô∏è Danger Zone: These actions cannot be undone!</p>
                <div class="danger-buttons">
                  <button onclick="clearAllData()" class="danger-btn">
                    üóëÔ∏è Clear All Data
                  </button>
                  <button onclick="resetToDefaults()" class="danger-btn">
                    üîÑ Reset to Defaults
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Chat Section -->
          <div id="admin-chat" class="admin-section">
            <h3>üí¨ Chat Messages & Support</h3>
            
            <!-- Chat Statistics -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
              <div style="text-align: center; padding: 1.5rem; background: #F7FAFC; border-radius: 10px;">
                <div style="font-size: 2rem; font-weight: 700; color: #8B5CF6;" id="total-chat-messages">0</div>
                <div style="font-size: 0.9rem; color: #4A5568;">Total Messages</div>
              </div>
              <div style="text-align: center; padding: 1.5rem; background: #FEF3C7; border-radius: 10px;">
                <div style="font-size: 2rem; font-weight: 700; color: #F59E0B;" id="pending-chat-messages">0</div>
                <div style="font-size: 0.9rem; color: #4A5568;">Pending Response</div>
              </div>
              <div style="text-align: center; padding: 1.5rem; background: #D1FAE5; border-radius: 10px;">
                <div style="font-size: 2rem; font-weight: 700; color: #10B981;" id="responded-chat-messages">0</div>
                <div style="font-size: 0.9rem; color: #4A5568;">Responded</div>
              </div>
            </div>

            <!-- Team Members Configuration -->
            <div class="admin-card" style="margin-bottom: 2rem;">
              <h4>üë• Team Member Contact Settings</h4>
              <div id="team-members-list"></div>
              <button onclick="showAddTeamMember()" class="add-btn" style="margin-top: 1rem;">+ Add Team Member</button>
            </div>

            <div class="chat-filters">
              <button class="chat-filter active" onclick="filterChatMessages('all')">All Messages</button>
              <button class="chat-filter" onclick="filterChatMessages('pending')">‚ö†Ô∏è Pending Response</button>
              <button class="chat-filter" onclick="filterChatMessages('responded')">‚úÖ Responded</button>
            </div>
            
            <div class="admin-chat-messages" id="admin-chat-list">
              <!-- Chat messages will be loaded here -->
            </div>
            
            <!-- Chat Settings -->
            <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid #E2E8F0;">
              <h4 style="margin-bottom: 1rem; color: #2D3748;">Chat Settings</h4>
              <div class="admin-form">
                <div class="editor-field">
                  <label>Chat Widget Enabled</label>
                  <input type="checkbox" id="chat-enabled" checked>
                </div>
                <div class="admin-form-row">
                  <div class="editor-field">
                    <label>WhatsApp Number</label>
                    <input type="tel" id="whatsapp-number" value="+923001234567">
                  </div>
                  <div class="editor-field">
                    <label>Support Email</label>
                    <input type="email" id="admin-chat-email" value="teamhostall@gmail.com">
                  </div>
                </div>
                <button onclick="saveChatSettings()">Save Chat Settings</button>
              </div>
            </div>
          </div>

          <!-- Feedback Section -->
          <div id="admin-feedback" class="admin-section">
            <h3>üì® Feedback Management</h3>
            
            <div class="feedback-stats" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
              <div style="text-align: center; padding: 1.5rem; background: #F7FAFC; border-radius: 10px;">
                <div style="font-size: 2rem; font-weight: 700; color: #8B5CF6;" id="total-feedback-count">0</div>
                <div style="font-size: 0.9rem; color: #4A5568;">Total Feedback</div>
              </div>
              <div style="text-align: center; padding: 1.5rem; background: #F0FDF4; border-radius: 10px;">
                <div style="font-size: 2rem; font-weight: 700; color: #10B981;" id="recent-feedback-count">0</div>
                <div style="font-size: 0.9rem; color: #4A5568;">This Month</div>
              </div>
            </div>

            <div class="feedback-thank-you-section" style="margin-bottom: 2rem;">
              <h4>Feedback Thank You Message</h4>
              <p style="color: #6B7280; margin-bottom: 1rem;">Customize the thank you message shown after feedback submission</p>
              <div class="admin-form">
                <div class="editor-field">
                  <textarea id="feedback-thank-you-message" rows="4" placeholder="Enter thank you message..." style="width: 100%; padding: 1rem; border: 1px solid #E2E8F0; border-radius: 8px; font-family: inherit; resize: vertical;">We appreciate your input and will use it to improve our services.</textarea>
                </div>
                <button onclick="updateFeedbackMessage()" class="btn-primary" style="margin-top: 1rem;">Update Message</button>
              </div>
            </div>
            
            <div id="feedback-list">
              <h4>Recent Feedback Submissions</h4>
              <div id="feedback-submissions" style="display: flex; flex-direction: column; gap: 1rem;">
                <div class="admin-card" style="text-align: center; padding: 2rem; color: #6B7280;">
                  <p style="margin: 0; font-style: italic;">No feedback submissions yet.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- FAQ Section -->
          <div id="admin-faq" class="admin-section">
            <h3 style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1.5rem;">
              <span style="font-size: 1.5rem;">‚ùì</span> 
              <span>FAQ Management</span>
            </h3>
            
            <div class="faq-stats" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
              <div style="text-align: center; padding: 1.5rem; background: #EEF2FF; border-radius: 10px; border-left: 4px solid #6366F1;">
                <div style="font-size: 2rem; font-weight: 700; color: #4F46E5;" id="total-faq-count">0</div>
                <div style="font-size: 0.9rem; color: #4A5568; font-weight: 500;">Total FAQs</div>
              </div>
              <div style="text-align: center; padding: 1.5rem; background: #ECFDF5; border-radius: 10px; border-left: 4px solid #10B981;">
                <div style="font-size: 2rem; font-weight: 700; color: #059669;" id="published-faq-count">0</div>
                <div style="font-size: 0.9rem; color: #4A5568; font-weight: 500;">Published</div>
              </div>

            </div>
            
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
              <h4 style="margin: 0; color: #4B5563; font-weight: 600;">Manage FAQ Questions</h4>
              <button onclick="showFAQForm()" class="btn-primary" style="background: #3B82F6; color: white; border: none; padding: 0.6rem 1.2rem; border-radius: 6px; cursor: pointer; font-weight: 500; display: flex; align-items: center; gap: 0.5rem; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <span style="font-size: 1rem;">‚ûï</span> Add New FAQ
              </button>
            </div>

            <div id="faq-list" style="margin-bottom: 2rem;">
              <!-- FAQ items will be listed here -->
            </div>
            
            <!-- FAQ Form Modal -->
            <div id="faq-form-modal" class="modal-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 1000; justify-content: center; align-items: center;">
              <div class="modal-content" style="max-width: 600px; background: white; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.15); width: 90%;">
                <div class="modal-header" style="padding: 1rem 1.5rem; border-bottom: 1px solid #E2E8F0; display: flex; justify-content: space-between; align-items: center;">
                  <h4 id="faq-form-title" style="margin: 0; color: #3B82F6; font-weight: 600; font-size: 1.2rem;">Add New FAQ</h4>
                  <button onclick="closeFAQForm()" class="modal-close" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #6B7280;">√ó</button>
                </div>
                <div class="modal-body" style="padding: 1.5rem;">
                  <div id="edit-mode-indicator" style="margin-bottom: 1rem; padding: 0.5rem; background: #DBEAFE; border-radius: 4px; color: #3B82F6; font-size: 0.9rem; display: none;">
                    <span style="font-weight: 600;">‚úèÔ∏è Edit Mode:</span> You are currently editing an existing FAQ
                  </div>
                  <form id="faq-form">
                    <div class="form-group" style="margin-bottom: 1rem;">
                      <label style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #4B5563;">Question</label>
                      <input type="text" id="faq-question" placeholder="Enter FAQ question..." required style="width: 100%; padding: 0.7rem; border: 1px solid #D1D5DB; border-radius: 4px; font-size: 0.95rem;">
                    </div>
                    <div class="form-group" style="margin-bottom: 1rem;">
                      <label style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #4B5563;">Answer</label>
                      <textarea id="faq-answer" rows="5" placeholder="Enter FAQ answer..." required style="width: 100%; padding: 0.7rem; border: 1px solid #D1D5DB; border-radius: 4px; font-size: 0.95rem; resize: vertical;"></textarea>
                    </div>
                    <div class="form-group" style="margin-bottom: 1rem;">
                      <label style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #4B5563;">Category</label>
                      <select id="faq-category" required style="width: 100%; padding: 0.7rem; border: 1px solid #D1D5DB; border-radius: 4px; font-size: 0.95rem; background-color: white;">
                        <option value="general">General</option>
                        <option value="listing">Listing & Management</option>
                        <option value="admin">Admin Panel</option>
                        <option value="safety">Trust & Safety</option>
                        <option value="security">Scam Protection</option>
                        <option value="booking">Booking & Availability</option>
                        <option value="payment">Payment</option>
                        <option value="facilities">Facilities & Amenities</option>
                      </select>
                    </div>
                    <div class="form-group" style="margin-bottom: 1.5rem;">
                      <label style="display: flex; align-items: center; font-weight: 500; color: #4B5563; cursor: pointer;">
                        <input type="checkbox" id="faq-published" checked style="margin-right: 0.5rem; width: 1rem; height: 1rem;">
                        Publish this FAQ
                      </label>
                    </div>
                    <div class="form-actions" style="display: flex; gap: 1rem; justify-content: flex-end;">
                      <button type="button" onclick="closeFAQForm()" class="btn-secondary" style="padding: 0.6rem 1.2rem; background: #E5E7EB; color: #4B5563; border: none; border-radius: 4px; cursor: pointer; font-weight: 500;">Cancel</button>
                      <button type="submit" class="btn-primary" style="padding: 0.6rem 1.2rem; background: #3B82F6; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: 500;">Save FAQ</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>

          <!-- Statistics Management Section -->
          <div id="admin-stats" class="admin-section">
            <h3>üìä Statistics Management</h3>
            <p style="color: #6B7280; margin-bottom: 1.5rem;">Manage the statistics displayed in the "Why Choose HOSTALL?" section</p>
            
            <div class="stats-list" id="stats-list">
              <!-- Statistics will be loaded here -->
            </div>
            
            <button onclick="showStatsForm()" class="btn-primary" style="width: 100%; margin-top: 1rem;">+ Add New Statistic</button>
            
            <!-- Stats Form Modal -->
            <div id="stats-form-modal" class="modal-overlay" style="display: none;">
              <div class="modal-content" style="max-width: 500px;">
                <div class="modal-header">
                  <h4 id="stats-form-title">Add New Statistic</h4>
                  <button onclick="closeStatsForm()" class="modal-close">√ó</button>
                </div>
                <div class="modal-body">
                  <form id="stats-form">
                    <div class="form-group">
                      <label>Number/Value</label>
                      <input type="text" id="stat-number" placeholder="e.g., 500+, 24/7, 100%" required>
                    </div>
                    <div class="form-group">
                      <label>Label</label>
                      <input type="text" id="stat-label" placeholder="e.g., Happy Students, Verified Hostels" required>
                    </div>
                    <div class="form-group">
                      <label>
                        <input type="checkbox" id="stat-published" checked>
                        Display this statistic
                      </label>
                    </div>
                    <div class="form-actions" style="display: flex; gap: 1rem; justify-content: flex-end;">
                      <button type="button" onclick="closeStatsForm()" class="btn-secondary">Cancel</button>
                      <button type="submit" class="btn-primary">Save Statistic</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>

          <!-- Footer Section -->
          <div id="admin-footer" class="admin-section">
            <h3>ü¶∂ Footer Management</h3>
            <div class="admin-form">
              <div class="editor-field">
                <label>Company Description</label>
                <textarea id="footer-description">Finding perfect hostels for students and professionals in Lahore with verified listings and transparent pricing.</textarea>
              </div>
              <div class="admin-form-row">
                <div class="editor-field">
                  <label>Phone Number</label>
                  <input type="tel" id="footer-phone" value="+92 300 1234567">
                </div>
                <div class="editor-field">
                  <label>Email Address</label>
                  <input type="email" id="footer-email" value="teamhostall@gmail.com">
                </div>
              </div>
              <div class="editor-field">
                <label>Address</label>
                <input type="text" id="footer-address" value="Lahore, Pakistan">
              </div>
              <button onclick="saveFooter()">Update Footer</button>
            </div>
          </div>

          <!-- Testimonials Section -->
          <div id="admin-testimonials" class="admin-section">
            <h3>üí¨ Testimonials Management</h3>
            <p style="color: #6B7280; margin-bottom: 1.5rem;">Manage user testimonials displayed on the homepage</p>
            
            <div class="testimonial-visibility-control" style="background: #F7FAFC; padding: 1rem; border-radius: 8px; margin-bottom: 2rem;">
              <div style="display: flex; align-items: center; justify-content: space-between;">
                <div>
                  <div style="font-weight: 600; color: #2D3748;">Section Visibility</div>
                  <div style="font-size: 0.9rem; color: #4A5568;">Show or hide the testimonials section on the homepage</div>
                </div>
                <div>
                  <label class="switch" style="position: relative; display: inline-block; width: 60px; height: 34px;">
                    <input type="checkbox" id="testimonials-visible" onchange="toggleTestimonialsVisibility()" style="opacity: 0; width: 0; height: 0;">
                    <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px;">
                      <span style="position: absolute; content: ''; height: 26px; width: 26px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; transform: translateX(0px);"></span>
                    </span>
                  </label>
                </div>
              </div>
            </div>
            
            <div class="testimonial-stats" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
              <div style="text-align: center; padding: 1.5rem; background: #F7FAFC; border-radius: 10px;">
                <div style="font-size: 2rem; font-weight: 700; color: #8B5CF6;" id="total-testimonial-count">4</div>
                <div style="font-size: 0.9rem; color: #4A5568;">Total Testimonials</div>
              </div>
              <div style="text-align: center; padding: 1.5rem; background: #F0FDF4; border-radius: 10px;">
                <div style="font-size: 2rem; font-weight: 700; color: #10B981;" id="active-testimonial-count">4</div>
                <div style="font-size: 0.9rem; color: #4A5568;">Active Testimonials</div>
              </div>
            </div>

            <div id="testimonial-list" style="margin-bottom: 2rem;">
              <!-- Testimonial items will be listed here -->
            </div>
            
            <button onclick="showTestimonialForm()" class="btn-primary" style="width: 100%;">+ Add New Testimonial</button>
            
            <!-- Testimonial Form Modal -->
            <div id="testimonial-form-modal" class="modal-overlay" style="display: none;">
              <div class="modal-content" style="max-width: 600px;">
                <div class="modal-header">
                  <h4 id="testimonial-form-title">Add New Testimonial</h4>
                  <button onclick="closeTestimonialForm()" class="modal-close">√ó</button>
                </div>
                <div class="modal-body">
                  <form id="testimonial-form">
                    <div class="form-group">
                      <label>Quote</label>
                      <textarea id="testimonial-quote" rows="4" placeholder="Enter testimonial quote..." required></textarea>
                    </div>
                    <div class="form-group">
                      <label>Author Name</label>
                      <input type="text" id="testimonial-author" placeholder="User name..." required>
                    </div>
                    <div class="form-group">
                      <label>University/Institution</label>
                      <input type="text" id="testimonial-institution" placeholder="e.g. Location or Institution..." required>
                    </div>
                    <div class="form-group">
                      <div class="checkbox-wrap">
                        <input type="checkbox" id="testimonial-active" checked>
                        <label for="testimonial-active">Active</label>
                      </div>
                    </div>
                    <div class="form-actions">
                      <button type="button" onclick="closeTestimonialForm()" class="btn-secondary">Cancel</button>
                      <button type="button" onclick="saveTestimonial()" class="btn-primary">Save Testimonial</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Advertisement Management Section -->
          <div id="admin-advertisements" class="admin-section">
            <h3>üì∫ Advertisement Management</h3>
            
            <!-- Advertisement Locations & Sizes Documentation -->
            <div class="admin-form-section" style="margin-bottom: 2rem; background: #f8f9fa; border-radius: 8px; padding: 1.5rem;">
              <h4 style="color: #8B5CF6; margin-bottom: 1rem;">üìç Advertisement Locations & Banner Sizes</h4>
              <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem;">
                
                <!-- Home Page Ads -->
                <div style="background: white; padding: 1rem; border-radius: 6px; border-left: 4px solid #22C55E;">
                  <h5 style="color: #22C55E; margin: 0 0 0.5rem 0;">üè† Home Page 1</h5>
                  <p style="margin: 0; font-size: 0.9rem; color: #666;"><strong>Location:</strong> Before Featured Hostels</p>
                  <p style="margin: 0; font-size: 0.9rem; color: #666;"><strong>Size:</strong> 728x90 (Leaderboard Banner)</p>
                  <p style="margin: 0; font-size: 0.9rem; color: #666;"><strong>Mobile:</strong> 320x100 (Mobile Banner)</p>
                </div>

                <div style="background: white; padding: 1rem; border-radius: 6px; border-left: 4px solid #3B82F6;">
                  <h5 style="color: #3B82F6; margin: 0 0 0.5rem 0;">üè† Home Page 2</h5>
                  <p style="margin: 0; font-size: 0.9rem; color: #666;"><strong>Location:</strong> After Featured Hostels</p>
                  <p style="margin: 0; font-size: 0.9rem; color: #666;"><strong>Size:</strong> 728x90 (Leaderboard Banner)</p>
                  <p style="margin: 0; font-size: 0.9rem; color: #666;"><strong>Mobile:</strong> 320x100 (Mobile Banner)</p>
                </div>

                <!-- FAQ Ads -->
                <div style="background: white; padding: 1rem; border-radius: 6px; border-left: 4px solid #F59E0B;">
                  <h5 style="color: #F59E0B; margin: 0 0 0.5rem 0;">‚ùì FAQ Left Sidebar</h5>
                  <p style="margin: 0; font-size: 0.9rem; color: #666;"><strong>Location:</strong> Left side of FAQ section</p>
                  <p style="margin: 0; font-size: 0.9rem; color: #666;"><strong>Size:</strong> 160x600 (Wide Skyscraper)</p>
                  <p style="margin: 0; font-size: 0.9rem; color: #666;"><strong>Mobile:</strong> Hidden (Not visible)</p>
                </div>

                <div style="background: white; padding: 1rem; border-radius: 6px; border-left: 4px solid #EF4444;">
                  <h5 style="color: #EF4444; margin: 0 0 0.5rem 0;">‚ùì FAQ Right Sidebar</h5>
                  <p style="margin: 0; font-size: 0.9rem; color: #666;"><strong>Location:</strong> Right side of FAQ section</p>
                  <p style="margin: 0; font-size: 0.9rem; color: #666;"><strong>Size:</strong> 300x250 (Medium Rectangle)</p>
                  <p style="margin: 0; font-size: 0.9rem; color: #666;"><strong>Mobile:</strong> Hidden (Not visible)</p>
                </div>

                <!-- Mobile FAQ Ads -->
                <div style="background: white; padding: 1rem; border-radius: 6px; border-left: 4px solid #8B5CF6;">
                  <h5 style="color: #8B5CF6; margin: 0 0 0.5rem 0;">üì± Mobile FAQ Ads</h5>
                  <p style="margin: 0; font-size: 0.9rem; color: #666;"><strong>Location:</strong> Between FAQ sections (mobile only)</p>
                  <p style="margin: 0; font-size: 0.9rem; color: #666;"><strong>Size:</strong> 320x100 (Mobile Banner)</p>
                  <p style="margin: 0; font-size: 0.9rem; color: #666;"><strong>Count:</strong> 6 slots between categories</p>
                </div>

                <!-- Additional Slots -->
                <div style="background: white; padding: 1rem; border-radius: 6px; border-left: 4px solid #6B7280;">
                  <h5 style="color: #6B7280; margin: 0 0 0.5rem 0;">üìÑ Header Banner</h5>
                  <p style="margin: 0; font-size: 0.9rem; color: #666;"><strong>Location:</strong> Top of page (optional)</p>
                  <p style="margin: 0; font-size: 0.9rem; color: #666;"><strong>Size:</strong> 970x90 (Super Banner)</p>
                  <p style="margin: 0; font-size: 0.9rem; color: #666;"><strong>Mobile:</strong> 320x50 (Mobile Banner)</p>
                </div>

                <div style="background: white; padding: 1rem; border-radius: 6px; border-left: 4px solid #059669;">
                  <h5 style="color: #059669; margin: 0 0 0.5rem 0;">ü¶∂ Footer Banner</h5>
                  <p style="margin: 0; font-size: 0.9rem; color: #666;"><strong>Location:</strong> Bottom of page (optional)</p>
                  <p style="margin: 0; font-size: 0.9rem; color: #666;"><strong>Size:</strong> 728x90 (Leaderboard Banner)</p>
                  <p style="margin: 0; font-size: 0.9rem; color: #666;"><strong>Mobile:</strong> 320x100 (Mobile Banner)</p>
                </div>
              </div>

              <!-- Quick Stats -->
              <div style="margin-top: 1.5rem; padding: 1rem; background: linear-gradient(135deg, #8B5CF6, #7C3AED); border-radius: 8px; color: white;">
                <h5 style="margin: 0 0 0.5rem 0; color: white;">üìä Advertisement Quick Stats</h5>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; text-align: center;">
                  <div>
                    <div style="font-size: 1.5rem; font-weight: bold;">8</div>
                    <div style="font-size: 0.9rem; opacity: 0.9;">Total Ad Slots</div>
                  </div>
                  <div>
                    <div style="font-size: 1.5rem; font-weight: bold;">6</div>
                    <div style="font-size: 0.9rem; opacity: 0.9;">Mobile Only</div>
                  </div>
                  <div>
                    <div style="font-size: 1.5rem; font-weight: bold;">4</div>
                    <div style="font-size: 0.9rem; opacity: 0.9;">Desktop + Mobile</div>
                  </div>
                  <div>
                    <div style="font-size: 1.5rem; font-weight: bold;">2</div>
                    <div style="font-size: 0.9rem; opacity: 0.9;">Desktop Only</div>
                  </div>
                </div>
              </div>
            </div>

            <div class="admin-form">
              <div class="admin-form-section">
                <h4>Current Advertisements</h4>
                <div id="ads-list" style="margin-bottom: 2rem;">
                  <!-- Advertisement list will be populated here -->
                </div>
                
                <h4>Add New Advertisement</h4>
                <div class="form-group">
                  <label>Advertisement Title</label>
                  <input type="text" id="ad-title" placeholder="Enter advertisement title">
                </div>
                <div class="form-group">
                  <label>Advertisement URL (Link destination)</label>
                  <input type="url" id="ad-url" placeholder="https://example.com">
                </div>
                <div class="form-group">
                  <label>Advertisement Image</label>
                  <input type="file" id="ad-image" accept="image/*">
                </div>
                <div class="form-group">
                  <label>Position</label>
                  <select id="ad-position">
                    <option value="sidebar">FAQ Sidebar</option>
                    <option value="mobile-faq">Mobile FAQ (Between Questions)</option>
                    <option value="banner">Hostels Banner</option>
                    <option value="header">Header Banner</option>
                    <option value="footer">Footer Banner</option>
                  </select>
                </div>
                <div class="form-group">
                  <div class="checkbox-wrap">
                    <input type="checkbox" id="ad-active" checked>
                    <label for="ad-active">Active</label>
                  </div>
                </div>
                <button onclick="saveAdvertisement()" class="btn-primary">Save Advertisement</button>
              </div>
              
              <div class="admin-form-section">
                <h4>WhatsApp Contact Management</h4>
                <div id="whatsapp-contacts-list" style="margin-bottom: 2rem;">
                  <!-- WhatsApp contacts will be populated here -->
                </div>
                
                <h4>Add WhatsApp Contact</h4>
                <div class="form-group">
                  <label>Contact Label</label>
                  <input type="text" id="whatsapp-label" placeholder="e.g., Main Support, Sales, etc.">
                </div>
                <div class="form-group">
                  <label>WhatsApp Number (with country code)</label>
                  <input type="tel" id="whatsapp-number-input" placeholder="923331536041">
                </div>
                <div class="form-group">
                  <div class="checkbox-wrap">
                    <input type="checkbox" id="whatsapp-allow-calls">
                    <label for="whatsapp-allow-calls">Allow Calls (uncheck for message only)</label>
                  </div>
                </div>
                <div class="form-group">
                  <label>Note</label>
                  <input type="text" id="whatsapp-note" placeholder="e.g., No calls, message only">
                </div>
                <button onclick="saveWhatsAppContact()" class="btn-primary">Save Contact</button>
              </div>
            </div>
          </div>
          
          <!-- Policies Section -->
          <div id="admin-policies" class="admin-section">
            <h3>üìã Policies</h3>
            <div class="admin-form">
              <div class="editor-field">
                <label>Privacy Policy</label>
                <textarea id="privacy-policy" rows="8" placeholder="Enter privacy policy content...">At HOSTALL, we value your privacy. This Privacy Policy explains how we collect, use, and protect any personal information shared with us through our website.

1. Information We Collect:
User-Submitted Data: When users contact us via feedback forms, we may collect names, emails, or phone numbers.
Hostel Information: Our team collects hostel-related information through personal visits, calls, and referrals from friends. This data includes location, pricing, facilities, and general descriptions.
Technical Information: We may collect basic website usage data (e.g., browser type, pages visited) for improving the user experience.

2. How We Use This Information:
To publish and update hostel listings for public view.
To improve search filters and content accuracy.
To contact users who request support or have submitted queries.

3. Data Accuracy Notice:
Hostel data is collected and uploaded by our team, not the hostel owners. While we aim to ensure accuracy, some information may be estimated or subject to change. We do not guarantee that all listings are 100% current or correct.

4. Third-Party Sharing:
We do not sell or share your personal information with third parties, except where legally required.

5. Cookies and Analytics:
We may use cookies or analytics tools to better understand user behavior and improve the platform. You can manage cookies through your browser settings.

6. Your Rights:
You may:
- Request access to your personal information.
- Ask us to correct or delete your data.
- Contact us regarding privacy concerns through email.</textarea>
              </div>
              <div class="editor-field">
                <label>Terms of Service</label>
                <textarea id="terms-service" rows="8" placeholder="Enter terms of service content...">By using the HOSTALL platform, you agree to the following terms and conditions:

1. About HOSTALL:
HOSTALL is an informational platform that helps users discover hostels in major areas of Lahore. The data is gathered manually by our team, and is not directly submitted by hostel owners.

2. Use of the Platform:
Users may browse listings, search for hostels, and contact us for feedback or support.
All users must use the platform respectfully and lawfully.

3. Disclaimer on Hostel Listings:
We do not guarantee 100% accuracy of any listing.
Prices, facilities, and availability are based on information collected during visits or calls and may change without notice.
We are not responsible for any agreement, dispute, or arrangement made between a user and a hostel owner based on our listings.

4. Content Rights:
The hostel data, filters, images, and platform design are the property of HOSTALL.
Users may not copy, reproduce, or misuse the content without permission.

5. Modifications and Updates:
We reserve the right to update these terms and the platform at any time. Continued use of the site implies acceptance of any changes.

6. Termination of Use:
We may suspend or terminate access to users who misuse the site or violate these terms.

Contact Us: If you have any questions or concerns, please email us at teamhostall@gmail.com</textarea>
              </div>
              <button onclick="savePolicies()">Save Policies</button>
            </div>
          </div>

          <!-- Security Section -->
          <!-- FAQ Analytics Section -->
          <div id="admin-faq-analytics" class="admin-section">
            <h3>üìä FAQ Analytics Dashboard</h3>
            <div class="admin-form">
              <div class="admin-form-section">
                <h4>Helpful Votes Analytics</h4>
                <p style="color: #6B7280; margin-bottom: 1rem;">Track which FAQs are most helpful to users and analyze voting trends over time.</p>
                
                <!-- Filter options -->
                <div style="display: flex; flex-wrap: wrap; gap: 1rem; margin-bottom: 1.5rem; align-items: center;">
                  <div>
                    <label for="faq-analytics-timeframe">Time Range:</label>
                    <select id="faq-analytics-timeframe" onchange="loadFAQAnalytics()">
                      <option value="7">Last 7 days</option>
                      <option value="30" selected>Last 30 days</option>
                      <option value="90">Last 90 days</option>
                      <option value="180">Last 6 months</option>
                      <option value="365">Last year</option>
                    </select>
                  </div>
                  <div>
                    <label for="faq-analytics-id">Specific FAQ:</label>
                    <select id="faq-analytics-id" onchange="loadFAQAnalytics()">
                      <option value="all" selected>All FAQs</option>
                      <!-- FAQ options will be populated dynamically -->
                    </select>
                  </div>
                  <button class="btn-secondary" style="padding: 0.5rem 1rem; margin-left: auto;" onclick="loadFAQAnalytics(true)">
                    üîÑ Refresh Data
                  </button>
                </div>
                
                <!-- Effectiveness summary cards -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                  <div class="stat-card" style="background-color: #EBF8FF; border-left: 4px solid #4299E1; padding: 1rem; border-radius: 8px;">
                    <h5 style="margin: 0 0 0.5rem 0; color: #2B6CB0;">Top Helpful FAQ</h5>
                    <div id="top-helpful-faq" style="font-size: 1.2rem; font-weight: 600; color: #2C5282;">Loading...</div>
                    <div id="top-helpful-percentage" style="color: #2D3748; font-size: 0.9rem;">...</div>
                  </div>
                  
                  <div class="stat-card" style="background-color: #FEFCBF; border-left: 4px solid #ECC94B; padding: 1rem; border-radius: 8px;">
                    <h5 style="margin: 0 0 0.5rem 0; color: #975A16;">Most Viewed FAQ</h5>
                    <div id="most-viewed-faq" style="font-size: 1.2rem; font-weight: 600; color: #744210;">Loading...</div>
                    <div id="most-viewed-count" style="color: #2D3748; font-size: 0.9rem;">...</div>
                  </div>
                  
                  <div class="stat-card" style="background-color: #E6FFFA; border-left: 4px solid #38B2AC; padding: 1rem; border-radius: 8px;">
                    <h5 style="margin: 0 0 0.5rem 0; color: #234E52;">Total Helpful Votes</h5>
                    <div id="total-helpful-analytics" style="font-size: 1.2rem; font-weight: 600; color: #234E52;">Loading...</div>
                    <div id="helpful-growth" style="color: #2D3748; font-size: 0.9rem;">...</div>
                  </div>
                  
                  <div class="stat-card" style="background-color: #FEF2F2; border-left: 4px solid #F56565; padding: 1rem; border-radius: 8px;">
                    <h5 style="margin: 0 0 0.5rem 0; color: #9B2C2C;">Needs Improvement</h5>
                    <div id="needs-improvement-faq" style="font-size: 1.2rem; font-weight: 600; color: #9B2C2C;">Loading...</div>
                    <div id="needs-improvement-percentage" style="color: #2D3748; font-size: 0.9rem;">...</div>
                  </div>
                </div>
                
                <!-- Chart containers -->
                <div style="margin-bottom: 2rem;">
                  <h4>Helpfulness Ranking</h4>
                  <div style="background: white; border-radius: 8px; padding: 1rem; box-shadow: 0 2px 5px rgba(0,0,0,0.1); height: 400px;">
                    <canvas id="faq-effectiveness-chart"></canvas>
                  </div>
                </div>
                
                <div style="margin-bottom: 2rem;">
                  <h4>Daily Vote Trends</h4>
                  <div style="background: white; border-radius: 8px; padding: 1rem; box-shadow: 0 2px 5px rgba(0,0,0,0.1); height: 400px;">
                    <canvas id="faq-trends-chart"></canvas>
                  </div>
                </div>
                
                <div style="margin-bottom: 2rem;">
                  <h4>Hourly Distribution</h4>
                  <div style="background: white; border-radius: 8px; padding: 1rem; box-shadow: 0 2px 5px rgba(0,0,0,0.1); height: 400px;">
                    <canvas id="faq-hourly-chart"></canvas>
                  </div>
                </div>
                
                <!-- Full data table -->
                <div>
                  <h4>FAQ Effectiveness Data</h4>
                  <div class="table-responsive" style="overflow-x: auto;">
                    <table class="data-table" style="width: 100%; border-collapse: collapse; border: 1px solid #E2E8F0;">
                      <thead>
                        <tr style="background: #F7FAFC; text-align: left;">
                          <th style="padding: 0.75rem; border-bottom: 1px solid #E2E8F0;">FAQ ID</th>
                          <th style="padding: 0.75rem; border-bottom: 1px solid #E2E8F0;">Question</th>
                          <th style="padding: 0.75rem; border-bottom: 1px solid #E2E8F0;">Helpful Votes</th>
                          <th style="padding: 0.75rem; border-bottom: 1px solid #E2E8F0;">Not Helpful</th>
                          <th style="padding: 0.75rem; border-bottom: 1px solid #E2E8F0;">Total Votes</th>
                          <th style="padding: 0.75rem; border-bottom: 1px solid #E2E8F0;">Helpfulness %</th>
                          <th style="padding: 0.75rem; border-bottom: 1px solid #E2E8F0;">Net Score</th>
                        </tr>
                      </thead>
                      <tbody id="faq-analytics-table-body">
                        <tr>
                          <td colspan="7" style="padding: 1rem; text-align: center; color: #718096;">Loading data...</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                
                <div style="margin-top: 2rem;">
                  <button class="btn-primary" onclick="exportFAQAnalytics()">
                    üìä Export Analytics Data
                  </button>
                </div>
              </div>
            </div>
          </div>
          
          <div id="admin-security" class="admin-section">
            <h3>üîê Security Settings</h3>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
              <!-- 2FA Status Card -->
              <div class="security-card" style="background: #F7FAFC; border: 1px solid #E2E8F0; border-radius: 12px; padding: 1.5rem;">
                <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                  <div style="width: 50px; height: 50px; background: #8B5CF6; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">üîê</div>
                  <div>
                    <h4 style="margin: 0; color: #2D3748;">Two-Factor Authentication</h4>
                    <p style="margin: 0; color: #6B7280; font-size: 0.9em;" id="2fa-status">Checking status...</p>
                  </div>
                </div>
                <div id="2fa-actions">
                  <button onclick="setup2FA()" id="enable-2fa-btn" style="width: 100%; padding: 12px; background: #8B5CF6; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 0.9em; margin-bottom: 8px;" disabled>
                    Enable 2FA
                  </button>
                  <button onclick="disable2FA()" id="disable-2fa-btn" style="width: 100%; padding: 8px; background: #E53E3E; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 0.8em; display: none;">
                    Disable 2FA
                  </button>
                </div>
              </div>
              
              <!-- Security Events Card -->
              <div class="security-card" style="background: #F7FAFC; border: 1px solid #E2E8F0; border-radius: 12px; padding: 1.5rem;">
                <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                  <div style="width: 50px; height: 50px; background: #38A169; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">üìä</div>
                  <div>
                    <h4 style="margin: 0; color: #2D3748;">Security Events</h4>
                    <p style="margin: 0; color: #6B7280; font-size: 0.9em;">Monitor login activity</p>
                  </div>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; font-size: 0.8em;">
                  <div style="text-align: center; padding: 0.5rem; background: white; border-radius: 6px;">
                    <div style="font-weight: 600; color: #38A169;" id="successful-logins">-</div>
                    <div style="color: #6B7280;">Successful</div>
                  </div>
                  <div style="text-align: center; padding: 0.5rem; background: white; border-radius: 6px;">
                    <div style="font-weight: 600; color: #E53E3E;" id="failed-logins">-</div>
                    <div style="color: #6B7280;">Failed</div>
                  </div>
                </div>
              </div>
              
              <!-- Password Security Card -->
              <div class="security-card" style="background: #F7FAFC; border: 1px solid #E2E8F0; border-radius: 12px; padding: 1.5rem;">
                <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                  <div style="width: 50px; height: 50px; background: #D69E2E; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">üîë</div>
                  <div>
                    <h4 style="margin: 0; color: #2D3748;">Password Security</h4>
                    <p style="margin: 0; color: #6B7280; font-size: 0.9em;">Manage your password</p>
                  </div>
                </div>
                <button onclick="changePassword()" style="width: 100%; padding: 12px; background: #D69E2E; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 0.9em;">
                  Change Password
                </button>
              </div>
            </div>
            
            <!-- Recent Security Events -->
            <div style="background: white; border: 1px solid #E2E8F0; border-radius: 12px; padding: 1.5rem;">
              <h4 style="margin: 0 0 1rem 0; color: #2D3748; display: flex; align-items: center; gap: 0.5rem;">
                <span>üïí</span> Recent Security Activity
              </h4>
              <div id="security-events-list" style="max-height: 300px; overflow-y: auto;">
                <div style="text-align: center; color: #6B7280; padding: 2rem;">
                  Loading security events...
                </div>
              </div>
            </div>
            
            <!-- Security Recommendations -->
            <div style="background: #FFF5F5; border: 1px solid #FED7D7; border-radius: 12px; padding: 1.5rem; margin-top: 1.5rem;">
              <h4 style="margin: 0 0 1rem 0; color: #C53030;">üõ°Ô∏è Security Recommendations</h4>
              <ul style="margin: 0; padding-left: 1.5rem; color: #744210;">
                <li>Enable two-factor authentication for enhanced security</li>
                <li>Use a strong password with at least 8 characters</li>
                <li>Regularly monitor your security activity</li>
                <li>Log out from shared or public computers</li>
                <li>Contact support if you notice suspicious activity</li>
              </ul>
            </div>
          </div>

          <!-- Admins Section -->
          <div id="admin-admins" class="admin-section">
            <h3>üë• Admin Users & Requests</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
              <div style="text-align: center; padding: 1.5rem; background: #F7FAFC; border-radius: 10px;">
                <div style="font-size: 2rem; font-weight: 700; color: #8B5CF6;" id="admin-user-count">0</div>
                <div style="font-size: 0.9rem; color: #4A5568;">Total Admins</div>
              </div>
              <div style="text-align: center; padding: 1.5rem; background: #FEF3C7; border-radius: 10px;">
                <div style="font-size: 2rem; font-weight: 700; color: #F59E0B;" id="pending-admin-requests">0</div>
                <div style="font-size: 0.9rem; color: #4A5568;">Pending Requests</div>
              </div>
              <div style="text-align: center; padding: 1.5rem; background: #FECACA; border-radius: 10px;">
                <div style="font-size: 2rem; font-weight: 700; color: #EF4444;" id="password-reset-requests">0</div>
                <div style="font-size: 0.9rem; color: #4A5568;">Password Resets</div>
              </div>
            </div>

            <!-- Admin Requests Section -->
            <div class="admin-card" style="margin-bottom: 2rem;">
              <h4>üìã Admin Access Requests</h4>
              <div id="admin-requests-list"></div>
            </div>

            <!-- Password Reset Requests -->
            <div class="admin-card" style="margin-bottom: 2rem;">
              <h4>üîë Password Reset Requests</h4>
              <div id="password-reset-list"></div>
            </div>

            <!-- Current Admins -->
            <div class="admin-card">
              <h4>üë• Current Admin Users</h4>
              <div id="admin-list" style="margin-bottom: 1.5rem;"></div>
            <button onclick="showForm('adminuser')" style="width: 100%;">+ Add Admin User</button>
          </div>
        </div>

        <!-- Forms -->
        <div id="hostel-form" style="display:none; margin-top:2rem;">
          <div class="form-container">
            <h3 style="text-align: center; margin-bottom: 2rem; color: #8B5CF6;">Add/Edit Hostel</h3>
            <div class="form-group">
              <label>Hostel Name</label>
              <input id="h-name" placeholder="Enter hostel name">
            </div>
            <div class="form-group">
              <label>Gender Preference</label>
              <select id="h-gender">
                <option>Male</option>
                <option>Female</option>
              </select>
            </div>
            <div class="form-group">
              <label>Google Maps URL</label>
              <input id="h-map" placeholder="https://maps.google.com/...">
            </div>
            <div class="form-group">
              <label>Phone Number</label>
              <input id="h-phone" placeholder="+92-300-1234567" type="tel" pattern="^\+92[0-9]{10}$" title="Enter valid Pakistani phone number (+92-xxx-xxxxxxx)">
              <small style="color: #6B7280; font-size: 0.8rem;">Format: +92-300-1234567</small>
            </div>
            <div class="form-group">
              <label>WhatsApp Number</label>
              <input id="h-whatsapp" placeholder="+92-300-1234567" type="tel" pattern="^\+92[0-9]{10}$" title="Enter valid Pakistani WhatsApp number (+92-xxx-xxxxxxx)">
              <small style="color: #6B7280; font-size: 0.8rem;">Format: +92-300-1234567</small>
            </div>
            <div class="form-group">
              <label>Details (Location, etc.)</label>
              <textarea id="h-details" placeholder="Near Punjab University, additional details about the hostel..." rows="3"></textarea>
            </div>
            
            <div class="form-group">
              <label>Room Types & Pricing</label>
              <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                <p style="margin-top: 0; margin-bottom: 0.5rem; font-size: 0.9rem; color: #6B7280;">Add room types and their price ranges. Prices should be monthly rent in PKR.</p>
                
                <div id="room-types-container">
                  <div class="room-type-item" style="display: flex; gap: 1rem; margin-bottom: 0.5rem; align-items: center;">
                    <div style="flex: 1;">
                      <select class="room-type-select" style="width: 100%; padding: 0.5rem; border: 1px solid #E2E8F0; border-radius: 4px;">
                        <option value="1-bed">1-Bed Room</option>
                        <option value="2-bed">2-Bed Room</option>
                        <option value="3-bed">3-Bed Room</option>
                        <option value="4-bed">4-Bed Room</option>
                        <option value="5-bed">5-Bed Room</option>
                        <option value="6-bed">6-Bed Room</option>
                        <option value="7-bed">7-Bed Room</option>
                        <option value="8-bed">8-Bed Room</option>
                        <option value="dormitory">Dormitory</option>
                      </select>
                    </div>
                    <div style="flex: 1; display: flex; align-items: center; gap: 0.5rem;">
                      <span>PKR</span>
                      <input type="number" class="room-min-price" placeholder="Min" style="flex: 1; padding: 0.5rem; border: 1px solid #E2E8F0; border-radius: 4px;">
                    </div>
                    <span>to</span>
                    <div style="flex: 1; display: flex; align-items: center; gap: 0.5rem;">
                      <span>PKR</span>
                      <input type="number" class="room-max-price" placeholder="Max" style="flex: 1; padding: 0.5rem; border: 1px solid #E2E8F0; border-radius: 4px;">
                    </div>
                    <button type="button" class="remove-room-type" onclick="this.closest('.room-type-item').remove();" style="background: #EF4444; color: white; border: none; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer;">√ó</button>
                  </div>
                </div>
                
                <button type="button" onclick="addRoomType()" style="background: #8B5CF6; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; margin-top: 0.5rem; cursor: pointer;">+ Add Another Room Type</button>
              </div>
            </div>
            
            <div class="form-group">
              <label>Available Facilities</label>
              <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; max-height: 400px; overflow-y: auto;">
                <p style="margin-top: 0; margin-bottom: 0.75rem; font-size: 0.9rem; color: #6B7280;">Select all available facilities. Only selected facilities will be displayed to users.</p>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.75rem;">
                  <!-- Mess Services -->
                  <div style="background: white; padding: 0.75rem; border-radius: 6px; border: 1px solid #E2E8F0;">
                    <h5 style="margin: 0 0 0.5rem 0; color: #374151; font-size: 0.9rem; font-weight: 600;">üçΩÔ∏è Mess Services</h5>
                    <div style="display: flex; flex-direction: column; gap: 0.3rem;">
                      <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                        <input type="checkbox" id="facility-breakfast" class="facility-checkbox" value="breakfast">
                        <span>Breakfast</span>
                      </label>
                      <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                        <input type="checkbox" id="facility-lunch" class="facility-checkbox" value="lunch">
                        <span>Lunch</span>
                      </label>
                      <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                        <input type="checkbox" id="facility-dinner" class="facility-checkbox" value="dinner">
                        <span>Dinner</span>
                      </label>
                    </div>
                  </div>
                  
                  <!-- Cooling & Heating -->
                  <div style="background: white; padding: 0.75rem; border-radius: 6px; border: 1px solid #E2E8F0;">
                    <h5 style="margin: 0 0 0.5rem 0; color: #374151; font-size: 0.9rem; font-weight: 600;">‚ùÑÔ∏è Cooling & Heating</h5>
                    <div style="display: flex; flex-direction: column; gap: 0.3rem;">
                      <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                        <input type="checkbox" id="facility-ac" class="facility-checkbox" value="ac">
                        <span>Air Conditioning</span>
                      </label>
                      <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                        <input type="checkbox" id="facility-cooler" class="facility-checkbox" value="cooler">
                        <span>Air Cooler</span>
                      </label>
                    </div>
                  </div>
                  
                  <!-- Security -->
                  <div style="background: white; padding: 0.75rem; border-radius: 6px; border: 1px solid #E2E8F0;">
                    <h5 style="margin: 0 0 0.5rem 0; color: #374151; font-size: 0.9rem; font-weight: 600;">üîí Security</h5>
                    <div style="display: flex; flex-direction: column; gap: 0.3rem;">
                      <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                        <input type="checkbox" id="facility-security" class="facility-checkbox" value="security">
                        <span>Security Guard</span>
                      </label>
                      <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                        <input type="checkbox" id="facility-cctv" class="facility-checkbox" value="cctv">
                        <span>CCTV Surveillance</span>
                      </label>
                    </div>
                  </div>
                  
                  <!-- Internet & Communication -->
                  <div style="background: white; padding: 0.75rem; border-radius: 6px; border: 1px solid #E2E8F0;">
                    <h5 style="margin: 0 0 0.5rem 0; color: #374151; font-size: 0.9rem; font-weight: 600;">üì∂ Internet</h5>
                    <div style="display: flex; flex-direction: column; gap: 0.3rem;">
                      <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                        <input type="checkbox" id="facility-wifi" class="facility-checkbox" value="wifi">
                        <span>WiFi Internet</span>
                      </label>
                    </div>
                  </div>
                  
                  <!-- Laundry & Cleaning -->
                  <div style="background: white; padding: 0.75rem; border-radius: 6px; border: 1px solid #E2E8F0;">
                    <h5 style="margin: 0 0 0.5rem 0; color: #374151; font-size: 0.9rem; font-weight: 600;">üß∫ Laundry & Cleaning</h5>
                    <div style="display: flex; flex-direction: column; gap: 0.3rem;">
                      <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                        <input type="checkbox" id="facility-laundry" class="facility-checkbox" value="laundry">
                        <span>Laundry Service</span>
                      </label>
                      <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                        <input type="checkbox" id="facility-cleaning" class="facility-checkbox" value="cleaning">
                        <span>Cleaning Services</span>
                      </label>
                    </div>
                  </div>
                  
                  <!-- Kitchen & Cooking -->
                  <div style="background: white; padding: 0.75rem; border-radius: 6px; border: 1px solid #E2E8F0;">
                    <h5 style="margin: 0 0 0.5rem 0; color: #374151; font-size: 0.9rem; font-weight: 600;">üç≥ Kitchen & Cooking</h5>
                    <div style="display: flex; flex-direction: column; gap: 0.3rem;">
                      <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                        <input type="checkbox" id="facility-kitchen" class="facility-checkbox" value="kitchen">
                        <span>Kitchen for Self Cooking</span>
                      </label>
                      <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                        <input type="checkbox" id="facility-oven" class="facility-checkbox" value="oven">
                        <span>Oven/Microwave</span>
                      </label>
                      <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                        <input type="checkbox" id="facility-refrigerator" class="facility-checkbox" value="refrigerator">
                        <span>Refrigerator</span>
                      </label>
                    </div>
                  </div>
                  
                  <!-- Power & Utilities -->
                  <div style="background: white; padding: 0.75rem; border-radius: 6px; border: 1px solid #E2E8F0;">
                    <h5 style="margin: 0 0 0.5rem 0; color: #374151; font-size: 0.9rem; font-weight: 600;">‚ö° Power & Utilities</h5>
                    <div style="display: flex; flex-direction: column; gap: 0.3rem;">
                      <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                        <input type="checkbox" id="facility-ups" class="facility-checkbox" value="ups">
                        <span>UPS Backup</span>
                      </label>
                      <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                        <input type="checkbox" id="facility-generator" class="facility-checkbox" value="generator">
                        <span>Generator Backup</span>
                      </label>
                    </div>
                  </div>
                  
                  <!-- Parking -->
                  <div style="background: white; padding: 0.75rem; border-radius: 6px; border: 1px solid #E2E8F0;">
                    <h5 style="margin: 0 0 0.5rem 0; color: #374151; font-size: 0.9rem; font-weight: 600;">üöó Parking</h5>
                    <div style="display: flex; flex-direction: column; gap: 0.3rem;">
                      <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; cursor: pointer;">
                        <input type="checkbox" id="facility-parking" class="facility-checkbox" value="parking">
                        <span>Parking Space</span>
                      </label>
                    </div>
                  </div>
                </div>
                
                <!-- Other Facilities Text Area -->
                <div style="margin-top: 1rem; background: white; padding: 0.75rem; border-radius: 6px; border: 1px solid #E2E8F0;">
                  <h5 style="margin: 0 0 0.5rem 0; color: #374151; font-size: 0.9rem; font-weight: 600;">üìù Other Facilities</h5>
                  <textarea id="other-facilities" placeholder="Mention any additional facilities not listed above (e.g., Study Room, Prayer Area, Common Room, Library, etc.)" rows="3" style="width: 100%; padding: 0.5rem; border: 1px solid #E2E8F0; border-radius: 4px; resize: vertical; font-size: 0.9rem;"></textarea>
                  <p style="margin: 0.5rem 0 0 0; font-size: 0.8rem; color: #6B7280;">These will be shown separately in the hostel details section.</p>
                </div>
              </div>
            </div>
                
                <p style="margin-top: 1rem; margin-bottom: 0; font-size: 0.85rem; color: #EF4444; font-style: italic;">Note: Facilities not selected will be shown as "Better to ask about these details" to users.</p>
              </div>
            </div>
            <div class="form-group hostel-media-group">
              <label>Hostel Media</label>
              <div class="media-upload-section">
                <div class="media-upload-controls">
                  <button type="button" onclick="addImageUpload()" class="btn-secondary" style="margin-right: 0.5rem;">üì∑ Add Image</button>
                  <button type="button" onclick="searchUnsplashImages()" class="btn-secondary" style="margin-right: 0.5rem;">üîç Search Images</button>
                  <button type="button" onclick="addVideoUpload()" class="btn-secondary">üé• Add Video</button>
                </div>
                <div id="media-uploads-container" class="media-uploads-container">
                  <!-- Media uploads will be added here -->
                </div>
              </div>
            </div>
            <div class="form-group hostel-save-button">
              <button onclick="saveHostel()" style="width: 100%;">Save Hostel</button>
            </div>
          </div>
        </div>

        <div id="adminuser-form" style="display:none; margin-top:2rem;">
          <div class="form-container">
            <h3 style="text-align: center; margin-bottom: 2rem; color: #8B5CF6;">Add Admin User</h3>
            <div class="form-group">
              <label>Email</label>
              <input id="a-name" placeholder="Enter email address" type="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" title="Enter a valid email address" required>
              <small style="color: #6B7280; font-size: 0.8rem;">Example: user@example.com</small>
            </div>
            <div class="form-group">
              <label>Password</label>
              <div style="position: relative;">
                <input id="a-pass" type="password" placeholder="Enter password">
                <span class="toggle-pass" onclick="togglePass('a-pass')" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%);">üëÅÔ∏è</span>
              </div>
            </div>
            <div class="form-group">
              <label>Confirm Password</label>
              <input id="a-pass2" type="password" placeholder="Confirm password">
            </div>
            <button onclick="addAdmin()" style="width: 100%;">Submit for Approval</button>
          </div>
        </div>


      </div>
    </div>
  </section>



  <!-- Night Mode Toggle (Fixed Corner) -->
  <div class="corner-night-mode-toggle" onclick="toggleNightMode()" title="Toggle Night Mode">
    <span class="night-icon">üåô</span>
    <span class="day-icon">‚òÄÔ∏è</span>
  </div>

  <!-- Floating Chat Button -->
  <div class="floating-chat-button" id="floating-chat-btn" onclick="openChatWidget()">
    üí¨
    <div class="chat-notification-badge" id="chat-notification-badge" style="display: none;">0</div>
  </div>

  <!-- Chat Widget -->
  <div class="chat-widget" id="chat-widget" style="display: none;">
    <div class="chat-widget-header">
      <div class="chat-widget-title">
        <div class="status-indicator online"></div>
        <span>HOSTALL Support</span>
      </div>
      <button class="chat-widget-close" onclick="closeChatWidget()">√ó</button>
    </div>
    
    <div class="chat-widget-content">
      <!-- Direct Contact Form -->
      <div id="chat-form" class="chat-step active">
        <div class="chat-welcome">
          <div class="welcome-icon">üí¨</div>
          <h3>Get in Touch</h3>
          <p>Send us a message and we'll get back to you!</p>
        </div>
        
        <div class="chat-form">
          <div class="form-group">
            <label>üë§ Your Name</label>
            <input type="text" id="chat-name" placeholder="Enter your name" required>
          </div>
          
          <div class="form-group">
            <label>üì± WhatsApp Number for Reply</label>
            <input type="tel" id="chat-whatsapp" placeholder="+92 300 1234567">
          </div>
          
          <div class="form-group">
            <label>üìß Email for Reply</label>
            <input type="email" id="chat-email" placeholder="your.email@gmail.com">
          </div>
          
          <div class="form-group">
            <label>üí≠ Your Message</label>
            <textarea id="chat-message" placeholder="How can we help you?" rows="3" required></textarea>
          </div>
          
          <button class="submit-btn" onclick="sendDirectMessage()">
            <span>üì§</span> Send Message
          </button>
        </div>
      </div>
      
      <!-- Success Message -->
      <div id="chat-success" class="chat-step">
        <div class="success-message">
          <div class="success-icon">‚úÖ</div>
          <h3>Message Sent!</h3>
          <p>Thank you! We'll get back to you shortly.</p>
          <button class="new-message-btn" onclick="startNewMessage()">Send Another Message</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="footer-content">
      <div class="footer-section">
        <h3>About HOSTALL</h3>
        <div class="footer-about">
          <p>Your reliable online platform helping you find the perfect place to call home in Lahore. We make hostel searching simple and stress-free for students and professionals.</p>
          <div class="footer-contact">
            <div class="footer-contact-item">
              <span>üìç</span>
              <span>Lahore, Pakistan</span>
            </div>
            <div class="footer-contact-item">
              <span>üìß</span>
              <span>teamhostall@gmail.com</span>
            </div>
          </div>
          <div class="footer-social">
            <a href="https://www.facebook.com/share/v/1YbEMKcYBW/?mibextid=wwXIfr" target="_blank" class="social-icon facebook" title="Facebook">
              <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
              </svg>
            </a>
            <a href="https://www.instagram.com/yourhostall/" target="_blank" class="social-icon instagram" title="Instagram">
              <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
              </svg>
            </a>
            <a href="https://tiktok.com/@teamhostall" target="_blank" class="social-icon tiktok" title="TikTok">
              <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                <path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/>
              </svg>
            </a>
            <a href="https://whatsapp.com/channel/0029VbAikYk4o7qO5966Ux3u" target="_blank" class="social-icon whatsapp" title="WhatsApp Channel">
              <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.893 3.488"/>
              </svg>
            </a>
          </div>
        </div>
      </div>
      
      <div class="footer-section">
        <h3>Quick Links</h3>
        <div class="footer-links">
          <a href="#" onclick="show('home')">Home</a>
          <a href="#" onclick="showAboutSection()">About Us</a>
          <a href="#" onclick="show('faq')">FAQ</a>
          <a href="#" onclick="show('admin')">Admin</a>
        </div>
      </div>
      
      <div class="footer-section">
        <h3>Subscribe</h3>
        <div class="footer-subscribe">
          <p style="color: rgba(255, 255, 255, 0.8); margin-bottom: 0.5rem;">Stay updated with our latest listings and offers</p>
          <div class="subscribe-form">
            <input type="email" class="subscribe-input" placeholder="Enter your email">
            <button class="subscribe-btn">
              <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <div class="footer-bottom">
      <div class="footer-bottom-text">
        This website uses cookies to ensure you get the best experience. By using our site, you acknowledge that you have read and understand our <a href="#" onclick="showPrivacyPolicy()" style="color: #8B5CF6; text-decoration: underline;">Privacy Policy</a>.
      </div>
    </div>
    
    <div class="footer-bottom" style="border-top: none; padding-top: 1rem;">
      <div class="footer-bottom-text">
        ¬© 2025 HOSTALL | All rights reserved
      </div>
      <div class="footer-bottom-links">
        <a href="#" onclick="showPrivacyPolicy()">Privacy Policy</a>
        <a href="#" onclick="showTermsOfService()">Terms of Service</a>
      </div>
    </div>
  </footer>

  <script>
    // Global hostels variable
    let hostels = [];
    
    document.addEventListener('DOMContentLoaded', ()=>{
      // Initialize the page by showing the home section
      setTimeout(() => {
        show('home');
        console.log('üè† Home section displayed');
      }, 100);
      
      // Add backup event listeners for About Us buttons
      setTimeout(() => {
        console.log('üîß Adding backup About Us button listeners');
        const aboutButtons = document.querySelectorAll('[onclick*="showAboutSection"]');
        aboutButtons.forEach((button, index) => {
          console.log(`üîó Found About Us button ${index + 1}:`, button);
          button.addEventListener('click', function(e) {
            e.preventDefault();
            console.log('üîµ About Us button clicked via event listener');
            if (typeof window.showAboutSection === 'function') {
              window.showAboutSection();
            } else {
              console.error('‚ùå showAboutSection function not found');
              // Fallback
              show('about');
            }
          });
        });
      }, 500);
      
      // Close facilities dropdown when clicking outside
      document.addEventListener('click', function(e) {
        const dropdown = document.getElementById('facilities-filter-dropdown');
        const dropdownBtn = document.querySelector('.facilities-dropdown-btn');
        
        if (dropdown && dropdown.style.display === 'block' && 
            !dropdown.contains(e.target) && 
            e.target !== dropdownBtn && 
            !dropdownBtn.contains(e.target)) {
          dropdown.style.display = 'none';
        }
      });
      
      // Add online/offline event listeners for better sync
      window.addEventListener('online', () => {
        console.log('Internet connection restored. Syncing data...');
        // Sync any pending changes when connection is restored
        if (typeof syncOfflineData === 'function') {
          syncOfflineData();
        }
        document.body.classList.remove('offline-mode');
      });
      
      window.addEventListener('offline', () => {
        console.log('Internet connection lost. Working in offline mode...');
        document.body.classList.add('offline-mode');
      });
      
      // Initialize with more realistic hostel data
      hostels = JSON.parse(localStorage.getItem('hostels')||'null');
      if(!hostels) {
        hostels = [
          {
            name: 'Al Noor Girls Hostel',
            gender: 'Female',
            map: 'https://maps.google.com?q=Al+Noor+Girls+Hostel+Ali+Town+Lahore',
            details: 'Located in Ali Town and Sultan Town near Ali Town Orange Line Station. Security deposit 5000 PKR, meal 8000 PKR.',
            img: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI0NSUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0iIzMzMzMzMyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iIGZvbnQtd2VpZ2h0PSJib2xkIj5BbCBOb29yPC90ZXh0Pjx0ZXh0IHg9IjUwJSIgeT0iNTUlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjAiIGZpbGw9IiM2NjY2NjYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5HaXJscyBIb3N0ZWw8L3RleHQ+PC9zdmc+',
            price: 'PKR 7,000 - 10,000',
            location: 'Ali Town/Sultan Town',
            phone: '+923004909528',
            whatsapp: '+923004909528',
            facilities: ['ac', 'cooler', 'breakfast', 'dinner', 'wifi', 'washroom', 'laundry', 'security', 'ups', 'water_dispenser', 'cleaning'],
            rooms: [
              {
                type: '2 Seater Room',
                price: 'PKR 8,000 - 10,000',
                description: 'Per head pricing'
              },
              {
                type: '3 Seater Room', 
                price: 'PKR 8,000',
                description: 'Per head pricing'
              },
              {
                type: '4 Seater Room',
                price: 'PKR 7,000', 
                description: 'Per head pricing'
              }
            ]
          },
          {
            name: 'City Center Boys Hostel',
            gender: 'Male',
            map: 'https://maps.google.com?q=City+Center+Boys+Hostel+Lahore',
            details: 'Gulberg Area, PKR 12,000/month, Free WiFi, Parking, Mess Facility, Study Room',
            img: './csklkyz4qg.png',
            price: 'PKR 12,000',
            location: 'gulberg',
            facilities: ['wifi', 'parking', 'mess']
          },
          {
            name: 'Scholar\'s Den',
            gender: 'Male',
            map: 'https://maps.google.com?q=Scholars+Den+Hostel+Lahore',
            details: 'Johar Town, PKR 15,000/month, Premium Facilities, Gym, Swimming Pool, AC Rooms',
            img: './gy4uspau99.png',
            price: 'PKR 15,000',
            location: 'johar',
            facilities: ['wifi', 'ac', 'gym', 'pool']
          },
          {
            name: 'Budget Stay Hostel',
            gender: 'Male',
            map: 'https://maps.google.com?q=Budget+Stay+Hostel+Lahore',
            details: 'Near PU, PKR 7,500/month, Basic Facilities, Free WiFi, Shared Kitchen',
            img: './jlkdqzmy1t.png',
            price: 'PKR 7,500',
            location: 'pu',
            facilities: ['wifi', 'kitchen']
          },
          {
            name: 'Elite Women\'s Residence',
            gender: 'Female',
            map: 'https://maps.google.com?q=Elite+Womens+Residence+Lahore',
            details: 'DHA Phase 2, Luxury Accommodation with multiple room options, AC, WiFi, Security, Meals included. Modern facilities with 24/7 security and premium amenities.',
            img: './u3ttz0cbn6.png',
            price: 'PKR 12,000 - 25,000',
            location: 'dha',
            facilities: ['wifi', 'ac', 'meals', 'security'],
            roomPrices: [
              { type: '1-bed', minPrice: 25000, maxPrice: 25000 },
              { type: '2-bed', minPrice: 18000, maxPrice: 20000 },
              { type: '3-bed', minPrice: 15000, maxPrice: 16000 },
              { type: '4-bed', minPrice: 12000, maxPrice: 14000 },
              { type: '6-bed', minPrice: 10000, maxPrice: 11000 },
              { type: '8-bed', minPrice: 8000, maxPrice: 9000 }
            ]
          },
          {
            name: 'Study Hub Hostel',
            gender: 'Female',
            map: 'https://maps.google.com?q=Study+Hub+Hostel+Lahore',
            details: 'Gulberg, PKR 11,000/month, Study Rooms, Library, WiFi, AC, Peaceful Environment',
            img: './z6ln3kuuig.png',
            price: 'PKR 11,000',
            location: 'gulberg',
            facilities: ['wifi', 'ac', 'library']
          }
        ];
        localStorage.setItem('hostels', JSON.stringify(hostels));
      }

      // Initialize admins if none
      if(!localStorage.getItem('admins')) {
        const user = 'teamhostall@gmail.com';
        const pass = 'hostall123';
        // Main admin with full access (role: admin)
        localStorage.setItem('admins', JSON.stringify([{
          user,
          pass:btoa(pass),
          approved:true,
          role: 'admin', // Role can be 'admin' (full access) or 'hostel' (restricted)
          hostelIds: [] // For main admin, empty array means access to all
        }]));
      }

      // Global functions
      window.show = id => {
        // Hide all sections first
        document.querySelectorAll('section').forEach(s => {
          s.style.display = 'none';
          s.classList.remove('active');
        });
        
        // Show the selected section
        const targetSection = document.getElementById(id);
        if (targetSection) {
          targetSection.style.display = 'block';
          targetSection.classList.add('active');
          console.log('Showing section:', id);
        } else {
          console.error('Section not found:', id);
        }
        
        // Update navigation
        document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
        const navLink = document.querySelector(`nav a[onclick*="'${id}'"]`);
        if (navLink) {
          navLink.classList.add('active');
        }
        
        // Scroll to top of page when switching sections
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
        
        // Load FAQs when FAQ section is shown
        if (id === 'faq') {
          setTimeout(() => {
            loadFAQs();
          }, 100);
        }
      };

      window.togglePass = id => {
        let inp = document.getElementById(id);
        inp.type = inp.type === 'password' ? 'text' : 'password';
      };

      window.getLocationName = (locationCode) => {
        const locationMap = {
          'gulberg': 'Gulberg',
          'pu': 'Near PU',
          'dha': 'DHA',
          'johar': 'Johar Town'
        };
        return locationMap[locationCode] || 'Unknown Location';
      };
      
      // Helper function to get human-friendly facility label
      function facilityLabel(facilityCode) {
        const facilityLabels = {
          'wifi': 'WiFi',
          'attached-washroom': 'Attached Bathroom',
          'laundry': 'Laundry',
          'security': 'Security/CCTV',
          'power-backup': 'Power Backup',
          'kitchen': 'Kitchen Access',
          'oven': 'Oven',
          'refrigerator': 'Refrigerator',
          'water-dispenser': 'Water Dispenser',
          'parking': 'Parking',
          'cleaning': 'Cleaning Service',
          'visitors': 'Visitors Allowed',
          'ac': 'AC'
        };
        return facilityLabels[facilityCode] || facilityCode;
      }
      
      window.renderPublic = (filteredHostels = null) => {
        const hostelList = filteredHostels || hostels;
        const pub = document.getElementById('public-list');
        pub.innerHTML = '';
        
        console.log('Rendering hostels:', hostelList);
        
        if (hostelList.length === 0) {
          pub.innerHTML = '<div style="text-align: center; color: #4A5568; grid-column: 1/-1; padding: 2rem;">No hostels found matching your criteria.</div>';
          return;
        }

        hostelList.forEach(h => {
          const card = document.createElement('div');
          card.className = 'hostel-card';
          card.style.cursor = 'pointer';
          card.onclick = () => openHostelDetails(h);
          const locationName = getLocationName(h.location);
          // Calculate the average rating or use a default
          const ratings = JSON.parse(localStorage.getItem('hostelRatings') || '{}');
          const hostelRatings = ratings[h.name] || [];
          const averageRating = hostelRatings.length > 0 
            ? hostelRatings.reduce((sum, rating) => sum + rating, 0) / hostelRatings.length 
            : 0;
            
          // Remove facilities display from home page cards
          const roundedRating = Math.round(averageRating * 2) / 2; // Round to nearest 0.5
          
          // Generate star HTML
          const starRating = generateStarRating(roundedRating);
          
          card.innerHTML = `
            <div class="hostel-image-container">
              <img src="${h.img || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDQwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xNzUgMTIwSDIyNVYxNzBIMTc1VjEyMFoiIGZpbGw9IiM5Q0EzQUYiLz4KPHA+dGggZD0iTTE1MCAyMDBIMjUwVjIxMEgxNTBWMjAwWiIgZmlsbD0iIzlDQTNBRiIvPgo8L3N2Zz4K'}" alt="${h.name}" class="hostel-image" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDQwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xNzUgMTIwSDIyNVYxNzBIMTc1VjEyMFoiIGZpbGw9IiM5Q0EzQUYiLz4KPHA+dGggZD0iTTE1MCAyMDBIMjUwVjIxMEgxNTBWMjAwWiIgZmlsbD0iIzlDQTNBRiIvPgo8L3N2Zz4K'" />
              <span class="hostel-gender-badge ${h.gender.toLowerCase()}">${h.gender}</span>
            </div>
            <div class="hostel-content">
              <h3 class="hostel-name">${h.name}</h3>
              <div class="hostel-ratings">
                ${starRating}
              </div>
              <p class="hostel-location-only">${locationName}</p>
              <div class="view-details-btn">View Details</div>
            </div>
          `;
          pub.appendChild(card);
        });

        // Update stats
        document.getElementById('total-hostels').textContent = hostels.length + '+';
        
        // Load manual ads
        loadManualAds();
      };

      // Load feedback data on page load
      document.addEventListener('DOMContentLoaded', () => {
        setTimeout(() => {
          const savedMessage = localStorage.getItem('feedbackThankYouMessage');
          const messageElement = document.getElementById('feedback-thank-you-message');
          if (savedMessage && messageElement) {
            messageElement.value = savedMessage;
          }
          
          updateFeedbackStats();
          renderFeedbackSubmissions();
          
          const feedbackForm = document.getElementById('feedback-form');
          if (feedbackForm) {
            feedbackForm.addEventListener('submit', handleFeedbackSubmission);
          }
        }, 100);
      });

      window.handleFeedbackSubmission = async (event) => {
        event.preventDefault();
        
        const name = document.getElementById('feedback-name').value;
        const email = document.getElementById('feedback-email').value;
        const type = document.getElementById('feedback-type').value;
        const message = document.getElementById('feedback-message').value;
        
        // Use our new submitFeedback function that stores in Supabase
        if (typeof submitFeedback === 'function') {
          // If our new function is available, use it
          await submitFeedback();
        } else {
          // Legacy code as fallback
          const feedback = {
            id: Date.now(),
            name: name,
            email: email,
            type: type,
            message: message,
            timestamp: new Date().toISOString(),
            read: false
          };
          
          const feedbacks = JSON.parse(localStorage.getItem('feedbacks') || '[]');
          feedbacks.unshift(feedback);
          localStorage.setItem('feedbacks', JSON.stringify(feedbacks));
          
          document.getElementById('feedback-form').reset();
        }
        
        showFeedbackThankYou();
        
        if (document.getElementById('total-feedback-count')) {
          updateFeedbackStats();
          renderFeedbackSubmissions();
        }
      };

      window.showFeedbackThankYou = () => {
        const thankYouMessage = localStorage.getItem('feedbackThankYouMessage') || 'We appreciate your input and will use it to improve our services.';
        
        let modal = document.getElementById('feedback-thank-you-modal');
        if (!modal) {
          modal = document.createElement('div');
          modal.id = 'feedback-thank-you-modal';
          modal.className = 'feedback-thank-you-modal';
          modal.innerHTML = `
            <div class="feedback-thank-you-content">
              <div class="feedback-thank-you-icon">üôè</div>
              <h3 class="feedback-thank-you-title">Thank You!</h3>
              <p class="feedback-thank-you-message">${thankYouMessage}</p>
              <button class="feedback-thank-you-close" onclick="closeFeedbackThankYou()">Close</button>
            </div>
          `;
          document.body.appendChild(modal);
        } else {
          modal.querySelector('.feedback-thank-you-message').textContent = thankYouMessage;
        }
        
        modal.classList.add('show');
        document.body.style.overflow = 'hidden';
      };

      window.closeFeedbackThankYou = () => {
        const modal = document.getElementById('feedback-thank-you-modal');
        if (modal) {
          modal.classList.remove('show');
          document.body.style.overflow = 'auto';
        }
      };

      window.updateFeedbackStats = () => {
        const feedbacks = JSON.parse(localStorage.getItem('feedbacks') || '[]');
        const totalCount = feedbacks.length;
        
        const thisMonth = new Date().getMonth();
        const thisYear = new Date().getFullYear();
        const recentCount = feedbacks.filter(feedback => {
          const feedbackDate = new Date(feedback.timestamp);
          return feedbackDate.getMonth() === thisMonth && feedbackDate.getFullYear() === thisYear;
        }).length;
        
        const totalElement = document.getElementById('total-feedback-count');
        const recentElement = document.getElementById('recent-feedback-count');
        
        if (totalElement) totalElement.textContent = totalCount;
        if (recentElement) recentElement.textContent = recentCount;
      };

      window.renderFeedbackSubmissions = () => {
        const container = document.getElementById('feedback-submissions');
        if (!container) return;
        
        const feedbacks = JSON.parse(localStorage.getItem('feedbacks') || '[]');
        
        if (feedbacks.length === 0) {
          container.innerHTML = `
            <div class="admin-card" style="text-align: center; padding: 2rem; color: #6B7280;">
              <p style="margin: 0; font-style: italic;">No feedback submissions yet.</p>
            </div>
          `;
          return;
        }
        
        container.innerHTML = feedbacks.slice(0, 10).map(feedback => `
          <div class="admin-card" style="border-left: 4px solid ${feedback.read ? '#10B981' : '#8B5CF6'};">
            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
              <div>
                <strong>${feedback.name}</strong>
                <span style="color: #6B7280; font-size: 0.9rem; margin-left: 0.5rem;">(${feedback.email})</span>
              </div>
              <div style="display: flex; align-items: center; gap: 0.5rem;">
                <span style="background: ${getFeedbackTypeColor(feedback.type)}; color: white; padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.8rem; text-transform: capitalize;">
                  ${feedback.type.replace('-', ' ')}
                </span>
                <span style="color: #6B7280; font-size: 0.8rem;">
                  ${new Date(feedback.timestamp).toLocaleDateString()}
                </span>
              </div>
            </div>
            <p style="margin: 0.5rem 0; color: #4A5568; line-height: 1.5;">${feedback.message}</p>
            <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
              <button onclick="markFeedbackAsRead(${feedback.id})" style="background: #10B981; color: white; border: none; padding: 0.4rem 0.8rem; border-radius: 6px; font-size: 0.8rem; cursor: pointer;">
                ${feedback.read ? 'Read' : 'Mark as Read'}
              </button>
              <button onclick="deleteFeedback(${feedback.id})" style="background: #EF4444; color: white; border: none; padding: 0.4rem 0.8rem; border-radius: 6px; font-size: 0.8rem; cursor: pointer;">
                Delete
              </button>
            </div>
          </div>
        `).join('');
      };

      window.getFeedbackTypeColor = (type) => {
        const colors = {
          'suggestion': '#3B82F6',
          'complaint': '#EF4444',
          'compliment': '#10B981',
          'bug-report': '#F59E0B',
          'other': '#6B7280'
        };
        return colors[type] || '#6B7280';
      };

      window.markFeedbackAsRead = (id) => {
        const feedbacks = JSON.parse(localStorage.getItem('feedbacks') || '[]');
        const feedback = feedbacks.find(f => f.id === id);
        if (feedback) {
          feedback.read = true;
          localStorage.setItem('feedbacks', JSON.stringify(feedbacks));
          renderFeedbackSubmissions();
        }
      };

      window.deleteFeedback = (id) => {
        const feedbacks = JSON.parse(localStorage.getItem('feedbacks') || '[]');
        const feedback = feedbacks.find(f => f.id === id);
        
        showWarning({
          title: 'Delete Feedback',
          message: 'This feedback will be permanently removed from the system.',
          item: `Feedback from: ${feedback?.name || 'Unknown'} - "${feedback?.message?.substring(0, 50) || ''}..."`,
          icon: 'üóëÔ∏è',
          confirmText: 'Delete Feedback',
          cancelText: 'Keep Feedback',
          onConfirm: () => {
            const filteredFeedbacks = feedbacks.filter(f => f.id !== id);
            localStorage.setItem('feedbacks', JSON.stringify(filteredFeedbacks));
            updateFeedbackStats();
            renderFeedbackSubmissions();
            showNotification('Feedback deleted successfully', 'success');
          }
        });
      };

      // FAQ Management Functions
      window.initializeFAQs = () => {
        const defaultFAQs = [
          // General (Priority 1 - Most Important)
          {
            id: 1,
            question: "What is Hostall?",
            answer: "Hostall is an online platform that helps students and professionals find hostels based on their preferences like location, budget, and amenities. We offer filters, real photos, contact details, and more‚Äîall in one place.",
            category: "general",
            published: true
          },
          {
            id: 2,
            question: "Is Hostall a hostel itself?",
            answer: "No, Hostall is not a hostel. It's a listing and review platform where hostel owners post their property details for you to view and contact directly.",
            category: "general",
            published: true
          },
          {
            id: 3,
            question: "Can I give feedback or suggestions about the website?",
            answer: "Absolutely! Use the chat option or contact us through email or social media. We welcome your suggestions.",
            category: "general",
            published: true
          },
          // Listing and Management
          {
            id: 4,
            question: "How can I list my hostel on Hostall?",
            answer: "You can create an account through the admin/ register option or contact us for details.",
            category: "listing",
            published: true,
            helpfulVotes: 0,
            notHelpfulVotes: 0
          },
          {
            id: 5,
            question: "Is there a fee to list my hostel?",
            answer: "No, listing hostels on Hostall is currently free.",
            category: "listing",
            published: true,
            helpfulVotes: 0,
            notHelpfulVotes: 0
          },
          {
            id: 6,
            question: "How can I update or remove my hostel listing?",
            answer: "You can either contact us for updates or, if you have admin access, you can manage your listing directly.",
            category: "listing",
            published: true,
            helpfulVotes: 0,
            notHelpfulVotes: 0
          },
          // Admin Panel
          {
            id: 7,
            question: "Who can access the Hostall admin dashboard?",
            answer: "Only verified hostel owners/managers or authorized users approved by the Hostall team.",
            category: "admin",
            published: true,
            helpfulVotes: 0,
            notHelpfulVotes: 0
          },
          {
            id: 8,
            question: "Can hostel owners/ management manage their listings on their own?",
            answer: "Yes, if granted access, owners can add, update, or remove listings from the admin dashboard.",
            category: "admin",
            published: true,
            helpfulVotes: 0,
            notHelpfulVotes: 0
          },
          {
            id: 9,
            question: "Is there a limit to the number of listings I can add?",
            answer: "No, there's currently no limit. You can add multiple hostels or branches under one admin account.",
            category: "admin",
            published: true,
            helpfulVotes: 0,
            notHelpfulVotes: 0
          },
          // Trust, Safety & Verification
          {
            id: 10,
            question: "Can I trust the hostel details on Hostall?",
            answer: "We do a screening before publishing listings. However, we recommend users verify details with hostel management directly, especially rent, facilities, and availability.",
            category: "safety",
            published: true,
            helpfulVotes: 0,
            notHelpfulVotes: 0
          },
          {
            id: 12,
            question: "Are the hostel photos on Hostall real?",
            answer: "We encourage real, recent photos, but advise visiting the actual available room before making decisions.",
            category: "safety",
            published: true,
            helpfulVotes: 0,
            notHelpfulVotes: 0
          },
          {
            id: 13,
            question: "How can I report fake or misleading information?",
            answer: "Please report it to us through WhatsApp or the feedback form so we can review and take action.",
            category: "safety",
            published: true,
            helpfulVotes: 0,
            notHelpfulVotes: 0
          },
          {
            id: 14,
            question: "Is Hostall responsible if the hostel is not as shown?",
            answer: "No. Hostall is a listing platform and does not own or operate hostels. We strive to keep data accurate, but are not liable for mismatches.",
            category: "safety",
            published: true,
            helpfulVotes: 0,
            notHelpfulVotes: 0
          },
          // Scam Protection
          {
            id: 15,
            question: "What should I do if someone asks for full payment before a visit?",
            answer: "Be cautious. We recommend visiting the hostel or verifying through a trusted source before making any payment.",
            category: "security",
            published: true,
            helpfulVotes: 0,
            notHelpfulVotes: 0
          },
          {
            id: 16,
            question: "Does Hostall take responsibility for fraud or scams?",
            answer: "No. Hostall does not handle transactions. Users must ensure safety and do proper verification before making payments.",
            category: "security",
            published: true,
            helpfulVotes: 0,
            notHelpfulVotes: 0
          },
          // Booking & Availability
          {
            id: 18,
            question: "Can I book a hostel room directly through Hostall?",
            answer: "No. Hostall doesn't handle bookings. You can contact hostel owners via phone or WhatsApp for confirmation and arrangements.",
            category: "booking",
            published: true,
            helpfulVotes: 0,
            notHelpfulVotes: 0
          },
          {
            id: 19,
            question: "How do I know if a hostel has available rooms?",
            answer: "Availability is not always updated in real-time. It's best to call or message the owner to confirm.",
            category: "booking",
            published: true,
            helpfulVotes: 0,
            notHelpfulVotes: 0
          },
          // Payment
          {
            id: 20,
            question: "Can I make payments through Hostall?",
            answer: "No, we do not support online payments. All payments are made directly to hostel owners.",
            category: "payment",
            published: true,
            helpfulVotes: 0,
            notHelpfulVotes: 0
          },
          {
            id: 21,
            question: "Is it safe to pay in advance?",
            answer: "Only if you've verified the hostel thoroughly. Hostall is not responsible for disputes arising from advance payments.",
            category: "payment",
            published: true,
            helpfulVotes: 0,
            notHelpfulVotes: 0
          },
          {
            id: 22,
            question: "Are there any booking or service charges?",
            answer: "No. Hostall does not charge users for browsing or contacting hostels.",
            category: "payment",
            published: true,
            helpfulVotes: 0,
            notHelpfulVotes: 0
          },
          // Facilities & Amenities
          {
            id: 23,
            question: "How accurate is the information about facilities?",
            answer: "Facilities are listed based on details provided by the hostel. We advise users to verify key offerings directly.",
            category: "facilities",
            published: true,
            helpfulVotes: 0,
            notHelpfulVotes: 0
          },
          {
            id: 24,
            question: "Are all listed facilities guaranteed?",
            answer: "No, they vary by room and hostel. Always confirm before making decisions.",
            category: "facilities",
            published: true,
            helpfulVotes: 0,
            notHelpfulVotes: 0
          },
          {
            id: 26,
            question: "Do different rooms have different facilities?",
            answer: "Yes. Facilities may differ between rooms. Clarify details before booking.",
            category: "facilities",
            published: true,
            helpfulVotes: 0,
            notHelpfulVotes: 0
          },
          {
            id: 27,
            question: "Can I request additional services like cleaning or laundry?",
            answer: "Some hostels offer extra services. Ask the management directly if those are available.",
            category: "facilities",
            published: true,
            helpfulVotes: 0,
            notHelpfulVotes: 0
          }
        ];

        const existingFAQs = JSON.parse(localStorage.getItem('faqs') || '[]');
        if (existingFAQs.length === 0) {
          localStorage.setItem('faqs', JSON.stringify(defaultFAQs));
        }
      };

      window.loadFAQs = (searchQuery = '', categoryFilter = 'all') => {
        const faqs = JSON.parse(localStorage.getItem('faqs') || '[]');
        let filteredFAQs = faqs.filter(faq => faq.published);
        
        // Apply search filter
        if (searchQuery) {
          filteredFAQs = filteredFAQs.filter(faq => 
            faq.question.toLowerCase().includes(searchQuery.toLowerCase()) ||
            faq.answer.toLowerCase().includes(searchQuery.toLowerCase())
          );
        }
        
        // Apply category filter
        if (categoryFilter !== 'all') {
          filteredFAQs = filteredFAQs.filter(faq => faq.category === categoryFilter);
        }
        
        // Sort by category order: general first, then alphabetical order for others
        const categoryOrder = ['general', 'admin', 'booking', 'facilities', 'listing', 'payment', 'safety', 'security'];
        filteredFAQs.sort((a, b) => {
          const aIndex = categoryOrder.indexOf(a.category);
          const bIndex = categoryOrder.indexOf(b.category);
          if (aIndex !== -1 && bIndex !== -1 && aIndex !== bIndex) {
            return aIndex - bIndex;
          }
          // If category not in order list, put at end
          if (aIndex === -1 && bIndex !== -1) return 1;
          if (aIndex !== -1 && bIndex === -1) return -1;
          // If same category or both not in list, sort by id to maintain original order
          return a.id - b.id;
        });
        
        const container = document.getElementById('faq-container');
        if (!container) return;
        
        updateCategoryCounts(faqs.filter(faq => faq.published));
        updateFAQPublicStats(faqs);
        
        if (filteredFAQs.length === 0) {
          container.innerHTML = `
            <div style="text-align: center; padding: 3rem; color: #6B7280;">
              <p>${searchQuery ? 'No FAQs found matching your search.' : 'No FAQs available in this category.'}</p>
            </div>
          `;
          return;
        }
        
        container.innerHTML = filteredFAQs.map(faq => `
          <div class="faq-item-open" data-category="${faq.category}">
            <div class="faq-question-header">
              <div style="display: flex; flex-direction: column; width: 100%;">
                <span class="faq-category-badge ${faq.category}" style="align-self: flex-start; margin-bottom: 0.5rem;">${faq.category}</span>
                <h3 class="faq-question-text">${faq.question}</h3>
              </div>
            </div>
            <div class="faq-answer-open">
              ${faq.answer}
            </div>

          </div>
        `).join('');
        
        // Update vote button states based on user's previous votes
        updateVoteButtonStates();
      };

      window.toggleFAQ = (id) => {
        const answer = document.getElementById(`answer-${id}`);
        const toggle = document.getElementById(`toggle-${id}`);
        
        if (answer.classList.contains('show')) {
          answer.classList.remove('show');
          toggle.classList.remove('active');
        } else {
          // Close all other FAQs
          document.querySelectorAll('.faq-answer.show').forEach(el => {
            el.classList.remove('show');
          });
          document.querySelectorAll('.faq-toggle.active').forEach(el => {
            el.classList.remove('active');
          });
          
          // Open clicked FAQ
          answer.classList.add('show');
          toggle.classList.add('active');
        }
      };

      window.updateFAQStats = () => {
        const faqs = JSON.parse(localStorage.getItem('faqs') || '[]');
        const totalCount = faqs.length;
        const publishedCount = faqs.filter(faq => faq.published).length;
        
        const totalElement = document.getElementById('total-faq-count');
        const publishedElement = document.getElementById('published-faq-count');
        
        if (totalElement) totalElement.textContent = totalCount;
        if (publishedElement) publishedElement.textContent = publishedCount;
      };

      window.renderAdminFAQs = () => {
        const container = document.getElementById('faq-list');
        if (!container) return;
        
        const faqs = JSON.parse(localStorage.getItem('faqs') || '[]');
        
        if (faqs.length === 0) {
          container.innerHTML = `
            <div class="admin-card" style="text-align: center; padding: 2rem; color: #6B7280;">
              <p style="margin: 0; font-style: italic;">No FAQs created yet.</p>
            </div>
          `;
          return;
        }
        
        container.innerHTML = faqs.map(faq => `
          <div class="admin-faq-item ${faq.published ? 'published' : 'draft'}" style="background: white; border: 1px solid #E2E8F0; border-radius: 8px; padding: 1rem; margin-bottom: 1rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
              <div>
                <strong style="color: #2D3748; font-size: 1.1rem; display: block;">${faq.question}</strong>
                <div style="margin-top: 0.5rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
                  <span class="faq-category-badge ${faq.category || 'general'}" style="background: ${getCategoryColor(faq.category || 'general')}; color: white; padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.8rem; display: inline-flex; align-items: center; gap: 3px;">
                    ${getCategoryIcon(faq.category || 'general')} ${faq.category || 'general'}
                  </span>
                  <span style="background: ${faq.published ? '#10B981' : '#F59E0B'}; color: white; padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.8rem; display: inline-flex; align-items: center; gap: 3px;">
                    ${faq.published ? '‚úÖ Published' : '‚è±Ô∏è Draft'}
                  </span>
                </div>
              </div>
              <div style="text-align: right; font-size: 0.9rem; color: #4B5563; background: #F3F4F6; padding: 0.3rem 0.7rem; border-radius: 6px;">
                <div style="display: flex; gap: 0.5rem;">
                  <span title="Helpful votes" style="display: flex; align-items: center;"><span style="margin-right: 3px;">üëç</span> ${faq.helpfulVotes || 0}</span> 
                  <span title="Not helpful votes" style="display: flex; align-items: center;"><span style="margin-right: 3px;">üëé</span> ${faq.notHelpfulVotes || 0}</span>
                </div>
              </div>
            </div>
            <p style="margin: 0.8rem 0; color: #4A5568; line-height: 1.6; background: #F9FAFB; padding: 0.8rem; border-radius: 6px; border-left: 3px solid #8B5CF6;">${faq.answer}</p>
            <div class="admin-faq-actions" style="display: flex; gap: 0.5rem; margin-top: 0.8rem;">
              <button onclick="editFAQ(${faq.id})" class="edit-btn" style="background: #3B82F6; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; display: flex; align-items: center; gap: 5px;">
                <span style="font-size: 1rem;">‚úèÔ∏è</span> Edit
              </button>
              <button onclick="toggleFAQStatus(${faq.id})" class="toggle-btn ${faq.published ? 'published' : ''}" style="background: ${faq.published ? '#10B981' : '#F59E0B'}; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">
                ${faq.published ? 'Unpublish' : 'Publish'}
              </button>
              <button onclick="deleteFAQ(${faq.id})" class="delete-btn" style="background: #EF4444; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">
                Delete
              </button>
            </div>
          </div>
        `).join('');
      };

      // Helper functions for FAQ categories
      function getCategoryColor(category) {
        const colors = {
          general: '#8B5CF6', // Purple
          listing: '#0EA5E9', // Sky Blue
          admin: '#6B46C1', // Deep Purple
          safety: '#059669', // Emerald
          security: '#DC2626', // Red
          booking: '#3B82F6', // Blue
          payment: '#10B981', // Green
          facilities: '#F59E0B' // Yellow
        };
        return colors[category] || '#8B5CF6';
      }
      
      function getCategoryIcon(category) {
        const icons = {
          general: '‚ÑπÔ∏è',
          listing: 'üìã',
          admin: 'üë®‚Äçüíª',
          safety: 'üõ°Ô∏è',
          security: '‚ö†Ô∏è',
          booking: 'üìù',
          payment: 'üí∞',
          facilities: 'üè†'
        };
        return icons[category] || '‚ÑπÔ∏è';
      }
      
      window.showFAQForm = (editId = null) => {
        const modal = document.getElementById('faq-form-modal');
        const form = document.getElementById('faq-form');
        const title = document.getElementById('faq-form-title');
        const editModeIndicator = document.getElementById('edit-mode-indicator');
        const saveButton = form.querySelector('.btn-primary');
        
        if (editId) {
          const faqs = JSON.parse(localStorage.getItem('faqs') || '[]');
          const faq = faqs.find(f => f.id === parseInt(editId));
          if (faq) {
            title.textContent = '‚úèÔ∏è Edit FAQ';
            document.getElementById('faq-question').value = faq.question;
            document.getElementById('faq-answer').value = faq.answer;
            document.getElementById('faq-category').value = faq.category || 'general';
            document.getElementById('faq-published').checked = faq.published;
            form.dataset.editId = editId;
            
            // Show edit mode indicator
            if (editModeIndicator) {
              editModeIndicator.style.display = 'block';
            }
            
            // Change button text
            if (saveButton) {
              saveButton.textContent = 'Update FAQ';
            }
          }
        } else {
          title.textContent = '‚ûï Add New FAQ';
          form.reset();
          delete form.dataset.editId;
          
          // Hide edit mode indicator
          if (editModeIndicator) {
            editModeIndicator.style.display = 'none';
          }
          
          // Reset button text
          if (saveButton) {
            saveButton.textContent = 'Save FAQ';
          }
        }
        
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
      };

      window.closeFAQForm = () => {
        const modal = document.getElementById('faq-form-modal');
        modal.style.display = 'none';
        document.body.style.overflow = 'auto';
      };

      window.editFAQ = (id) => {
        showFAQForm(id);
      };

      window.toggleFAQStatus = (id) => {
        const faqs = JSON.parse(localStorage.getItem('faqs') || '[]');
        const faq = faqs.find(f => f.id === id);
        if (faq) {
          faq.published = !faq.published;
          localStorage.setItem('faqs', JSON.stringify(faqs));
          renderAdminFAQs();
          updateFAQStats();
          loadFAQs(); // Refresh public FAQ display
        }
      };

      window.deleteFAQ = (id) => {
        const faqs = JSON.parse(localStorage.getItem('faqs') || '[]');
        const faq = faqs.find(f => f.id === id);
        
        showWarning({
          title: 'Delete FAQ',
          message: 'This FAQ will be permanently removed from the website.',
          item: `Question: "${faq?.question?.substring(0, 60) || 'Unknown'}..."`,
          icon: '‚ùì',
          confirmText: 'Delete FAQ',
          cancelText: 'Keep FAQ',
          onConfirm: () => {
            const filteredFAQs = faqs.filter(f => f.id !== id);
            localStorage.setItem('faqs', JSON.stringify(filteredFAQs));
            renderAdminFAQs();
            updateFAQStats();
            loadFAQs(); // Refresh public FAQ display
            showNotification('FAQ deleted successfully', 'success');
          }
        });
      };

      // FAQ Form Handler
      document.addEventListener('DOMContentLoaded', () => {
        setTimeout(() => {
          // Setup reset password form
          const resetPasswordForm = document.getElementById('reset-password-form');
          if (resetPasswordForm) {
            resetPasswordForm.addEventListener('submit', (e) => {
              e.preventDefault();
              resetPasswordWithCode();
            });
          }
          
          const faqForm = document.getElementById('faq-form');
          if (faqForm) {
            faqForm.addEventListener('submit', (e) => {
              e.preventDefault();
              
              const question = document.getElementById('faq-question').value;
              const answer = document.getElementById('faq-answer').value;
              const category = document.getElementById('faq-category').value;
              const published = document.getElementById('faq-published').checked;
              const editId = faqForm.dataset.editId;
              
              const faqs = JSON.parse(localStorage.getItem('faqs') || '[]');
              
              if (editId) {
                // Edit existing FAQ
                const faq = faqs.find(f => f.id === parseInt(editId));
                if (faq) {
                  faq.question = question;
                  faq.answer = answer;
                  faq.category = category;
                  faq.published = published;
                }
              } else {
                // Add new FAQ
                const newFAQ = {
                  id: Date.now(),
                  question: question,
                  answer: answer,
                  category: category,
                  published: published,
                  helpfulVotes: 0,
                  notHelpfulVotes: 0
                };
                faqs.push(newFAQ);
              }
              
              localStorage.setItem('faqs', JSON.stringify(faqs));
              closeFAQForm();
              renderAdminFAQs();
              updateFAQStats();
              loadFAQs(); // Refresh public FAQ display
            });
          }
          
          // Initialize Statistics
          initializeStats();
          loadWhyStats();
          renderAdminStats();
          
          // Initialize FAQs
          initializeFAQs();
          loadFAQs();
          updateFAQStats();
          renderAdminFAQs();
          
          // Setup FAQ search
          const searchInput = document.getElementById('faq-search');
          if (searchInput) {
            searchInput.addEventListener('input', (e) => {
              const query = e.target.value.trim();
              const activeCategory = document.querySelector('.faq-category-btn.active').dataset.category;
              loadFAQs(query, activeCategory);
              
              const clearBtn = document.getElementById('faq-search-clear');
              if (query) {
                clearBtn.style.display = 'flex';
              } else {
                clearBtn.style.display = 'none';
              }
            });
          }
        }, 100);
      });

      // Additional FAQ functions
      window.updateCategoryCounts = (publishedFAQs) => {
        const counts = {
          all: publishedFAQs.length,
          booking: publishedFAQs.filter(f => f.category === 'booking').length,
          payment: publishedFAQs.filter(f => f.category === 'payment').length,
          facilities: publishedFAQs.filter(f => f.category === 'facilities').length,
          general: publishedFAQs.filter(f => f.category === 'general').length
        };
        
        Object.keys(counts).forEach(category => {
          const element = document.getElementById(`count-${category}`);
          if (element) element.textContent = counts[category];
        });
      };

      window.updateFAQPublicStats = (allFAQs) => {
        const totalHelpful = allFAQs.reduce((sum, faq) => sum + (faq.helpfulVotes || 0), 0);
        const totalPublished = allFAQs.filter(faq => faq.published).length;
        
        const helpfulElement = document.getElementById('total-helpful-votes');
        const publishedElement = document.getElementById('total-published-faqs');
        
        if (helpfulElement) helpfulElement.textContent = totalHelpful;
        if (publishedElement) publishedElement.textContent = totalPublished;
      };

      window.filterFAQsByCategory = (category) => {
        // Update active button
        document.querySelectorAll('.faq-category-btn').forEach(btn => {
          btn.classList.remove('active');
        });
        document.querySelector(`[data-category="${category}"]`).classList.add('active');
        
        // Get current search query
        const searchQuery = document.getElementById('faq-search').value.trim();
        
        // Filter FAQs
        loadFAQs(searchQuery, category);
      };

      window.clearFAQSearch = () => {
        const searchInput = document.getElementById('faq-search');
        const clearBtn = document.getElementById('faq-search-clear');
        
        searchInput.value = '';
        clearBtn.style.display = 'none';
        
        const activeCategory = document.querySelector('.faq-category-btn.active').dataset.category;
        loadFAQs('', activeCategory);
      };

      window.voteFAQ = (faqId, voteType) => {
        const faqs = JSON.parse(localStorage.getItem('faqs') || '[]');
        const faq = faqs.find(f => f.id === faqId);
        const userVotes = JSON.parse(localStorage.getItem('faqVotes') || '{}');
        
        if (!faq) return;
        
        // Check if user has already voted on this FAQ
        const userVoteKey = `faq-${faqId}`;
        const previousVote = userVotes[userVoteKey];
        
        if (previousVote === voteType) {
          // User is removing their vote
          if (voteType === 'helpful') {
            faq.helpfulVotes = Math.max(0, (faq.helpfulVotes || 0) - 1);
          } else {
            faq.notHelpfulVotes = Math.max(0, (faq.notHelpfulVotes || 0) - 1);
          }
          delete userVotes[userVoteKey];
        } else {
          // Remove previous vote if exists
          if (previousVote === 'helpful') {
            faq.helpfulVotes = Math.max(0, (faq.helpfulVotes || 0) - 1);
          } else if (previousVote === 'not-helpful') {
            faq.notHelpfulVotes = Math.max(0, (faq.notHelpfulVotes || 0) - 1);
          }
          
          // Add new vote
          if (voteType === 'helpful') {
            faq.helpfulVotes = (faq.helpfulVotes || 0) + 1;
          } else {
            faq.notHelpfulVotes = (faq.notHelpfulVotes || 0) + 1;
          }
          userVotes[userVoteKey] = voteType;
        }
        
        localStorage.setItem('faqs', JSON.stringify(faqs));
        localStorage.setItem('faqVotes', JSON.stringify(userVotes));
        
        // Update UI
        const searchQuery = document.getElementById('faq-search').value.trim();
        const activeCategory = document.querySelector('.faq-category-btn.active').dataset.category;
        loadFAQs(searchQuery, activeCategory);
      };

      window.updateVoteButtonStates = () => {
        const userVotes = JSON.parse(localStorage.getItem('faqVotes') || '{}');
        
        Object.keys(userVotes).forEach(voteKey => {
          const faqId = voteKey.replace('faq-', '');
          const voteType = userVotes[voteKey];
          
          const helpfulBtn = document.getElementById(`helpful-${faqId}`);
          const notHelpfulBtn = document.getElementById(`not-helpful-${faqId}`);
          
          if (helpfulBtn) helpfulBtn.classList.remove('voted');
          if (notHelpfulBtn) notHelpfulBtn.classList.remove('voted');
          
          if (voteType === 'helpful' && helpfulBtn) {
            helpfulBtn.classList.add('voted');
          } else if (voteType === 'not-helpful' && notHelpfulBtn) {
            notHelpfulBtn.classList.add('voted');
          }
        });
      };

      // Statistics Management Functions
      window.initializeStats = () => {
        const defaultStats = [
          {
            id: 1,
            number: "50+",
            label: "Verified Hostels",
            published: true
          },
          {
            id: 2,
            number: "24/7",
            label: "Customer Support",
            published: true
          }
        ];

        const existingStats = JSON.parse(localStorage.getItem('whyStats') || '[]');
        if (existingStats.length === 0) {
          localStorage.setItem('whyStats', JSON.stringify(defaultStats));
        }
      };

      window.loadWhyStats = () => {
        const stats = JSON.parse(localStorage.getItem('whyStats') || '[]');
        const publishedStats = stats.filter(stat => stat.published);
        const container = document.getElementById('why-stats-container');
        
        if (!container) return;
        
        if (publishedStats.length === 0) {
          container.style.display = 'none';
          return;
        }
        
        container.style.display = 'grid';
        container.innerHTML = publishedStats.map(stat => `
          <div class="stat-item">
            <div class="stat-number">${stat.number}</div>
            <div class="stat-label">${stat.label}</div>
          </div>
        `).join('');
      };

      window.renderAdminStats = () => {
        const container = document.getElementById('stats-list');
        if (!container) return;
        
        const stats = JSON.parse(localStorage.getItem('whyStats') || '[]');
        
        if (stats.length === 0) {
          container.innerHTML = `
            <div class="admin-card" style="text-align: center; padding: 2rem; color: #6B7280;">
              <p style="margin: 0; font-style: italic;">No statistics created yet.</p>
            </div>
          `;
          return;
        }
        
        container.innerHTML = stats.map(stat => `
          <div class="admin-faq-item ${stat.published ? 'published' : 'draft'}" style="margin-bottom: 1rem;">
            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
              <div>
                <strong style="color: #2D3748; font-size: 1.1rem;">${stat.number}</strong>
                <div style="color: #4A5568; margin-top: 0.2rem;">${stat.label}</div>
                <span style="background: ${stat.published ? '#10B981' : '#F59E0B'}; color: white; padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.8rem; margin-top: 0.5rem; display: inline-block;">
                  ${stat.published ? 'Published' : 'Draft'}
                </span>
              </div>
            </div>
            <div class="admin-faq-actions">
              <button onclick="editStat(${stat.id})" class="edit-btn">Edit</button>
              <button onclick="toggleStatStatus(${stat.id})" class="toggle-btn ${stat.published ? 'published' : ''}">
                ${stat.published ? 'Hide' : 'Show'}
              </button>
              <button onclick="deleteStat(${stat.id})" class="delete-btn">Delete</button>
            </div>
          </div>
        `).join('');
      };

      window.showStatsForm = (editId = null) => {
        const modal = document.getElementById('stats-form-modal');
        const form = document.getElementById('stats-form');
        const title = document.getElementById('stats-form-title');
        
        if (editId) {
          const stats = JSON.parse(localStorage.getItem('whyStats') || '[]');
          const stat = stats.find(s => s.id === editId);
          if (stat) {
            title.textContent = 'Edit Statistic';
            document.getElementById('stat-number').value = stat.number;
            document.getElementById('stat-label').value = stat.label;
            document.getElementById('stat-published').checked = stat.published;
            form.dataset.editId = editId;
          }
        } else {
          title.textContent = 'Add New Statistic';
          form.reset();
          delete form.dataset.editId;
        }
        
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
      };

      window.closeStatsForm = () => {
        const modal = document.getElementById('stats-form-modal');
        modal.style.display = 'none';
        document.body.style.overflow = 'auto';
      };

      window.editStat = (id) => {
        showStatsForm(id);
      };

      window.toggleStatStatus = (id) => {
        const stats = JSON.parse(localStorage.getItem('whyStats') || '[]');
        const stat = stats.find(s => s.id === id);
        if (stat) {
          stat.published = !stat.published;
          localStorage.setItem('whyStats', JSON.stringify(stats));
          renderAdminStats();
          loadWhyStats(); // Refresh public display
        }
      };

      window.deleteStat = (id) => {
        const stats = JSON.parse(localStorage.getItem('whyStats') || '[]');
        const stat = stats.find(s => s.id === id);
        
        showWarning({
          title: 'Delete Statistic',
          message: 'This statistic will be permanently removed from the website.',
          item: `Statistic: "${stat?.title || 'Unknown'}" - ${stat?.value || 'N/A'}`,
          icon: 'üìä',
          confirmText: 'Delete Statistic',
          cancelText: 'Keep Statistic',
          onConfirm: () => {
            const filteredStats = stats.filter(s => s.id !== id);
            localStorage.setItem('whyStats', JSON.stringify(filteredStats));
            renderAdminStats();
            loadWhyStats(); // Refresh public display
            showNotification('Statistic deleted successfully', 'success');
          }
        });
      };

      // Stats Form Handler
      document.addEventListener('DOMContentLoaded', () => {
        setTimeout(() => {
          const statsForm = document.getElementById('stats-form');
          if (statsForm) {
            statsForm.addEventListener('submit', (e) => {
              e.preventDefault();
              
              const number = document.getElementById('stat-number').value;
              const label = document.getElementById('stat-label').value;
              const published = document.getElementById('stat-published').checked;
              const editId = statsForm.dataset.editId;
              
              const stats = JSON.parse(localStorage.getItem('whyStats') || '[]');
              
              if (editId) {
                // Edit existing statistic
                const stat = stats.find(s => s.id === parseInt(editId));
                if (stat) {
                  stat.number = number;
                  stat.label = label;
                  stat.published = published;
                }
              } else {
                // Add new statistic
                const newStat = {
                  id: Date.now(),
                  number: number,
                  label: label,
                  published: published
                };
                stats.push(newStat);
              }
              
              localStorage.setItem('whyStats', JSON.stringify(stats));
              closeStatsForm();
              renderAdminStats();
              loadWhyStats(); // Refresh public display
            });
          }
        }, 100);
      });

      // Analytics Tracking Functions
      window.initializeAnalytics = () => {
        // Initialize analytics if not exists
        const analytics = JSON.parse(localStorage.getItem('siteAnalytics') || '{}');
        const today = new Date().toDateString();
        
        if (!analytics.totalVisits) analytics.totalVisits = 0;
        if (!analytics.totalClicks) analytics.totalClicks = 0;
        if (!analytics.contactClicks) analytics.contactClicks = 0;
        if (!analytics.hostelViews) analytics.hostelViews = 0;
        if (!analytics.chatOpens) analytics.chatOpens = 0;
        if (!analytics.adminHostelViews) analytics.adminHostelViews = 0;
        if (!analytics.dailyVisits) analytics.dailyVisits = {};
        if (!analytics.lastVisit || analytics.lastVisit !== today) {
          analytics.totalVisits++;
          analytics.lastVisit = today;
        }
        
        // Track today's visits
        if (!analytics.dailyVisits[today]) {
          analytics.dailyVisits[today] = 0;
        }
        analytics.dailyVisits[today]++;
        
        localStorage.setItem('siteAnalytics', JSON.stringify(analytics));
      };

      window.trackClick = (type = 'general') => {
        const analytics = JSON.parse(localStorage.getItem('siteAnalytics') || '{}');
        analytics.totalClicks = (analytics.totalClicks || 0) + 1;
        
        switch(type) {
          case 'contact':
            analytics.contactClicks = (analytics.contactClicks || 0) + 1;
            break;
          case 'hostel':
            analytics.hostelViews = (analytics.hostelViews || 0) + 1;
            break;
          case 'chat':
            analytics.chatOpens = (analytics.chatOpens || 0) + 1;
            break;
          case 'admin-hostel-view':
            analytics.adminHostelViews = (analytics.adminHostelViews || 0) + 1;
            break;
        }
        
        localStorage.setItem('siteAnalytics', JSON.stringify(analytics));
      };

      window.loadAnalytics = () => {
        const analytics = JSON.parse(localStorage.getItem('siteAnalytics') || '{}');
        const today = new Date().toDateString();
        
        document.getElementById('total-visits').textContent = analytics.totalVisits || 0;
        document.getElementById('today-visits').textContent = analytics.dailyVisits?.[today] || 0;
        document.getElementById('total-clicks').textContent = analytics.totalClicks || 0;
        document.getElementById('contact-clicks').textContent = analytics.contactClicks || 0;
        document.getElementById('hostel-views').textContent = analytics.hostelViews || 0;
        document.getElementById('chat-opens').textContent = analytics.chatOpens || 0;
        if (document.getElementById('admin-hostel-views')) {
          document.getElementById('admin-hostel-views').textContent = analytics.adminHostelViews || 0;
        }
      };

      // Terms of Service Modal Function
      window.showTermsOfService = () => {
        const termsContent = localStorage.getItem('terms-service') || `
        <h3>Terms of Service</h3>
        <p><strong>Last updated:</strong> ${new Date().toLocaleDateString()}</p>
        
        <p>By using the HOSTALL platform, you agree to the following terms and conditions:</p>
        
        <h4>1. About HOSTALL:</h4>
        <p>HOSTALL is an informational platform that helps users discover hostels in major areas of Lahore. The data is gathered manually by our team, and is not directly submitted by hostel owners.</p>
        
        <h4>2. Use of the Platform:</h4>
        <ul>
          <li>Users may browse listings, search for hostels, and contact us for feedback or support.</li>
          <li>All users must use the platform respectfully and lawfully.</li>
        </ul>
        
        <h4>3. Disclaimer on Hostel Listings:</h4>
        <ul>
          <li>We do not guarantee 100% accuracy of any listing.</li>
          <li>Prices, facilities, and availability are based on information collected during visits or calls and may change without notice.</li>
          <li>We are not responsible for any agreement, dispute, or arrangement made between a user and a hostel owner based on our listings.</li>
        </ul>
        
        <h4>4. Content Rights:</h4>
        <ul>
          <li>The hostel data, filters, images, and platform design are the property of HOSTALL.</li>
          <li>Users may not copy, reproduce, or misuse the content without permission.</li>
        </ul>
        
        <h4>5. Modifications and Updates:</h4>
        <p>We reserve the right to update these terms and the platform at any time. Continued use of the site implies acceptance of any changes.</p>
        
        <h4>6. Termination of Use:</h4>
        <p>We may suspend or terminate access to users who misuse the site or violate these terms.</p>
        
        <h4>Contact Us</h4>
        <p>If you have any questions or concerns, please email us at teamhostall@gmail.com</p>
        `;
        
        // Create modal
        const modal = document.createElement('div');
        modal.className = 'privacy-modal';
        modal.innerHTML = `
          <div class="privacy-modal-content">
            <div class="privacy-modal-header">
              <h2>Terms of Service</h2>
              <button class="privacy-modal-close" onclick="this.closest('.privacy-modal').remove()">&times;</button>
            </div>
            <div class="privacy-modal-body">
              ${termsContent}
            </div>
          </div>
        `;
        
        document.body.appendChild(modal);
      };

      // Media Upload Functions
      window.addImageUpload = () => {
        const container = document.getElementById('media-uploads-container');
        const uploadId = Date.now();
        const uploadItem = document.createElement('div');
        uploadItem.className = 'media-upload-item';
        uploadItem.innerHTML = `
          <span class="media-type-label">IMAGE</span>
          <input type="file" accept="image/*" onchange="previewMedia(this, ${uploadId})">
          <div class="media-preview-container" id="preview-${uploadId}"></div>
          <button type="button" class="media-remove-btn" onclick="removeMediaUpload(this)">Remove</button>
        `;
        container.appendChild(uploadItem);
      };

      window.addVideoUpload = () => {
        const container = document.getElementById('media-uploads-container');
        const uploadId = Date.now();
        const uploadItem = document.createElement('div');
        uploadItem.className = 'media-upload-item video';
        uploadItem.innerHTML = `
          <span class="media-type-label">VIDEO</span>
          <input type="file" accept="video/*" onchange="previewMedia(this, ${uploadId})">
          <div class="media-preview-container" id="preview-${uploadId}"></div>
          <button type="button" class="media-remove-btn" onclick="removeMediaUpload(this)">Remove</button>
        `;
        container.appendChild(uploadItem);
      };

      window.removeMediaUpload = (button) => {
        button.parentElement.remove();
      };

      window.previewMedia = (input, uploadId) => {
        const file = input.files[0];
        if (file) {
          const reader = new FileReader();
          const previewContainer = document.getElementById(`preview-${uploadId}`);
          
          reader.onload = e => {
            if (file.type.startsWith('image/')) {
              previewContainer.innerHTML = `<img src="${e.target.result}" class="media-preview" alt="Preview">`;
            } else if (file.type.startsWith('video/')) {
              previewContainer.innerHTML = `<video src="${e.target.result}" class="media-preview" controls></video>`;
            }
          };
          reader.readAsDataURL(file);
        }
      };

      // Chat Widget Functions
      window.openChatWidget = () => {
        document.getElementById('chat-widget').style.display = 'flex';
        document.getElementById('floating-chat-btn').style.display = 'none';
        trackClick('chat');
      };

      window.closeChatWidget = () => {
        document.getElementById('chat-widget').style.display = 'none';
        document.getElementById('floating-chat-btn').style.display = 'flex';
      };

      // Send direct message function
      window.sendDirectMessage = () => {
        const name = document.getElementById('chat-name').value.trim();
        const whatsapp = document.getElementById('chat-whatsapp').value.trim();
        const email = document.getElementById('chat-email').value.trim();
        const message = document.getElementById('chat-message').value.trim();

        if (!name || !message) {
          alert('Please fill in your name and message');
          return;
        }

        if (!whatsapp && !email) {
          alert('Please provide either WhatsApp number or email for reply');
          return;
        }

        // Validate email if provided
        if (email && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
          alert('Please enter a valid email address');
          return;
        }

        // Save message to localStorage for admin
        const chatMessages = JSON.parse(localStorage.getItem('chat-messages') || '[]');
        const newMessage = {
          id: Date.now(),
          name: name,
          email: email || 'Not provided',
          phone: whatsapp || 'Not provided',
          message: message,
          timestamp: new Date().toISOString(),
          status: 'unread',
          source: 'chat-widget'
        };

        chatMessages.push(newMessage);
        localStorage.setItem('chat-messages', JSON.stringify(chatMessages));

        // Clear form
        document.getElementById('chat-name').value = '';
        document.getElementById('chat-whatsapp').value = '';
        document.getElementById('chat-email').value = '';
        document.getElementById('chat-message').value = '';

        // Show success message
        document.querySelectorAll('.chat-step').forEach(step => step.classList.remove('active'));
        document.getElementById('chat-success').classList.add('active');

        // Update admin notifications
        updateChatNotifications();
        trackClick('chat');
      };



      window.startNewMessage = () => {
        document.querySelectorAll('.chat-step').forEach(step => step.classList.remove('active'));
        document.getElementById('chat-form').classList.add('active');
      };

      // Update chat notifications for admin
      window.updateChatNotifications = () => {
        const chatMessages = JSON.parse(localStorage.getItem('chat-messages') || '[]');
        const unreadCount = chatMessages.filter(msg => msg.status === 'unread').length;
        
        const badge = document.getElementById('chat-notification-badge');
        if (unreadCount > 0) {
          badge.textContent = unreadCount;
          badge.style.display = 'flex';
        } else {
          badge.style.display = 'none';
        }
      };

      // Toggle FAQ answer
      window.toggleFAQ = (element) => {
        const answer = element.nextElementSibling;
        const icon = element.querySelector('.faq-icon');
        
        if (answer.style.display === 'none' || answer.style.display === '') {
          answer.style.display = 'block';
          icon.textContent = '‚àí';
        } else {
          answer.style.display = 'none';
          icon.textContent = '+';
        }
      };

      // Filter FAQs by category
      window.filterFAQsByCategory = (category) => {
        const allItems = document.querySelectorAll('.faq-item');
        const buttons = document.querySelectorAll('button[onclick*="filterFAQsByCategory"]');
        const categoryButtons = document.querySelectorAll('.faq-categories-legend > div');
        const categoryHeaders = document.querySelectorAll('.faq-category-section');
        
        // Update main filter buttons states
        buttons.forEach(btn => {
          if (btn.onclick && btn.onclick.toString().includes(`'${category}'`)) {
            btn.style.background = 'linear-gradient(135deg, #8B5CF6, #7C3AED)';
            btn.style.color = 'white';
            btn.style.border = 'none';
          } else if (btn.onclick && btn.onclick.toString().includes('filterFAQsByCategory')) {
            btn.style.background = 'white';
            btn.style.color = '#8B5CF6';
            btn.style.border = '2px solid #8B5CF6';
          } else if (btn.onclick && btn.onclick.toString().includes('filterFAQsByHelpfulness')) {
            btn.style.background = 'white';
            btn.style.color = '#10B981';
            btn.style.border = '2px solid #10B981';
          }
        });
        
        // Update category legend buttons
        categoryButtons.forEach(btn => {
          const btnCategory = btn.getAttribute('data-category') || btn.textContent.toLowerCase();
          const isMatched = category === 'all' ? btnCategory === 'all' : btnCategory === category;
          
          if (isMatched) {
            btn.style.background = '#8B5CF6';
            btn.style.color = 'white';
          } else {
            btn.style.background = '#EDF2F7';
            btn.style.color = '#4A5568';
          }
        });
        
        // Filter FAQ items
        allItems.forEach(item => {
          if (category === 'all' || item.dataset.category === category) {
            item.style.display = 'block';
          } else {
            item.style.display = 'none';
          }
        });
        
        // Also filter category sections (headers like "GENERAL", "BOOKING", etc.)
        categoryHeaders.forEach(header => {
          const headerCategory = header.getAttribute('data-category');
          if (category === 'all' || headerCategory === category) {
            header.style.display = 'flex'; // Must be flex for the icon and heading layout
          } else {
            header.style.display = 'none';
          }
        });
        
        // Update visible FAQ count
        const visibleFAQs = document.querySelectorAll('.faq-item[style*="display: block"]').length;
        const visibleCountElement = document.getElementById('visible-faq-count');
        if (visibleCountElement) {
          visibleCountElement.textContent = visibleFAQs;
        }
        
        // Clear any active search highlighting
        clearSearchHighlight();
      };
      
      // FAQ Search Functions
      window.searchFAQByKeyword = function(keyword) {
        const faqs = JSON.parse(localStorage.getItem('faqs') || '[]');
        const allItems = document.querySelectorAll('.faq-item');
        const categoryHeaders = document.querySelectorAll('.faq-category-section');
        const searchInfo = document.getElementById('search-results-info');
        
        let matchingItems = 0;
        let matchedCategories = new Set();
        
        // Clear previous category filters
        const categoryButtons = document.querySelectorAll('.faq-categories-legend > div');
        categoryButtons.forEach(btn => {
          btn.style.background = '#EDF2F7';
          btn.style.color = '#4A5568';
        });
        
        // Reset main filter buttons
        const buttons = document.querySelectorAll('button[onclick*="filterFAQsByCategory"]');
        buttons.forEach(btn => {
          btn.style.background = 'white';
          btn.style.color = '#8B5CF6';
          btn.style.border = '2px solid #8B5CF6';
        });
        
        // Search through FAQs
        allItems.forEach(item => {
          const question = item.querySelector('.faq-question span').textContent.toLowerCase();
          const answer = item.querySelector('.faq-answer').textContent.toLowerCase();
          const category = item.dataset.category;
          
          if (question.includes(keyword.toLowerCase()) || 
              answer.includes(keyword.toLowerCase()) ||
              category === keyword.toLowerCase()) {
            item.style.display = 'block';
            matchingItems++;
            matchedCategories.add(category);
            
            // Highlight matching text
            highlightText(item, keyword);
          } else {
            item.style.display = 'none';
          }
        });
        
        // Show/hide category headers based on matches
        categoryHeaders.forEach(header => {
          const headerCategory = header.getAttribute('data-category');
          if (matchedCategories.has(headerCategory)) {
            header.style.display = 'flex';
          } else {
            header.style.display = 'none';
          }
        });
        
        // Update search info
        if (searchInfo) {
          if (matchingItems > 0) {
            searchInfo.innerHTML = `üîç Found <strong>${matchingItems}</strong> FAQ${matchingItems > 1 ? 's' : ''} matching "<strong>${keyword}</strong>"`;
            searchInfo.style.display = 'block';
            searchInfo.style.color = '#059669';
          } else {
            searchInfo.innerHTML = `‚ùå No FAQs found matching "<strong>${keyword}</strong>"`;
            searchInfo.style.display = 'block';
            searchInfo.style.color = '#DC2626';
          }
        }
        
        // Highlight active search tag
        highlightActiveSearchTag(keyword);
        
        // Update visible count
        const visibleCountElement = document.getElementById('visible-faq-count');
        if (visibleCountElement) {
          visibleCountElement.textContent = matchingItems;
        }
      };
      
      window.clearFAQSearch = function() {
        // Show all FAQs
        const allItems = document.querySelectorAll('.faq-item');
        const categoryHeaders = document.querySelectorAll('.faq-category-section');
        const searchInfo = document.getElementById('search-results-info');
        
        allItems.forEach(item => {
          item.style.display = 'block';
        });
        
        categoryHeaders.forEach(header => {
          header.style.display = 'flex';
        });
        
        // Hide search info
        if (searchInfo) {
          searchInfo.style.display = 'none';
        }
        
        // Clear search highlighting
        clearSearchHighlight();
        clearActiveSearchTag();
        
        // Reset visible count
        const visibleCountElement = document.getElementById('visible-faq-count');
        if (visibleCountElement) {
          visibleCountElement.textContent = '24';
        }
        
        // Reset category filter to "All"
        filterFAQsByCategory('all');
      };
      
      function highlightText(item, keyword) {
        const question = item.querySelector('.faq-question span');
        const answer = item.querySelector('.faq-answer');
        
        // Simple text highlighting
        if (question && question.textContent.toLowerCase().includes(keyword.toLowerCase())) {
          const regex = new RegExp(`(${keyword})`, 'gi');
          question.innerHTML = question.textContent.replace(regex, '<mark style="background: #FEF08A; padding: 0 2px; border-radius: 2px;">$1</mark>');
        }
        
        if (answer && answer.textContent.toLowerCase().includes(keyword.toLowerCase())) {
          const regex = new RegExp(`(${keyword})`, 'gi');
          answer.innerHTML = answer.textContent.replace(regex, '<mark style="background: #FEF08A; padding: 0 2px; border-radius: 2px;">$1</mark>');
        }
      }
      
      function clearSearchHighlight() {
        const allItems = document.querySelectorAll('.faq-item');
        allItems.forEach(item => {
          const question = item.querySelector('.faq-question span');
          const answer = item.querySelector('.faq-answer');
          
          if (question && question.innerHTML.includes('<mark')) {
            question.innerHTML = question.textContent;
          }
          
          if (answer && answer.innerHTML.includes('<mark')) {
            answer.innerHTML = answer.textContent;
          }
        });
      }
      
      function highlightActiveSearchTag(keyword) {
        const searchTags = document.querySelectorAll('.search-tag');
        searchTags.forEach(tag => {
          const tagText = tag.textContent.toLowerCase();
          if (tagText.includes(keyword.toLowerCase())) {
            tag.style.background = '#3B82F6';
            tag.style.color = 'white';
            tag.style.border = '1px solid #1D4ED8';
            tag.style.transform = 'scale(1.05)';
          } else {
            // Reset other tags to original styles
            resetSearchTagStyle(tag);
          }
        });
      }
      
      function clearActiveSearchTag() {
        const searchTags = document.querySelectorAll('.search-tag');
        searchTags.forEach(tag => {
          resetSearchTagStyle(tag);
        });
      }
      
      function resetSearchTagStyle(tag) {
        const tagText = tag.textContent.toLowerCase();
        if (tagText.includes('payment')) {
          tag.style.background = '#FEF3C7';
          tag.style.color = '#92400E';
          tag.style.border = '1px solid #F59E0B';
        } else if (tagText.includes('booking')) {
          tag.style.background = '#DBEAFE';
          tag.style.color = '#1E40AF';
          tag.style.border = '1px solid #3B82F6';
        } else if (tagText.includes('safety')) {
          tag.style.background = '#D1FAE5';
          tag.style.color = '#065F46';
          tag.style.border = '1px solid #10B981';
        } else if (tagText.includes('admin')) {
          tag.style.background = '#EDE9FE';
          tag.style.color = '#5B21B6';
          tag.style.border = '1px solid #8B5CF6';
        } else if (tagText.includes('facilities')) {
          tag.style.background = '#FEF2F2';
          tag.style.color = '#991B1B';
          tag.style.border = '1px solid #EF4444';
        } else if (tagText.includes('scam')) {
          tag.style.background = '#FDF2F8';
          tag.style.color = '#BE185D';
          tag.style.border = '1px solid #EC4899';
        } else if (tagText.includes('verification')) {
          tag.style.background = '#F0FDF4';
          tag.style.color = '#166534';
          tag.style.border = '1px solid #22C55E';
        } else if (tagText.includes('listing')) {
          tag.style.background = '#F3F4F6';
          tag.style.color = '#374151';
          tag.style.border = '1px solid #6B7280';
        } else {
          tag.style.background = '#F9FAFB';
          tag.style.color = '#6B7280';
          tag.style.border = '1px solid #D1D5DB';
        }
        tag.style.transform = 'scale(1)';
      }

      window.filterFAQsByHelpfulness = function() {
        const faqItems = document.querySelectorAll('.faq-item');
        const categoryHeaders = document.querySelectorAll('.faq-category-section');
        const buttons = document.querySelectorAll('button[onclick*="filterFAQsByCategory"], button[onclick*="filterFAQsByHelpfulness"]');
        const helpfulStats = JSON.parse(localStorage.getItem('helpfulStats') || '{}');
        
        // Update button states
        buttons.forEach(btn => {
          if (btn.onclick && btn.onclick.toString().includes('filterFAQsByHelpfulness')) {
            btn.style.background = 'linear-gradient(135deg, #10B981, #059669)';
            btn.style.color = 'white';
            btn.style.border = 'none';
          } else if (btn.onclick && btn.onclick.toString().includes('filterFAQsByCategory')) {
            btn.style.background = 'white';
            btn.style.color = '#8B5CF6';
            btn.style.border = '2px solid #8B5CF6';
          }
        });
        
        // Create array of FAQ items with their helpfulness scores
        const faqsWithScores = Array.from(faqItems).map(item => {
          const helpfulBtns = item.querySelectorAll('.helpful-btn');
          let faqId = null;
          
          // Extract FAQ ID from onclick attribute
          if (helpfulBtns.length > 0) {
            const onclickAttr = helpfulBtns[0].getAttribute('onclick');
            const match = onclickAttr.match(/'([^']+)'/);
            if (match) {
              faqId = match[1];
            }
          }
          
          const stats = helpfulStats[faqId] || { yes: 0, no: 0 };
          const helpfulnessScore = stats.yes - stats.no; // Net helpfulness score
          
          // Add to FAQ ID lookup for analytics
          if (faqId && window.faqIdToQuestion && !window.faqIdToQuestion[faqId]) {
            const questionElem = item.querySelector('.faq-question');
            if (questionElem) {
              window.faqIdToQuestion[faqId] = questionElem.textContent.trim();
            }
          }
          
          return {
            element: item,
            faqId: faqId,
            score: helpfulnessScore,
            yesVotes: stats.yes
          };
        });
        
        // Sort by helpfulness score (highest first), then by yes votes
        faqsWithScores.sort((a, b) => {
          if (b.score !== a.score) {
            return b.score - a.score;
          }
          return b.yesVotes - a.yesVotes;
        });
        
        // Hide all items and headers first
        faqItems.forEach(item => item.style.display = 'none');
        categoryHeaders.forEach(header => header.style.display = 'none');
        
        // Show items in helpfulness order (only show top 10 most helpful)
        const topHelpfulCount = Math.min(10, faqsWithScores.length);
        let visibleCount = 0;
        for (let i = 0; i < topHelpfulCount; i++) {
          const faqData = faqsWithScores[i];
          if (faqData.score > 0 || faqData.yesVotes > 0) { // Only show FAQs with some positive feedback
            faqData.element.style.display = 'block';
            visibleCount++;
          }
        }
        
        // Update visible FAQ count
        const visibleCountElement = document.getElementById('visible-faq-count');
        if (visibleCountElement) {
          visibleCountElement.textContent = visibleCount;
        }
      };

      // Advertisement Management Functions
      window.saveAdvertisement = () => {
        const title = document.getElementById('ad-title').value;
        const url = document.getElementById('ad-url').value;
        const imageFile = document.getElementById('ad-image').files[0];
        const position = document.getElementById('ad-position').value;
        const active = document.getElementById('ad-active').checked;
        
        if (!title) {
          alert('Please enter advertisement title');
          return;
        }
        
        const ad = {
          id: Date.now(),
          title,
          url: url || '#',
          position,
          active,
          created: new Date().toISOString()
        };
        
        if (imageFile) {
          const reader = new FileReader();
          reader.onload = function(e) {
            ad.image = e.target.result;
            saveAdToStorage(ad);
          };
          reader.readAsDataURL(imageFile);
        } else {
          saveAdToStorage(ad);
        }
      };
      
      function saveAdToStorage(ad) {
        const ads = JSON.parse(localStorage.getItem('advertisements') || '[]');
        ads.push(ad);
        localStorage.setItem('advertisements', JSON.stringify(ads));
        
        // Clear form
        document.getElementById('ad-title').value = '';
        document.getElementById('ad-url').value = '';
        document.getElementById('ad-image').value = '';
        document.getElementById('ad-position').value = 'sidebar';
        document.getElementById('ad-active').checked = true;
        
        loadAdvertisements();
        updateAdvertisementDisplay();
        alert('Advertisement saved successfully!');
      }
      
      window.loadAdvertisements = () => {
        const ads = JSON.parse(localStorage.getItem('advertisements') || '[]');
        const container = document.getElementById('ads-list');
        
        if (ads.length === 0) {
          container.innerHTML = '<p style="text-align: center; color: #666;">No advertisements created yet.</p>';
          return;
        }
        
        container.innerHTML = ads.map(ad => `
          <div class="ad-item" style="border: 1px solid #e0e0e0; border-radius: 8px; padding: 1rem; margin-bottom: 1rem; display: flex; align-items: center; gap: 1rem;">
            ${ad.image ? `<img src="${ad.image}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 4px;">` : '<div style="width: 60px; height: 60px; background: #f0f0f0; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; color: #666;">No Image</div>'}
            <div style="flex: 1;">
              <div style="font-weight: 600; margin-bottom: 0.25rem;">${ad.title}</div>
              <div style="font-size: 0.9rem; color: #666;">${ad.url}</div>
              <div style="font-size: 0.8rem; color: #999;">Position: ${ad.position} | Status: ${ad.active ? 'Active' : 'Inactive'}</div>
            </div>
            <div style="display: flex; gap: 0.5rem;">
              <button onclick="toggleAdStatus(${ad.id})" class="btn-secondary" style="font-size: 0.8rem;">${ad.active ? 'Deactivate' : 'Activate'}</button>
              <button onclick="deleteAd(${ad.id})" class="btn-danger" style="font-size: 0.8rem; background: #ef4444; color: white;">Delete</button>
            </div>
          </div>
        `).join('');
      };
      
      window.toggleAdStatus = (id) => {
        const ads = JSON.parse(localStorage.getItem('advertisements') || '[]');
        const updatedAds = ads.map(ad => ad.id === id ? {...ad, active: !ad.active} : ad);
        localStorage.setItem('advertisements', JSON.stringify(updatedAds));
        loadAdvertisements();
        updateAdvertisementDisplay();
      };
      
      window.deleteAd = (id) => {
        if (confirm('Are you sure you want to delete this advertisement?')) {
          const ads = JSON.parse(localStorage.getItem('advertisements') || '[]');
          const updatedAds = ads.filter(ad => ad.id !== id);
          localStorage.setItem('advertisements', JSON.stringify(updatedAds));
          loadAdvertisements();
          updateAdvertisementDisplay();
        }
      };
      
      // WhatsApp Contact Management Functions
      window.saveWhatsAppContact = () => {
        const label = document.getElementById('whatsapp-label').value;
        const number = document.getElementById('whatsapp-number-input').value;
        const allowCalls = document.getElementById('whatsapp-allow-calls').checked;
        const note = document.getElementById('whatsapp-note').value;
        
        if (!label || !number) {
          alert('Please enter both label and number');
          return;
        }
        
        const contact = {
          id: Date.now(),
          label,
          number: number.replace(/\D/g, ''), // Remove non-digits
          allowCalls,
          note: note || (allowCalls ? '' : 'No calls, message only'),
          created: new Date().toISOString()
        };
        
        const contacts = JSON.parse(localStorage.getItem('whatsapp-contacts') || '[]');
        contacts.push(contact);
        localStorage.setItem('whatsapp-contacts', JSON.stringify(contacts));
        
        // Clear form
        document.getElementById('whatsapp-label').value = '';
        document.getElementById('whatsapp-number-input').value = '';
        document.getElementById('whatsapp-allow-calls').checked = false;
        document.getElementById('whatsapp-note').value = '';
        
        loadWhatsAppContacts();
        alert('WhatsApp contact saved successfully!');
      };
      
      window.loadWhatsAppContacts = () => {
        const contacts = JSON.parse(localStorage.getItem('whatsapp-contacts') || '[{"number": "923331536041", "label": "Main Support", "allowCalls": false, "note": "No calls, message only"}]');
        const container = document.getElementById('whatsapp-contacts-list');
        
        if (contacts.length === 0) {
          container.innerHTML = '<p style="text-align: center; color: #666;">No WhatsApp contacts added yet.</p>';
          return;
        }
        
        container.innerHTML = contacts.map(contact => `
          <div class="contact-item" style="border: 1px solid #e0e0e0; border-radius: 8px; padding: 1rem; margin-bottom: 1rem; display: flex; align-items: center; gap: 1rem;">
            <div style="flex: 1;">
              <div style="font-weight: 600; margin-bottom: 0.25rem;">${contact.label}</div>
              <div style="font-size: 0.9rem; color: #666;">+${contact.number}</div>
              <div style="font-size: 0.8rem; color: #999;">${contact.note}</div>
            </div>
            <div style="display: flex; gap: 0.5rem;">
              <button onclick="deleteWhatsAppContact(${contact.id})" class="btn-danger" style="font-size: 0.8rem; background: #ef4444; color: white;">Delete</button>
            </div>
          </div>
        `).join('');
      };
      
      window.deleteWhatsAppContact = (id) => {
        if (confirm('Are you sure you want to delete this WhatsApp contact?')) {
          const contacts = JSON.parse(localStorage.getItem('whatsapp-contacts') || '[]');
          const updatedContacts = contacts.filter(contact => contact.id !== id);
          localStorage.setItem('whatsapp-contacts', JSON.stringify(updatedContacts));
          loadWhatsAppContacts();
        }
      };
      
      // Update advertisement display throughout the site
      window.updateAdvertisementDisplay = () => {
        const ads = JSON.parse(localStorage.getItem('advertisements') || '[]');
        const activeAds = ads.filter(ad => ad.active);
        
        // Update FAQ sidebar ads
        const sidebarAds = activeAds.filter(ad => ad.position === 'sidebar');
        document.querySelectorAll('.faq-side-ad').forEach((element, index) => {
          if (sidebarAds[index]) {
            const ad = sidebarAds[index];
            element.innerHTML = ad.image ? 
              `<img src="${ad.image}" style="width: 100%; height: 100%; object-fit: cover; cursor: pointer;" onclick="openAdLink('${ad.url}')" alt="${ad.title}">` :
              `<span style="transform: rotate(${index % 2 === 0 ? '-90deg' : '90deg'}); font-weight: bold; color: #999; font-size: 1rem; letter-spacing: 2px; white-space: nowrap; cursor: pointer;" onclick="openAdLink('${ad.url}')">${ad.title}</span>`;
          }
        });
        
        // Update mobile FAQ ads
        const mobileAds = activeAds.filter(ad => ad.position === 'mobile-faq');
        document.querySelectorAll('.mobile-faq-ad').forEach((element, index) => {
          if (mobileAds[index]) {
            const ad = mobileAds[index];
            element.innerHTML = ad.image ? 
              `<img src="${ad.image}" style="width: 100%; height: 100%; object-fit: cover; cursor: pointer;" onclick="openAdLink('${ad.url}')" alt="${ad.title}">` :
              `<span style="font-weight: bold; color: #666; font-size: 1rem; letter-spacing: 1px; cursor: pointer;" onclick="openAdLink('${ad.url}')">${ad.title}</span>`;
          }
        });
        
        // Update banner ad before hostels
        const bannerAds = activeAds.filter(ad => ad.position === 'banner');
        const bannerAdElement = document.querySelector('.advertisement-banner');
        if (bannerAdElement && bannerAds.length > 0) {
          const ad = bannerAds[0];
          if (ad.image) {
            bannerAdElement.innerHTML = `<img src="${ad.image}" style="width: 100%; height: 100%; object-fit: cover;" alt="${ad.title}">`;
          } else {
            bannerAdElement.innerHTML = `
              <div style="text-align: center; padding: 1rem;">
                <span style="font-weight: bold; color: #666; font-size: 1.2rem; display: block; margin-bottom: 0.5rem;">${ad.title}</span>
                <span style="color: #888; font-size: 0.9rem;">Click for more information</span>
              </div>
            `;
          }
          bannerAdElement.onclick = () => openAdLink(ad.url);
        }
      };
      
      window.openAdLink = (url) => {
        // Always show contact options popup for all advertisements
        const contacts = JSON.parse(localStorage.getItem('whatsapp-contacts') || '[{"number": "923331536041", "label": "Main Support", "allowCalls": false, "note": "No calls, message only"}]');
        const defaultContact = contacts[0];
        
        const message = 'Hi! I\'m interested in advertising on HOSTALL. Please provide more information.';
        const whatsappUrl = `https://wa.me/${defaultContact.number}?text=${encodeURIComponent(message)}`;
        const emailUrl = `mailto:teamhostall@gmail.com?subject=Advertisement Inquiry&body=${encodeURIComponent(message)}`;
        const adUrl = url && url !== '#' ? url : null;
        
        // Create and show the contact options popup
        const popup = document.createElement('div');
        popup.className = 'contact-popup';
        popup.style.position = 'fixed';
        popup.style.top = '0';
        popup.style.left = '0';
        popup.style.width = '100%';
        popup.style.height = '100%';
        popup.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
        popup.style.display = 'flex';
        popup.style.justifyContent = 'center';
        popup.style.alignItems = 'center';
        popup.style.zIndex = '9999';
        
        const popupContent = document.createElement('div');
        popupContent.style.width = '90%';
        popupContent.style.maxWidth = '400px';
        popupContent.style.backgroundColor = 'white';
        popupContent.style.borderRadius = '10px';
        popupContent.style.padding = '2rem';
        popupContent.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.2)';
        
        const adLinkButton = adUrl ? `
          <button id="visit-ad-btn" style="background: #8B5CF6; color: white; border: none; padding: 1rem; border-radius: 8px; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 0.5rem; cursor: pointer; margin-bottom: 1rem;">
            <span style="font-size: 1.2rem;">üîó</span>
            Visit Advertisement
          </button>
        ` : '';
        
        popupContent.innerHTML = `
          <div style="text-align: center; margin-bottom: 1.5rem;">
            <h3 style="font-size: 1.3rem; color: #4B5563; margin-bottom: 0.5rem;">Advertisement Options</h3>
            <p style="color: #6B7280; font-size: 0.9rem;">${adUrl ? 'Visit the advertisement or contact us about advertising opportunities' : 'Contact us about advertising opportunities'}</p>
          </div>
          <div style="display: flex; flex-direction: column; gap: 1rem;">
            ${adLinkButton}
            <button id="whatsapp-btn" style="background: #25D366; color: white; border: none; padding: 1rem; border-radius: 8px; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 0.5rem; cursor: pointer;">
              <span style="font-size: 1.2rem;">üì±</span>
              Contact via WhatsApp
            </button>
            <button id="email-btn" style="background: #4B5563; color: white; border: none; padding: 1rem; border-radius: 8px; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 0.5rem; cursor: pointer;">
              <span style="font-size: 1.2rem;">‚úâÔ∏è</span>
              Contact via Email
            </button>
          </div>
          <div style="text-align: center; margin-top: 1.5rem;">
            <button id="close-popup" style="background: none; border: none; color: #6B7280; font-size: 0.9rem; cursor: pointer;">Close</button>
          </div>
        `;
        
        popup.appendChild(popupContent);
        document.body.appendChild(popup);
        
        // Handle button clicks
        if (adUrl) {
          document.getElementById('visit-ad-btn').addEventListener('click', () => {
            window.open(adUrl, '_blank');
            document.body.removeChild(popup);
          });
        }
        
        document.getElementById('whatsapp-btn').addEventListener('click', () => {
          window.open(whatsappUrl, '_blank');
          document.body.removeChild(popup);
        });
        
        document.getElementById('email-btn').addEventListener('click', () => {
          window.open(emailUrl, '_blank');
          document.body.removeChild(popup);
        });
        
        document.getElementById('close-popup').addEventListener('click', () => {
          document.body.removeChild(popup);
        });
        
        // Close popup when clicking outside the content area
        popup.addEventListener('click', (e) => {
          if (e.target === popup) {
            document.body.removeChild(popup);
          }
        });
      };

      // Initialize analytics on page load
      document.addEventListener('DOMContentLoaded', () => {
        initializeAnalytics();
        updateChatNotifications();
        
        // Initialize advertisement management
        if (document.getElementById('ads-list')) {
          loadAdvertisements();
        }
        if (document.getElementById('whatsapp-contacts-list')) {
          loadWhatsAppContacts();
        }
        updateAdvertisementDisplay();
        
        // Add event listener for search input
        const searchInput = document.getElementById('search-input');
        if (searchInput) {
          searchInput.addEventListener('keyup', applyFilters);
        }
        
        // Initial render
        renderPublic();
      });

      window.contactOwner = (hostelName) => {
        alert(`Contact information for ${hostelName} will be available after registration. Please use our contact form for assistance.`);
      };

      // Function to toggle the facilities filter dropdown
      window.toggleFacilitiesFilter = (event) => {
        event.preventDefault();
        event.stopPropagation();
        const dropdown = document.getElementById('facilities-filter-dropdown');
        dropdown.style.display = dropdown.style.display === 'none' ? 'block' : 'none';
      };
      
      // Function to update facilities filter button text
      function updateFacilitiesFilterButton() {
        const selectedCount = document.querySelectorAll('.facility-checkbox:checked').length;
        const btn = document.querySelector('.facilities-dropdown-btn');
        
        if (selectedCount === 0) {
          btn.textContent = 'Select Facilities ‚ñæ';
        } else {
          btn.textContent = `${selectedCount} Facilities Selected ‚ñæ`;
        }
      }
      
      // Function to clear all facility checkboxes
      window.clearFacilityFilters = (event) => {
        event.preventDefault();
        event.stopPropagation();
        document.querySelectorAll('.facility-checkbox').forEach(checkbox => {
          checkbox.checked = false;
        });
        updateFacilitiesFilterButton();
      };
      
      // Function to apply facility filters and close dropdown
      window.applyFacilityFilters = (event) => {
        event.preventDefault();
        event.stopPropagation();
        
        // Hide the dropdown
        document.getElementById('facilities-filter-dropdown').style.display = 'none';
        
        // Apply filters
        applyFilters();
      };
      
      // Get selected facilities
      function getSelectedFacilities() {
        const selectedFacilities = [];
        document.querySelectorAll('.facility-checkbox:checked').forEach(checkbox => {
          selectedFacilities.push(checkbox.value);
        });
        return selectedFacilities;
      }
      
      window.applyFilters = () => {
        // Get filter values
        const searchTerm = document.getElementById('search-input')?.value.toLowerCase() || '';
        const genderFilter = document.getElementById('gender-filter')?.value || '';
        const priceFilter = document.getElementById('price-filter')?.value || '';
        const locationFilter = document.getElementById('location-filter')?.value || '';
        const facilityFilters = getSelectedFacilities();
        
        console.log('APPLYING FILTERS:', { 
          searchTerm, 
          genderFilter, 
          priceFilter, 
          locationFilter, 
          facilityFilters
        });
        
        // Make a copy of the hostels array
        let filteredHostels = [...hostels];
        
        // Apply search filter
        if (searchTerm) {
          filteredHostels = filteredHostels.filter(h => 
            h.name.toLowerCase().includes(searchTerm) || 
            h.details.toLowerCase().includes(searchTerm)
          );
          console.log(`After search filter: ${filteredHostels.length} hostels`);
        }
        
        // Apply gender filter
        if (genderFilter) {
          console.log('Before gender filter:', filteredHostels.map(h => ({ name: h.name, gender: h.gender })));
          
          filteredHostels = filteredHostels.filter(h => {
            // Handle case where gender might be missing
            if (!h.gender) {
              return false;
            }
            
            // Case-insensitive comparison for robustness
            return h.gender.toLowerCase() === genderFilter.toLowerCase();
          });
          
          console.log(`After gender filter (${genderFilter}): ${filteredHostels.length} hostels`);
          console.log('Remaining hostels:', filteredHostels.map(h => h.name + ' - ' + h.gender));
        }
        
        // Apply price filter
        if (priceFilter) {
          filteredHostels = filteredHostels.filter(h => {
            // Extract numeric price from string (handle different formats)
            let priceText = h.price || '';
            if (typeof priceText !== 'string') {
              priceText = String(priceText);
            }
            
            // Extract just the numbers from the price string
            const price = parseInt(priceText.replace(/[^0-9]/g, '') || '10000');
            
            console.log(`Hostel: ${h.name}, Raw price: ${h.price}, Parsed price: ${price}`);
            
            if (priceFilter === 'budget') return price < 8000;
            if (priceFilter === 'mid') return price >= 8000 && price <= 15000;
            if (priceFilter === 'premium') return price > 15000;
            return true;
          });
          console.log(`After price filter: ${filteredHostels.length} hostels`);
        }
        
        // Apply location filter
        if (locationFilter) {
          filteredHostels = filteredHostels.filter(h => {
            // Handle case where location might be missing
            if (!h.location) {
              return false;
            }
            
            // Standardize comparison by converting to lowercase
            return h.location.toLowerCase() === locationFilter.toLowerCase();
          });
          console.log(`After location filter: ${filteredHostels.length} hostels, looking for '${locationFilter}'`);
          console.log('Available locations:', [...new Set(hostels.map(h => h.location))]);
        }
        
        // Apply facility filters (multiple selection)
        if (facilityFilters && facilityFilters.length > 0) {
          filteredHostels = filteredHostels.filter(h => {
            // Check if facilities exists
            if (!h.facilities || !Array.isArray(h.facilities) || h.facilities.length === 0) {
              return false;
            }
            
            // Check if the hostel has at least one of the selected facilities
            // We're using 'some' to check if any of the selected facilities exist
            return facilityFilters.some(facility => h.facilities.includes(facility));
          });
          console.log(`After facility filters (${facilityFilters.length} selected): ${filteredHostels.length} hostels`);
        }
        
        // Render the filtered hostels
        renderPublic(filteredHostels);
        
        // Update filter results UI
        updateFilterResults(
          filteredHostels, 
          searchTerm, 
          genderFilter, 
          priceFilter, 
          locationFilter, 
          facilityFilters
        );
      };

      window.updateFilterResults = (filteredHostels, searchTerm, genderFilter, priceFilter, locationFilter, facilityFilters) => {
        const resultsInfo = document.getElementById('filter-results-info');
        const resultsCount = document.getElementById('results-count');
        const activeFilters = document.getElementById('active-filters');
        
        // Check if any filters are active
        const hasActiveFilters = searchTerm || genderFilter || priceFilter || locationFilter || (facilityFilters && facilityFilters.length > 0);
        
        if (hasActiveFilters) {
          resultsInfo.style.display = 'block';
          resultsCount.textContent = `${filteredHostels.length} hostel${filteredHostels.length !== 1 ? 's' : ''} found`;
          
          // Build active filters display
          const filters = [];
          if (searchTerm) filters.push(`Search: "${searchTerm}"`);
          if (genderFilter) filters.push(`Gender: ${genderFilter}`);
          if (priceFilter) {
            const priceLabels = {
              budget: 'Under PKR 8,000',
              mid: 'PKR 8,000 - 15,000',
              premium: 'Above PKR 15,000'
            };
            filters.push(`Price: ${priceLabels[priceFilter]}`);
          }
          if (locationFilter) {
            const locationLabels = {
              gulberg: 'Gulberg',
              pu: 'Near PU',
              dha: 'DHA',
              johar: 'Johar Town'
            };
            filters.push(`Location: ${locationLabels[locationFilter]}`);
          }
          if (facilityFilters && facilityFilters.length > 0) {
            const facilityLabels = {
              wifi: 'WiFi',
              ac: 'AC',
              cooler: 'Cooler',
              parking: 'Parking',
              laundry: 'Laundry',
              security: 'Security Guard',
              cctv: 'CCTV',
              kitchen: 'Kitchen',
              oven: 'Oven',
              refrigerator: 'Refrigerator',
              ups: 'UPS',
              generator: 'Generator',
              cleaning: 'Cleaning Service',
              breakfast: 'Breakfast',
              lunch: 'Lunch',
              dinner: 'Dinner'
            };
            
            // Add each facility filter separately
            facilityFilters.forEach(facility => {
              filters.push(`Facility: ${facilityLabels[facility] || facility}`);
            });
          }
          
          activeFilters.innerHTML = filters.map(filter => `
            <span class="filter-badge">
              ${filter}
              <span class="remove-filter" onclick="removeFilter('${filter.split(':')[0].toLowerCase()}')" title="Remove filter">√ó</span>
            </span>
          `).join('');
        } else {
          resultsInfo.style.display = 'none';
        }
      };

      window.removeFilter = (filterType) => {
        console.log('Removing filter:', filterType);
        
        switch(filterType) {
          case 'search':
            document.getElementById('search-input').value = '';
            break;
          case 'gender':
            document.getElementById('gender-filter').value = '';
            break;
          case 'price':
            document.getElementById('price-filter').value = '';
            break;
          case 'location':
            document.getElementById('location-filter').value = '';
            break;
          case 'facility':
            document.getElementById('facility-filter').value = '';
            break;
        }
        
        // Call the new applyFilters function instead of the old filterHostels
        applyFilters();
      };

      window.clearFilters = () => {
        // Reset all filters
        document.getElementById('search-input').value = '';
        document.getElementById('gender-filter').value = '';
        document.getElementById('price-filter').value = '';
        document.getElementById('location-filter').value = '';
        
        // Clear facility checkboxes
        document.querySelectorAll('.facility-checkbox').forEach(checkbox => {
          checkbox.checked = false;
        });
        
        // Hide results info
        document.getElementById('filter-results-info').style.display = 'none';
        
        // Re-render all hostels
        renderPublic();
        
        console.log("All filters cleared");
      };

      // Admin functions
      window.adminLogin = () => {
        const u = document.getElementById('login-user').value;
        const p = document.getElementById('login-pass').value;
        const admins = JSON.parse(localStorage.getItem('admins'));
        const ad = admins.find(a => a.user === u && atob(a.pass) === p && a.approved);
        
        if(ad) {
          document.getElementById('admin-login-form').style.display = 'none';
          document.getElementById('dashboard').style.display = '';
          
          // Store current admin data for access control
          localStorage.setItem('current-admin', JSON.stringify({
            user: ad.user,
            role: ad.role || 'admin', // Default to full admin if role not specified
            hostelIds: ad.hostelIds || []
          }));
          
          // Apply access restrictions based on role
          applyAccessRestrictions(ad);
          
          // Render admin interface components
          renderAdmins();
          renderHostelsAdmin();
          renderRegistrations();
          renderManualAdsList();
          updateAdminStats();
          loadAnalytics();
        } else {
          alert('Invalid credentials or unapproved admin');
        }
      };
      
      // Function to apply access restrictions based on admin role
      function applyAccessRestrictions(admin) {
        // Default to full access
        const role = admin.role || 'admin';
        
        // Get sections that should be restricted for hostel owners
        const restrictedSections = [
          document.getElementById('admin-registrations'),
          document.getElementById('admin-content'),
          document.getElementById('admin-filters'),
          document.getElementById('admin-images'),
          document.getElementById('admin-branding'),
          document.getElementById('admin-typography'),
          document.getElementById('admin-social'),
          document.getElementById('admin-seo'),
          document.getElementById('admin-ads'),
          document.getElementById('admin-analytics'),
          document.getElementById('admin-backup'),
          document.getElementById('admin-chat'),
          document.getElementById('admin-feedback'),
          document.getElementById('admin-faq'),
          document.getElementById('admin-stats'),
          document.getElementById('admin-footer'),
          document.getElementById('admin-testimonials'),
          document.getElementById('admin-advertisements'),
          document.getElementById('admin-policies'),
          document.getElementById('admin-admins')
        ];
        
        // Get nav items that should be hidden for hostel owners
        const restrictedNavItems = document.querySelectorAll('.admin-nav-item:not([onclick*="hostels"])');
        
        if (role === 'admin') {
          // Full access - show all sections and nav items
          restrictedSections.forEach(section => {
            if (section) section.style.display = '';
          });
          
          restrictedNavItems.forEach(item => {
            if (item) item.style.display = '';
          });
          
          // Show appropriate title for full admin
          const adminHeaderTitle = document.querySelector('.admin-header h2');
          if (adminHeaderTitle) adminHeaderTitle.textContent = 'Admin Dashboard';
        } else if (role === 'hostel') {
          // Restricted access - hide admin management and other sections
          restrictedSections.forEach(section => {
            if (section) section.style.display = 'none';
          });
          
          // Hide navigation items for restricted sections
          restrictedNavItems.forEach(item => {
            if (item) item.style.display = 'none';
          });
          
          // Customize the dashboard for hostel owners
          const adminHeaderTitle = document.querySelector('.admin-header h2');
          if (adminHeaderTitle) adminHeaderTitle.textContent = 'Hostel Management';
          
          // Ensure only the hostels section is shown
          document.querySelectorAll('.admin-section').forEach(section => {
            section.classList.remove('active');
          });
          
          const hostelsSection = document.getElementById('admin-hostels');
          if (hostelsSection) {
            hostelsSection.classList.add('active');
          }
          
          // Update navigation to highlight hostels section
          document.querySelectorAll('.admin-nav-item').forEach(item => {
            item.classList.remove('active');
          });
          
          const hostelsNav = document.querySelector('.admin-nav-item[onclick*="hostels"]');
          if (hostelsNav) {
            hostelsNav.classList.add('active');
          }
          
          // Show message about restricted access
          const existingMsg = document.querySelector('.restricted-access-info');
          if (!existingMsg) {
            const restrictedMsg = document.createElement('div');
            restrictedMsg.className = 'restricted-access-info';
            restrictedMsg.style.cssText = 'background: #EFF6FF; border: 1px solid #BFDBFE; border-radius: 8px; padding: 1rem; margin-bottom: 1.5rem; color: #1E40AF;';
            restrictedMsg.innerHTML = `
              <h3 style="margin-top: 0; margin-bottom: 0.5rem; font-size: 1.1rem;">üè† Hostel Owner Account</h3>
              <p style="margin: 0; font-size: 0.9rem;">You have access to manage your hostel listings only. For other features or support, please contact our admin team.</p>
            `;
            
            // Insert the message at the top of the hostels section
            if (hostelsSection) {
              hostelsSection.insertBefore(restrictedMsg, hostelsSection.firstChild);
            }
          }
        }
      }

      function updateAdminStats() {
        document.getElementById('admin-hostel-count').textContent = hostels.length;
        const admins = JSON.parse(localStorage.getItem('admins'));
        document.getElementById('admin-user-count').textContent = admins.length;
      }

      function renderHostelsAdmin() {
        const list = document.getElementById('admin-hostel-list');
        if (!list) return;
        
        list.innerHTML = '';
        
        // Check if the current user is a hostel owner with restricted access
        const currentAdmin = JSON.parse(localStorage.getItem('current-admin') || '{}');
        const isHostelOwner = currentAdmin.role === 'hostel';
        const allowedHostelIds = currentAdmin.hostelIds || [];
        
        // Filter hostels based on user access
        let displayHostels = hostels;
        
        if (isHostelOwner && allowedHostelIds.length > 0) {
          // Show only the hostels this owner is allowed to manage
          displayHostels = allowedHostelIds.map(idx => {
            return { hostel: hostels[idx], index: idx };
          }).filter(item => item.hostel); // Filter out any undefined hostels
        } else {
          // Admin sees all hostels
          displayHostels = hostels.map((h, i) => ({ hostel: h, index: i }));
        }
        
        if (displayHostels.length === 0) {
          list.innerHTML = `
            <div style="text-align: center; padding: 2rem; background: #F9FAFB; border-radius: 8px;">
              <div style="font-size: 2rem; margin-bottom: 1rem;">üè†</div>
              <h4 style="margin: 0 0 0.5rem 0;">No Hostels Found</h4>
              <p style="margin: 0; color: #6B7280; font-size: 0.9rem;">
                ${isHostelOwner ? 
                  'You don\'t have any hostels assigned to your account yet. Please contact support.' :
                  'No hostels have been added yet. Click the "Add Hostel" button to create your first listing.'
                }
              </p>
            </div>
          `;
          return;
        }
        
        displayHostels.forEach(item => {
          const h = item.hostel;
          const i = item.index;
          
          // Handle image display
          let imageUrl = h.img || h.image;
          if (!imageUrl || imageUrl === 'null' || imageUrl === null) {
            const genderColor = h.gender === 'Female' ? 'ff69b4' : h.gender === 'Male' ? '4169e1' : '6b7280';
            imageUrl = `https://via.placeholder.com/150x100/${genderColor}/ffffff?text=${encodeURIComponent(h.name || 'Hostel')}`;
          }
          
          const card = document.createElement('div');
          card.style.cssText = 'background: #F7FAFC; padding: 1rem; border-radius: 8px; margin-bottom: 0.5rem; display: flex; gap: 1rem; align-items: center;';
          card.innerHTML = `
            <div style="flex-shrink: 0;">
              <img src="${imageUrl}" alt="${h.name}" style="width: 100px; height: 80px; object-fit: cover; border-radius: 6px; border: 2px solid #E2E8F0;">
            </div>
            <div style="flex-grow: 1;">
              <div style="font-weight: 600; margin-bottom: 0.5rem;">${h.name}</div>
              <div style="font-size: 0.9rem; color: #4A5568; margin-bottom: 0.5rem;">${h.gender} ‚Ä¢ ${h.price || 'PKR 10,000'}</div>
              <div style="display: flex; gap: 0.5rem;">
                <button onclick="editHostel(${i})" style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background: #8B5CF6; color: white; border: none; border-radius: 4px;">Edit</button>
                <button onclick="viewHostelDetails(${i})" style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background: #3B82F6; color: white; border: none; border-radius: 4px;">View</button>
                <button onclick="deleteHostelWithWarning(${i})" style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background: #EF4444; color: white; border: none; border-radius: 4px;">Delete</button>
              </div>
            </div>
          `;
          list.appendChild(card);
        });
      }

      window.renderHostelsAdmin = renderHostelsAdmin;

      window.saveHostel = () => {
        const name = document.getElementById('h-name').value;
        const gender = document.getElementById('h-gender').value;
        const map = document.getElementById('h-map').value;
        const details = document.getElementById('h-details').value;
        const phone = document.getElementById('h-phone').value;
        const whatsapp = document.getElementById('h-whatsapp').value;

        if (!name || !gender || !details) {
          alert('Please fill in all required fields (Name, Gender, Details)');
          return;
        }

        // Collect all media files
        const mediaInputs = document.querySelectorAll('#media-uploads-container input[type="file"]');
        const mediaPromises = [];
        const mediaFiles = [];

        mediaInputs.forEach((input, index) => {
          if (input.files[0]) {
            const file = input.files[0];
            const isVideo = file.type.startsWith('video/');
            
            mediaPromises.push(new Promise((resolve) => {
              const reader = new FileReader();
              reader.onload = e => {
                mediaFiles.push({
                  id: Date.now() + index,
                  type: isVideo ? 'video' : 'image',
                  data: e.target.result,
                  name: file.name
                });
                resolve();
              };
              reader.readAsDataURL(file);
            }));
          }
        });

        Promise.all(mediaPromises).then(() => {
          // Get room prices
          const roomPrices = getRoomPrices();
          
          // Validate roomPrices 
          if (roomPrices.length === 0) {
            alert('Please add at least one room type with pricing');
            return;
          }
          
          const obj = {
            name: name,
            gender: gender,
            map: map,
            details: details,
            phone: phone || '',
            whatsapp: whatsapp || '',
            media: mediaFiles.length > 0 ? mediaFiles : [{ 
              id: 1, 
              type: 'image', 
              data: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzk5OTk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5vIEltYWdlPC90ZXh0Pjwvc3ZnPg==',
              name: 'placeholder.svg' 
            }],
            // Legacy support - use first image as main img
            img: mediaFiles.find(m => m.type === 'image')?.data || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzk5OTk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5vIEltYWdlPC90ZXh0Pjwvc3ZnPg==',
            // Add room prices
            roomPrices: roomPrices,
            // Format price range for display
            price: formatPriceRange(roomPrices),
            // Extract additional information
            location: extractLocation(details),
            facilities: getFacilities()
          };
          
          const idx = document.getElementById('hostel-form').dataset.edit;
          if(idx != null) {
            hostels[idx] = obj;
            delete document.getElementById('hostel-form').dataset.edit;
          } else {
            hostels.push(obj);
          }
          
          localStorage.setItem('hostels', JSON.stringify(hostels));
          renderPublic();
          renderHostelsAdmin();
          updateAdminStats();
          
          // Refresh location filters with new hostel data
          refreshLocationFilters();
          
          document.getElementById('hostel-form').style.display = 'none';
          
          // Clear form
          document.getElementById('media-uploads-container').innerHTML = '';
          document.getElementById('hostel-form').reset();
        });
      };

      // Add new function for room type UI management
      window.addRoomType = function() {
        const container = document.getElementById('room-types-container');
        const roomItem = document.createElement('div');
        roomItem.className = 'room-type-item';
        roomItem.style.cssText = 'display: flex; gap: 1rem; margin-bottom: 0.5rem; align-items: center;';
        
        roomItem.innerHTML = `
          <div style="flex: 1;">
            <select class="room-type-select" style="width: 100%; padding: 0.5rem; border: 1px solid #E2E8F0; border-radius: 4px;">
              <option value="1-bed">1-Bed Room</option>
              <option value="2-bed">2-Bed Room</option>
              <option value="3-bed">3-Bed Room</option>
              <option value="4-bed">4-Bed Room</option>
              <option value="5-bed">5-Bed Room</option>
              <option value="6-bed">6-Bed Room</option>
              <option value="7-bed">7-Bed Room</option>
              <option value="8-bed">8-Bed Room</option>
              <option value="dormitory">Dormitory</option>
            </select>
          </div>
          <div style="flex: 1; display: flex; align-items: center; gap: 0.5rem;">
            <span>PKR</span>
            <input type="number" class="room-min-price" placeholder="Min" style="flex: 1; padding: 0.5rem; border: 1px solid #E2E8F0; border-radius: 4px;">
          </div>
          <span>to</span>
          <div style="flex: 1; display: flex; align-items: center; gap: 0.5rem;">
            <span>PKR</span>
            <input type="number" class="room-max-price" placeholder="Max" style="flex: 1; padding: 0.5rem; border: 1px solid #E2E8F0; border-radius: 4px;">
          </div>
          <button type="button" class="remove-room-type" onclick="this.closest('.room-type-item').remove();" style="background: #EF4444; color: white; border: none; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer;">√ó</button>
        `;
        
        container.appendChild(roomItem);
      }
      
      // Function to get room prices from the form
      function getRoomPrices() {
        const roomTypes = [];
        document.querySelectorAll('.room-type-item').forEach(item => {
          const type = item.querySelector('.room-type-select').value;
          const minPrice = item.querySelector('.room-min-price').value;
          const maxPrice = item.querySelector('.room-max-price').value;
          
          if (type && (minPrice || maxPrice)) {
            roomTypes.push({
              type: type,
              minPrice: minPrice || '0',
              maxPrice: maxPrice || minPrice || '0'
            });
          }
        });
        
        return roomTypes;
      }
      
      // Set room prices in the edit form
      function setRoomPrices(roomPrices) {
        const container = document.getElementById('room-types-container');
        container.innerHTML = '';
        
        if (!roomPrices || !Array.isArray(roomPrices) || roomPrices.length === 0) {
          // Add at least one empty room type
          addRoomType();
          return;
        }
        
        roomPrices.forEach(room => {
          const roomItem = document.createElement('div');
          roomItem.className = 'room-type-item';
          roomItem.style.cssText = 'display: flex; gap: 1rem; margin-bottom: 0.5rem; align-items: center;';
          
          roomItem.innerHTML = `
            <div style="flex: 1;">
              <select class="room-type-select" style="width: 100%; padding: 0.5rem; border: 1px solid #E2E8F0; border-radius: 4px;">
                <option value="1-bed" ${room.type === '1-bed' ? 'selected' : ''}>1-Bed Room</option>
                <option value="2-bed" ${room.type === '2-bed' ? 'selected' : ''}>2-Bed Room</option>
                <option value="3-bed" ${room.type === '3-bed' ? 'selected' : ''}>3-Bed Room</option>
                <option value="4-bed" ${room.type === '4-bed' ? 'selected' : ''}>4-Bed Room</option>
                <option value="5-bed" ${room.type === '5-bed' ? 'selected' : ''}>5-Bed Room</option>
                <option value="6-bed" ${room.type === '6-bed' ? 'selected' : ''}>6-Bed Room</option>
                <option value="dormitory" ${room.type === 'dormitory' ? 'selected' : ''}>Dormitory</option>
              </select>
            </div>
            <div style="flex: 1; display: flex; align-items: center; gap: 0.5rem;">
              <span>PKR</span>
              <input type="number" class="room-min-price" value="${room.minPrice}" placeholder="Min" style="flex: 1; padding: 0.5rem; border: 1px solid #E2E8F0; border-radius: 4px;">
            </div>
            <span>to</span>
            <div style="flex: 1; display: flex; align-items: center; gap: 0.5rem;">
              <span>PKR</span>
              <input type="number" class="room-max-price" value="${room.maxPrice}" placeholder="Max" style="flex: 1; padding: 0.5rem; border: 1px solid #E2E8F0; border-radius: 4px;">
            </div>
            <button type="button" class="remove-room-type" onclick="this.closest('.room-type-item').remove();" style="background: #EF4444; color: white; border: none; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer;">√ó</button>
          `;
          
          container.appendChild(roomItem);
        });
      }
      
      // Modify the existing function to handle the new price format
      function extractPrice(details) {
        const match = details.match(/PKR\s*[\d,]+/i);
        return match ? match[0] : 'PKR 10,000';
      }
      
      // New function to format price ranges for display
      function formatPriceRange(roomPrices) {
        if (!roomPrices || !Array.isArray(roomPrices) || roomPrices.length === 0) {
          return 'Price not specified';
        }
        
        // Find the overall min and max
        const minPrice = Math.min(...roomPrices.map(room => parseInt(room.minPrice)));
        const maxPrice = Math.max(...roomPrices.map(room => parseInt(room.maxPrice)));
        
        if (minPrice === maxPrice) {
          return `PKR ${minPrice.toLocaleString()}`;
        }
        
        return `PKR ${minPrice.toLocaleString()}-${maxPrice.toLocaleString()}`;
      }

      function extractLocation(details) {
        if (details.toLowerCase().includes('gulberg')) return 'gulberg';
        if (details.toLowerCase().includes('pu') || details.toLowerCase().includes('punjab university')) return 'pu';
        if (details.toLowerCase().includes('dha')) return 'dha';
        if (details.toLowerCase().includes('johar')) return 'johar';
        return 'other';
      }

      function extractFacilities(details) {
        // Get facilities from checkboxes instead of text
        const facilities = [];
        document.querySelectorAll('.facility-checkbox:checked').forEach(checkbox => {
          facilities.push(checkbox.value);
        });
        return facilities;
      }
      
      // Function to set facility checkboxes when editing
      function setFacilityCheckboxes(facilitiesArray) {
        // First, uncheck all checkboxes
        document.querySelectorAll('.facility-checkbox').forEach(checkbox => {
          checkbox.checked = false;
        });
        
        // Then check only those that are in the array
        if (Array.isArray(facilitiesArray)) {
          facilitiesArray.forEach(facility => {
            const checkbox = document.getElementById(`facility-${facility}`) || 
                             document.querySelector(`.facility-checkbox[value="${facility}"]`);
            if (checkbox) {
              checkbox.checked = true;
            }
          });
        }
      }

      window.editHostel = i => {
        const h = hostels[i];
        document.getElementById('h-name').value = h.name;
        document.getElementById('h-gender').value = h.gender;
        document.getElementById('h-map').value = h.map;
        document.getElementById('h-details').value = h.details;
        
        // Set room prices
        setRoomPrices(h.roomPrices);
        
        // Set facility checkboxes based on saved facilities
        setFacilities(h.facilities);
        document.getElementById('h-phone').value = h.phone || '';
        document.getElementById('h-whatsapp').value = h.whatsapp || '';
        
        // Load existing media
        const mediaContainer = document.getElementById('media-uploads-container');
        mediaContainer.innerHTML = '';
        
        // Show existing media preview if available
        if (h.img || (h.media && Array.isArray(h.media))) {
          const existingMediaDiv = document.createElement('div');
          existingMediaDiv.style.cssText = 'margin-bottom: 1rem; padding: 1rem; background: #F9FAFB; border-radius: 8px; border: 2px dashed #D1D5DB;';
          existingMediaDiv.innerHTML = `
            <h4 style="margin: 0 0 0.5rem 0; color: #4B5563;">Current Media</h4>
            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
              ${h.img ? `<img src="${h.img}" style="width: 80px; height: 60px; object-fit: cover; border-radius: 4px;" alt="Current image">` : ''}
              ${h.media && Array.isArray(h.media) ? h.media.map(media => 
                media.type === 'image' ? 
                  `<img src="${media.data}" style="width: 80px; height: 60px; object-fit: cover; border-radius: 4px;" alt="${media.name}">` :
                  `<video src="${media.data}" style="width: 80px; height: 60px; object-fit: cover; border-radius: 4px;" controls></video>`
              ).join('') : ''}
            </div>
            <p style="margin: 0.5rem 0 0 0; font-size: 0.8rem; color: #6B7280;">Upload new files below to replace current media</p>
          `;
          mediaContainer.appendChild(existingMediaDiv);
        }
        
        // Add upload options
        if (h.media && Array.isArray(h.media)) {
          h.media.forEach((media, index) => {
            if (media.type === 'image') {
              addImageUpload();
            } else if (media.type === 'video') {
              addVideoUpload();
            }
          });
        } else {
          // Add at least one upload option
          addImageUpload();
        }
        
        document.getElementById('hostel-form').dataset.edit = i;
        showForm('hostel');
      };

      // View hostel details in admin
      window.viewHostelDetails = (i) => {
        const hostel = hostels[i];
        trackClick('admin-hostel-view');
        
        // Create modal
        const modal = document.createElement('div');
        
        // Prepare facilities HTML
        let facilitiesHTML = '';
        if (hostel.facilities && Array.isArray(hostel.facilities) && hostel.facilities.length > 0) {
          facilitiesHTML = `
            <div style="margin-top: 1rem;">
              <h4 style="margin: 0 0 0.5rem 0; font-size: 1rem; color: #4B5563;">Available Facilities</h4>
              <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                ${hostel.facilities.map(facility => 
                  `<span style="background: #EBF8FF; color: #2B6CB0; padding: 0.3rem 0.8rem; border-radius: 16px; font-size: 0.85rem;">${facilityLabel(facility)}</span>`
                ).join('')}
              </div>
              <p style="margin-top: 0.75rem; font-size: 0.85rem; color: #718096; font-style: italic;">For facilities not listed above, better to ask the hostel management directly.</p>
            </div>
          `;
        } else {
          facilitiesHTML = `
            <div style="margin-top: 1rem;">
              <h4 style="margin: 0 0 0.5rem 0; font-size: 1rem; color: #4B5563;">Available Facilities</h4>
              <p style="color: #718096; font-style: italic;">No facilities information available. Better to ask about these details.</p>
            </div>
          `;
        }
        modal.className = 'admin-hostel-modal';
        modal.style.cssText = `
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.8);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 10000;
          padding: 20px;
        `;
        
        modal.innerHTML = `
          <div style="
            background: white;
            border-radius: 12px;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
          ">
            <div style="
              padding: 2rem;
              border-bottom: 1px solid #E5E7EB;
              display: flex;
              justify-content: space-between;
              align-items: center;
            ">
              <h2 style="margin: 0; color: #1F2937; font-size: 1.5rem;">${hostel.name}</h2>
              <button onclick="this.closest('.admin-hostel-modal').remove()" style="
                background: none;
                border: none;
                font-size: 24px;
                cursor: pointer;
                color: #6B7280;
                padding: 0;
                width: 30px;
                height: 30px;
                display: flex;
                align-items: center;
                justify-content: center;
              ">&times;</button>
            </div>
            
            <div style="padding: 2rem;">
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
                <div>
                  <h3 style="color: #374151; margin-bottom: 1rem;">üìã Basic Information</h3>
                  <div style="space-y: 0.8rem;">
                    <div><strong>Name:</strong> ${hostel.name}</div>
                    <div><strong>Gender:</strong> <span style="background: ${hostel.gender === 'Male' ? '#DBEAFE' : '#FCE7F3'}; color: ${hostel.gender === 'Male' ? '#1E40AF' : '#BE185D'}; padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.8rem;">${hostel.gender}</span></div>
                    <div><strong>Phone:</strong> ${hostel.phone || 'Not provided'}</div>
                    <div><strong>WhatsApp:</strong> ${hostel.whatsapp || 'Not provided'}</div>
                  </div>
                </div>
                
                <div>
                  <h3 style="color: #374151; margin-bottom: 1rem;">üìç Location & Pricing</h3>
                  <div style="space-y: 0.8rem;">
                    <div><strong>Location:</strong> ${hostel.location || 'Near Punjab University'}</div>
                    <div><strong>Price:</strong> ${hostel.price || 'PKR 10,000'}/month</div>
                    <div><strong>Maps:</strong> ${hostel.map ? '<a href="' + hostel.map + '" target="_blank" style="color: #3B82F6;">View on Google Maps</a>' : 'Not provided'}</div>
                  </div>
                </div>
              </div>
              
              <div style="margin-bottom: 2rem;">
                <h3 style="color: #374151; margin-bottom: 1rem;">üìù Description</h3>
                <div style="background: #F9FAFB; padding: 1rem; border-radius: 8px; line-height: 1.6;">${hostel.details}</div>
              </div>
              
              <div style="margin-bottom: 2rem;">
                <h3 style="color: #374151; margin-bottom: 1rem;">üñºÔ∏è Media Gallery</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
                  ${hostel.media ? hostel.media.map(media => `
                    <div style="border: 1px solid #E5E7EB; border-radius: 8px; overflow: hidden;">
                      ${media.type === 'image' ? 
                        `<img src="${media.data}" style="width: 100%; height: 120px; object-fit: cover;" alt="${media.name}">` :
                        `<video src="${media.data}" style="width: 100%; height: 120px; object-fit: cover;" controls></video>`
                      }
                      <div style="padding: 0.5rem; font-size: 0.8rem; color: #6B7280;">${media.type.toUpperCase()}</div>
                    </div>
                  `).join('') : '<div style="color: #6B7280;">No media uploaded</div>'}
                </div>
              </div>
              
              <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                <button onclick="editHostel(${i}); this.closest('.admin-hostel-modal').remove();" style="
                  background: #8B5CF6;
                  color: white;
                  border: none;
                  padding: 0.75rem 1.5rem;
                  border-radius: 8px;
                  cursor: pointer;
                  font-weight: 600;
                ">Edit Hostel</button>
                <button onclick="this.closest('.admin-hostel-modal').remove()" style="
                  background: #6B7280;
                  color: white;
                  border: none;
                  padding: 0.75rem 1.5rem;
                  border-radius: 8px;
                  cursor: pointer;
                  font-weight: 600;
                ">Close</button>
              </div>
            </div>
          </div>
        `;
        
        document.body.appendChild(modal);
        
        // Prevent background scrolling
        document.body.style.overflow = 'hidden';
        
        // Close modal when clicking outside
        modal.addEventListener('click', (e) => {
          if (e.target === modal) {
            modal.remove();
            document.body.style.overflow = 'auto';
          }
        });
        
        // Update analytics
        loadAnalytics();
      };

      window.renderAdmins = () => {
        const admins = JSON.parse(localStorage.getItem('admins') || '[]');
        const list = document.getElementById('admin-list');
        const userCountElement = document.getElementById('admin-user-count');
        
        if (userCountElement) {
          userCountElement.textContent = admins.length;
        }
        
        if (admins.length === 0) {
          list.innerHTML = '<p style="text-align: center; color: #666; padding: 2rem;">No admin users found</p>';
        } else {
          list.innerHTML = admins.map((admin, i) => `
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: white; border-radius: 8px; border: 1px solid #E5E7EB; margin-bottom: 0.5rem;">
              <div>
                <div style="font-weight: 600;">${admin.user}</div>
                <div style="font-size: 0.9rem; color: #666;">
                  Type: ${admin.type || 'full'} | 
                  Status: ${admin.approved ? '‚úÖ Approved' : '‚è≥ Pending'}
                  ${admin.hostel ? ` | Hostel: ${admin.hostel}` : ''}
                </div>
              </div>
              <div>
                ${admin.approved ? 
                  `<button onclick="toggleAdminStatus(${i})" style="padding: 0.5rem 1rem; background: #EF4444; color: white; border: none; border-radius: 4px; cursor: pointer;">Revoke</button>` :
                  `<button onclick="toggleAdminStatus(${i})" style="padding: 0.5rem 1rem; background: #10B981; color: white; border: none; border-radius: 4px; cursor: pointer;">Approve</button>`
                }
                <button onclick="deleteAdmin(${i})" style="padding: 0.5rem 1rem; background: #6B7280; color: white; border: none; border-radius: 4px; cursor: pointer; margin-left: 0.5rem;">Delete</button>
              </div>
            </div>
          `).join('');
        }
        
        // Load and render admin requests
        renderAdminRequests();
        renderPasswordResets();
        renderChatMessages();
        renderTeamMembers();
      };

      // Render admin requests
      window.renderAdminRequests = () => {
        const requests = JSON.parse(localStorage.getItem('admin-requests') || '[]');
        const list = document.getElementById('admin-requests-list');
        const countElement = document.getElementById('pending-admin-requests');
        
        const pendingRequests = requests.filter(req => req.status === 'pending');
        if (countElement) {
          countElement.textContent = pendingRequests.length;
        }
        
        if (pendingRequests.length === 0) {
          list.innerHTML = '<p style="text-align: center; color: #666; padding: 1rem;">No pending admin requests</p>';
          return;
        }
        
        list.innerHTML = pendingRequests.map((request) => `
          <div style="padding: 1rem; background: #FEF3C7; border-radius: 8px; border: 1px solid #F59E0B; margin-bottom: 0.5rem;">
            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
              <div style="flex: 1;">
                <div style="font-weight: 600;">${request.name}</div>
                <div style="color: #6B7280; font-size: 0.9rem;">${request.email}</div>
                <div style="margin: 0.5rem 0;">
                  <span style="background: #8B5CF6; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.8rem;">
                    ${request.type === 'full' ? 'Full Admin' : 'Hostel Owner'}
                  </span>
                  ${request.hostel ? `<span style="background: #10B981; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.8rem; margin-left: 0.5rem;">${request.hostel}</span>` : ''}
                </div>
                <div style="color: #4B5563; font-size: 0.9rem; line-height: 1.4;">${request.reason}</div>
                <div style="color: #9CA3AF; font-size: 0.8rem; margin-top: 0.5rem;">
                  Requested: ${new Date(request.timestamp).toLocaleDateString()}
                </div>
              </div>
              <div style="display: flex; gap: 0.5rem; margin-left: 1rem;">
                <button onclick="approveAdminRequest(${request.id})" style="padding: 0.5rem 1rem; background: #10B981; color: white; border: none; border-radius: 4px; cursor: pointer;">Approve</button>
                <button onclick="rejectAdminRequest(${request.id})" style="padding: 0.5rem 1rem; background: #EF4444; color: white; border: none; border-radius: 4px; cursor: pointer;">Reject</button>
              </div>
            </div>
          </div>
        `).join('');
      };

      // Render password reset requests
      window.renderPasswordResets = () => {
        const resets = JSON.parse(localStorage.getItem('password-reset-requests') || '[]');
        const list = document.getElementById('password-reset-list');
        const countElement = document.getElementById('password-reset-requests');
        
        const pendingResets = resets.filter(reset => reset.status === 'pending');
        if (countElement) {
          countElement.textContent = pendingResets.length;
        }
        
        if (pendingResets.length === 0) {
          list.innerHTML = '<p style="text-align: center; color: #666; padding: 1rem;">No pending password reset requests</p>';
          return;
        }
        
        list.innerHTML = pendingResets.map((reset) => `
          <div style="padding: 1rem; background: #FECACA; border-radius: 8px; border: 1px solid #EF4444; margin-bottom: 0.5rem;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <div>
                <div style="font-weight: 600;">${reset.email}</div>
                <div style="color: #6B7280; font-size: 0.9rem;">
                  Requested: ${new Date(reset.timestamp).toLocaleDateString()}
                </div>
              </div>
              <div style="display: flex; gap: 0.5rem;">
                <button onclick="handlePasswordReset('${reset.email}')" style="padding: 0.5rem 1rem; background: #8B5CF6; color: white; border: none; border-radius: 4px; cursor: pointer;">Reset Password</button>
                <button onclick="dismissPasswordReset('${reset.email}')" style="padding: 0.5rem 1rem; background: #6B7280; color: white; border: none; border-radius: 4px; cursor: pointer;">Dismiss</button>
              </div>
            </div>
          </div>
        `).join('');
      };

      // Handle admin request approval
      window.approveAdminRequest = (requestId) => {
        const requests = JSON.parse(localStorage.getItem('admin-requests') || '[]');
        const request = requests.find(req => req.id === requestId);
        
        if (!request) return;
        
        // Add to admins
        const admins = JSON.parse(localStorage.getItem('admins') || '[]');
        admins.push({
          user: request.email,
          pass: btoa('temp123'), // Temporary password
          approved: true,
          type: request.type,
          hostel: request.hostel || null
        });
        localStorage.setItem('admins', JSON.stringify(admins));
        
        // Update request status
        request.status = 'approved';
        localStorage.setItem('admin-requests', JSON.stringify(requests));
        
        alert(`Admin access granted to ${request.name}. Temporary password: temp123`);
        renderAdmins();
      };

      // Handle admin request rejection
      window.rejectAdminRequest = (requestId) => {
        const requests = JSON.parse(localStorage.getItem('admin-requests') || '[]');
        const requestIndex = requests.findIndex(req => req.id === requestId);
        
        if (requestIndex === -1) return;
        
        requests[requestIndex].status = 'rejected';
        localStorage.setItem('admin-requests', JSON.stringify(requests));
        
        alert('Admin request rejected');
        renderAdmins();
      };

      // Handle password reset
      window.handlePasswordReset = (email) => {
        const newPassword = prompt('Enter new temporary password for ' + email + ':');
        if (!newPassword) return;
        
        const admins = JSON.parse(localStorage.getItem('admins') || '[]');
        const adminIndex = admins.findIndex(admin => admin.user === email);
        
        if (adminIndex !== -1) {
          admins[adminIndex].pass = btoa(newPassword);
          localStorage.setItem('admins', JSON.stringify(admins));
          
          // Mark reset as completed
          const resets = JSON.parse(localStorage.getItem('password-reset-requests') || '[]');
          const resetIndex = resets.findIndex(reset => reset.email === email);
          if (resetIndex !== -1) {
            resets[resetIndex].status = 'completed';
            localStorage.setItem('password-reset-requests', JSON.stringify(resets));
          }
          
          alert(`Password reset for ${email}. New password: ${newPassword}`);
          renderAdmins();
        } else {
          alert('Admin not found');
        }
      };

      // Dismiss password reset
      window.dismissPasswordReset = (email) => {
        const resets = JSON.parse(localStorage.getItem('password-reset-requests') || '[]');
        const resetIndex = resets.findIndex(reset => reset.email === email);
        
        if (resetIndex !== -1) {
          resets[resetIndex].status = 'dismissed';
          localStorage.setItem('password-reset-requests', JSON.stringify(resets));
          renderAdmins();
        }
      };

      window.toggleAdminStatus = (index) => {
        const admins = JSON.parse(localStorage.getItem('admins') || '[]');
        admins[index].approved = !admins[index].approved;
        localStorage.setItem('admins', JSON.stringify(admins));
        renderAdmins();
      };

      window.deleteAdmin = (index) => {
        deleteAdminWithWarning(index);
      };

      window.addAdmin = () => {
        const u = document.getElementById('a-name').value;
        const p = document.getElementById('a-pass').value;
        const p2 = document.getElementById('a-pass2').value;
        
        if(!u || !p) {
          alert('Please fill all fields');
          return;
        }
        
        if(p !== p2) {
          alert('Passwords do not match');
          return;
        }
        
        const admins = JSON.parse(localStorage.getItem('admins'));
        admins.push({user: u, pass: btoa(p), approved: false});
        localStorage.setItem('admins', JSON.stringify(admins));
        renderAdmins();
        updateAdminStats();
        document.getElementById('adminuser-form').style.display = 'none';
        document.getElementById('a-name').value = '';
        document.getElementById('a-pass').value = '';
        document.getElementById('a-pass2').value = '';
      };

      window.approve = i => {
        const admins = JSON.parse(localStorage.getItem('admins'));
        admins[i].approved = true;
        localStorage.setItem('admins', JSON.stringify(admins));
        renderAdmins();
      };

      // Chat management functions
      window.renderChatMessages = (filter = 'all') => {
        const chatMessages = JSON.parse(localStorage.getItem('chat-messages') || '[]');
        const container = document.getElementById('admin-chat-list');
        
        // Update statistics
        const totalCount = chatMessages.length;
        const pendingCount = chatMessages.filter(msg => msg.status === 'pending').length;
        const respondedCount = chatMessages.filter(msg => msg.status === 'responded').length;
        
        document.getElementById('total-chat-messages').textContent = totalCount;
        document.getElementById('pending-chat-messages').textContent = pendingCount;
        document.getElementById('responded-chat-messages').textContent = respondedCount;
        
        // Filter messages
        let filteredMessages = chatMessages;
        if (filter === 'pending') {
          filteredMessages = chatMessages.filter(msg => msg.status === 'pending');
        } else if (filter === 'responded') {
          filteredMessages = chatMessages.filter(msg => msg.status === 'responded');
        }
        
        if (filteredMessages.length === 0) {
          container.innerHTML = '<div style="text-align: center; color: #6B7280; padding: 2rem;">No chat messages found.</div>';
          return;
        }
        
        // Sort by timestamp (newest first)
        filteredMessages.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
        
        container.innerHTML = filteredMessages.map(msg => `
          <div class="chat-message-card" style="background: ${msg.status === 'pending' ? '#FEF3C7' : '#D1FAE5'}; border: 1px solid ${msg.status === 'pending' ? '#F59E0B' : '#10B981'}; border-radius: 8px; padding: 1.5rem; margin-bottom: 1rem;">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem;">
              <div>
                <h4 style="margin: 0 0 0.5rem 0; color: #1F2937; font-size: 1.1rem;">${msg.name}</h4>
                <div style="font-size: 0.9rem; color: #6B7280;">
                  ${msg.whatsapp ? `üì± ${msg.whatsapp}` : ''} 
                  ${msg.whatsapp && msg.email ? ' | ' : ''}
                  ${msg.email ? `üìß ${msg.email}` : ''}
                </div>
                <div style="font-size: 0.8rem; color: #9CA3AF; margin-top: 0.25rem;">
                  ${new Date(msg.timestamp).toLocaleString()}
                </div>
              </div>
              <span style="background: ${msg.status === 'pending' ? '#F59E0B' : '#10B981'}; color: white; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.8rem;">
                ${msg.status === 'pending' ? '‚è≥ Pending' : '‚úÖ Responded'}
              </span>
            </div>
            
            <div style="background: white; padding: 1rem; border-radius: 6px; margin-bottom: 1rem; border-left: 4px solid #8B5CF6;">
              <p style="margin: 0; color: #374151; line-height: 1.5;">${msg.message}</p>
            </div>
            
            ${msg.status === 'pending' ? `
              <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                <select onchange="assignTeamMember(${msg.id}, this.value)" style="padding: 0.5rem; border: 1px solid #D1D5DB; border-radius: 4px; font-size: 0.9rem;">
                  <option value="">Select team member...</option>
                  ${getTeamMemberOptions()}
                </select>
                ${msg.whatsapp ? `<button onclick="replyViaWhatsApp(${msg.id})" style="background: #25D366; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; font-size: 0.9rem; cursor: pointer;">Reply via WhatsApp</button>` : ''}
                ${msg.email ? `<button onclick="replyViaEmail(${msg.id})" style="background: #EA4335; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; font-size: 0.9rem; cursor: pointer;">Reply via Gmail</button>` : ''}
                <button onclick="markAsResponded(${msg.id})" style="background: #10B981; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; font-size: 0.9rem; cursor: pointer;">Mark as Responded</button>
              </div>
            ` : `
              <div style="color: #10B981; font-size: 0.9rem;">
                ‚úÖ Responded ${msg.assignedTo ? `by ${msg.assignedTo}` : ''} ${msg.responseMethod ? `via ${msg.responseMethod}` : ''}
              </div>
            `}
          </div>
        `).join('');
      };

      window.filterChatMessages = (filter) => {
        document.querySelectorAll('.chat-filter').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');
        renderChatMessages(filter);
      };

      window.renderTeamMembers = () => {
        const teamMembers = JSON.parse(localStorage.getItem('team-members') || '[]');
        const container = document.getElementById('team-members-list');
        
        if (teamMembers.length === 0) {
          container.innerHTML = '<p style="text-align: center; color: #6B7280; padding: 1rem;">No team members configured yet.</p>';
          return;
        }
        
        container.innerHTML = teamMembers.map((member, index) => `
          <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: white; border: 1px solid #E5E7EB; border-radius: 6px; margin-bottom: 0.5rem;">
            <div>
              <div style="font-weight: 600; color: #1F2937;">${member.name}</div>
              <div style="font-size: 0.9rem; color: #6B7280;">
                ${member.whatsapp ? `üì± ${member.whatsapp}` : ''} 
                ${member.whatsapp && member.email ? ' | ' : ''}
                ${member.email ? `üìß ${member.email}` : ''}
              </div>
            </div>
            <button onclick="removeTeamMember(${index})" style="background: #EF4444; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">Remove</button>
          </div>
        `).join('');
      };

      window.getTeamMemberOptions = () => {
        const teamMembers = JSON.parse(localStorage.getItem('team-members') || '[]');
        return teamMembers.map(member => `<option value="${member.name}">${member.name}</option>`).join('');
      };

      window.showAddTeamMember = () => {
        const name = prompt('Enter team member name:');
        if (!name) return;
        
        const whatsapp = prompt('Enter WhatsApp number (optional):') || '';
        const email = prompt('Enter Gmail address (optional):') || '';
        
        if (!whatsapp && !email) {
          alert('Please provide at least WhatsApp or Gmail');
          return;
        }
        
        const teamMembers = JSON.parse(localStorage.getItem('team-members') || '[]');
        teamMembers.push({ name, whatsapp, email });
        localStorage.setItem('team-members', JSON.stringify(teamMembers));
        
        renderTeamMembers();
      };

      window.removeTeamMember = (index) => {
        if (confirm('Remove this team member?')) {
          const teamMembers = JSON.parse(localStorage.getItem('team-members') || '[]');
          teamMembers.splice(index, 1);
          localStorage.setItem('team-members', JSON.stringify(teamMembers));
          renderTeamMembers();
        }
      };

      window.assignTeamMember = (messageId, memberName) => {
        if (!memberName) return;
        
        const chatMessages = JSON.parse(localStorage.getItem('chat-messages') || '[]');
        const messageIndex = chatMessages.findIndex(msg => msg.id === messageId);
        
        if (messageIndex !== -1) {
          chatMessages[messageIndex].assignedTo = memberName;
          localStorage.setItem('chat-messages', JSON.stringify(chatMessages));
          renderChatMessages();
        }
      };

      window.replyViaWhatsApp = (messageId) => {
        const chatMessages = JSON.parse(localStorage.getItem('chat-messages') || '[]');
        const message = chatMessages.find(msg => msg.id === messageId);
        const teamMembers = JSON.parse(localStorage.getItem('team-members') || '[]');
        
        if (!message) return;
        
        let assignedMember = null;
        if (message.assignedTo) {
          assignedMember = teamMembers.find(member => member.name === message.assignedTo);
        }
        
        // Use assigned member's WhatsApp or prompt for number
        let adminWhatsApp = '';
        if (assignedMember && assignedMember.whatsapp) {
          adminWhatsApp = assignedMember.whatsapp;
        } else {
          adminWhatsApp = prompt('Enter your WhatsApp number to reply from:');
          if (!adminWhatsApp) return;
        }
        
        const replyMessage = `Hello ${message.name}! This is HOSTALL team responding to your inquiry. How can we help you with your hostel requirements?`;
        const whatsappUrl = `https://wa.me/${message.whatsapp.replace(/\+/g, '')}?text=${encodeURIComponent(replyMessage)}`;
        
        window.open(whatsappUrl, '_blank');
        
        // Mark as responded
        const messageIndex = chatMessages.findIndex(msg => msg.id === messageId);
        if (messageIndex !== -1) {
          chatMessages[messageIndex].status = 'responded';
          chatMessages[messageIndex].responseMethod = 'WhatsApp';
          localStorage.setItem('chat-messages', JSON.stringify(chatMessages));
          renderChatMessages();
        }
      };

      window.replyViaEmail = (messageId) => {
        const chatMessages = JSON.parse(localStorage.getItem('chat-messages') || '[]');
        const message = chatMessages.find(msg => msg.id === messageId);
        const teamMembers = JSON.parse(localStorage.getItem('team-members') || '[]');
        
        if (!message) return;
        
        let assignedMember = null;
        if (message.assignedTo) {
          assignedMember = teamMembers.find(member => member.name === message.assignedTo);
        }
        
        const subject = 'HOSTALL Support - Response to Your Inquiry';
        const body = `Hello ${message.name},

Thank you for contacting HOSTALL! We received your message:

"${message.message}"

Our team is ready to help you find the perfect hostel. Please let us know your specific requirements and we'll provide you with the best options.

Best regards,
HOSTALL Team`;
        
        const emailUrl = `mailto:${message.email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
        window.open(emailUrl, '_blank');
        
        // Mark as responded
        const messageIndex = chatMessages.findIndex(msg => msg.id === messageId);
        if (messageIndex !== -1) {
          chatMessages[messageIndex].status = 'responded';
          chatMessages[messageIndex].responseMethod = 'Gmail';
          localStorage.setItem('chat-messages', JSON.stringify(chatMessages));
          renderChatMessages();
        }
      };

      window.markAsResponded = (messageId) => {
        const chatMessages = JSON.parse(localStorage.getItem('chat-messages') || '[]');
        const messageIndex = chatMessages.findIndex(msg => msg.id === messageId);
        
        if (messageIndex !== -1) {
          chatMessages[messageIndex].status = 'responded';
          chatMessages[messageIndex].responseMethod = 'Other';
          localStorage.setItem('chat-messages', JSON.stringify(chatMessages));
          renderChatMessages();
        }
      };

      window.showForm = f => {
        document.getElementById(f + '-form').style.display = 'block';
      };



      // Chat Functions
      window.selectChatOption = (option) => {
        // Update option buttons
        document.querySelectorAll('.chat-option').forEach(opt => opt.classList.remove('active'));
        event.target.classList.add('active');
        
        // Show/hide forms
        document.querySelectorAll('.chat-form').forEach(form => form.classList.remove('active'));
        document.getElementById('chat-' + option + '-form').classList.add('active');
      };

      window.sendUserMessage = () => {
        const name = document.getElementById('user-name').value;
        const email = document.getElementById('user-email').value;
        const message = document.getElementById('user-message').value;
        
        if (!name || !email || !message) {
          alert('Please fill in all fields');
          return;
        }
        
        // Create message object
        const chatMessage = {
          id: Date.now(),
          name: name,
          email: email,
          message: message,
          timestamp: new Date().toISOString(),
          status: 'unread'
        };
        
        // Save to localStorage
        let chatMessages = JSON.parse(localStorage.getItem('chatMessages') || '[]');
        chatMessages.unshift(chatMessage);
        localStorage.setItem('chatMessages', JSON.stringify(chatMessages));
        
        // Show in user chat
        const userMessages = document.getElementById('user-chat-messages');
        const messageDiv = document.createElement('div');
        messageDiv.className = 'chat-message';
        messageDiv.innerHTML = `
          <div class="chat-message-info">You - ${new Date().toLocaleTimeString()}</div>
          <div>${message}</div>
        `;
        userMessages.appendChild(messageDiv);
        
        // Show typing indicator
        const typingDiv = document.createElement('div');
        typingDiv.className = 'typing-indicator';
        typingDiv.innerHTML = 'HOSTALL team is typing...';
        userMessages.appendChild(typingDiv);
        userMessages.scrollTop = userMessages.scrollHeight;
        
        // Clear form
        document.getElementById('user-message').value = '';
        
        // Auto response after 2 seconds
        setTimeout(() => {
          typingDiv.remove();
          const autoReply = getAutoResponse(message);
          if (autoReply) {
            const replyDiv = document.createElement('div');
            replyDiv.className = 'auto-response';
            replyDiv.innerHTML = `
              <div style="font-size: 0.8rem; margin-bottom: 0.5rem; font-weight: 600;">HOSTALL Support - ${new Date().toLocaleTimeString()}</div>
              <div>${autoReply}</div>
            `;
            userMessages.appendChild(replyDiv);
            userMessages.scrollTop = userMessages.scrollHeight;
          }
        }, 2000);
        
        // Update notification badge
        
        // Update admin chat if open
        if (document.getElementById('admin-chat-list')) {
          loadAdminChatMessages();
        }
        
        // Show success message
        const successDiv = document.createElement('div');
        successDiv.className = 'auto-response';
        successDiv.innerHTML = '‚úÖ Message sent! We will respond soon.';
        userMessages.appendChild(successDiv);
        setTimeout(() => successDiv.remove(), 3000);
      };

      // Auto response logic
      window.getAutoResponse = (message) => {
        const msg = message.toLowerCase();
        if (msg.includes('price') || msg.includes('cost') || msg.includes('rent')) {
          return 'üí∞ Our hostel prices range from PKR 7,500 to PKR 18,000 per month. Prices vary based on facilities and location. Would you like specific information about any particular area?';
        }
        if (msg.includes('male') || msg.includes('female') || msg.includes('gender')) {
          return 'üë• We have both male and female hostels available across Lahore. Please let us know your preference and we can show you suitable options in your preferred area.';
        }
        if (msg.includes('facility') || msg.includes('facilities') || msg.includes('amenities')) {
          return 'üè† Our hostels offer: WiFi, AC, Laundry, Parking, Mess facilities, Study rooms, 24/7 Security, and more. Specific facilities vary by location.';
        }
        if (msg.includes('book') || msg.includes('booking') || msg.includes('reserve')) {
          return 'üìÖ To book a hostel: 1) Browse our listings 2) Contact the owner directly 3) Visit the location 4) Complete the booking. We can also arrange visits for you!';
        }
        if (msg.includes('location') || msg.includes('area') || msg.includes('where')) {
          return 'üìç We have hostels in Gulberg, DHA, Johar Town, near Punjab University, and other prime locations in Lahore. Which area interests you?';
        }
        return 'ü§ù Thank you for your message! Our team will review it and get back to you within 24 hours. For immediate assistance, you can also contact us via WhatsApp or email.';
      };

      // Quick response functions
      window.selectQuickResponse = (response) => {
        document.getElementById('user-message').value = response;
      };

      window.checkUserInfo = () => {
        const name = document.getElementById('user-name').value;
        const email = document.getElementById('user-email').value;
        
        if (name && email) {
          document.getElementById('quick-responses').style.display = 'block';
          loadUserChatHistory();
        }
      };

      window.showTypingIndicator = () => {
        // Could add real-time typing indicators here
      };



      // Admin quick reply functions
      window.showQuickReply = (messageId, email, name) => {
        const replyDiv = document.getElementById(`quick-reply-${messageId}`);
        replyDiv.style.display = replyDiv.style.display === 'none' ? 'block' : 'none';
      };

      window.sendQuickReply = (messageId, email, name, response) => {
        const subject = 'Re: Your HOSTALL Inquiry';
        const body = `Dear ${name},\n\n${response}\n\nThank you for contacting HOSTALL. If you have any other questions, please don't hesitate to reach out.\n\nBest regards,\nHOSTALL Team\n\nEmail: teamhostall@gmail.com\nPhone: +92-300-1234567`;
        window.open(`mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`, '_blank');
        markAsAnswered(messageId);
      };

      window.sendCustomReply = (messageId, email, name) => {
        const customMessage = document.getElementById(`custom-reply-${messageId}`).value;
        if (!customMessage) {
          alert('Please enter a custom reply');
          return;
        }
        
        const subject = 'Re: Your HOSTALL Inquiry';
        const body = `Dear ${name},\n\n${customMessage}\n\nThank you for contacting HOSTALL. If you have any other questions, please don't hesitate to reach out.\n\nBest regards,\nHOSTALL Team\n\nEmail: teamhostall@gmail.com\nPhone: +92-300-1234567`;
        window.open(`mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`, '_blank');
        markAsAnswered(messageId);
      };





      // Admin Chat Functions
      window.filterChatMessages = (filter) => {
        // Update filter buttons
        document.querySelectorAll('.chat-filter').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');
        
        // Load filtered messages
        loadAdminChatMessages(filter);
      };

      window.loadAdminChatMessages = (filter = 'all') => {
        const chatMessages = JSON.parse(localStorage.getItem('chat-messages') || '[]');
        const adminChatList = document.getElementById('admin-chat-list');
        
        if (!adminChatList) return;
        
        let filteredMessages = chatMessages;
        if (filter === 'unread') {
          filteredMessages = chatMessages.filter(msg => msg.status === 'unread');
        } else if (filter === 'answered') {
          filteredMessages = chatMessages.filter(msg => msg.status === 'answered');
        }
        
        if (filteredMessages.length === 0) {
          const filterText = filter === 'all' ? '' : 
                           filter === 'unread' ? 'pending response' : 
                           filter === 'answered' ? 'responded to' : filter;
          adminChatList.innerHTML = `
            <div style="text-align: center; color: #4A5568; padding: 2rem;">
              <p>No ${filterText} chat messages yet.</p>
              <p style="font-size: 0.9rem; margin-top: 0.5rem;">Messages from the chat widget will appear here.</p>
            </div>
          `;
          return;
        }

        // Sort messages by timestamp (newest first)
        const sortedMessages = filteredMessages.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
        
        adminChatList.innerHTML = sortedMessages.map(msg => `
          <div class="admin-chat-item">
            <div class="admin-chat-header">
              <div>
                <div class="admin-chat-user">${msg.name} (${msg.email})</div>
                ${msg.phone && msg.phone !== 'Not provided' ? `<div class="admin-chat-phone">üìû ${msg.phone}</div>` : ''}
                <div class="admin-chat-time">${new Date(msg.timestamp).toLocaleString()}</div>
              </div>
              <div style="background: ${msg.status === 'unread' ? '#F59E0B' : '#22C55E'}; color: white; padding: 0.3rem 0.8rem; border-radius: 12px; font-size: 0.8rem;">
                ${msg.status === 'unread' ? '‚ö†Ô∏è Pending Response' : '‚úÖ Responded'}
              </div>
            </div>
            <div class="admin-chat-message">${msg.message}</div>
            ${msg.autoResponse ? `<div class="auto-response-shown" style="background: #EBF8FF; border-left: 4px solid #3B82F6; padding: 0.8rem; margin: 0.5rem 0; font-style: italic; color: #1E40AF;">
              <strong>Auto Response Sent:</strong> ${msg.autoResponse}
            </div>` : ''}
            <div class="admin-chat-actions">
              <button class="admin-chat-reply" onclick="replyToMessage('${msg.email}', '${msg.name}')">üìß Email Reply</button>
              ${msg.phone && msg.phone !== 'Not provided' ? 
                `<button class="admin-chat-whatsapp" onclick="replyViaWhatsApp('${msg.phone}', '${msg.message}')">üì± WhatsApp</button>` : 
                `<button class="admin-chat-whatsapp" onclick="replyViaWhatsApp('', '${msg.message}')">üì± WhatsApp</button>`
              }
              <button class="admin-chat-reply" onclick="showQuickReply(${msg.id}, '${msg.email}', '${msg.name}')">‚ö° Quick Reply</button>
              ${msg.status === 'unread' ? `<button class="admin-chat-mark" onclick="markAsAnswered(${msg.id})">‚úÖ Mark as Responded</button>` : ''}
            </div>
            <div id="quick-reply-${msg.id}" style="display: none; margin-top: 1rem; padding: 1rem; background: #F7FAFC; border-radius: 8px;">
              <div style="margin-bottom: 0.5rem;">
                <button class="quick-response-btn" onclick="sendQuickReply(${msg.id}, '${msg.email}', '${msg.name}', 'Thank you for your inquiry! Our hostel prices range from PKR 7,500 to PKR 18,000 per month depending on facilities and location.')">üí∞ Price Info</button>
                <button class="quick-response-btn" onclick="sendQuickReply(${msg.id}, '${msg.email}', '${msg.name}', 'We have both male and female hostels available. Please let us know your preference and we will show you suitable options.')">üë• Gender Options</button>
                <button class="quick-response-btn" onclick="sendQuickReply(${msg.id}, '${msg.email}', '${msg.name}', 'Our hostels offer various facilities including WiFi, AC, laundry, parking, mess facilities, and 24/7 security.')">üè† Facilities</button>
                <button class="quick-response-btn" onclick="sendQuickReply(${msg.id}, '${msg.email}', '${msg.name}', 'To book a hostel, please contact the owner directly through our platform or call us for assistance.')">üìÖ Booking</button>
              </div>
              <textarea id="custom-reply-${msg.id}" placeholder="Or write a custom reply..." style="width: 100%; padding: 0.5rem; margin-bottom: 0.5rem; border: 1px solid #E2E8F0; border-radius: 4px;"></textarea>
              <button onclick="sendCustomReply(${msg.id}, '${msg.email}', '${msg.name}')" style="background: #8B5CF6; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">Send Custom Reply</button>
            </div>
          </div>
        `).join('');
      };

      window.replyToMessage = (email, name) => {
        const subject = 'HOSTALL Support Response';
        const body = `Hello ${name},\n\nThank you for contacting HOSTALL. \n\n[Your response here]\n\nBest regards,\nHOSTALL Support Team\nteamhostall@gmail.com`;
        window.open(`mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`, '_blank');
      };

      window.replyViaWhatsApp = (phone, originalMessage) => {
        const response = `Hi! Thank you for your message: "${originalMessage}". Our team will assist you with your HOSTALL inquiry.`;
        let whatsappUrl;
        
        // Get WhatsApp contacts from localStorage
        const whatsappContacts = JSON.parse(localStorage.getItem('whatsapp-contacts') || '[{"number": "923331536041", "label": "Main Support", "allowCalls": false, "note": "No calls, message only"}]');
        
        if (phone && phone !== 'Not provided' && phone !== '') {
          // Remove any non-digit characters from phone number
          const cleanPhone = phone.replace(/\D/g, '');
          whatsappUrl = `https://wa.me/${cleanPhone}?text=${encodeURIComponent(response)}`;
        } else {
          // Use the first available WhatsApp contact
          const defaultContact = whatsappContacts[0];
          const defaultNumber = defaultContact ? defaultContact.number : '923331536041';
          whatsappUrl = `https://wa.me/${defaultNumber}?text=${encodeURIComponent(response)}`;
        }
        
        window.open(whatsappUrl, '_blank');
      };

      window.markAsAnswered = (messageId) => {
        let chatMessages = JSON.parse(localStorage.getItem('chat-messages') || '[]');
        chatMessages = chatMessages.map(msg => {
          if (msg.id === messageId) {
            msg.status = 'answered';
          }
          return msg;
        });
        localStorage.setItem('chat-messages', JSON.stringify(chatMessages));
        loadAdminChatMessages();
        updateChatNotifications();
      };

      // Load user's previous messages on chat open
      window.loadUserChatHistory = () => {
        const userMessages = document.getElementById('user-chat-messages');
        if (!userMessages) return;
        
        const chatMessages = JSON.parse(localStorage.getItem('chatMessages') || '[]');
        const userEmail = document.getElementById('user-email')?.value;
        
        if (userEmail) {
          const userChats = chatMessages.filter(msg => msg.email === userEmail);
          userMessages.innerHTML = userChats.slice(-5).map(msg => `
            <div class="chat-message">
              <div class="chat-message-info">${new Date(msg.timestamp).toLocaleString()}</div>
              <div>${msg.message}</div>
            </div>
          `).join('');
          userMessages.scrollTop = userMessages.scrollHeight;
        }
      };

      // Load admin chat when dashboard loads
      setTimeout(() => {
        if (document.getElementById('admin-chat-list')) {
          loadAdminChatMessages();
        }
        if (document.getElementById('facebook-url')) {
          loadSocialSettings();
        }
        if (document.getElementById('seo-title')) {
          loadSEOSettings();
        }
        if (document.getElementById('ga4-id')) {
          loadAnalyticsSettings();
          loadAnalyticsScripts();
        }
        if (document.getElementById('auto-backup-enabled')) {
          loadBackupSettings();
        }
      }, 100);

      // Initialize page load
      document.addEventListener('DOMContentLoaded', () => {
        updateSocialLinks();
        updateSEOTags();
        loadAnalyticsScripts();
        loadNightMode();
        

        
        // Override show function to update mobile menu
        const originalShow = window.show;
        window.show = (section) => {
          originalShow(section);
          updateMobileMenuActive(section);
          updateMobileBottomNav(section);
        };
      });

      // Admin Navigation Functions
      window.showAdminSection = (section) => {
        // Check if the current user is a hostel owner
        const currentAdmin = JSON.parse(localStorage.getItem('current-admin') || '{}');
        const isHostelOwner = currentAdmin.role === 'hostel';
        
        // If hostel owner, only allow access to hostels section
        if (isHostelOwner && section !== 'hostels') {
          showNotification('Access restricted: You can only manage your hostel listings.', 'warning');
          return;
        }
        
        // Hide all admin sections
        document.querySelectorAll('.admin-section').forEach(s => s.classList.remove('active'));
        // Remove active class from all nav items
        document.querySelectorAll('.admin-nav-item').forEach(item => item.classList.remove('active'));
        
        // Show selected section
        const targetSection = document.getElementById('admin-' + section);
        if (targetSection) {
          targetSection.classList.add('active');
        }
        
        // Add active class to clicked nav item
        const navButton = document.querySelector(`.admin-nav-item[onclick*="showAdminSection('${section}')"]`);
        if (navButton) {
          navButton.classList.add('active');
        }
        
        // Fix for ensuring media controls only appear in hostel section
        const hostelMediaGroups = document.querySelectorAll('.hostel-media-group');
        hostelMediaGroups.forEach(group => {
          group.style.display = section === 'hostels' ? 'block' : 'none';
        });
        
        // Fix for ensuring save button only appears in hostel section
        const hostelSaveButtons = document.querySelectorAll('.hostel-save-button');
        hostelSaveButtons.forEach(button => {
          button.style.display = section === 'hostels' ? 'block' : 'none';
        });
        
        // Initialize FAQ analytics when that section becomes active
        if (section === 'faq-analytics' && typeof window.loadFAQAnalytics === 'function') {
          if (!window.faqAnalyticsLoaded) {
            window.loadFAQAnalytics();
            window.faqAnalyticsLoaded = true;
          }
        }
        
        // Load FAQs when FAQ section is shown
        if (section === 'faq') {
          setTimeout(() => {
            if (typeof window.renderAdminFAQs === 'function') {
              window.renderAdminFAQs();
            }
          }, 100);
        }
      };

      // Content Management Functions
      window.loadContentSection = () => {
        const section = document.getElementById('content-section-select').value;
        const fields = document.getElementById('content-editor-fields');
        
        let fieldsHTML = '';
        
        if (section === 'hero') {
          fieldsHTML = `
            <div class="editor-field">
              <label>Main Heading</label>
              <input type="text" id="hero-heading" value="Find Your Perfect Hostel in Lahore - Boys & Girls Hostels">
            </div>
            <div class="editor-field">
              <label>Subtitle</label>
              <textarea id="hero-subtitle">Discover the best boys and girls hostels in Lahore with HOSTALL. Browse verified, affordable student accommodation near universities and colleges. Compare prices, facilities, and locations for hostels in Lahore, Pakistan.</textarea>
            </div>
            <div class="editor-field">
              <label>Tagline</label>
              <input type="text" id="hero-tagline" value="Your hostel search starts here.">
            </div>
          `;
        } else if (section === 'about') {
          fieldsHTML = `
            <div class="editor-field">
              <label>About Heading</label>
              <input type="text" id="about-heading" value="About HOSTALL">
            </div>
            <div class="editor-field">
              <label>About Description</label>
              <textarea id="about-description">We understand the struggle of finding quality accommodation in Lahore. That's why we created HOSTALL - a platform built by students, for students.</textarea>
            </div>
          `;
        }
        
        fields.innerHTML = fieldsHTML;
      };

      window.saveContent = () => {
        const section = document.getElementById('content-section-select').value;
        // In a real app, this would save to database
        alert('Content saved for ' + section + ' section!');
      };

      // Image Management Functions
      window.uploadImage = (type) => {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = 'image/*';
        input.onchange = (e) => {
          const file = e.target.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = (e) => {
              // In a real app, this would upload to server
              alert('Image uploaded for ' + type + ' section!');
            };
            reader.readAsDataURL(file);
          }
        };
        input.click();
      };

      // Other Admin Functions
      window.saveBranding = () => {
        const primaryColor = document.getElementById('primary-color').value;
        const secondaryColor = document.getElementById('secondary-color').value;
        const logoText = document.getElementById('logo-text').value;
        const hostallTextColor = document.getElementById('hostall-text-color').value;
        const hostColor = document.getElementById('host-color').value;
        const allColor = document.getElementById('all-color').value;
        
        // Save to localStorage
        const brandingSettings = {
          primaryColor: primaryColor,
          secondaryColor: secondaryColor,
          logoText: logoText,
          hostallTextColor: hostallTextColor,
          hostColor: hostColor,
          allColor: allColor
        };
        
        localStorage.setItem('branding-settings', JSON.stringify(brandingSettings));
        
        // Apply changes immediately
        document.documentElement.style.setProperty('--primary-color', primaryColor);
        document.documentElement.style.setProperty('--secondary-color', secondaryColor);
        
        // Update specific elements that use hardcoded colors
        updateColorElements(primaryColor, secondaryColor);
        
        // Update HOSTALL text next to logo
        const logoContainer = document.querySelector('.logo span');
        if (logoContainer) {
          logoContainer.style.color = hostallTextColor;
        }
        
        // Update logo text elements for split view
        const hostElement = document.querySelector('.logo .host');
        const allElement = document.querySelector('.logo .all');
        
        if (hostElement && allElement) {
          // Split the text for HOST and ALL parts
          const parts = logoText.split(' ').join('');
          if (parts === "HOSTALL") {
            document.querySelector('.logo .host').textContent = "HOST";
            document.querySelector('.logo .host').style.color = hostColor;
            
            document.querySelector('.logo .all').textContent = "ALL";
            document.querySelector('.logo .all').style.color = allColor;
          }
        }
        
        alert('Branding settings saved and applied!');
      };
      
      // Function to update elements with hardcoded colors
      function updateColorElements(primaryColor, secondaryColor) {
        // Update all buttons with primary color
        const primaryButtons = document.querySelectorAll('button[style*="#8B5CF6"], .btn-primary, .search-btn, .admin-nav-item.active');
        primaryButtons.forEach(btn => {
          if (btn.style.background && btn.style.background.includes('#8B5CF6')) {
            btn.style.background = btn.style.background.replace(/#8B5CF6/g, primaryColor);
          }
          if (btn.style.backgroundColor && btn.style.backgroundColor.includes('#8B5CF6')) {
            btn.style.backgroundColor = primaryColor;
          }
        });
        
        // Update elements with secondary color
        const secondaryElements = document.querySelectorAll('[style*="#FF6B6B"]');
        secondaryElements.forEach(elem => {
          if (elem.style.color && elem.style.color.includes('#FF6B6B')) {
            elem.style.color = secondaryColor;
          }
          if (elem.style.background && elem.style.background.includes('#FF6B6B')) {
            elem.style.background = elem.style.background.replace(/#FF6B6B/g, secondaryColor);
          }
        });
        
        // Force refresh of color-dependent elements
        const colorElements = document.querySelectorAll('.hero, .why-hostall, .feature-icon-wrapper');
        colorElements.forEach(elem => {
          elem.style.setProperty('background', elem.style.background.replace(/#8B5CF6/g, primaryColor));
        });
      };

      window.saveTypography = () => {
        const primaryFont = document.getElementById('primary-font').value;
        const headingSize = document.getElementById('heading-size').value;
        const bodySize = document.getElementById('body-size').value;
        
        // Save to localStorage
        const typographySettings = {
          primaryFont: primaryFont,
          headingSize: headingSize + 'px',
          bodySize: bodySize + 'px'
        };
        
        localStorage.setItem('typography-settings', JSON.stringify(typographySettings));
        
        // Apply changes immediately
        document.documentElement.style.setProperty('--primary-font', primaryFont);
        document.documentElement.style.setProperty('--heading-size', headingSize + 'px');
        document.documentElement.style.setProperty('--body-size', bodySize + 'px');
        
        // Update font family
        document.body.style.fontFamily = primaryFont + ', sans-serif';
        
        alert('Typography settings saved and applied!');
      };

      // Social Media Functions
      window.saveSocialSettings = () => {
        const socialSettings = {
          facebook: document.getElementById('facebook-url').value,
          instagram: document.getElementById('instagram-url').value,
          tiktok: document.getElementById('tiktok-url').value,
          whatsapp: document.getElementById('social-whatsapp-number').value,
          email: document.getElementById('business-email').value,
          phone: document.getElementById('support-phone').value,
          address: document.getElementById('business-address').value,
          showFacebook: document.getElementById('show-facebook').checked,
          showInstagram: document.getElementById('show-instagram').checked,
          showTikTok: document.getElementById('show-tiktok').checked,
          showWhatsApp: document.getElementById('show-whatsapp').checked
        };
        
        localStorage.setItem('socialSettings', JSON.stringify(socialSettings));
        updateSocialLinks();
        
        // Show enhanced success message
        alert('‚úÖ Social media settings saved successfully!\n\nAll social media links throughout the website have been updated:\n‚Ä¢ Footer icons\n‚Ä¢ Contact page links\n‚Ä¢ All social media references');
      };

      window.updateSocialLinks = () => {
        const settings = JSON.parse(localStorage.getItem('socialSettings') || '{}');
        
        // Update all Facebook links (multiple selectors to ensure comprehensive coverage)
        const facebookSelectors = [
          'a[href*="facebook.com"]',
          'a[href*="fb.com"]',
          '.social-icon.facebook',
          '.social-link[href*="facebook"]'
        ];
        facebookSelectors.forEach(selector => {
          document.querySelectorAll(selector).forEach(link => {
            if (settings.facebook && link.href) {
              link.href = settings.facebook;
            }
          });
        });
        
        // Update all Instagram links (multiple selectors)
        const instagramSelectors = [
          'a[href*="instagram.com"]',
          'a[href*="instagr.am"]',
          '.social-icon.instagram',
          '.social-link[href*="instagram"]'
        ];
        instagramSelectors.forEach(selector => {
          document.querySelectorAll(selector).forEach(link => {
            if (settings.instagram && link.href) {
              link.href = settings.instagram;
            }
          });
        });
        
        // Update all TikTok links (multiple selectors)
        const tiktokSelectors = [
          'a[href*="tiktok.com"]',
          'a[href*="vm.tiktok.com"]',
          '.social-icon.tiktok',
          '.social-link[href*="tiktok"]'
        ];
        tiktokSelectors.forEach(selector => {
          document.querySelectorAll(selector).forEach(link => {
            if (settings.tiktok && link.href) {
              link.href = settings.tiktok;
            }
          });
        });
        
        // Update all WhatsApp links (multiple selectors)
        const whatsappSelectors = [
          'a[href*="wa.me"]',
          'a[href*="whatsapp.com"]',
          '.social-icon.whatsapp',
          '.social-link[href*="whatsapp"]'
        ];
        whatsappSelectors.forEach(selector => {
          document.querySelectorAll(selector).forEach(link => {
            if (settings.whatsapp && link.href) {
              const cleanNumber = settings.whatsapp.replace(/\+/g, '').replace(/\s/g, '').replace(/-/g, '');
              link.href = `https://wa.me/${cleanNumber}`;
            }
          });
        });
        
        // Update all email links
        document.querySelectorAll('a[href*="mailto:"]').forEach(link => {
          if (settings.email && link.href.includes('teamhostall@gmail.com')) {
            link.href = `mailto:${settings.email}`;
            link.textContent = settings.email;
          }
        });
        
        // Update contact information display in all text elements
        const textSelectors = ['span', 'p', 'div', 'td', 'li'];
        textSelectors.forEach(tagName => {
          document.querySelectorAll(tagName).forEach(element => {
            if (element.textContent) {
              // Update email displays
              if (element.textContent.includes('teamhostall@gmail.com') && settings.email) {
                element.textContent = element.textContent.replace('teamhostall@gmail.com', settings.email);
              }
              // Update phone displays
              if (element.textContent.includes('+92 300 1234567') && settings.phone) {
                element.textContent = element.textContent.replace('+92 300 1234567', settings.phone);
              }
              // Update address displays
              if (element.textContent.includes('Lahore, Pakistan') && settings.address) {
                element.textContent = element.textContent.replace('Lahore, Pakistan', settings.address);
              }
            }
          });
        });
        
        // Show/hide social media icons based on settings
        if (settings.showFacebook === false) {
          document.querySelectorAll('.social-icon.facebook, .social-link[href*="facebook"]').forEach(icon => {
            icon.style.display = 'none';
          });
        } else {
          document.querySelectorAll('.social-icon.facebook, .social-link[href*="facebook"]').forEach(icon => {
            icon.style.display = '';
          });
        }
        
        if (settings.showInstagram === false) {
          document.querySelectorAll('.social-icon.instagram, .social-link[href*="instagram"]').forEach(icon => {
            icon.style.display = 'none';
          });
        } else {
          document.querySelectorAll('.social-icon.instagram, .social-link[href*="instagram"]').forEach(icon => {
            icon.style.display = '';
          });
        }
        
        if (settings.showTikTok === false) {
          document.querySelectorAll('.social-icon.tiktok, .social-link[href*="tiktok"]').forEach(icon => {
            icon.style.display = 'none';
          });
        } else {
          document.querySelectorAll('.social-icon.tiktok, .social-link[href*="tiktok"]').forEach(icon => {
            icon.style.display = '';
          });
        }
        
        if (settings.showWhatsApp === false) {
          document.querySelectorAll('.social-icon.whatsapp, .social-link[href*="whatsapp"], .social-link[href*="wa.me"]').forEach(icon => {
            icon.style.display = 'none';
          });
        } else {
          document.querySelectorAll('.social-icon.whatsapp, .social-link[href*="whatsapp"], .social-link[href*="wa.me"]').forEach(icon => {
            icon.style.display = '';
          });
        }
        
        console.log('‚úÖ All social media links updated across the website!');
      };

      // Preview function for real-time updates
      window.previewSocialChange = (input, platform) => {
        const value = input.value.trim();
        if (!value) return;
        
        // Update links immediately for preview
        switch(platform) {
          case 'facebook':
            document.querySelectorAll('a[href*="facebook.com"], .social-icon.facebook').forEach(link => {
              if (link.href) link.href = value;
            });
            break;
          case 'instagram':
            document.querySelectorAll('a[href*="instagram.com"], .social-icon.instagram').forEach(link => {
              if (link.href) link.href = value;
            });
            break;
          case 'tiktok':
            document.querySelectorAll('a[href*="tiktok.com"], .social-icon.tiktok').forEach(link => {
              if (link.href) link.href = value;
            });
            break;
          case 'whatsapp':
            const cleanNumber = value.replace(/\+/g, '').replace(/\s/g, '').replace(/-/g, '');
            document.querySelectorAll('a[href*="wa.me"], .social-icon.whatsapp').forEach(link => {
              if (link.href) link.href = `https://wa.me/${cleanNumber}`;
            });
            break;
        }
        
        // Show live preview indicator
        input.style.borderColor = '#4CAF50';
        input.style.boxShadow = '0 0 5px rgba(76, 175, 80, 0.3)';
        setTimeout(() => {
          input.style.borderColor = '';
          input.style.boxShadow = '';
        }, 1000);
      };

      window.loadSocialSettings = () => {
        const settings = JSON.parse(localStorage.getItem('socialSettings') || '{}');
        
        if (settings.facebook) document.getElementById('facebook-url').value = settings.facebook;
        if (settings.instagram) document.getElementById('instagram-url').value = settings.instagram;
        if (settings.tiktok) document.getElementById('tiktok-url').value = settings.tiktok;
        if (settings.whatsapp) document.getElementById('social-whatsapp-number').value = settings.whatsapp;
        if (settings.email) document.getElementById('business-email').value = settings.email;
        if (settings.phone) document.getElementById('support-phone').value = settings.phone;
        if (settings.address) document.getElementById('business-address').value = settings.address;
        
        document.getElementById('show-facebook').checked = settings.showFacebook !== false;
        document.getElementById('show-instagram').checked = settings.showInstagram !== false;
        document.getElementById('show-tiktok').checked = settings.showTikTok !== false;
        document.getElementById('show-whatsapp').checked = settings.showWhatsApp !== false;
        
        // Add status indicator to admin panel if not already added
        if (!document.getElementById('social-update-status')) {
          const statusDiv = document.createElement('div');
          statusDiv.id = 'social-update-status';
          statusDiv.style.marginTop = '10px';
          statusDiv.style.padding = '8px';
          statusDiv.style.borderRadius = '5px';
          statusDiv.style.backgroundColor = '#E8F5E8';
          statusDiv.style.border = '1px solid #4CAF50';
          statusDiv.style.textAlign = 'center';
          statusDiv.style.fontSize = '0.85rem';
          statusDiv.style.color = '#2E7D32';
          statusDiv.innerHTML = '‚úÖ <strong>Real-time Updates:</strong> Changes to social links automatically update across the entire website';
          
          const saveButton = document.querySelector('button[onclick="saveSocialSettings()"]');
          if (saveButton) {
            saveButton.parentNode.insertBefore(statusDiv, saveButton.nextSibling);
          }
        }
        
        updateSocialLinks();
      };

      // SEO Functions
      window.saveSEOSettings = () => {
        const seoSettings = {
          title: document.getElementById('seo-title').value,
          description: document.getElementById('seo-description').value,
          keywords: document.getElementById('seo-keywords').value,
          language: document.getElementById('seo-language').value,
          ogTitle: document.getElementById('og-title').value,
          ogType: document.getElementById('og-type').value,
          ogDescription: document.getElementById('og-description').value,
          canonicalUrl: document.getElementById('canonical-url').value,
          robots: document.getElementById('robots-meta').value
        };
        
        localStorage.setItem('seoSettings', JSON.stringify(seoSettings));
        updateSEOTags();
        alert('SEO settings saved!');
      };

      window.updateSEOTags = () => {
        const settings = JSON.parse(localStorage.getItem('seoSettings') || '{}');
        
        // Update title
        if (settings.title) {
          document.title = settings.title;
          let titleTag = document.querySelector('title');
          if (titleTag) titleTag.textContent = settings.title;
        }
        
        // Update or create meta tags
        updateMetaTag('description', settings.description);
        updateMetaTag('keywords', settings.keywords);
        updateMetaTag('robots', settings.robots);
        updateMetaTag('og:title', settings.ogTitle, 'property');
        updateMetaTag('og:type', settings.ogType, 'property');
        updateMetaTag('og:description', settings.ogDescription, 'property');
        updateMetaTag('og:url', settings.canonicalUrl, 'property');
        
        // Update language
        if (settings.language) {
          document.documentElement.lang = settings.language;
        }
        
        // Update canonical URL
        let canonical = document.querySelector('link[rel="canonical"]');
        if (settings.canonicalUrl) {
          if (!canonical) {
            canonical = document.createElement('link');
            canonical.rel = 'canonical';
            document.head.appendChild(canonical);
          }
          canonical.href = settings.canonicalUrl;
        }
      };

      window.updateMetaTag = (name, content, attribute = 'name') => {
        if (!content) return;
        let meta = document.querySelector(`meta[${attribute}="${name}"]`);
        if (!meta) {
          meta = document.createElement('meta');
          meta.setAttribute(attribute, name);
          document.head.appendChild(meta);
        }
        meta.content = content;
      };

      window.loadSEOSettings = () => {
        const settings = JSON.parse(localStorage.getItem('seoSettings') || '{}');
        
        if (settings.title) document.getElementById('seo-title').value = settings.title;
        if (settings.description) document.getElementById('seo-description').value = settings.description;
        if (settings.keywords) document.getElementById('seo-keywords').value = settings.keywords;
        if (settings.language) document.getElementById('seo-language').value = settings.language;
        if (settings.ogTitle) document.getElementById('og-title').value = settings.ogTitle;
        if (settings.ogType) document.getElementById('og-type').value = settings.ogType;
        if (settings.ogDescription) document.getElementById('og-description').value = settings.ogDescription;
        if (settings.canonicalUrl) document.getElementById('canonical-url').value = settings.canonicalUrl;
        if (settings.robots) document.getElementById('robots-meta').value = settings.robots;
        
        updateSEOTags();
      };

      // Analytics Functions
      window.saveAnalyticsSettings = () => {
        const analyticsSettings = {
          ga4Id: document.getElementById('ga4-id').value,
          gtmId: document.getElementById('gtm-id').value,
          enabled: document.getElementById('analytics-enabled').checked,
          facebookPixel: document.getElementById('facebook-pixel').value,
          customHeadCode: document.getElementById('custom-head-code').value
        };
        
        localStorage.setItem('analyticsSettings', JSON.stringify(analyticsSettings));
        loadAnalyticsScripts();
        updateAnalyticsStats();
        alert('Analytics settings saved!');
      };

      window.loadAnalyticsScripts = () => {
        const settings = JSON.parse(localStorage.getItem('analyticsSettings') || '{}');
        
        if (settings.enabled && settings.ga4Id) {
          // Add Google Analytics
          if (!document.querySelector(`script[src*="${settings.ga4Id}"]`)) {
            const ga4Script = document.createElement('script');
            ga4Script.async = true;
            ga4Script.src = `https://www.googletagmanager.com/gtag/js?id=${settings.ga4Id}`;
            document.head.appendChild(ga4Script);
            
            const configScript = document.createElement('script');
            configScript.innerHTML = `
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments);}
              gtag('js', new Date());
              gtag('config', '${settings.ga4Id}');
            `;
            document.head.appendChild(configScript);
          }
        }
        
        if (settings.enabled && settings.gtmId) {
          // Add Google Tag Manager
          if (!document.querySelector(`script[src*="${settings.gtmId}"]`)) {
            const gtmScript = document.createElement('script');
            gtmScript.innerHTML = `
              (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
              new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
              j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
              'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
              })(window,document,'script','dataLayer','${settings.gtmId}');
            `;
            document.head.appendChild(gtmScript);
          }
        }
        
        if (settings.customHeadCode) {
          const customScript = document.createElement('div');
          customScript.innerHTML = settings.customHeadCode;
          document.head.appendChild(customScript);
        }
      };

      window.updateAnalyticsStats = () => {
        const hostels = JSON.parse(localStorage.getItem('hostels') || '[]');
        const chatMessages = JSON.parse(localStorage.getItem('chatMessages') || '[]');
        const admins = JSON.parse(localStorage.getItem('admins') || '[]');
        
        document.getElementById('total-hostels').textContent = hostels.length;
        document.getElementById('total-messages').textContent = chatMessages.length;
        document.getElementById('total-admins').textContent = admins.length;
        
        // Calculate page load time
        if (window.performance) {
          const loadTime = Math.round(window.performance.timing.loadEventEnd - window.performance.timing.navigationStart);
          document.getElementById('load-time').textContent = `${loadTime}ms`;
        }
      };

      window.loadAnalyticsSettings = () => {
        const settings = JSON.parse(localStorage.getItem('analyticsSettings') || '{}');
        
        if (settings.ga4Id) document.getElementById('ga4-id').value = settings.ga4Id;
        if (settings.gtmId) document.getElementById('gtm-id').value = settings.gtmId;
        if (settings.facebookPixel) document.getElementById('facebook-pixel').value = settings.facebookPixel;
        if (settings.customHeadCode) document.getElementById('custom-head-code').value = settings.customHeadCode;
        document.getElementById('analytics-enabled').checked = settings.enabled !== false;
        
        updateAnalyticsStats();
      };

      // Backup & Export Functions
      window.exportAllData = () => {
        const allData = {
          hostels: JSON.parse(localStorage.getItem('hostels') || '[]'),
          chatMessages: JSON.parse(localStorage.getItem('chatMessages') || '[]'),
          socialSettings: JSON.parse(localStorage.getItem('socialSettings') || '{}'),
          seoSettings: JSON.parse(localStorage.getItem('seoSettings') || '{}'),
          analyticsSettings: JSON.parse(localStorage.getItem('analyticsSettings') || '{}'),
          chatSettings: JSON.parse(localStorage.getItem('chatSettings') || '{}'),
          admins: JSON.parse(localStorage.getItem('admins') || '[]'),
          exportDate: new Date().toISOString(),
          version: '1.0'
        };
        
        downloadJSON(allData, `hostall-backup-${new Date().toISOString().split('T')[0]}.json`);
      };

      window.exportHostels = () => {
        const hostels = JSON.parse(localStorage.getItem('hostels') || '[]');
        downloadJSON(hostels, `hostall-hostels-${new Date().toISOString().split('T')[0]}.json`);
      };

      window.exportChatMessages = () => {
        const chatMessages = JSON.parse(localStorage.getItem('chatMessages') || '[]');
        downloadJSON(chatMessages, `hostall-chats-${new Date().toISOString().split('T')[0]}.json`);
      };

      window.exportSettings = () => {
        const settings = {
          socialSettings: JSON.parse(localStorage.getItem('socialSettings') || '{}'),
          seoSettings: JSON.parse(localStorage.getItem('seoSettings') || '{}'),
          analyticsSettings: JSON.parse(localStorage.getItem('analyticsSettings') || '{}'),
          chatSettings: JSON.parse(localStorage.getItem('chatSettings') || '{}')
        };
        downloadJSON(settings, `hostall-settings-${new Date().toISOString().split('T')[0]}.json`);
      };

      window.downloadJSON = (data, filename) => {
        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = filename;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        // Update last backup time
        localStorage.setItem('lastBackup', new Date().toISOString());
        document.getElementById('last-backup').value = new Date().toLocaleString();
      };

      let importFileData = null;
      window.handleFileImport = (input) => {
        const file = input.files[0];
        if (!file) return;
        
        const reader = new FileReader();
        reader.onload = (e) => {
          try {
            importFileData = JSON.parse(e.target.result);
            alert('File loaded successfully! Click "Import Data" to proceed.');
          } catch (error) {
            alert('Invalid file format. Please select a valid JSON backup file.');
            input.value = '';
          }
        };
        reader.readAsText(file);
      };

      window.importData = () => {
        if (!importFileData) {
          alert('Please select a file first.');
          return;
        }
        
        if (!confirm('This will overwrite existing data. Are you sure?')) {
          return;
        }
        
        try {
          if (document.getElementById('import-hostels').checked && importFileData.hostels) {
            localStorage.setItem('hostels', JSON.stringify(importFileData.hostels));
          }
          
          if (document.getElementById('import-chats').checked && importFileData.chatMessages) {
            localStorage.setItem('chatMessages', JSON.stringify(importFileData.chatMessages));
          }
          
          if (document.getElementById('import-settings').checked) {
            if (importFileData.socialSettings) localStorage.setItem('socialSettings', JSON.stringify(importFileData.socialSettings));
            if (importFileData.seoSettings) localStorage.setItem('seoSettings', JSON.stringify(importFileData.seoSettings));
            if (importFileData.analyticsSettings) localStorage.setItem('analyticsSettings', JSON.stringify(importFileData.analyticsSettings));
            if (importFileData.chatSettings) localStorage.setItem('chatSettings', JSON.stringify(importFileData.chatSettings));
          }
          
          if (document.getElementById('import-admins').checked && importFileData.admins) {
            localStorage.setItem('admins', JSON.stringify(importFileData.admins));
          }
          
          alert('Data imported successfully! Please refresh the page.');
          location.reload();
        } catch (error) {
          alert('Error importing data: ' + error.message);
        }
      };

      window.saveBackupSettings = () => {
        const backupSettings = {
          autoBackupEnabled: document.getElementById('auto-backup-enabled').checked,
          frequency: document.getElementById('backup-frequency').value
        };
        localStorage.setItem('backupSettings', JSON.stringify(backupSettings));
        alert('Backup settings saved!');
      };

      window.clearAllData = () => {
        showWarning({
          title: 'Clear ALL Data',
          message: 'This will permanently delete ALL website data including hostels, admin users, feedback, FAQs, and all settings. This action cannot be undone!',
          item: '‚ö†Ô∏è ALL DATA WILL BE LOST PERMANENTLY',
          icon: 'üí•',
          confirmText: 'DELETE EVERYTHING',
          cancelText: 'Cancel',
          onConfirm: () => {
            // Show second warning for critical action
            showWarning({
              title: 'FINAL WARNING',
              message: 'Last chance! Are you absolutely sure you want to delete everything?',
              item: 'üî• This will clear the entire database permanently!',
              icon: '‚ö†Ô∏è',
              confirmText: 'YES, DELETE ALL',
              cancelText: 'Stop, Keep Data',
              onConfirm: () => {
                clearDataNow();
              }
            });
          }
        });
      };

      function clearDataNow() {
        
        localStorage.clear();
        alert('All data has been cleared.');
        location.reload();
      };

      window.resetToDefaults = () => {
        if (!confirm('This will reset the website to default settings but keep your data. Continue?')) {
          return;
        }
        
        localStorage.removeItem('socialSettings');
        localStorage.removeItem('seoSettings');
        localStorage.removeItem('analyticsSettings');
        localStorage.removeItem('chatSettings');
        localStorage.removeItem('backupSettings');
        
        alert('Website reset to defaults. Please refresh the page.');
        location.reload();
      };

      window.loadBackupSettings = () => {
        const settings = JSON.parse(localStorage.getItem('backupSettings') || '{}');
        const lastBackup = localStorage.getItem('lastBackup');
        
        document.getElementById('auto-backup-enabled').checked = settings.autoBackupEnabled || false;
        document.getElementById('backup-frequency').value = settings.frequency || 'weekly';
        document.getElementById('last-backup').value = lastBackup ? new Date(lastBackup).toLocaleString() : 'Never';
      };

      // Night Mode Functions
      window.toggleNightMode = () => {
        document.body.classList.toggle('night-mode');
        const isNightMode = document.body.classList.contains('night-mode');
        localStorage.setItem('nightMode', isNightMode);
        
        // Update mobile menu toggle state
        document.querySelector('.mobile-menu-toggle').classList.toggle('active', 
          document.getElementById('mobile-side-panel').classList.contains('open'));
      };

      // Mobile Menu Functions
      window.toggleMobileMenu = () => {
        const panel = document.getElementById('mobile-side-panel');
        const overlay = document.getElementById('mobile-overlay');
        const toggle = document.querySelector('.mobile-menu-toggle');
        
        panel.classList.toggle('open');
        overlay.classList.toggle('show');
        toggle.classList.toggle('active');
      };

      // Mobile Bottom Navigation Functions
      window.updateMobileBottomNav = (section) => {
        document.querySelectorAll('.mobile-nav-item').forEach(item => {
          item.classList.remove('active');
        });
        
        const activeItem = document.querySelector(`.mobile-nav-item[onclick*="'${section}'"]`);
        if (activeItem) {
          activeItem.classList.add('active');
        }
      };

      window.setActiveMobileNav = (element) => {
        document.querySelectorAll('.mobile-nav-item').forEach(item => {
          item.classList.remove('active');
        });
        element.classList.add('active');
      };

      // Filter Management Functions
      window.addFilterItem = (containerId) => {
        const container = document.getElementById(containerId);
        const filterItem = document.createElement('div');
        filterItem.className = 'filter-item';
        filterItem.innerHTML = `
          <input type="text" placeholder="${containerId.includes('location') ? 'Location name' : 
                                         containerId.includes('facility') ? 'Facility name' : 
                                         'Price range'}">
          <button onclick="removeFilterItem(this)" class="remove-btn">√ó</button>
        `;
        container.appendChild(filterItem);
      };

      window.removeFilterItem = (button) => {
        button.parentElement.remove();
      };

      window.saveFilterOptions = () => {
        const locations = [];
        const facilities = [];
        const prices = [];

        // Collect location filters
        document.querySelectorAll('#location-filters .filter-item input').forEach(input => {
          if (input.value.trim()) {
            locations.push(input.value.trim());
          }
        });

        // Collect facility filters
        document.querySelectorAll('#facility-filters .filter-item input').forEach(input => {
          if (input.value.trim()) {
            facilities.push(input.value.trim());
          }
        });

        // Collect price filters
        document.querySelectorAll('#price-filters .filter-item input').forEach(input => {
          if (input.value.trim()) {
            prices.push(input.value.trim());
          }
        });

        // Save to localStorage
        const filterOptions = {
          locations: locations,
          facilities: facilities,
          prices: prices
        };

        localStorage.setItem('filter-options', JSON.stringify(filterOptions));

        // Update the actual filter dropdowns
        updateFilterDropdowns(filterOptions);

        // Show success message
        const statusElement = document.getElementById('filter-save-status');
        statusElement.textContent = '‚úÖ Filter options saved successfully!';
        statusElement.style.color = '#10B981';
        
        setTimeout(() => {
          statusElement.textContent = '';
        }, 3000);
      };

      window.updateFilterDropdowns = (filterOptions) => {
        // Update location filter with dynamic hostel locations
        const locationSelect = document.getElementById('location-filter');
        if (locationSelect) {
          locationSelect.innerHTML = '<option value="">All Locations</option>';
          
          // Get unique locations from actual hostel data
          const uniqueLocations = new Set();
          
          // Extract locations from localStorage hostels
          const storedHostels = JSON.parse(localStorage.getItem('hostels') || '[]');
          storedHostels.forEach(hostel => {
            if (hostel.location && hostel.location.trim()) {
              uniqueLocations.add(hostel.location.trim());
            }
          });
          
          // Also include locations from filter options as fallback
          if (filterOptions && filterOptions.locations) {
            filterOptions.locations.forEach(location => {
              if (location && location.trim()) {
                uniqueLocations.add(location.trim());
              }
            });
          }
          
          // Add default locations if none exist
          if (uniqueLocations.size === 0) {
            uniqueLocations.add('Near Punjab University');
            uniqueLocations.add('Gulberg');
            uniqueLocations.add('DHA');
            uniqueLocations.add('Johar Town');
          }
          
          // Convert set to sorted array and populate dropdown
          Array.from(uniqueLocations).sort().forEach(location => {
            const option = document.createElement('option');
            option.value = location.toLowerCase();
            option.textContent = location;
            locationSelect.appendChild(option);
          });
        }

        // Update facility filter
        const facilitySelect = document.getElementById('facility-filter');
        if (facilitySelect) {
          facilitySelect.innerHTML = '<option value="">All Facilities</option>';
          filterOptions.facilities.forEach(facility => {
            const option = document.createElement('option');
            option.value = facility;
            option.textContent = facility;
            facilitySelect.appendChild(option);
          });
        }
      };

      // Load filter options on page load
      window.loadFilterOptions = () => {
        const filterOptions = JSON.parse(localStorage.getItem('filter-options') || '{"locations":["Near Punjab University","Gulberg","DHA"],"facilities":["WiFi","AC","Parking","Laundry"],"prices":["Under PKR 10,000","PKR 10,000 - 15,000","Above PKR 15,000"]}');
        
        // Update filter dropdowns
        updateFilterDropdowns(filterOptions);
      };

      // Refresh location filters when hostels are updated
      window.refreshLocationFilters = () => {
        const filterOptions = JSON.parse(localStorage.getItem('filter-options') || '{"locations":[],"facilities":["WiFi","AC","Parking","Laundry"],"prices":["Under PKR 10,000","PKR 10,000 - 15,000","Above PKR 15,000"]}');
        updateFilterDropdowns(filterOptions);
      };

      // Image upload handler
      window.handleImageUpload = (type, input) => {
        const file = input.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = function(e) {
          const base64Data = e.target.result;
          
          // Save to localStorage
          const websiteImages = JSON.parse(localStorage.getItem('website-images') || '{}');
          websiteImages[type] = base64Data;
          localStorage.setItem('website-images', JSON.stringify(websiteImages));
          
          // Update preview
          const previewElement = document.getElementById(type + '-preview');
          if (previewElement) {
            const img = previewElement.querySelector('img');
            if (img) {
              img.src = base64Data;
            } else {
              previewElement.innerHTML = `<img src="${base64Data}" alt="${type}" style="max-width: 150px; max-height: 100px; object-fit: cover; border-radius: 8px;">`;
            }
          }
          
          // Apply changes to website
          applyImageChanges(type, base64Data);
          
          alert('Image uploaded and applied successfully!');
        };
        reader.readAsDataURL(file);
      };

      // Apply image changes to the website
      window.applyImageChanges = (type, imageData) => {
        switch(type) {
          case 'logo':
            const logoElements = document.querySelectorAll('.logo img, .brand-logo');
            logoElements.forEach(element => {
              element.src = imageData;
              element.style.display = 'inline-block';
            });
            
            // Keep the text logo visible alongside the image
            const logoTextElements = document.querySelectorAll('.logo .host, .logo .all');
            logoTextElements.forEach(element => {
              element.style.display = 'inline';
            });
            break;
            
          case 'homepage-hero':
            // Update the homepage hero image
            const homepageHeroImg = document.getElementById('homepage-hero-image');
            if (homepageHeroImg) {
              homepageHeroImg.src = imageData;
            }
            
            // Update hero preview in admin panel
            const heroPreview = document.getElementById('hero-preview');
            if (heroPreview) {
              heroPreview.innerHTML = `<img src="${imageData}" alt="Hero" style="width: 200px; height: 100px; object-fit: cover; border-radius: 8px;">`;
            }
            
            // Store in localStorage for persistence
            localStorage.setItem('homepage-hero-image', imageData);
            break;
            
          case 'hero':
            const heroSection = document.querySelector('.hero');
            if (heroSection) {
              heroSection.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(${imageData})`;
              heroSection.style.backgroundSize = 'cover';
              heroSection.style.backgroundPosition = 'center';
            }
            break;
            
          case 'about-left':
          case 'about-center':
          case 'about-right':
            const aboutImages = document.querySelectorAll('.about-image');
            const imageIndex = type === 'about-left' ? 0 : type === 'about-center' ? 1 : 2;
            if (aboutImages[imageIndex]) {
              aboutImages[imageIndex].src = imageData;
            }
            break;
            
          case 'hostel1':
          case 'hostel2':
          case 'hostel3':
          case 'hostel4':
          case 'hostel5':
          case 'hostel6':
            // Get the hostel number from the type (e.g., 'hostel1' -> 1)
            const hostelNum = parseInt(type.replace('hostel', ''));
            
            // Update the hostel data in the mockHostels array
            if (hostelNum > 0 && hostelNum <= window.mockHostels.length) {
              window.mockHostels[hostelNum - 1].img = imageData;
              
              // Re-render hostels to update the display
              if (typeof window.renderHostels === 'function') {
                window.renderHostels();
              }
            }
            break;
            
          case 'og-image':
            // Update meta tag for og:image
            let ogImage = document.querySelector('meta[property="og:image"]');
            if (ogImage) {
              ogImage.content = imageData;
            } else {
              ogImage = document.createElement('meta');
              ogImage.setAttribute('property', 'og:image');
              ogImage.content = imageData;
              document.head.appendChild(ogImage);
            }
            break;
            
          case 'twitter-image':
            // Update meta tag for twitter:image
            let twitterImage = document.querySelector('meta[name="twitter:image"]');
            if (twitterImage) {
              twitterImage.content = imageData;
            } else {
              twitterImage = document.createElement('meta');
              twitterImage.setAttribute('name', 'twitter:image');
              twitterImage.content = imageData;
              document.head.appendChild(twitterImage);
            }
            break;
            
          case 'why-hostall-bg':
            // Update the Why HOSTALL section background
            const whyHostallSection = document.querySelector('.why-section');
            if (whyHostallSection) {
              whyHostallSection.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url(${imageData})`;
              whyHostallSection.style.backgroundSize = 'cover';
              whyHostallSection.style.backgroundPosition = 'center';
            }
            break;
        }
      };

      // Load saved images on page load
      window.loadSavedImages = () => {
        const websiteImages = JSON.parse(localStorage.getItem('website-images') || '{}');
        Object.keys(websiteImages).forEach(type => {
          applyImageChanges(type, websiteImages[type]);
          
          // Update admin preview
          const previewElement = document.getElementById(type + '-preview');
          if (previewElement) {
            const img = previewElement.querySelector('img');
            if (img) {
              img.src = websiteImages[type];
            } else {
              // For preview elements that might not have an img element yet
              previewElement.innerHTML = `<img src="${websiteImages[type]}" alt="${type}" style="max-width: 150px; max-height: 100px; object-fit: cover; border-radius: 8px;">`;
            }
          }
        });
        
        // Handle homepage hero image separately (legacy storage)
        const savedHeroImage = localStorage.getItem('homepage-hero-image');
        if (savedHeroImage) {
          const homepageHeroImg = document.getElementById('homepage-hero-image');
          if (homepageHeroImg) {
            homepageHeroImg.src = savedHeroImage;
          }
          
          const heroPreview = document.getElementById('hero-preview');
          if (heroPreview) {
            heroPreview.innerHTML = `<img src="${savedHeroImage}" alt="Hero" style="width: 200px; height: 100px; object-fit: cover; border-radius: 8px;">`;
          }
        }
        
        // Load the hostel images for the featured listings
        if (window.mockHostels) {
          for (let i = 0; i < window.mockHostels.length && i < 6; i++) {
            const hostelImgKey = `hostel${i+1}`;
            if (websiteImages[hostelImgKey]) {
              window.mockHostels[i].img = websiteImages[hostelImgKey];
            }
          }
          
          // Re-render hostels to apply the saved images
          if (typeof window.renderHostels === 'function') {
            window.renderHostels();
          }
        }
      };

      // Save analytics settings
      window.saveAnalyticsSettings = () => {
        const ga4Id = document.getElementById('ga4-id').value;
        const gtmId = document.getElementById('gtm-id').value;
        const analyticsEnabled = document.getElementById('analytics-enabled').checked;
        
        const analyticsSettings = {
          ga4Id: ga4Id,
          gtmId: gtmId,
          enabled: analyticsEnabled
        };
        
        localStorage.setItem('analytics-settings', JSON.stringify(analyticsSettings));
        
        // Apply Google Analytics code if enabled and ID provided
        if (analyticsEnabled && ga4Id) {
          // Add Google Analytics script to head
          const existingScript = document.querySelector('[data-ga4]');
          if (existingScript) {
            existingScript.remove();
          }
          
          const script = document.createElement('script');
          script.src = `https://www.googletagmanager.com/gtag/js?id=${ga4Id}`;
          script.async = true;
          script.setAttribute('data-ga4', 'true');
          document.head.appendChild(script);
          
          const configScript = document.createElement('script');
          configScript.setAttribute('data-ga4', 'true');
          configScript.innerHTML = `
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', '${ga4Id}');
          `;
          document.head.appendChild(configScript);
        }
        
        alert('Analytics settings saved successfully!');
      };

      // Load saved analytics settings
      window.loadAnalyticsSettings = () => {
        const analyticsSettings = JSON.parse(localStorage.getItem('analytics-settings') || '{}');
        
        if (analyticsSettings.ga4Id) {
          document.getElementById('ga4-id').value = analyticsSettings.ga4Id;
        }
        if (analyticsSettings.gtmId) {
          document.getElementById('gtm-id').value = analyticsSettings.gtmId;
        }
        if (analyticsSettings.enabled !== undefined) {
          document.getElementById('analytics-enabled').checked = analyticsSettings.enabled;
        }
        
        // Apply analytics if enabled
        if (analyticsSettings.enabled && analyticsSettings.ga4Id) {
          // Apply analytics code
          saveAnalyticsSettings();
        }
      };

      // Add save branding button functionality
      window.addEventListener('DOMContentLoaded', function() {
        // Add change event listeners to color inputs
        const primaryColorInput = document.getElementById('primary-color');
        const secondaryColorInput = document.getElementById('secondary-color');
        
        if (primaryColorInput) {
          primaryColorInput.addEventListener('change', function() {
            const primaryColor = this.value;
            document.documentElement.style.setProperty('--primary-color', primaryColor);
            updateColorElements(primaryColor, document.getElementById('secondary-color').value);
          });
        }
        
        if (secondaryColorInput) {
          secondaryColorInput.addEventListener('change', function() {
            const secondaryColor = this.value;
            document.documentElement.style.setProperty('--secondary-color', secondaryColor);
            updateColorElements(document.getElementById('primary-color').value, secondaryColor);
          });
        }
      });

      // Load saved branding settings
      window.loadBrandingSettings = () => {
        const brandingSettings = JSON.parse(localStorage.getItem('branding-settings') || '{}');
        
        // Load saved homepage hero image
        const savedHeroImage = localStorage.getItem('homepage-hero-image');
        if (savedHeroImage) {
          const homepageHeroImg = document.getElementById('homepage-hero-image');
          if (homepageHeroImg) {
            homepageHeroImg.src = savedHeroImage;
          }
          
          // Update preview in admin panel
          const heroPreview = document.getElementById('hero-preview');
          if (heroPreview) {
            heroPreview.innerHTML = `<img src="${savedHeroImage}" alt="Hero" style="width: 200px; height: 100px; object-fit: cover; border-radius: 8px;">`;
          }
        }
        
        // Load saved images
        const websiteImages = JSON.parse(localStorage.getItem('website-images') || '{}');
        if (websiteImages.logo) {
          // Apply the logo if it exists
          applyImageChanges('logo', websiteImages.logo);
          
          // Update preview in admin panel
          const previewElement = document.getElementById('logo-preview');
          if (previewElement) {
            const img = previewElement.querySelector('img');
            if (img) {
              img.src = websiteImages.logo;
            } else {
              previewElement.innerHTML = `<img src="${websiteImages.logo}" alt="Logo" style="max-width: 100px; max-height: 100px;">`;
            }
          }
        }
        
        if (brandingSettings.primaryColor) {
          document.getElementById('primary-color').value = brandingSettings.primaryColor;
          document.documentElement.style.setProperty('--primary-color', brandingSettings.primaryColor);
        }
        if (brandingSettings.secondaryColor) {
          document.getElementById('secondary-color').value = brandingSettings.secondaryColor;
          document.documentElement.style.setProperty('--secondary-color', brandingSettings.secondaryColor);
        }
        
        // Apply saved colors to all elements
        if (brandingSettings.primaryColor || brandingSettings.secondaryColor) {
          updateColorElements(brandingSettings.primaryColor || '#8B5CF6', brandingSettings.secondaryColor || '#FF6B6B');
        }
        if (brandingSettings.logoText) {
          document.getElementById('logo-text').value = brandingSettings.logoText;
          const logoElements = document.querySelectorAll('.logo h1, .brand-name');
          logoElements.forEach(element => {
            element.textContent = brandingSettings.logoText;
          });
        }
        
        // Apply HOSTALL text color settings
        if (brandingSettings.hostallTextColor) {
          document.getElementById('hostall-text-color').value = brandingSettings.hostallTextColor;
          const logoTextSpan = document.querySelector('.logo span');
          if (logoTextSpan) {
            logoTextSpan.style.color = brandingSettings.hostallTextColor;
          }
        }
        
        // Apply HOST/ALL split color settings
        if (brandingSettings.hostColor) {
          document.getElementById('host-color').value = brandingSettings.hostColor;
          const hostElement = document.querySelector('.logo .host');
          if (hostElement) {
            hostElement.style.color = brandingSettings.hostColor;
          }
        }
        
        if (brandingSettings.allColor) {
          document.getElementById('all-color').value = brandingSettings.allColor;
          const allElement = document.querySelector('.logo .all');
          if (allElement) {
            allElement.style.color = brandingSettings.allColor;
          }
        }
      };

      // Load saved typography settings
      window.loadTypographySettings = () => {
        const typographySettings = JSON.parse(localStorage.getItem('typography-settings') || '{}');
        
        if (typographySettings.primaryFont) {
          document.getElementById('primary-font').value = typographySettings.primaryFont;
          document.body.style.fontFamily = typographySettings.primaryFont + ', sans-serif';
        }
        if (typographySettings.headingSize) {
          const headingSize = parseInt(typographySettings.headingSize);
          document.getElementById('heading-size').value = headingSize;
          document.documentElement.style.setProperty('--heading-size', headingSize + 'px');
        }
        if (typographySettings.bodySize) {
          const bodySize = parseInt(typographySettings.bodySize);
          document.getElementById('body-size').value = bodySize;
          document.documentElement.style.setProperty('--body-size', bodySize + 'px');
        }
      };

      // Forgot Password Functions
      window.showForgotPassword = () => {
        document.getElementById('forgot-password-modal').style.display = 'block';
      };

      window.closeForgotPassword = () => {
        document.getElementById('forgot-password-modal').style.display = 'none';
        document.getElementById('forgot-email').value = '';
      };

      window.sendPasswordReset = async () => {
        const email = document.getElementById('forgot-email').value;
        const errorDiv = document.getElementById('forgot-password-error');
        const successDiv = document.getElementById('forgot-password-success');
        const submitButton = document.getElementById('forgot-password-submit');
        
        // Clear previous messages
        errorDiv.style.display = 'none';
        successDiv.style.display = 'none';
        
        if (!email) {
          errorDiv.textContent = 'Please enter your email address';
          errorDiv.style.display = 'block';
          return;
        }
        
        // Disable submit button
        submitButton.disabled = true;
        submitButton.innerHTML = '<i class="hgi-stroke hgi-loading-01"></i> Sending...';
        
        try {
          // Check if admin exists with this email
          const admins = JSON.parse(localStorage.getItem('admins') || '[]');
          const admin = admins.find(a => a.user_email === email);
          
          if (!admin) {
            errorDiv.textContent = 'No admin account found with this email address';
            errorDiv.style.display = 'block';
            return;
          }
          
          // Generate secure reset code
          const resetCode = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
          const resetExpiry = new Date(Date.now() + 30 * 60 * 1000); // 30 minutes
          
          // Store password reset request
          const resetRequests = JSON.parse(localStorage.getItem('password-reset-requests') || '[]');
          resetRequests.push({
            email: email,
            resetCode: resetCode,
            timestamp: new Date().toISOString(),
            expiry: resetExpiry.toISOString(),
            status: 'pending',
            used: false
          });
          localStorage.setItem('password-reset-requests', JSON.stringify(resetRequests));
          
          // Send email notification (in production, this would be via email service)
          const emailMessage = `
            Password Reset Request for HOSTALL Admin
            
            Dear Admin,
            
            You have requested to reset your password for the HOSTALL admin panel.
            
            Reset Code: ${resetCode}
            Valid until: ${resetExpiry.toLocaleString()}
            
            To reset your password:
            1. Click the "Forgot Password?" button on the login page
            2. Enter this reset code
            3. Set your new password
            
            If you did not request this reset, please ignore this message.
            
            Best regards,
            HOSTALL Team
          `;
          
          // In production, integrate with email service like SendGrid, Nodemailer, etc.
          console.log('Email would be sent:', emailMessage);
          
          // Show success message
          successDiv.innerHTML = `
            <div style="background: #10b981; color: white; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
              <i class="hgi-stroke hgi-check-circle"></i>
              Reset code sent successfully! Check your email for the reset code.
            </div>
          `;
          successDiv.style.display = 'block';
          
          // Clear form
          document.getElementById('forgot-email').value = '';
          
          // Auto close after 3 seconds
          setTimeout(() => {
            closeForgotPassword();
          }, 3000);
          
        } catch (error) {
          errorDiv.textContent = 'An error occurred. Please try again.';
          errorDiv.style.display = 'block';
        } finally {
          // Re-enable submit button
          submitButton.disabled = false;
          submitButton.innerHTML = '<i class="hgi-stroke hgi-reset-password"></i> Send Reset Link';
        }
      };

      // New Admin Request Functions
      window.showNewAdminRequest = () => {
        // Populate hostel dropdown
        const hostels = JSON.parse(localStorage.getItem('hostels') || '[]');
        const hostelSelect = document.getElementById('new-admin-hostel');
        hostelSelect.innerHTML = '<option value="">Select a hostel...</option>';
        hostels.forEach(hostel => {
          hostelSelect.innerHTML += `<option value="${hostel.name}">${hostel.name}</option>`;
        });
        
        document.getElementById('new-admin-modal').style.display = 'block';
      };

      window.closeNewAdminRequest = () => {
        document.getElementById('new-admin-modal').style.display = 'none';
        document.getElementById('new-admin-name').value = '';
        document.getElementById('new-admin-email').value = '';
        document.getElementById('new-admin-type').value = 'full';
        document.getElementById('new-admin-hostel').value = '';
        document.getElementById('new-admin-reason').value = '';
        document.getElementById('hostel-selection').style.display = 'none';
      };

      window.toggleHostelSelection = () => {
        const type = document.getElementById('new-admin-type').value;
        const hostelSelection = document.getElementById('hostel-selection');
        hostelSelection.style.display = type === 'hostel' ? 'block' : 'none';
      };

      window.submitAdminRequest = () => {
        const name = document.getElementById('new-admin-name').value;
        const email = document.getElementById('new-admin-email').value;
        const type = document.getElementById('new-admin-type').value;
        const hostel = document.getElementById('new-admin-hostel').value;
        const reason = document.getElementById('new-admin-reason').value;
        
        if (!name || !email || !reason) {
          alert('Please fill in all required fields');
          return;
        }
        
        if (type === 'hostel' && !hostel) {
          alert('Please select a hostel');
          return;
        }
        
        // Store admin request
        const adminRequests = JSON.parse(localStorage.getItem('admin-requests') || '[]');
        adminRequests.push({
          id: Date.now(),
          name: name,
          email: email,
          type: type,
          hostel: hostel,
          reason: reason,
          timestamp: new Date().toISOString(),
          status: 'pending'
        });
        localStorage.setItem('admin-requests', JSON.stringify(adminRequests));
        
        showNotification('Your admin access request has been submitted successfully! You will be contacted once it\'s reviewed.', 'success');
        closeNewAdminRequest();
      };

      // Hostel Owner Registration Functions
      let currentRegistrationStep = 1;

      window.showHostelOwnerRegistration = () => {
        currentRegistrationStep = 1;
        updateRegistrationSteps();
        document.getElementById('hostel-owner-modal').style.display = 'block';
        document.body.style.overflow = 'hidden';
      };

      window.closeHostelOwnerRegistration = () => {
        document.getElementById('hostel-owner-modal').style.display = 'none';
        document.body.style.overflow = 'auto';
        clearRegistrationForm();
      };

      window.nextRegistrationStep = (step) => {
        if (step > currentRegistrationStep && !validateCurrentStep()) {
          return;
        }
        
        currentRegistrationStep = step;
        updateRegistrationSteps();
        showRegistrationStep(step);
        
        if (step === 3) {
          updateRegistrationSummary();
        }
      };

      function validateCurrentStep() {
        switch (currentRegistrationStep) {
          case 1:
            const name = document.getElementById('owner-name').value.trim();
            const email = document.getElementById('owner-email').value.trim();
            const phone = document.getElementById('owner-phone').value.trim();
            
            if (!name || !email || !phone) {
              showNotification('Please fill in all required fields in Step 1', 'error');
              return false;
            }
            
            if (!isValidEmail(email)) {
              showNotification('Please enter a valid email address', 'error');
              return false;
            }
            break;
            
          case 2:
            const hostelName = document.getElementById('hostel-name').value.trim();
            const location = document.getElementById('hostel-location').value.trim();
            const gender = document.getElementById('hostel-gender').value;
            const rent = document.getElementById('hostel-rent').value.trim();
            const description = document.getElementById('hostel-description').value.trim();
            
            if (!hostelName || !location || !gender || !rent || !description) {
              showNotification('Please fill in all required fields in Step 2', 'error');
              return false;
            }
            
            if (isNaN(rent) || rent <= 0) {
              showNotification('Please enter a valid rent amount', 'error');
              return false;
            }
            break;
            
          case 3:
            const termsAgreed = document.getElementById('terms-agreement').checked;
            const infoAccuracy = document.getElementById('info-accuracy').checked;
            
            if (!termsAgreed || !infoAccuracy) {
              showNotification('Please accept both terms and conditions', 'error');
              return false;
            }
            break;
        }
        return true;
      }

      function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
      }

      function updateRegistrationSteps() {
        for (let i = 1; i <= 3; i++) {
          const step = document.getElementById(`step-${i}`);
          if (i === currentRegistrationStep) {
            step.className = 'step active';
            step.style.background = '#8B5CF6';
            step.style.color = 'white';
          } else if (i < currentRegistrationStep) {
            step.className = 'step completed';
            step.style.background = '#10B981';
            step.style.color = 'white';
          } else {
            step.className = 'step';
            step.style.background = '#E2E8F0';
            step.style.color = '#4A5568';
          }
        }
      }

      function showRegistrationStep(step) {
        // Hide all steps
        for (let i = 1; i <= 3; i++) {
          document.getElementById(`registration-step-${i}`).style.display = 'none';
        }
        // Show current step
        document.getElementById(`registration-step-${step}`).style.display = 'block';
      }

      function updateRegistrationSummary() {
        const name = document.getElementById('owner-name').value;
        const email = document.getElementById('owner-email').value;
        const phone = document.getElementById('owner-phone').value;
        const whatsapp = document.getElementById('owner-whatsapp').value;
        const hostelName = document.getElementById('hostel-name').value;
        const location = document.getElementById('hostel-location').value;
        const gender = document.getElementById('hostel-gender').value;
        const rent = document.getElementById('hostel-rent').value;
        
        const summary = `
          <strong>Personal Information:</strong><br>
          ‚Ä¢ Name: ${name}<br>
          ‚Ä¢ Email: ${email}<br>
          ‚Ä¢ Phone: ${phone}<br>
          ${whatsapp ? `‚Ä¢ WhatsApp: ${whatsapp}<br>` : ''}
          <br>
          <strong>Hostel Information:</strong><br>
          ‚Ä¢ Name: ${hostelName}<br>
          ‚Ä¢ Location: ${location}<br>
          ‚Ä¢ Gender: ${gender}<br>
          ‚Ä¢ Monthly Rent: PKR ${rent}<br>
        `;
        
        document.getElementById('registration-summary').innerHTML = summary;
      }

      function clearRegistrationForm() {
        const fields = [
          'owner-name', 'owner-email', 'owner-phone', 'owner-whatsapp',
          'hostel-name', 'hostel-location', 'hostel-gender', 'hostel-rent', 'hostel-description'
        ];
        
        fields.forEach(field => {
          const element = document.getElementById(field);
          if (element) element.value = '';
        });
        
        document.getElementById('terms-agreement').checked = false;
        document.getElementById('info-accuracy').checked = false;
        
        currentRegistrationStep = 1;
        showRegistrationStep(1);
        updateRegistrationSteps();
      }

      window.submitHostelOwnerRegistration = () => {
        if (!validateCurrentStep()) {
          return;
        }
        
        const registrationData = {
          id: Date.now(),
          type: 'hostel-owner',
          personal: {
            name: document.getElementById('owner-name').value.trim(),
            email: document.getElementById('owner-email').value.trim(),
            phone: document.getElementById('owner-phone').value.trim(),
            whatsapp: document.getElementById('owner-whatsapp').value.trim()
          },
          hostel: {
            name: document.getElementById('hostel-name').value.trim(),
            location: document.getElementById('hostel-location').value.trim(),
            gender: document.getElementById('hostel-gender').value,
            rent: document.getElementById('hostel-rent').value.trim(),
            description: document.getElementById('hostel-description').value.trim()
          },
          timestamp: new Date().toISOString(),
          status: 'pending'
        };
        
        // Store registration
        const registrations = JSON.parse(localStorage.getItem('hostel-registrations') || '[]');
        registrations.push(registrationData);
        localStorage.setItem('hostel-registrations', JSON.stringify(registrations));
        
        // Also create admin request for approval
        const adminRequests = JSON.parse(localStorage.getItem('admin-requests') || '[]');
        adminRequests.push({
          id: Date.now() + 1,
          name: registrationData.personal.name,
          email: registrationData.personal.email,
          type: 'hostel',
          hostel: registrationData.hostel.name,
          reason: `Hostel owner registration for ${registrationData.hostel.name}`,
          timestamp: new Date().toISOString(),
          status: 'pending',
          registrationId: registrationData.id
        });
        localStorage.setItem('admin-requests', JSON.stringify(adminRequests));
        
        showNotification('Registration submitted successfully! We will contact you within 24-48 hours.', 'success');
        closeHostelOwnerRegistration();
        
        // Show success modal
        setTimeout(() => {
          showRegistrationSuccess(registrationData);
        }, 500);
      };

      function showRegistrationSuccess(data) {
        showWarning({
          title: 'Registration Successful! üéâ',
          message: `Thank you ${data.personal.name}! Your hostel registration has been submitted successfully.`,
          item: `üìß Confirmation details sent to: ${data.personal.email}`,
          icon: '‚úÖ',
          confirmText: 'Got it!',
          cancelText: '',
          onConfirm: () => {},
          onCancel: () => {}
        });
      }

      // New Registration Page Functions
      let currentRegStep = 1;

      window.showRegistrationPage = () => {
        show('register');
        currentRegStep = 1;
        updateRegProgress();
        showRegStep(1);
        clearRegForm();
      };

      window.nextRegStep = (step) => {
        if (step > currentRegStep && !validateRegStep()) {
          return;
        }
        
        currentRegStep = step;
        updateRegProgress();
        showRegStep(step);
        
        if (step === 3) {
          updateRegSummary();
        }
      };

      function validateRegStep() {
        switch (currentRegStep) {
          case 1:
            const name = document.getElementById('reg-owner-name').value.trim();
            const email = document.getElementById('reg-owner-email').value.trim();
            const phone = document.getElementById('reg-owner-phone').value.trim();
            
            if (!name || !email || !phone) {
              showNotification('Please fill in all required fields', 'error');
              return false;
            }
            
            if (!isValidEmail(email)) {
              showNotification('Please enter a valid email address', 'error');
              return false;
            }
            break;
            
          case 2:
            const hostelName = document.getElementById('reg-hostel-name').value.trim();
            const location = document.getElementById('reg-hostel-location').value.trim();
            const gender = document.getElementById('reg-hostel-gender').value;
            const roomPrices = getRegRoomPrices();
            const facilities = getRegFacilities();
            
            if (!hostelName || !location || !gender) {
              showNotification('Please fill in all required fields', 'error');
              return false;
            }
            
            if (roomPrices.length === 0) {
              showNotification('Please add at least one room type with pricing', 'error');
              return false;
            }
            
            if (facilities.length === 0) {
              showNotification('Please select at least one facility for your hostel', 'error');
              return false;
            }
            
            // Validate room prices
            for (let room of roomPrices) {
              if (!room.minPrice || isNaN(room.minPrice) || room.minPrice <= 0) {
                showNotification('Please enter valid minimum prices for all room types', 'error');
                return false;
              }
              if (!room.maxPrice || isNaN(room.maxPrice) || room.maxPrice <= 0) {
                showNotification('Please enter valid maximum prices for all room types', 'error');
                return false;
              }
              if (parseInt(room.maxPrice) < parseInt(room.minPrice)) {
                showNotification('Maximum price must be greater than or equal to minimum price', 'error');
                return false;
              }
            }
            break;
            
          case 3:
            const termsAccepted = document.getElementById('reg-terms').checked;
            if (!termsAccepted) {
              showNotification('Please accept the terms and conditions', 'error');
              return false;
            }
            break;
        }
        return true;
      }

      function updateRegProgress() {
        for (let i = 1; i <= 3; i++) {
          const step = document.getElementById(`reg-step-${i}`);
          const circle = step.querySelector('div');
          const text = step.querySelector('span');
          
          if (i <= currentRegStep) {
            circle.style.background = '#8B5CF6';
            circle.style.color = 'white';
            text.style.color = '#8B5CF6';
            text.style.fontWeight = '600';
          } else {
            circle.style.background = '#E2E8F0';
            circle.style.color = '#4A5568';
            text.style.color = '#4A5568';
            text.style.fontWeight = '400';
          }
        }
      }

      function showRegStep(step) {
        // Hide all steps
        for (let i = 1; i <= 3; i++) {
          document.getElementById(`reg-form-step-${i}`).style.display = 'none';
        }
        // Show current step
        document.getElementById(`reg-form-step-${step}`).style.display = 'block';
      }

      function updateRegSummary() {
        const name = document.getElementById('reg-owner-name').value;
        const email = document.getElementById('reg-owner-email').value;
        const phone = document.getElementById('reg-owner-phone').value;
        const whatsapp = document.getElementById('reg-owner-whatsapp').value;
        const hostelName = document.getElementById('reg-hostel-name').value;
        const location = document.getElementById('reg-hostel-location').value;
        const gender = document.getElementById('reg-hostel-gender').value;
        const roomPrices = getRegRoomPrices();
        const rentDisplay = formatRegPriceRange(roomPrices);
        
        const summary = `
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
            <div>
              <h5 style="color: #2D3748; margin-bottom: 0.75rem;">üë§ Personal Information</h5>
              <div style="font-size: 0.9rem; color: #4A5568; line-height: 1.6;">
                <strong>Name:</strong> ${name}<br>
                <strong>Email:</strong> ${email}<br>
                <strong>Phone:</strong> ${phone}<br>
                ${whatsapp ? `<strong>WhatsApp:</strong> ${whatsapp}<br>` : ''}
              </div>
            </div>
            <div>
              <h5 style="color: #2D3748; margin-bottom: 0.75rem;">üè† Hostel Information</h5>
              <div style="font-size: 0.9rem; color: #4A5568; line-height: 1.6;">
                <strong>Name:</strong> ${hostelName}<br>
                <strong>Location:</strong> ${location}<br>
                <strong>Gender:</strong> ${gender}<br>
                <strong>Rent:</strong> ${rentDisplay}<br>
              </div>
            </div>
          </div>
        `;
        
        document.getElementById('reg-summary').innerHTML = summary;
      }

      function clearRegForm() {
        const fields = [
          'reg-owner-name', 'reg-owner-email', 'reg-owner-phone', 'reg-owner-whatsapp',
          'reg-hostel-name', 'reg-hostel-location', 'reg-hostel-gender', 'reg-hostel-description'
        ];
        
        fields.forEach(field => {
          const element = document.getElementById(field);
          if (element) element.value = '';
        });
        
        document.getElementById('reg-terms').checked = false;
        
        // Clear room types container and add one default room type
        const regContainer = document.getElementById('reg-room-types-container');
        if (regContainer) {
          regContainer.innerHTML = `
            <div class="reg-room-type-item" style="display: flex; gap: 1rem; margin-bottom: 0.5rem; align-items: center; background: white; padding: 0.75rem; border-radius: 6px;">
              <div style="flex: 1;">
                <select class="reg-room-type-select" style="width: 100%; padding: 0.5rem; border: 1px solid #E2E8F0; border-radius: 4px;">
                  <option value="1-bed">1-Bed Room</option>
                  <option value="2-bed">2-Bed Room</option>
                  <option value="3-bed">3-Bed Room</option>
                  <option value="4-bed">4-Bed Room</option>
                  <option value="5-bed">5-Bed Room</option>
                  <option value="6-bed">6-Bed Room</option>
                  <option value="dormitory">Dormitory</option>
                </select>
              </div>
              <div style="flex: 1; display: flex; align-items: center; gap: 0.5rem;">
                <span style="font-size: 0.9rem;">PKR</span>
                <input type="number" class="reg-room-min-price" placeholder="Min" style="flex: 1; padding: 0.5rem; border: 1px solid #E2E8F0; border-radius: 4px;">
              </div>
              <span style="font-size: 0.9rem;">to</span>
              <div style="flex: 1; display: flex; align-items: center; gap: 0.5rem;">
                <span style="font-size: 0.9rem;">PKR</span>
                <input type="number" class="reg-room-max-price" placeholder="Max" style="flex: 1; padding: 0.5rem; border: 1px solid #E2E8F0; border-radius: 4px;">
              </div>
              <button type="button" class="remove-reg-room-type" onclick="this.closest('.reg-room-type-item').remove(); validateRegRoomPrices();" style="background: #EF4444; color: white; border: none; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 1.1rem;">√ó</button>
            </div>
          `;
        }
        
        // Clear all facility checkboxes
        document.querySelectorAll('.reg-facility-checkbox').forEach(checkbox => {
          checkbox.checked = false;
        });
      }

      window.submitRegistration = () => {
        if (!validateRegStep()) {
          return;
        }
        
        const registrationData = {
          id: Date.now(),
          type: 'hostel-owner',
          personal: {
            name: document.getElementById('reg-owner-name').value.trim(),
            email: document.getElementById('reg-owner-email').value.trim(),
            phone: document.getElementById('reg-owner-phone').value.trim(),
            whatsapp: document.getElementById('reg-owner-whatsapp').value.trim()
          },
          hostel: {
            name: document.getElementById('reg-hostel-name').value.trim(),
            location: document.getElementById('reg-hostel-location').value.trim(),
            gender: document.getElementById('reg-hostel-gender').value,
            roomPrices: getRegRoomPrices(),
            facilities: getRegFacilities(),
            description: document.getElementById('reg-hostel-description').value.trim()
          },
          timestamp: new Date().toISOString(),
          status: 'pending'
        };
        
        // Store registration
        const registrations = JSON.parse(localStorage.getItem('hostel-registrations') || '[]');
        registrations.push(registrationData);
        localStorage.setItem('hostel-registrations', JSON.stringify(registrations));
        
        // Also create admin request for approval
        const adminRequests = JSON.parse(localStorage.getItem('admin-requests') || '[]');
        adminRequests.push({
          id: Date.now() + 1,
          name: registrationData.personal.name,
          email: registrationData.personal.email,
          type: 'hostel',
          hostel: registrationData.hostel.name,
          reason: `Hostel owner registration for ${registrationData.hostel.name}`,
          timestamp: new Date().toISOString(),
          status: 'pending',
          registrationId: registrationData.id
        });
        localStorage.setItem('admin-requests', JSON.stringify(adminRequests));
        
        showNotification('Registration submitted successfully! We will contact you within 24-48 hours.', 'success');
        
        // Show success and redirect to home
        setTimeout(() => {
          showRegistrationSuccess(registrationData);
          setTimeout(() => {
            show('home');
          }, 2000);
        }, 1000);
      };

      // Registration Management Functions
      window.renderRegistrations = () => {
        const registrations = JSON.parse(localStorage.getItem('hostel-registrations') || '[]');
        const filter = document.getElementById('registration-status-filter')?.value || '';
        
        let filteredRegistrations = registrations;
        if (filter) {
          filteredRegistrations = registrations.filter(reg => reg.status === filter);
        }
        
        // Update counts
        const pending = registrations.filter(r => r.status === 'pending').length;
        const approved = registrations.filter(r => r.status === 'approved').length;
        const rejected = registrations.filter(r => r.status === 'rejected').length;
        
        const pendingEl = document.getElementById('pending-registrations-count');
        const approvedEl = document.getElementById('approved-registrations-count');
        const rejectedEl = document.getElementById('rejected-registrations-count');
        
        if (pendingEl) pendingEl.textContent = pending;
        if (approvedEl) approvedEl.textContent = approved;
        if (rejectedEl) rejectedEl.textContent = rejected;
        
        const listContainer = document.getElementById('registrations-list');
        if (!listContainer) return;
        
        listContainer.innerHTML = '';
        
        if (filteredRegistrations.length === 0) {
          listContainer.innerHTML = `
            <div style="text-align: center; padding: 2rem; color: #6B7280;">
              <div style="font-size: 2rem; margin-bottom: 1rem;">üìù</div>
              <div>No registrations found</div>
            </div>
          `;
          return;
        }
        
        filteredRegistrations
          .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp))
          .forEach((registration, index) => {
            const card = document.createElement('div');
            card.style.cssText = `
              background: white;
              border: 1px solid #E5E7EB;
              border-radius: 12px;
              padding: 1.5rem;
              margin-bottom: 1rem;
              box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            `;
            
            const statusColor = {
              pending: '#F59E0B',
              approved: '#10B981',
              rejected: '#EF4444'
            }[registration.status];
            
            const statusIcon = {
              pending: '‚è≥',
              approved: '‚úÖ',
              rejected: '‚ùå'
            }[registration.status];
            
            card.innerHTML = `
              <div style="display: flex; justify-content: between; align-items: flex-start; margin-bottom: 1rem;">
                <div style="flex: 1;">
                  <div style="display: flex; align-items: center; margin-bottom: 0.5rem;">
                    <h4 style="margin: 0; color: #1F2937; font-size: 1.1rem;">${registration.personal.name}</h4>
                    <span style="margin-left: 1rem; padding: 0.25rem 0.75rem; background: ${statusColor}20; color: ${statusColor}; border-radius: 12px; font-size: 0.8rem; font-weight: 600;">
                      ${statusIcon} ${registration.status.toUpperCase()}
                    </span>
                  </div>
                  <div style="color: #4A5568; font-size: 0.9rem; margin-bottom: 0.5rem;">
                    üìß ${registration.personal.email} | üì± ${registration.personal.phone}
                  </div>
                  <div style="color: #4A5568; font-size: 0.9rem;">
                    üè† <strong>${registration.hostel.name}</strong> - ${registration.hostel.location} (${registration.hostel.gender})
                  </div>
                </div>
                <div style="color: #6B7280; font-size: 0.8rem; text-align: right;">
                  ${new Date(registration.timestamp).toLocaleDateString()}<br>
                  ${new Date(registration.timestamp).toLocaleTimeString()}
                </div>
              </div>
              
              <div style="background: #F9FAFB; border-radius: 8px; padding: 1rem; margin-bottom: 1rem;">
                <div style="font-size: 0.9rem; color: #374151; margin-bottom: 0.5rem;"><strong>Hostel Details:</strong></div>
                <div style="font-size: 0.8rem; color: #4A5568; line-height: 1.5;">
                  ‚Ä¢ Monthly Rent: PKR ${registration.hostel.rent}<br>
                  ‚Ä¢ Description: ${registration.hostel.description.substring(0, 100)}${registration.hostel.description.length > 100 ? '...' : ''}
                </div>
              </div>
              
              <div style="display: flex; gap: 0.5rem; justify-content: flex-end;">
                <button onclick="viewRegistrationDetails(${registration.id})" style="padding: 0.5rem 1rem; background: #3B82F6; color: white; border: none; border-radius: 6px; font-size: 0.8rem;">View Details</button>
                ${registration.status === 'pending' ? `
                  <button onclick="approveRegistration(${registration.id})" style="padding: 0.5rem 1rem; background: #10B981; color: white; border: none; border-radius: 6px; font-size: 0.8rem;">Approve</button>
                  <button onclick="rejectRegistration(${registration.id})" style="padding: 0.5rem 1rem; background: #EF4444; color: white; border: none; border-radius: 6px; font-size: 0.8rem;">Reject</button>
                ` : ''}
              </div>
            `;
            
            listContainer.appendChild(card);
          });
      };

      window.filterRegistrations = () => {
        renderRegistrations();
      };

      window.refreshRegistrations = () => {
        renderRegistrations();
        showNotification('Registrations refreshed', 'success');
      };

      window.viewRegistrationDetails = (id) => {
        const registrations = JSON.parse(localStorage.getItem('hostel-registrations') || '[]');
        const registration = registrations.find(r => r.id === id);
        
        if (!registration) return;
        
        const modal = document.createElement('div');
        modal.style.cssText = `
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.6);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 10000;
          backdrop-filter: blur(4px);
        `;
        
        modal.innerHTML = `
          <div style="background: white; border-radius: 16px; padding: 2rem; max-width: 600px; margin: 1rem; max-height: 80vh; overflow-y: auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
              <h3 style="margin: 0; color: #1F2937;">Registration Details</h3>
              <button onclick="this.closest('div').remove()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">√ó</button>
            </div>
            
            <div style="background: #F9FAFB; border-radius: 8px; padding: 1.5rem; margin-bottom: 1.5rem;">
              <h4 style="margin: 0 0 1rem 0; color: #1F2937;">üë§ Personal Information</h4>
              <div style="color: #4A5568; line-height: 1.6;">
                <strong>Name:</strong> ${registration.personal.name}<br>
                <strong>Email:</strong> ${registration.personal.email}<br>
                <strong>Phone:</strong> ${registration.personal.phone}<br>
                ${registration.personal.whatsapp ? `<strong>WhatsApp:</strong> ${registration.personal.whatsapp}<br>` : ''}
              </div>
            </div>
            
            <div style="background: #F9FAFB; border-radius: 8px; padding: 1.5rem; margin-bottom: 1.5rem;">
              <h4 style="margin: 0 0 1rem 0; color: #1F2937;">üè† Hostel Information</h4>
              <div style="color: #4A5568; line-height: 1.6;">
                <strong>Name:</strong> ${registration.hostel.name}<br>
                <strong>Location:</strong> ${registration.hostel.location}<br>
                <strong>Gender:</strong> ${registration.hostel.gender}<br>
                <strong>Monthly Rent:</strong> PKR ${registration.hostel.rent}<br>
                <strong>Description:</strong><br>
                <div style="margin-top: 0.5rem; padding: 1rem; background: white; border-radius: 6px; font-style: italic;">
                  "${registration.hostel.description}"
                </div>
              </div>
            </div>
            
            <div style="background: #F3F4F6; border-radius: 8px; padding: 1rem;">
              <div style="font-size: 0.9rem; color: #6B7280;">
                <strong>Submitted:</strong> ${new Date(registration.timestamp).toLocaleString()}<br>
                <strong>Status:</strong> ${registration.status.toUpperCase()}
              </div>
            </div>
            
            ${registration.status === 'pending' ? `
              <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                <button onclick="approveRegistration(${registration.id}); this.closest('div').remove();" style="flex: 1; padding: 0.75rem; background: #10B981; color: white; border: none; border-radius: 8px; font-weight: 600;">Approve Registration</button>
                <button onclick="rejectRegistration(${registration.id}); this.closest('div').remove();" style="flex: 1; padding: 0.75rem; background: #EF4444; color: white; border: none; border-radius: 8px; font-weight: 600;">Reject Registration</button>
              </div>
            ` : ''}
          </div>
        `;
        
        document.body.appendChild(modal);
        document.body.style.overflow = 'hidden';
        
        modal.onclick = (e) => {
          if (e.target === modal) {
            modal.remove();
            document.body.style.overflow = 'auto';
          }
        };
      };

      window.approveRegistration = (id) => {
        const registrations = JSON.parse(localStorage.getItem('hostel-registrations') || '[]');
        const registration = registrations.find(r => r.id === id);
        
        if (!registration) return;
        
        showWarning({
          title: 'Approve Registration',
          message: 'This will approve the hostel owner registration and create admin access.',
          item: `Approving: ${registration.personal.name} for ${registration.hostel.name}`,
          icon: '‚úÖ',
          confirmText: 'Approve',
          cancelText: 'Cancel',
          onConfirm: () => {
            // Update registration status
            registration.status = 'approved';
            localStorage.setItem('hostel-registrations', JSON.stringify(registrations));
            
            // Create admin account
            const admins = JSON.parse(localStorage.getItem('admins') || '[]');
            const newAdmin = {
              user: registration.personal.email,
              pass: btoa('temp123'), // Temporary password
              approved: true,
              type: 'hostel',
              role: 'hostel', // Role type for restricted access
              hostelIds: [], // Will be updated after hostel is created
              hostel: registration.hostel.name,
              name: registration.personal.name,
              phone: registration.personal.phone
            };
            
            // Check if admin already exists
            if (!admins.find(a => a.user === registration.personal.email)) {
              admins.push(newAdmin);
              localStorage.setItem('admins', JSON.stringify(admins));
            }
            
            // Add hostel to listings
            const hostels = JSON.parse(localStorage.getItem('hostels') || '[]');
            if (!hostels.find(h => h.name === registration.hostel.name)) {
              const newHostel = {
                name: registration.hostel.name,
                location: registration.hostel.location,
                gender: registration.hostel.gender,
                price: `PKR ${registration.hostel.rent}`,
                details: registration.hostel.description,
                phone: registration.personal.phone,
                whatsapp: registration.personal.whatsapp || registration.personal.phone,
                img: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzk5OTk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5vIEltYWdlPC90ZXh0Pjwvc3ZnPg==',
                // Use room prices from registration
                roomPrices: registration.hostel.roomPrices || [{
                  type: '1-bed',
                  minPrice: '10000', 
                  maxPrice: '10000'
                }],
                // Use facilities from registration
                facilities: registration.hostel.facilities || []
              };
              
              hostels.push(newHostel);
              
              // Update the admin with the new hostel ID
              const hostelIndex = hostels.length - 1;
              const adminIndex = admins.findIndex(a => a.user === registration.personal.email);
              if (adminIndex !== -1) {
                // Store the index of the hostel for restricted access
                admins[adminIndex].hostelIds = [hostelIndex];
                localStorage.setItem('admins', JSON.stringify(admins));
              }
              localStorage.setItem('hostels', JSON.stringify(hostels));
            }
            
            renderRegistrations();
            renderHostelsAdmin();
            renderAdmins();
            updateAdminStats();
            showNotification(`Registration approved! Admin account created for ${registration.personal.name}`, 'success');
          }
        });
      };

      window.rejectRegistration = (id) => {
        const registrations = JSON.parse(localStorage.getItem('hostel-registrations') || '[]');
        const registration = registrations.find(r => r.id === id);
        
        if (!registration) return;
        
        showWarning({
          title: 'Reject Registration',
          message: 'This will reject the hostel owner registration. This action can be reversed later.',
          item: `Rejecting: ${registration.personal.name} for ${registration.hostel.name}`,
          icon: '‚ùå',
          confirmText: 'Reject',
          cancelText: 'Cancel',
          onConfirm: () => {
            registration.status = 'rejected';
            localStorage.setItem('hostel-registrations', JSON.stringify(registrations));
            
            renderRegistrations();
            showNotification('Registration rejected', 'success');
          }
        });
      };
      
      // Registration form room type management functions
      window.addRegRoomType = function() {
        const container = document.getElementById('reg-room-types-container');
        const roomItem = document.createElement('div');
        roomItem.className = 'reg-room-type-item';
        roomItem.style.cssText = 'display: flex; gap: 1rem; margin-bottom: 0.5rem; align-items: center; background: white; padding: 0.75rem; border-radius: 6px;';
        
        roomItem.innerHTML = `
          <div style="flex: 1;">
            <select class="reg-room-type-select" style="width: 100%; padding: 0.5rem; border: 1px solid #E2E8F0; border-radius: 4px;">
              <option value="1-bed">1-Bed Room</option>
              <option value="2-bed">2-Bed Room</option>
              <option value="3-bed">3-Bed Room</option>
              <option value="4-bed">4-Bed Room</option>
              <option value="5-bed">5-Bed Room</option>
              <option value="6-bed">6-Bed Room</option>
              <option value="dormitory">Dormitory</option>
            </select>
          </div>
          <div style="flex: 1; display: flex; align-items: center; gap: 0.5rem;">
            <span style="font-size: 0.9rem;">PKR</span>
            <input type="number" class="reg-room-min-price" placeholder="Min" style="flex: 1; padding: 0.5rem; border: 1px solid #E2E8F0; border-radius: 4px;">
          </div>
          <span style="font-size: 0.9rem;">to</span>
          <div style="flex: 1; display: flex; align-items: center; gap: 0.5rem;">
            <span style="font-size: 0.9rem;">PKR</span>
            <input type="number" class="reg-room-max-price" placeholder="Max" style="flex: 1; padding: 0.5rem; border: 1px solid #E2E8F0; border-radius: 4px;">
          </div>
          <button type="button" class="remove-reg-room-type" onclick="this.closest('.reg-room-type-item').remove(); validateRegRoomPrices();" style="background: #EF4444; color: white; border: none; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 1.1rem;">√ó</button>
        `;
        
        container.appendChild(roomItem);
      }
      
      // Function to get room prices from the registration form
      function getRegRoomPrices() {
        const roomTypes = [];
        document.querySelectorAll('.reg-room-type-item').forEach(item => {
          const type = item.querySelector('.reg-room-type-select').value;
          const minPrice = item.querySelector('.reg-room-min-price').value;
          const maxPrice = item.querySelector('.reg-room-max-price').value;
          
          if (type && (minPrice || maxPrice)) {
            roomTypes.push({
              type: type,
              minPrice: minPrice || '0',
              maxPrice: maxPrice || minPrice || '0'
            });
          }
        });
        
        return roomTypes;
      }
      
      // Function to get facilities from checkboxes
      function getFacilities() {
        const facilities = [];
        document.querySelectorAll('.facility-checkbox:checked').forEach(checkbox => {
          facilities.push(checkbox.value);
        });
        return facilities;
      }
      
      // Function to set facilities checkboxes
      function setFacilities(facilities) {
        if (!facilities || !Array.isArray(facilities)) return;
        
        // First, uncheck all facility checkboxes
        document.querySelectorAll('.facility-checkbox').forEach(checkbox => {
          checkbox.checked = false;
        });
        
        // Then check the ones that match the facilities array
        facilities.forEach(facility => {
          const checkbox = document.querySelector(`.facility-checkbox[value="${facility}"]`);
          if (checkbox) {
            checkbox.checked = true;
          }
        });
      }
      
      // Format price range for registration display
      function formatRegPriceRange(roomPrices) {
        if (!roomPrices || !Array.isArray(roomPrices) || roomPrices.length === 0) {
          return 'Price not specified';
        }
        
        // Find the overall min and max
        const minPrice = Math.min(...roomPrices.map(room => parseInt(room.minPrice)));
        const maxPrice = Math.max(...roomPrices.map(room => parseInt(room.maxPrice)));
        
        if (minPrice === maxPrice) {
          return `PKR ${minPrice.toLocaleString()}`;
        }
        
        return `PKR ${minPrice.toLocaleString()}-${maxPrice.toLocaleString()}`;
      }
      
      // Validate room prices in registration
      function validateRegRoomPrices() {
        const roomPrices = getRegRoomPrices();
        return roomPrices.length > 0;
      }
      
      // Function to get facilities from the registration form
      function getRegFacilities() {
        const facilities = [];
        document.querySelectorAll('.reg-facility-checkbox:checked').forEach(checkbox => {
          facilities.push(checkbox.value);
        });
        return facilities;
      }
      
      // Function to format facilities for display
      function formatFacilities(facilities) {
        if (!facilities || !Array.isArray(facilities) || facilities.length === 0) {
          return 'Please inquire for facility details';
        }
        
        const facilityLabels = {
          'breakfast': 'Breakfast',
          'lunch': 'Lunch', 
          'dinner': 'Dinner',
          'ac': 'Air Conditioning',
          'cooler': 'Air Cooler',
          'security': 'Security Guard',
          'cctv': 'CCTV Surveillance',
          'wifi': 'WiFi Internet',
          'laundry': 'Laundry Service',
          'cleaning': 'Cleaning Services',
          'kitchen': 'Kitchen for Self Cooking',
          'oven': 'Oven/Microwave',
          'refrigerator': 'Refrigerator',
          'ups': 'UPS Backup',
          'generator': 'Generator Backup',
          'parking': 'Parking Space'
        };
        
        const formattedFacilities = facilities.map(facility => 
          facilityLabels[facility] || facility
        );
        
        return formattedFacilities.join(', ');
      }

      // Ad Management Functions
      window.loadManualAds = () => {
        const ads = JSON.parse(localStorage.getItem('manual-ads') || '[]');
        
        ads.forEach(ad => {
          const adElement = document.getElementById(ad.elementId);
          if (adElement && ad.active) {
            // Handle FAQ sidebar ads with overlay system
            if (ad.elementId === 'faq-manual-ad-left' || ad.elementId === 'faq-manual-ad-right') {
              adElement.style.display = 'block';
              if (ad.type === 'image') {
                adElement.innerHTML = `
                  <a href="${ad.url}" target="_blank" class="manual-ad" onclick="trackAdClick('${ad.id}')" style="display: block; width: 100%; height: 100%;">
                    <img src="${ad.imageUrl}" alt="${ad.title}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                  </a>
                `;
              } else if (ad.type === 'html') {
                adElement.innerHTML = ad.htmlContent;
              }
              adElement.onclick = () => trackAdClick(ad.id);
            } else {
              // Handle regular manual ads
              if (ad.type === 'image') {
                adElement.innerHTML = `
                  <a href="${ad.url}" target="_blank" class="manual-ad" onclick="trackAdClick('${ad.id}')">
                    <img src="${ad.imageUrl}" alt="${ad.title}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                  </a>
                `;
              } else if (ad.type === 'html') {
                adElement.innerHTML = ad.htmlContent;
              }
            }
          }
        });
      };

      window.trackAdClick = (adId) => {
        const analytics = JSON.parse(localStorage.getItem('analytics') || '{}');
        if (!analytics.adClicks) analytics.adClicks = {};
        if (!analytics.adClicks[adId]) analytics.adClicks[adId] = 0;
        analytics.adClicks[adId]++;
        analytics.totalAdClicks = (analytics.totalAdClicks || 0) + 1;
        localStorage.setItem('analytics', JSON.stringify(analytics));
        
        // Update revenue estimate (example: $0.05 per click)
        const revenue = analytics.totalAdClicks * 0.05;
        if (document.getElementById('ad-clicks-count')) {
          document.getElementById('ad-clicks-count').textContent = analytics.totalAdClicks;
          document.getElementById('ad-revenue').textContent = `$${revenue.toFixed(2)}`;
        }
      };

      window.saveAdSenseSettings = () => {
        const settings = {
          clientId: document.getElementById('adsense-client').value,
          status: document.getElementById('adsense-status').value
        };
        
        localStorage.setItem('adsense-settings', JSON.stringify(settings));
        showNotification('AdSense settings saved successfully', 'success');
        
        // Update all AdSense ads with new client ID
        const adsenseElements = document.querySelectorAll('.adsbygoogle');
        adsenseElements.forEach(el => {
          el.setAttribute('data-ad-client', settings.clientId);
        });
      };

      window.showAddManualAd = () => {
        const modal = document.createElement('div');
        modal.style.cssText = `
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.6);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 10000;
        `;
        
        modal.innerHTML = `
          <div style="background: white; border-radius: 16px; padding: 2rem; max-width: 600px; margin: 1rem; max-height: 80vh; overflow-y: auto;">
            <h3 style="margin-bottom: 1.5rem;">Add Manual Advertisement</h3>
            
            <div class="form-group">
              <label>Ad Title</label>
              <input id="new-ad-title" type="text" placeholder="Enter ad title">
            </div>
            
            <div class="form-group">
              <label>Ad Type</label>
              <select id="new-ad-type" onchange="toggleAdTypeFields()">
                <option value="image">Image Ad</option>
                <option value="html">HTML Ad</option>
              </select>
            </div>
            
            <div id="image-ad-fields">
              <div class="form-group">
                <label>Image URL</label>
                <input id="new-ad-image" type="url" placeholder="https://example.com/ad-image.jpg">
              </div>
              <div class="form-group">
                <label>Target URL</label>
                <input id="new-ad-url" type="url" placeholder="https://example.com">
              </div>
            </div>
            
            <div id="html-ad-fields" style="display: none;">
              <div class="form-group">
                <label>HTML Content</label>
                <textarea id="new-ad-html" rows="5" placeholder="Enter HTML content for the ad"></textarea>
              </div>
            </div>
            
            <div class="form-group">
              <label>Ad Position</label>
              <select id="new-ad-position">
                <option value="manual-ad-1">Manual Ad Space #1</option>
                <option value="faq-manual-ad-left">FAQ Left Sidebar</option>
                <option value="faq-manual-ad-right">FAQ Right Sidebar</option>
                <option value="custom">Custom Position</option>
              </select>
            </div>
            
            <div style="display: flex; gap: 1rem; margin-top: 2rem;">
              <button onclick="this.closest('div').remove()" style="flex: 1; background: #6B7280; color: white; border: none; padding: 0.75rem; border-radius: 8px;">Cancel</button>
              <button onclick="saveManualAd(); this.closest('div').remove();" style="flex: 1; background: #10B981; color: white; border: none; padding: 0.75rem; border-radius: 8px;">Save Ad</button>
            </div>
          </div>
        `;
        
        document.body.appendChild(modal);
      };

      window.toggleAdTypeFields = () => {
        const type = document.getElementById('new-ad-type').value;
        document.getElementById('image-ad-fields').style.display = type === 'image' ? 'block' : 'none';
        document.getElementById('html-ad-fields').style.display = type === 'html' ? 'block' : 'none';
      };

      window.saveManualAd = () => {
        const ad = {
          id: Date.now(),
          title: document.getElementById('new-ad-title').value,
          type: document.getElementById('new-ad-type').value,
          imageUrl: document.getElementById('new-ad-image')?.value || '',
          url: document.getElementById('new-ad-url')?.value || '',
          htmlContent: document.getElementById('new-ad-html')?.value || '',
          elementId: document.getElementById('new-ad-position').value,
          active: true,
          created: new Date().toISOString()
        };
        
        const ads = JSON.parse(localStorage.getItem('manual-ads') || '[]');
        ads.push(ad);
        localStorage.setItem('manual-ads', JSON.stringify(ads));
        
        showNotification('Manual ad saved successfully', 'success');
        loadManualAds();
        renderManualAdsList();
      };

      window.renderManualAdsList = () => {
        const ads = JSON.parse(localStorage.getItem('manual-ads') || '[]');
        const container = document.getElementById('manual-ads-list');
        
        if (!container) return;
        
        container.innerHTML = '';
        
        if (ads.length === 0) {
          container.innerHTML = '<p style="color: #6B7280; text-align: center; padding: 2rem;">No manual ads configured</p>';
          return;
        }
        
        ads.forEach(ad => {
          const adCard = document.createElement('div');
          adCard.style.cssText = 'border: 1px solid #E5E7EB; border-radius: 8px; padding: 1rem; margin-bottom: 1rem;';
          adCard.innerHTML = `
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
              <h5 style="margin: 0;">${ad.title}</h5>
              <span style="padding: 0.25rem 0.5rem; background: ${ad.active ? '#10B981' : '#6B7280'}20; color: ${ad.active ? '#10B981' : '#6B7280'}; border-radius: 12px; font-size: 0.8rem;">
                ${ad.active ? 'Active' : 'Inactive'}
              </span>
            </div>
            <p style="margin: 0; color: #6B7280; font-size: 0.9rem;">Type: ${ad.type.toUpperCase()} | Position: ${ad.elementId}</p>
            <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
              <button onclick="toggleAdStatus('${ad.id}')" style="padding: 0.5rem 1rem; background: #3B82F6; color: white; border: none; border-radius: 4px; font-size: 0.8rem;">
                ${ad.active ? 'Deactivate' : 'Activate'}
              </button>
              <button onclick="deleteManualAd('${ad.id}')" style="padding: 0.5rem 1rem; background: #EF4444; color: white; border: none; border-radius: 4px; font-size: 0.8rem;">Delete</button>
            </div>
          `;
          container.appendChild(adCard);
        });
      };

      window.toggleAdStatus = (adId) => {
        const ads = JSON.parse(localStorage.getItem('manual-ads') || '[]');
        const ad = ads.find(a => a.id == adId);
        if (ad) {
          ad.active = !ad.active;
          localStorage.setItem('manual-ads', JSON.stringify(ads));
          showNotification(`Ad ${ad.active ? 'activated' : 'deactivated'}`, 'success');
          loadManualAds();
          renderManualAdsList();
        }
      };

      window.deleteManualAd = (adId) => {
        showWarning({
          title: 'Delete Advertisement',
          message: 'This will permanently remove the manual advertisement.',
          icon: 'üóëÔ∏è',
          confirmText: 'Delete Ad',
          cancelText: 'Cancel',
          onConfirm: () => {
            const ads = JSON.parse(localStorage.getItem('manual-ads') || '[]');
            const filteredAds = ads.filter(a => a.id != adId);
            localStorage.setItem('manual-ads', JSON.stringify(filteredAds));
            showNotification('Ad deleted successfully', 'success');
            loadManualAds();
            renderManualAdsList();
          }
        });
      };

      // Load night mode preference
      window.loadNightMode = () => {
        const isNightMode = localStorage.getItem('nightMode') === 'true';
        if (isNightMode) {
          document.body.classList.add('night-mode');
        }
      };

      // Update mobile menu active state
      window.updateMobileMenuActive = (activeLink) => {
        document.querySelectorAll('.side-panel-nav a').forEach(link => {
          link.classList.remove('active');
        });
        document.querySelectorAll('.main-nav a').forEach(link => {
          link.classList.remove('active');
        });
        
        // Set active states
        document.querySelector(`.side-panel-nav a[onclick*="${activeLink}"]`)?.classList.add('active');
        document.querySelector(`.main-nav a[onclick*="${activeLink}"]`)?.classList.add('active');
      };

      // Hostel Details Modal Functions
      // Function to generate star ratings HTML
      window.generateStarRating = (rating) => {
        const fullStars = Math.floor(rating);
        const halfStar = rating % 1 >= 0.5;
        const emptyStars = 5 - fullStars - (halfStar ? 1 : 0);
        
        let starsHtml = '';
        
        // Full stars
        for (let i = 0; i < fullStars; i++) {
          starsHtml += '<span class="star full-star" style="color: #FFC107; font-size: 1rem; margin-right: 0.15rem;">‚òÖ</span>';
        }
        
        // Half star
        if (halfStar) {
          starsHtml += '<span class="star half-star" style="position: relative; margin-right: 0.15rem;"><span style="position: absolute; color: #FFC107; width: 50%; overflow: hidden;">‚òÖ</span><span style="color: #CBD5E0;">‚òÜ</span></span>';
        }
        
        // Empty stars
        for (let i = 0; i < emptyStars; i++) {
          starsHtml += '<span class="star empty-star" style="color: #CBD5E0; font-size: 1rem; margin-right: 0.15rem;">‚òÜ</span>';
        }
        
        return starsHtml;
      };
      
      // Add a hostel rating function
      // Open the review form when user selects a star rating
      window.openReviewForm = (hostelName, rating) => {
        // Hide rating buttons
        document.querySelector('.rating-buttons').style.display = 'none';
        
        // Create review form if it doesn't exist
        if (!document.getElementById('review-form-container')) {
          const rateThisSection = document.querySelector('.rate-this-hostel');
          
          // Create form container
          const formContainer = document.createElement('div');
          formContainer.id = 'review-form-container';
          formContainer.className = 'review-form-container';
          formContainer.innerHTML = `
            <div class="selected-rating">
              You selected: ${generateStarRating(rating)} (${rating}/5)
            </div>
            <div class="review-form">
              <textarea id="review-text" placeholder="Share your experience with this hostel (optional)" rows="3" style="width: 100%; padding: 0.5rem; margin-bottom: 0.5rem; border: 1px solid #E2E8F0; border-radius: 4px;"></textarea>
              <div class="review-actions">
                <button id="submit-review" class="submit-review-btn" onclick="submitReview('${hostelName}', ${rating})">Submit Review</button>
                <button class="cancel-review-btn" onclick="cancelReview()">Cancel</button>
              </div>
            </div>
          `;
          
          rateThisSection.appendChild(formContainer);
        }
      };
      
      // Cancel review and reset the UI
      window.cancelReview = () => {
        // Remove review form
        const formContainer = document.getElementById('review-form-container');
        if (formContainer) {
          formContainer.remove();
        }
        
        // Show rating buttons again
        document.querySelector('.rating-buttons').style.display = 'flex';
      };
      
      // Submit the review and rating
      window.submitReview = (hostelName, rating) => {
        const reviewText = document.getElementById('review-text').value.trim();
        const ratings = JSON.parse(localStorage.getItem('hostelRatings') || '{}');
        const reviews = JSON.parse(localStorage.getItem('hostelReviews') || '{}');
        
        // Initialize arrays if they don't exist
        if (!ratings[hostelName]) {
          ratings[hostelName] = [];
        }
        
        if (!reviews[hostelName]) {
          reviews[hostelName] = [];
        }
        
        // Add the new rating
        ratings[hostelName].push(rating);
        
        // Add the review if text was provided
        if (reviewText) {
          const timestamp = new Date().toISOString();
          reviews[hostelName].push({
            rating: rating,
            text: reviewText,
            date: timestamp
          });
        }
        
        // Save back to localStorage
        localStorage.setItem('hostelRatings', JSON.stringify(ratings));
        localStorage.setItem('hostelReviews', JSON.stringify(reviews));
        
        // Update the UI
        const ratingContainer = document.getElementById('modal-stars');
        if (ratingContainer) {
          const avgRating = ratings[hostelName].reduce((sum, r) => sum + r, 0) / ratings[hostelName].length;
          const roundedRating = Math.round(avgRating * 2) / 2;
          ratingContainer.innerHTML = generateStarRating(roundedRating);
          
          const countElement = document.getElementById('modal-rating-count');
          if (countElement) {
            countElement.textContent = `(${ratings[hostelName].length})`;
          }
          
          // Remove review form
          const formContainer = document.getElementById('review-form-container');
          if (formContainer) {
            formContainer.remove();
          }
          
          // Show thank you message
          const rateThisSection = document.querySelector('.rate-this-hostel');
          if (rateThisSection && !rateThisSection.querySelector('.rating-thank-you')) {
            const thankYouMsg = document.createElement('div');
            thankYouMsg.className = 'rating-thank-you';
            thankYouMsg.textContent = reviewText ? 'Thank you for your rating and review!' : 'Thank you for your rating!';
            rateThisSection.appendChild(thankYouMsg);
            
            // Disable rating buttons
            document.querySelectorAll('.rating-btn').forEach(btn => {
              btn.disabled = true;
              btn.style.opacity = '0.5';
              btn.style.cursor = 'default';
            });
          }
          
          // Load reviews
          loadHostelReviews(hostelName);
          
          // Update all hostel listings to show new ratings
          renderPublic();
        }
      };
      
      // Load hostel reviews
      window.loadHostelReviews = (hostelName) => {
        const reviewsContainer = document.getElementById('hostel-reviews');
        if (!reviewsContainer) return;
        
        const reviews = JSON.parse(localStorage.getItem('hostelReviews') || '{}');
        const hostelReviews = reviews[hostelName] || [];
        
        if (hostelReviews.length === 0) {
          reviewsContainer.innerHTML = '<p class="no-reviews">No reviews yet. Be the first to review this hostel!</p>';
          return;
        }
        
        // Sort reviews by date (newest first)
        hostelReviews.sort((a, b) => new Date(b.date) - new Date(a.date));
        
        // Generate HTML for reviews
        let reviewsHTML = '';
        hostelReviews.forEach(review => {
          const formattedDate = new Date(review.date).toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'short',
            day: 'numeric'
          });
          
          reviewsHTML += `
            <div class="review-item">
              <div class="review-header">
                <div class="review-rating">${generateStarRating(review.rating)}</div>
                <div class="review-date">${formattedDate}</div>
              </div>
              <div class="review-text">${review.text || '<em>No comment provided</em>'}</div>
            </div>
          `;
        });
        
        reviewsContainer.innerHTML = reviewsHTML;
      };

      window.openHostelDetails = (hostel) => {
        trackClick('hostel');
        const modal = document.getElementById('hostel-modal');
        const modalImage = document.getElementById('modal-image');
        const modalTitle = document.getElementById('modal-title');
        const modalMeta = document.getElementById('modal-meta');
        const modalDetails = document.getElementById('modal-details');
        const modalLocationBtn = document.getElementById('modal-location-btn');
        const modalContactBtn = document.getElementById('modal-contact-btn');
        const modalFacilities = document.getElementById('modal-facilities');
        
        // Populate modal content
        modalImage.src = hostel.img;
        modalImage.alt = hostel.name;
        modalTitle.textContent = hostel.name;
        
        // Display facilities if the element exists
        if (modalFacilities) {
          if (hostel.facilities && Array.isArray(hostel.facilities) && hostel.facilities.length > 0) {
            const facilityLabels = {
              'breakfast': 'üçΩÔ∏è Breakfast',
              'lunch': 'üçΩÔ∏è Lunch', 
              'dinner': 'üçΩÔ∏è Dinner',
              'ac': '‚ùÑÔ∏è Air Conditioning',
              'cooler': '‚ùÑÔ∏è Air Cooler',
              'security': 'üîí Security Guard',
              'cctv': 'üîí CCTV Surveillance',
              'wifi': 'üì∂ WiFi Internet',
              'laundry': 'üß∫ Laundry Service',
              'cleaning': 'üß∫ Cleaning Services',
              'kitchen': 'üç≥ Kitchen for Self Cooking',
              'oven': 'üç≥ Oven/Microwave',
              'refrigerator': 'üç≥ Refrigerator',
              'ups': '‚ö° UPS Backup',
              'generator': '‚ö° Generator Backup',
              'parking': 'üöó Parking Space'
            };
            
            let facilitiesHTML = `
              <h4 class="modal-section-title">Available Facilities</h4>
              <div class="facilities-container" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.5rem; margin-bottom: 1rem;">
                ${hostel.facilities.map(facility => 
                  `<span class="facility-badge" style="display: flex; align-items: center; gap: 0.25rem; background: #F0F9FF; color: #0369A1; padding: 0.375rem 0.75rem; border-radius: 20px; font-size: 0.875rem; border: 1px solid #BAE6FD;">${facilityLabels[facility] || facility}</span>`
                ).join('')}
              </div>
              <p class="facilities-note" style="font-size: 0.8rem; color: #6B7280; font-style: italic;">For facilities not listed above, please inquire with the hostel management directly.</p>
            `;
            modalFacilities.innerHTML = facilitiesHTML;
            modalFacilities.style.display = 'block';
          } else {
            modalFacilities.innerHTML = `
              <h4 class="modal-section-title">Available Facilities</h4>
              <p class="no-facilities-note" style="font-size: 0.9rem; color: #6B7280; background: #F9FAFB; padding: 1rem; border-radius: 8px; border: 1px solid #E5E7EB;">No facilities information available. Please contact the hostel directly to inquire about available facilities and amenities.</p>
            `;
            modalFacilities.style.display = 'block';
          }
        }
        
        // Load and display ratings
        const ratings = JSON.parse(localStorage.getItem('hostelRatings') || '{}');
        const hostelRatings = ratings[hostel.name] || [];
        const averageRating = hostelRatings.length > 0 
          ? hostelRatings.reduce((sum, rating) => sum + rating, 0) / hostelRatings.length 
          : 0;
        const roundedRating = Math.round(averageRating * 2) / 2; // Round to nearest 0.5
        
        const modalStars = document.getElementById('modal-stars');
        const modalRatingCount = document.getElementById('modal-rating-count');
        
        modalStars.innerHTML = generateStarRating(roundedRating);
        modalRatingCount.textContent = `(${hostelRatings.length})`;
        
        // Load hostel reviews
        loadHostelReviews(hostel.name);
        
        // Check if user has already rated this hostel
        if (hostelRatings.length > 0) {
          const rateThisSection = document.querySelector('.rate-this-hostel');
          // Only add the thank you message if the user is viewing this hostel for the first time since rating
          if (!localStorage.getItem(`rated_${hostel.name}`)) {
            const thankYouMsg = document.createElement('div');
            thankYouMsg.className = 'rating-thank-you';
            thankYouMsg.textContent = 'Thank you for your rating!';
            rateThisSection.appendChild(thankYouMsg);
            
            // Mark as seen
            localStorage.setItem(`rated_${hostel.name}`, 'true');
          }
        }
        
        // Create meta badges (without phone numbers)
        modalMeta.innerHTML = `
          <span class="hostel-modal-badge">${hostel.gender}</span>
          <span class="hostel-modal-badge">${hostel.location || 'Lahore'}</span>
        `;
        
        // Add room price details section after meta badges
        const priceDetailsSection = document.createElement('div');
        priceDetailsSection.className = 'price-details-section';
        priceDetailsSection.style.cssText = 'margin-top: 1.5rem; margin-bottom: 1.5rem;';
        
        // Build price details HTML
        let priceDetailsHTML = '<h4 class="modal-section-title">Room Prices</h4>';
        
        // Check if room prices exist and are valid (check both roomPrices and rooms)
        if ((hostel.roomPrices && Array.isArray(hostel.roomPrices) && hostel.roomPrices.length > 0) || 
            (hostel.rooms && Array.isArray(hostel.rooms) && hostel.rooms.length > 0)) {
          priceDetailsHTML += '<div class="room-prices-table" style="width: 100%; border-collapse: collapse; margin-top: 0.5rem;">';
          
          // Use roomPrices if available, otherwise use rooms array
          const roomsData = hostel.roomPrices || hostel.rooms || [];
          
          roomsData.forEach(room => {
            let roomTypeLabel = '';
            let displayPrice = '';
            
            if (hostel.roomPrices) {
              // Handle roomPrices format
              switch(room.type) {
                case '1-bed': roomTypeLabel = '1-Bed Room'; break;
                case '2-bed': roomTypeLabel = '2-Bed Room'; break;
                case '3-bed': roomTypeLabel = '3-Bed Room'; break;
                case '4-bed': roomTypeLabel = '4-Bed Room'; break;
                case '5-bed': roomTypeLabel = '5-Bed Room'; break;
                case '6-bed': roomTypeLabel = '6-Bed Room'; break;
                case '7-bed': roomTypeLabel = '7-Bed Room'; break;
                case '8-bed': roomTypeLabel = '8-Bed Room'; break;
                case 'dormitory': roomTypeLabel = 'Dormitory'; break;
                default: roomTypeLabel = room.type;
              }
              
              const minPrice = parseInt(room.minPrice);
              const maxPrice = parseInt(room.maxPrice);
              
              if (!isNaN(minPrice) && !isNaN(maxPrice)) {
                const formattedMinPrice = minPrice.toLocaleString();
                const formattedMaxPrice = maxPrice.toLocaleString();
                
                if (minPrice === maxPrice) {
                  displayPrice = `PKR ${formattedMinPrice}/month`;
                } else {
                  displayPrice = `PKR ${formattedMinPrice} - ${formattedMaxPrice}/month`;
                }
              }
            } else if (hostel.rooms) {
              // Handle rooms format
              roomTypeLabel = room.type || 'Room';
              displayPrice = room.price + (room.description ? ` (${room.description})` : '');
            }
            
            // Add the room price row if we have valid data
            if (roomTypeLabel && displayPrice) {
              priceDetailsHTML += `
                <div style="display: flex; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid #E5E7EB;">
                  <span style="font-weight: 500;">${roomTypeLabel}</span>
                  <span style="font-weight: 600; color: #047857;">${displayPrice}</span>
                </div>
              `;
            }
          });
          
          priceDetailsHTML += '</div>';
        } else {
          priceDetailsHTML += '<p style="background: #F9FAFB; padding: 0.75rem; border-radius: 8px; border: 1px solid #E5E7EB; color: #6B7280; text-align: center;">Price information not available. Please contact the hostel directly for current rates.</p>';
        }
        
        priceDetailsSection.innerHTML = priceDetailsHTML;
        
        // Insert price details after meta badges
        modalMeta.parentNode.insertBefore(priceDetailsSection, modalMeta.nextSibling);
        
        // Set description with complete details
        let detailsHTML = `<div style="background-color: #f8f9fa; padding: 1rem; border-radius: 8px; margin-bottom: 1rem; line-height: 1.6;">${hostel.details || 'No detailed description available for this hostel.'}</div>`;
        
        // Add other facilities if available
        if (hostel.other_facilities) {
          detailsHTML += `
            <div style="background-color: #e8f4f8; padding: 1rem; border-radius: 8px; margin-top: 1rem; border-left: 4px solid #8B5CF6;">
              <h4 style="margin: 0 0 0.5rem 0; color: #374151; font-size: 0.9rem;">üìù Additional Facilities</h4>
              <p style="margin: 0; color: #4A5568; line-height: 1.5;">${hostel.other_facilities}</p>
            </div>
          `;
        }
        
        modalDetails.innerHTML = detailsHTML;
        
        // Set up map with improved integration
        const mapLink = document.getElementById('modal-map-link');
        const mapIframe = document.getElementById('modal-map-iframe');
        
        if (hostel.map) {
          mapLink.href = hostel.map;
          mapLink.onclick = (e) => {
            e.preventDefault();
            showHostelOnMap(hostel.map, hostel.name);
          };
          
          // Create proper embed URL for Google Maps
          let embedUrl = hostel.map;
          if (hostel.map) {
            if (hostel.map.includes('google.com/maps')) {
              // Convert regular Google Maps URL to embed URL
              if (hostel.map.includes('place/')) {
                const placeMatch = hostel.map.match(/place\/([^\/]+)/);
                if (placeMatch) {
                  embedUrl = `https://www.google.com/maps/embed/v1/place?key=AIzaSyBKZlLFE0PClFElJlMzNjFwMTQyMzM4Q&q=${encodeURIComponent(placeMatch[1])}`;
                }
              } else if (hostel.map.includes('@')) {
                // Handle coordinates format (@lat,long)
                const coordsMatch = hostel.map.match(/@(-?\d+\.\d+),(-?\d+\.\d+)/);
                if (coordsMatch) {
                  const lat = coordsMatch[1];
                  const lng = coordsMatch[2];
                  embedUrl = `https://www.google.com/maps/embed/v1/view?key=AIzaSyBKZlLFE0PClFElJlMzNjFwMTQyMzM4Q&center=${lat},${lng}&zoom=16`;
                } else {
                  embedUrl = hostel.map.replace('google.com/maps', 'google.com/maps/embed');
                }
              } else {
                embedUrl = hostel.map.replace('google.com/maps', 'google.com/maps/embed');
              }
            } else if (!hostel.map.includes('maps.google') && !hostel.map.includes('http')) {
              // If it's just a location name without full URL
              embedUrl = `https://www.google.com/maps/embed/v1/place?key=AIzaSyBKZlLFE0PClFElJlMzNjFwMTQyMzM4Q&q=${encodeURIComponent(hostel.map)}`;
            }
          }
          mapIframe.src = embedUrl;
        } else {
          mapLink.href = '#';
          mapLink.textContent = 'Map location not available';
          mapIframe.style.display = 'none';
        }
        
        // Update features based on actual hostel facilities data
        const featuresContainer = document.getElementById('modal-features');
        
        if (hostel.facilities && Array.isArray(hostel.facilities) && hostel.facilities.length > 0) {
          // Map facility codes to user-friendly feature names with icons
          const facilityFeatures = {
            'wifi': 'üì∂ WiFi Internet Access',
            'ac': '‚ùÑÔ∏è Air Conditioning',
            'cooler': 'üåÄ Air Cooler',
            'security': 'üîí Security Guard',
            'cctv': 'üìπ CCTV Surveillance',
            'laundry': 'üß∫ Laundry Service',
            'breakfast': 'üç≥ Breakfast',
            'lunch': 'üçõ Lunch',
            'dinner': 'üçΩÔ∏è Dinner',
            'cleaning': 'üßπ Room Cleaning',
            'parking': 'üöó Parking Available',
            'kitchen': 'üç≥ Kitchen Access',
            'oven': 'üî• Oven/Microwave Available',
            'refrigerator': '‚ùÑÔ∏è Refrigerator Access',
            'ups': '‚ö° UPS Power Backup',
            'generator': 'üîå Generator Backup'
          };
          
          // Build features from actual facilities
          const featuresHTML = hostel.facilities.map(facility => {
            const featureName = facilityFeatures[facility] || `‚úì ${facility}`;
            return `
              <div class="feature-item" style="background-color: #f0f4f8; margin-bottom: 0.5rem; padding: 0.75rem; border-radius: 8px; border-left: 3px solid #8B5CF6;">
                <span>${featureName}</span>
              </div>
            `;
          }).join('');
          
          let finalHTML = featuresHTML;
          
          // Add other facilities if available
          if (hostel.other_facilities) {
            finalHTML += `
              <div style="margin-top: 1rem; padding: 0.75rem; background-color: #e8f4f8; border-radius: 8px; border-left: 3px solid #3B82F6;">
                <h5 style="margin: 0 0 0.5rem 0; color: #1E40AF; font-size: 0.9rem;">üìù Additional Facilities</h5>
                <p style="margin: 0; color: #374151; line-height: 1.4;">${hostel.other_facilities}</p>
              </div>
            `;
          }
          
          featuresContainer.innerHTML = finalHTML;
        } else {
          // If no facilities data, show a message
          let fallbackHTML = '<p style="color: #6B7280; font-style: italic;">No specific features information available. Please contact the hostel for details.</p>';
          
          // Still show other facilities if available
          if (hostel.other_facilities) {
            fallbackHTML += `
              <div style="margin-top: 1rem; padding: 0.75rem; background-color: #e8f4f8; border-radius: 8px; border-left: 3px solid #3B82F6;">
                <h5 style="margin: 0 0 0.5rem 0; color: #1E40AF; font-size: 0.9rem;">üìù Additional Facilities</h5>
                <p style="margin: 0; color: #374151; line-height: 1.4;">${hostel.other_facilities}</p>
              </div>
            `;
          }
          
          featuresContainer.innerHTML = fallbackHTML;
        }
        
        // Set up contact buttons
        const callBtn = document.getElementById('modal-call-btn');
        const whatsappBtn = document.getElementById('modal-whatsapp-btn');
        
        // Update contact button display based on available information
        if (hostel.phone) {
          callBtn.style.display = 'flex';
          callBtn.onclick = () => {
            window.open(`tel:${hostel.phone}`, '_self');
            trackClick('contact');
          };
        } else {
          callBtn.style.display = 'none';
        }
        
        if (hostel.whatsapp || hostel.phone) {
          whatsappBtn.style.display = 'flex';
          whatsappBtn.onclick = () => {
            const message = `Hello! I'm interested in ${hostel.name}. Could you please provide more information about availability, pricing, and booking process?`;
            const whatsappNumber = hostel.whatsapp || hostel.phone || '+923001234567';
            const cleanNumber = whatsappNumber.replace(/\+/g, '').replace(/\s/g, '');
            window.open(`https://wa.me/${cleanNumber}?text=${encodeURIComponent(message)}`, '_blank');
            trackClick('contact');
          };
        } else {
          whatsappBtn.style.display = 'none';
        }
        
        // Set up media gallery
        setupMediaGallery(hostel);
        
        // Show modal
        modal.classList.add('show');
        document.body.style.overflow = 'hidden';
      };

      // Global carousel state
      let currentMediaIndex = 0;
      let mediaItems = [];
      let autoSlideInterval = null;

      // Media Gallery Setup Function
      window.setupMediaGallery = (hostel) => {
        const mainImage = document.getElementById('modal-image');
        const mainVideo = document.getElementById('modal-video');
        const thumbnailsContainer = document.getElementById('media-thumbnails');
        const prevBtn = document.getElementById('carousel-prev');
        const nextBtn = document.getElementById('carousel-next');
        const counter = document.getElementById('media-counter');
        
        // Reset carousel state
        currentMediaIndex = 0;
        clearInterval(autoSlideInterval);
        
        // Get media from new structure or fallback to old
        mediaItems = hostel.media || [];
        
        // If no media array exists, create from legacy fields
        if (mediaItems.length === 0 && hostel.img) {
          mediaItems.push({ type: 'image', data: hostel.img, name: hostel.name });
        }
        
        // Add sample media if only one item exists (for demo)
        if (mediaItems.length === 1 && hostel.img) {
          mediaItems.push(
            { type: 'image', data: hostel.img, name: `${hostel.name} - Room View` },
            { type: 'image', data: hostel.img, name: `${hostel.name} - Common Area` },
            { type: 'image', data: hostel.img, name: `${hostel.name} - Facilities` }
          );
        }
        
        // Clear thumbnails
        thumbnailsContainer.innerHTML = '';
        
        if (mediaItems.length > 0) {
          // Update counter
          updateMediaCounter();
          
          // Show first media
          showMedia(0);
          
          // Create thumbnails
          mediaItems.forEach((item, index) => {
            const thumb = document.createElement(item.type === 'video' ? 'video' : 'img');
            thumb.className = `media-thumbnail ${item.type === 'video' ? 'video-thumb' : ''}`;
            thumb.src = item.data;
            if (item.type === 'video') {
              thumb.muted = true;
              thumb.preload = 'metadata';
            }
            
            thumb.onclick = () => showMedia(index);
            
            if (index === 0) thumb.classList.add('active');
            thumbnailsContainer.appendChild(thumb);
          });
          
          // Show navigation controls
          prevBtn.style.display = mediaItems.length > 1 ? 'flex' : 'none';
          nextBtn.style.display = mediaItems.length > 1 ? 'flex' : 'none';
          counter.style.display = mediaItems.length > 1 ? 'block' : 'none';
          
          // Start auto-slideshow if multiple items
          if (mediaItems.length > 1) {
            startAutoSlide();
          }
        } else {
          // Hide controls for single media
          prevBtn.style.display = 'none';
          nextBtn.style.display = 'none';
          counter.style.display = 'none';
          thumbnailsContainer.style.display = 'none';
        }
      };

      // Show specific media item
      window.showMedia = (index) => {
        if (index < 0 || index >= mediaItems.length) return;
        
        currentMediaIndex = index;
        const item = mediaItems[index];
        const mainImage = document.getElementById('modal-image');
        const mainVideo = document.getElementById('modal-video');
        const thumbnailsContainer = document.getElementById('media-thumbnails');
        
        // Update main display
        if (item.type === 'image') {
          mainImage.src = item.data;
          mainImage.alt = item.name;
          mainImage.style.display = 'block';
          mainVideo.style.display = 'none';
        } else if (item.type === 'video') {
          mainVideo.src = item.data;
          mainVideo.style.display = 'block';
          mainImage.style.display = 'none';
        }
        
        // Update thumbnails active state
        thumbnailsContainer.querySelectorAll('.media-thumbnail').forEach((thumb, i) => {
          thumb.classList.toggle('active', i === index);
        });
        
        // Update counter
        updateMediaCounter();
      };

      // Navigation functions
      window.nextMedia = () => {
        const nextIndex = (currentMediaIndex + 1) % mediaItems.length;
        showMedia(nextIndex);
        resetAutoSlide();
      };

      window.previousMedia = () => {
        const prevIndex = currentMediaIndex === 0 ? mediaItems.length - 1 : currentMediaIndex - 1;
        showMedia(prevIndex);
        resetAutoSlide();
      };

      // Update counter display
      function updateMediaCounter() {
        const counter = document.getElementById('media-counter');
        if (counter && mediaItems.length > 0) {
          counter.textContent = `${currentMediaIndex + 1} / ${mediaItems.length}`;
        }
      }

      // Auto-slide functionality
      function startAutoSlide() {
        if (mediaItems.length > 1) {
          autoSlideInterval = setInterval(() => {
            nextMedia();
          }, 4000); // Change slide every 4 seconds
        }
      }

      function resetAutoSlide() {
        clearInterval(autoSlideInterval);
        startAutoSlide();
      }

      // Add keyboard navigation
      document.addEventListener('keydown', (e) => {
        const modal = document.getElementById('hostel-modal');
        if (modal && modal.classList.contains('show')) {
          if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
            e.preventDefault();
            previousMedia();
          } else if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
            e.preventDefault();
            nextMedia();
          } else if (e.key === 'Escape') {
            e.preventDefault();
            closeHostelModal();
          }
        }
      });

      // Pause auto-slide on hover
      document.addEventListener('DOMContentLoaded', () => {
        const mediaGallery = document.getElementById('modal-media-gallery');
        if (mediaGallery) {
          mediaGallery.addEventListener('mouseenter', () => {
            clearInterval(autoSlideInterval);
          });
          
          mediaGallery.addEventListener('mouseleave', () => {
            if (mediaItems.length > 1) {
              startAutoSlide();
            }
          });
        }
      });

      // Universal Warning System
      window.showWarning = (options) => {
        const {
          title = 'Confirm Action',
          message = 'Are you sure you want to proceed?',
          item = null,
          icon = '‚ö†Ô∏è',
          confirmText = 'Confirm',
          cancelText = 'Cancel',
          onConfirm = () => {},
          onCancel = () => {}
        } = options;

        // Create overlay
        const overlay = document.createElement('div');
        overlay.className = 'warning-overlay';
        
        // Create dialog
        const dialog = document.createElement('div');
        dialog.className = 'warning-dialog';
        
        dialog.innerHTML = `
          <div class="warning-icon">${icon}</div>
          <div class="warning-title">${title}</div>
          <div class="warning-message">${message}</div>
          ${item ? `<div class="warning-item">${item}</div>` : ''}
          <div class="warning-actions">
            <button class="warning-btn cancel" id="warning-cancel">${cancelText}</button>
            <button class="warning-btn confirm" id="warning-confirm">${confirmText}</button>
          </div>
        `;
        
        overlay.appendChild(dialog);
        document.body.appendChild(overlay);
        
        // Prevent body scroll
        document.body.style.overflow = 'hidden';
        
        // Handle clicks
        const cancelBtn = dialog.querySelector('#warning-cancel');
        const confirmBtn = dialog.querySelector('#warning-confirm');
        
        const closeWarning = () => {
          document.body.style.overflow = 'auto';
          overlay.remove();
        };
        
        cancelBtn.onclick = () => {
          onCancel();
          closeWarning();
        };
        
        confirmBtn.onclick = () => {
          onConfirm();
          closeWarning();
        };
        
        // Close on overlay click
        overlay.onclick = (e) => {
          if (e.target === overlay) {
            onCancel();
            closeWarning();
          }
        };
        
        // Close on escape key
        const handleEscape = (e) => {
          if (e.key === 'Escape') {
            onCancel();
            closeWarning();
            document.removeEventListener('keydown', handleEscape);
          }
        };
        document.addEventListener('keydown', handleEscape);
      };

      // Delete Hostel with Warning
      window.deleteHostelWithWarning = (index) => {
        const hostel = hostels[index];
        
        showWarning({
          title: 'Delete Hostel',
          message: 'This action cannot be undone. All hostel information will be permanently removed.',
          item: `Hostel: ${hostel.name} (${hostel.gender})`,
          icon: 'üóëÔ∏è',
          confirmText: 'Delete Forever',
          cancelText: 'Keep Hostel',
          onConfirm: () => {
            // Remove hostel from array
            hostels.splice(index, 1);
            
            // Update localStorage
            localStorage.setItem('hostels', JSON.stringify(hostels));
            
            // Update UI
            renderPublic();
            renderHostelsAdmin();
            updateAdminStats();
            
            // Show success message
            showNotification('Hostel deleted successfully', 'success');
          }
        });
      };

      // Enhanced delete admin function with warning
      window.deleteAdminWithWarning = (index) => {
        const admins = JSON.parse(localStorage.getItem('admins') || '[]');
        const admin = admins[index];
        
        showWarning({
          title: 'Delete Admin User',
          message: 'This admin user will lose access to the dashboard permanently.',
          item: `Admin: ${admin.user} (${admin.type || 'full'} access)`,
          icon: 'üë®‚Äçüíº',
          confirmText: 'Remove Admin',
          cancelText: 'Keep Admin',
          onConfirm: () => {
            admins.splice(index, 1);
            localStorage.setItem('admins', JSON.stringify(admins));
            renderAdmins();
            updateAdminStats();
            showNotification('Admin user removed successfully', 'success');
          }
        });
      };

      // Notification system
      window.showNotification = (message, type = 'info') => {
        const notification = document.createElement('div');
        notification.style.cssText = `
          position: fixed;
          top: 20px;
          right: 20px;
          background: ${type === 'success' ? '#10B981' : type === 'error' ? '#EF4444' : '#3B82F6'};
          color: white;
          padding: 1rem 1.5rem;
          border-radius: 8px;
          font-weight: 500;
          z-index: 10001;
          animation: slideInRight 0.3s ease-out;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        `;
        notification.textContent = message;
        
        // Add animation styles if not already present
        if (!document.getElementById('notification-styles')) {
          const style = document.createElement('style');
          style.id = 'notification-styles';
          style.textContent = `
            @keyframes slideInRight {
              from { transform: translateX(100%); opacity: 0; }
              to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOutRight {
              from { transform: translateX(0); opacity: 1; }
              to { transform: translateX(100%); opacity: 0; }
            }
          `;
          document.head.appendChild(style);
        }
        
        document.body.appendChild(notification);
        
        // Auto remove after 3 seconds
        setTimeout(() => {
          notification.style.animation = 'slideOutRight 0.3s ease-out';
          setTimeout(() => notification.remove(), 300);
        }, 3000);
      };

      // Excel Import Functions
      window.downloadExcelTemplate = () => {
        const template = `Name,Gender,Location,Price,Phone,WhatsApp,Details,Map,Images,Videos
Green Haven Hostel,Female,Near Punjab University,9000,+923001234567,+923001234567,Comfortable hostel with all amenities,https://maps.google.com,image1.jpg;image2.jpg,video1.mp4
City View Residence,Male,Downtown,12000,+923009876543,+923009876543,Modern hostel with gym access,https://maps.google.com,image3.jpg,
Student Living Residence,Female,Close to shopping areas,8500,+923005555555,+923005555555,Shared kitchen and laundry service,https://maps.google.com,image4.jpg;image5.jpg;image6.jpg,video2.mp4;video3.mp4`;
        
        const blob = new Blob([template], { type: 'text/csv' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'hostels_template.csv';
        a.click();
        window.URL.revokeObjectURL(url);
      };

      // Excel file input handler
      document.addEventListener('DOMContentLoaded', () => {
        const fileInput = document.getElementById('excel-file-input');
        if (fileInput) {
          fileInput.addEventListener('change', handleExcelImport);
        }
      });

      window.handleExcelImport = (event) => {
        const file = event.target.files[0];
        if (!file) return;
        
        document.getElementById('excel-file-name').textContent = file.name;
        
        const reader = new FileReader();
        reader.onload = (e) => {
          try {
            const csv = e.target.result;
            const lines = csv.split('\n');
            const headers = lines[0].split(',').map(h => h.trim());
            
            const importedHostels = [];
            for (let i = 1; i < lines.length; i++) {
              if (lines[i].trim()) {
                const values = lines[i].split(',').map(v => v.trim());
                const hostel = {
                  name: values[0] || '',
                  gender: values[1] || 'Male',
                  location: values[2] || '',
                  price: values[3] || '10000',
                  phone: values[4] || '',
                  whatsapp: values[5] || values[4] || '',
                  details: values[6] || '',
                  map: values[7] || '',
                  images: values[8] ? values[8].split(';').filter(img => img.trim()) : [],
                  videos: values[9] ? values[9].split(';').filter(vid => vid.trim()) : [],
                  img: 'https://via.placeholder.com/400x300?text=' + encodeURIComponent(values[0] || 'Hostel')
                };
                importedHostels.push(hostel);
              }
            }
            
            // Add imported hostels to existing ones
            hostels.push(...importedHostels);
            localStorage.setItem('hostels', JSON.stringify(hostels));
            
            // Update UI
            renderHostels();
            renderHostelsAdmin();
            updateAdminStats();
            
            alert(`Successfully imported ${importedHostels.length} hostels from Excel!`);
            
          } catch (error) {
            alert('Error importing Excel file. Please check the format and try again.');
            console.error('Excel import error:', error);
          }
        };
        
        reader.readAsText(file);
      };

      // Feedback Management Functions
      window.updateFeedbackMessage = () => {
        const message = document.getElementById('feedback-thank-you-message').value;
        localStorage.setItem('feedbackThankYouMessage', message);
        alert('Feedback thank you message updated successfully!');
      };

      window.closeHostelModal = (event) => {
        if (event && event.target !== event.currentTarget) return;
        
        // Stop auto-slideshow
        clearInterval(autoSlideInterval);
        
        const modal = document.getElementById('hostel-modal');
        modal.classList.remove('show');
        document.body.style.overflow = 'auto';
      };

      // Enhanced contact owner function
      window.contactOwner = (hostelName) => {
        const message = `Hello! I'm interested in ${hostelName}. Could you please provide more information about availability, pricing, and booking process?`;
        const settings = JSON.parse(localStorage.getItem('socialSettings') || '{}');
        const whatsappNumber = settings.whatsapp || '+923001234567';
        const cleanNumber = whatsappNumber.replace(/\+/g, '').replace(/\s/g, '');
        
        window.open(`https://wa.me/${cleanNumber}?text=${encodeURIComponent(message)}`, '_blank');
      };

      // Privacy Policy Modal Function
      window.showPrivacyPolicy = () => {
        const privacyContent = localStorage.getItem('privacy-policy') || `
        <h3>Privacy Policy</h3>
        <p><strong>Last updated:</strong> ${new Date().toLocaleDateString()}</p>
        
        <p>At HOSTALL, we value your privacy. This Privacy Policy explains how we collect, use, and protect any personal information shared with us through our website.</p>
        
        <h4>1. Information We Collect:</h4>
        <p><strong>User-Submitted Data:</strong> When users contact us via feedback forms, we may collect names, emails, or phone numbers.</p>
        <p><strong>Hostel Information:</strong> Our team collects hostel-related information through personal visits, calls, and referrals from friends. This data includes location, pricing, facilities, and general descriptions.</p>
        <p><strong>Technical Information:</strong> We may collect basic website usage data (e.g., browser type, pages visited) for improving the user experience.</p>
        
        <h4>2. How We Use This Information:</h4>
        <ul>
          <li>To publish and update hostel listings for public view.</li>
          <li>To improve search filters and content accuracy.</li>
          <li>To contact users who request support or have submitted queries.</li>
        </ul>
        
        <h4>3. Data Accuracy Notice:</h4>
        <p>Hostel data is collected and uploaded by our team, not the hostel owners. While we aim to ensure accuracy, some information may be estimated or subject to change. We do not guarantee that all listings are 100% current or correct.</p>
        
        <h4>4. Third-Party Sharing:</h4>
        <p>We do not sell or share your personal information with third parties, except where legally required.</p>
        
        <h4>5. Cookies and Analytics:</h4>
        <p>We may use cookies or analytics tools to better understand user behavior and improve the platform. You can manage cookies through your browser settings.</p>
        
        <h4>6. Your Rights:</h4>
        <p>You may:</p>
        <ul>
          <li>Request access to your personal information.</li>
          <li>Ask us to correct or delete your data.</li>
          <li>Contact us regarding privacy concerns through email.</li>
        </ul>
        
        <h4>Contact Us</h4>
        <p>If you have any questions about this Privacy Policy, please contact us at teamhostall@gmail.com</p>
        `;
        
        // Create modal
        const modal = document.createElement('div');
        modal.className = 'privacy-modal';
        modal.innerHTML = `
          <div class="privacy-modal-content">
            <div class="privacy-modal-header">
              <h2>Privacy Policy</h2>
              <button class="privacy-modal-close" onclick="this.closest('.privacy-modal').remove()">&times;</button>
            </div>
            <div class="privacy-modal-body">
              ${privacyContent}
            </div>
          </div>
        `;
        
        // Add styles if not already present
        if (!document.querySelector('#privacy-modal-styles')) {
          const styles = document.createElement('style');
          styles.id = 'privacy-modal-styles';
          styles.textContent = `
            .privacy-modal {
              position: fixed;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              background: rgba(0,0,0,0.8);
              z-index: 10000;
              display: flex;
              align-items: center;
              justify-content: center;
              padding: 2rem;
            }
            .privacy-modal-content {
              background: white;
              border-radius: 15px;
              max-width: 600px;
              width: 100%;
              max-height: 80vh;
              overflow-y: auto;
            }
            .privacy-modal-header {
              display: flex;
              justify-content: space-between;
              align-items: center;
              padding: 1.5rem 2rem;
              border-bottom: 1px solid #e2e8f0;
            }
            .privacy-modal-header h2 {
              margin: 0;
              color: #1a1a1a;
            }
            .privacy-modal-close {
              background: none;
              border: none;
              font-size: 1.5rem;
              cursor: pointer;
              color: #666;
              padding: 0;
              width: 30px;
              height: 30px;
              border-radius: 50%;
              display: flex;
              align-items: center;
              justify-content: center;
            }
            .privacy-modal-close:hover {
              background: #f1f5f9;
            }
            .privacy-modal-body {
              padding: 2rem;
              line-height: 1.6;
              color: #4a5568;
            }
            .privacy-modal-body h3, .privacy-modal-body h4 {
              color: #2d3748;
              margin-top: 1.5rem;
              margin-bottom: 0.5rem;
            }
            .privacy-modal-body h3 {
              font-size: 1.25rem;
            }
            .privacy-modal-body h4 {
              font-size: 1.1rem;
            }
            body.night-mode .privacy-modal-content {
              background: #2d2d2d;
              color: #e5e5e5;
            }
            body.night-mode .privacy-modal-header {
              border-bottom-color: #4a5568;
            }
            body.night-mode .privacy-modal-header h2 {
              color: #e5e5e5;
            }
            body.night-mode .privacy-modal-body h3,
            body.night-mode .privacy-modal-body h4 {
              color: #e5e5e5;
            }
          `;
          document.head.appendChild(styles);
        }
        
        document.body.appendChild(modal);
        document.body.style.overflow = 'hidden';
        
        // Remove modal when clicking outside
        modal.addEventListener('click', (e) => {
          if (e.target === modal) {
            modal.remove();
            document.body.style.overflow = 'auto';
          }
        });
      };

      window.saveChatSettings = () => {
        const settings = {
          enabled: document.getElementById('chat-enabled').checked,
          whatsapp: document.getElementById('whatsapp-number').value,
          email: document.getElementById('chat-email').value
        };
        localStorage.setItem('chatSettings', JSON.stringify(settings));
        alert('Chat settings saved!');
      };

      window.addFAQ = () => {
        alert('FAQ addition feature would be implemented here!');
      };

      window.saveFooter = () => {
        alert('Footer settings saved!');
      };

      window.savePolicies = () => {
        alert('Policies saved!');
      };

      // Initialize content editor on load
      setTimeout(() => {
        if (document.getElementById('content-section-select')) {
          loadContentSection();
        }
      }, 100);

      // Initialize
      renderPublic();
      loadFilterOptions();
      loadSavedImages();
      loadManualAds();
      
      // Initialize AdSense
      if (typeof(adsbygoogle) !== 'undefined') {
        const ads = document.querySelectorAll('.adsbygoogle');
        ads.forEach(ad => {
          try {
            (adsbygoogle = window.adsbygoogle || []).push({});
          } catch (e) {
            console.log('AdSense initialization:', e);
          }
        });
      }
      loadAnalyticsSettings();
      loadBrandingSettings();
      loadTypographySettings();
      
      // Initialize FAQs if not already done
      setTimeout(() => {
        initializeFAQs();
        loadFAQs();
        initializeTestimonials();
      }, 100);
    });

    // Testimonials Management Functions
    let editingTestimonialId = null;
    
    function initializeTestimonials() {
      // Initialize testimonials visibility setting
      if (!localStorage.getItem('testimonialsVisible')) {
        localStorage.setItem('testimonialsVisible', 'false'); // Hidden by default
      }
      
      // Initialize testimonials in localStorage if not exists
      if (!localStorage.getItem('testimonials')) {
        // Set default testimonials
        const defaultTestimonials = [
          {
            id: 'testimonial-1',
            quote: '"HOSTALL helped me find a perfect hostel near Punjab University within my budget! The verification process gave me confidence that I was choosing a safe place."',
            author: 'Sarah Ahmed',
            institution: 'LUMS Student',
            active: true
          },
          {
            id: 'testimonial-2',
            quote: '"The detailed listings saved me from visiting multiple hostels. I could compare facilities and prices easily before making my decision."',
            author: 'Ahmad Ali',
            institution: 'Punjab University Student',
            active: true
          },
          {
            id: 'testimonial-3',
            quote: '"Moving from Karachi to Lahore was stressful, but HOSTALL made finding accommodation so much easier. Highly recommended for all students!"',
            author: 'Fatima Khan',
            institution: 'UET Student',
            active: true
          },
          {
            id: 'testimonial-4',
            quote: '"The team physically visits each hostel, so I knew I could trust the listings. Found my ideal hostel in just 2 days!"',
            author: 'Hassan Malik',
            institution: 'FAST University Student',
            active: true
          }
        ];
        localStorage.setItem('testimonials', JSON.stringify(defaultTestimonials));
      }
      
      renderTestimonials();
      updateTestimonialStats();
      renderAdminTestimonials();
      updateTestimonialsVisibility();
    }
    
    function renderTestimonials() {
      const testimonials = JSON.parse(localStorage.getItem('testimonials') || '[]');
      const activeTestimonials = testimonials.filter(t => t.active);
      
      // Update testimonial carousel on homepage
      const carousel = document.querySelector('.testimonial-carousel');
      if (carousel) {
        // Clear existing items except the heading
        const heading = carousel.querySelector('h2');
        carousel.innerHTML = '';
        if (heading) carousel.appendChild(heading);
        
        // Add testimonial items
        activeTestimonials.forEach((testimonial, index) => {
          const item = document.createElement('div');
          item.className = `testimonial-item ${index === 0 ? 'active' : ''}`;
          
          item.innerHTML = `
            <div class="testimonial-quote">${testimonial.quote}</div>
            <div class="testimonial-author">- ${testimonial.author}, ${testimonial.institution}</div>
          `;
          
          carousel.appendChild(item);
        });
        
        // Add indicators
        const indicators = document.createElement('div');
        indicators.className = 'testimonial-indicators';
        
        activeTestimonials.forEach((_, index) => {
          const indicator = document.createElement('div');
          indicator.className = `indicator ${index === 0 ? 'active' : ''}`;
          indicator.onclick = () => showTestimonial(index);
          indicators.appendChild(indicator);
        });
        
        carousel.appendChild(indicators);
      }
    }
    
    function updateTestimonialStats() {
      const testimonials = JSON.parse(localStorage.getItem('testimonials') || '[]');
      const activeTestimonials = testimonials.filter(t => t.active);
      
      if (document.getElementById('total-testimonial-count')) {
        document.getElementById('total-testimonial-count').textContent = testimonials.length;
      }
      
      if (document.getElementById('active-testimonial-count')) {
        document.getElementById('active-testimonial-count').textContent = activeTestimonials.length;
      }
    }
    
    function renderAdminTestimonials() {
      const testimonials = JSON.parse(localStorage.getItem('testimonials') || '[]');
      const testimonialList = document.getElementById('testimonial-list');
      
      if (testimonialList) {
        testimonialList.innerHTML = '';
        
        if (testimonials.length === 0) {
          testimonialList.innerHTML = '<div style="text-align: center; padding: 2rem; background: #F7FAFC; border-radius: 8px;">No testimonials found. Add your first testimonial!</div>';
          return;
        }
        
        testimonials.forEach(testimonial => {
          const item = document.createElement('div');
          item.className = 'admin-list-item';
          item.style.marginBottom = '1rem';
          item.style.padding = '1rem';
          item.style.border = '1px solid #E2E8F0';
          item.style.borderRadius = '8px';
          item.style.background = testimonial.active ? 'white' : '#F7FAFC';
          
          item.innerHTML = `
            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
              <div>
                <div style="font-weight: 600; color: #4A5568;">${testimonial.author}</div>
                <div style="font-size: 0.9rem; color: #718096;">${testimonial.institution}</div>
              </div>
              <div>
                <button class="btn-icon" onclick="editTestimonial('${testimonial.id}')" title="Edit Testimonial">‚úèÔ∏è</button>
                <button class="btn-icon" onclick="deleteTestimonial('${testimonial.id}')" title="Delete Testimonial">üóëÔ∏è</button>
                <button class="btn-icon" onclick="toggleTestimonialStatus('${testimonial.id}')" title="${testimonial.active ? 'Deactivate' : 'Activate'} Testimonial">
                  ${testimonial.active ? 'üü¢' : '‚ö™'}
                </button>
              </div>
            </div>
            <div style="margin-top: 0.8rem; font-style: italic; color: #4A5568;">
              ${testimonial.quote}
            </div>
          `;
          
          testimonialList.appendChild(item);
        });
      }
    }
    
    function showTestimonialForm() {
      editingTestimonialId = null;
      
      document.getElementById('testimonial-form-title').textContent = 'Add New Testimonial';
      document.getElementById('testimonial-quote').value = '';
      document.getElementById('testimonial-author').value = '';
      document.getElementById('testimonial-institution').value = '';
      document.getElementById('testimonial-active').checked = true;
      
      document.getElementById('testimonial-form-modal').style.display = 'block';
    }
    
    function closeTestimonialForm() {
      document.getElementById('testimonial-form-modal').style.display = 'none';
    }
    
    function editTestimonial(id) {
      const testimonials = JSON.parse(localStorage.getItem('testimonials') || '[]');
      const testimonial = testimonials.find(t => t.id === id);
      
      if (testimonial) {
        editingTestimonialId = id;
        
        document.getElementById('testimonial-form-title').textContent = 'Edit Testimonial';
        document.getElementById('testimonial-quote').value = testimonial.quote.replace(/^"|"$/g, '');
        document.getElementById('testimonial-author').value = testimonial.author;
        document.getElementById('testimonial-institution').value = testimonial.institution;
        document.getElementById('testimonial-active').checked = testimonial.active;
        
        document.getElementById('testimonial-form-modal').style.display = 'block';
      }
    }
    
    function saveTestimonial() {
      const quote = document.getElementById('testimonial-quote').value;
      const author = document.getElementById('testimonial-author').value;
      const institution = document.getElementById('testimonial-institution').value;
      const active = document.getElementById('testimonial-active').checked;
      
      if (!quote || !author || !institution) {
        showNotification('Please fill in all fields', 'error');
        return;
      }
      
      const testimonials = JSON.parse(localStorage.getItem('testimonials') || '[]');
      
      if (editingTestimonialId) {
        // Update existing testimonial
        const index = testimonials.findIndex(t => t.id === editingTestimonialId);
        
        if (index !== -1) {
          testimonials[index] = {
            ...testimonials[index],
            quote: `"${quote}"`,
            author,
            institution,
            active
          };
        }
      } else {
        // Add new testimonial
        const newId = 'testimonial-' + (new Date().getTime());
        
        testimonials.push({
          id: newId,
          quote: `"${quote}"`,
          author,
          institution,
          active
        });
      }
      
      localStorage.setItem('testimonials', JSON.stringify(testimonials));
      
      renderTestimonials();
      updateTestimonialStats();
      renderAdminTestimonials();
      
      closeTestimonialForm();
      showNotification('Testimonial saved successfully', 'success');
    }
    
    function deleteTestimonial(id) {
      showWarning({
        title: 'Delete Testimonial',
        message: 'Are you sure you want to delete this testimonial? This action cannot be undone.',
        item: 'This testimonial will be permanently removed',
        confirmText: 'Delete',
        cancelText: 'Cancel',
        onConfirm: () => {
          const testimonials = JSON.parse(localStorage.getItem('testimonials') || '[]');
          const filteredTestimonials = testimonials.filter(t => t.id !== id);
          
          localStorage.setItem('testimonials', JSON.stringify(filteredTestimonials));
          
          renderTestimonials();
          updateTestimonialStats();
          renderAdminTestimonials();
          
          showNotification('Testimonial deleted successfully', 'success');
        }
      });
    }
    
    function toggleTestimonialStatus(id) {
      const testimonials = JSON.parse(localStorage.getItem('testimonials') || '[]');
      const index = testimonials.findIndex(t => t.id === id);
      
      if (index !== -1) {
        testimonials[index].active = !testimonials[index].active;
        localStorage.setItem('testimonials', JSON.stringify(testimonials));
        
        renderTestimonials();
        updateTestimonialStats();
        renderAdminTestimonials();
        
        showNotification(`Testimonial ${testimonials[index].active ? 'activated' : 'deactivated'} successfully`, 'success');
      }
    }
    
    // Testimonials Visibility Control
    function updateTestimonialsVisibility() {
      const isVisible = localStorage.getItem('testimonialsVisible') === 'true';
      const testimonialsSection = document.querySelector('.testimonials-section');
      const visibilityToggle = document.getElementById('testimonials-visible');
      
      if (testimonialsSection) {
        if (isVisible) {
          testimonialsSection.classList.add('visible');
        } else {
          testimonialsSection.classList.remove('visible');
        }
      }
      
      if (visibilityToggle) {
        visibilityToggle.checked = isVisible;
      }
    }
    
    function toggleTestimonialsVisibility() {
      const isVisible = document.getElementById('testimonials-visible').checked;
      localStorage.setItem('testimonialsVisible', isVisible.toString());
      updateTestimonialsVisibility();
      
      showNotification(`Testimonials section ${isVisible ? 'shown' : 'hidden'} successfully`, 'success');
    }
    
    // Update FAQ management to include helpful votes data
    const updateFAQStats = () => {
      const faqs = JSON.parse(localStorage.getItem('faqs') || '[]');
      const publishedFAQs = faqs.filter(faq => faq.published);
      const helpfulStats = JSON.parse(localStorage.getItem('helpfulStats') || '{}');
      
      let totalHelpfulVotes = 0;
      let totalUnhelpfulVotes = 0;
      
      // Calculate total helpful and unhelpful votes
      Object.values(helpfulStats).forEach(stats => {
        totalHelpfulVotes += (stats.yes || 0);
        totalUnhelpfulVotes += (stats.no || 0);
      });
      
      // Update stats in the admin panel
      if (document.getElementById('total-faq-count')) {
        document.getElementById('total-faq-count').textContent = faqs.length;
      }
      
      if (document.getElementById('published-faq-count')) {
        document.getElementById('published-faq-count').textContent = publishedFAQs.length;
      }
      
      if (document.getElementById('helpful-votes-count')) {
        document.getElementById('helpful-votes-count').textContent = totalHelpfulVotes;
      }
      
      if (document.getElementById('unhelpful-votes-count')) {
        document.getElementById('unhelpful-votes-count').textContent = totalUnhelpfulVotes;
      }
    };
    
    // Update renderAdminFAQs to show helpful votes data
    const originalRenderAdminFAQs = window.renderAdminFAQs;
    window.renderAdminFAQs = () => {
      if (originalRenderAdminFAQs) {
        originalRenderAdminFAQs();
      }
      
      const faqList = document.getElementById('faq-list');
      if (!faqList) return;
      
      const faqs = JSON.parse(localStorage.getItem('faqs') || '[]');
      const helpfulStats = JSON.parse(localStorage.getItem('helpfulStats') || '{}');
      
      // Add helpful votes data to each FAQ item
      faqs.forEach(faq => {
        const faqItem = faqList.querySelector(`[data-faq-id="${faq.id}"]`);
        if (!faqItem) return;
        
        const stats = helpfulStats[faq.id] || { yes: 0, no: 0 };
        
        // Add votes stats if not already present
        if (!faqItem.querySelector('.faq-votes-stats')) {
          const statsDiv = document.createElement('div');
          statsDiv.className = 'faq-votes-stats';
          statsDiv.style.marginTop = '0.5rem';
          statsDiv.style.fontSize = '0.9rem';
          statsDiv.style.color = '#718096';
          statsDiv.innerHTML = `
            <span title="Helpful votes" style="margin-right: 1rem;">üëç ${stats.yes || 0}</span>
            <span title="Unhelpful votes">üëé ${stats.no || 0}</span>
          `;
          
          // Insert before the buttons
          const buttonContainer = faqItem.querySelector('div:last-child');
          if (buttonContainer) {
            faqItem.insertBefore(statsDiv, buttonContainer);
          } else {
            faqItem.appendChild(statsDiv);
          }
        }
      });
    };
  </script>

  <!-- Back to Top Button -->
  <button class="back-to-top" id="backToTopBtn" onclick="scrollToTop()">‚Üë</button>

  <script>
    // Back to Top Button Functionality
    window.addEventListener('scroll', () => {
      const backToTopBtn = document.getElementById('backToTopBtn');
      // Calculate 75% of the page height (much more scroll needed)
      const threeQuarterPageHeight = window.innerHeight * 0.75;
      
      if (window.pageYOffset > threeQuarterPageHeight) {
        backToTopBtn.classList.add('visible');
      } else {
        backToTopBtn.classList.remove('visible');
      }
    });

    function scrollToTop() {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    }

    // Student Testimonials Functionality
    let currentTestimonial = 0;
    const testimonials = document.querySelectorAll('.testimonial-item');
    const indicators = document.querySelectorAll('.indicator');

    function showTestimonial(index) {
      // Hide all testimonials
      testimonials.forEach(testimonial => testimonial.classList.remove('active'));
      indicators.forEach(indicator => indicator.classList.remove('active'));
      
      // Show selected testimonial
      if (testimonials[index]) {
        testimonials[index].classList.add('active');
        indicators[index].classList.add('active');
        currentTestimonial = index;
      }
    }

    function nextTestimonial() {
      const nextIndex = (currentTestimonial + 1) % testimonials.length;
      showTestimonial(nextIndex);
    }

    // Auto-rotate testimonials every 5 seconds
    setInterval(nextTestimonial, 5000);
    
    // Update FAQ voting summary with Supabase integration
    window.updateFAQVoteSummary = async function() {
      try {
        // Try to get data from Supabase first
        if (window.supabase) {
          await updateHelpfulCounters();
          return;
        }
        
        // Fallback to localStorage if Supabase is not available
        const helpfulStats = JSON.parse(localStorage.getItem('helpfulStats') || '{}');
        
        let totalHelpful = 0;
        let totalNotHelpful = 0;
        
        // Calculate totals
        Object.values(helpfulStats).forEach(stat => {
          totalHelpful += (stat.yes || 0);
          totalNotHelpful += (stat.no || 0);
        });
        
        // Update UI elements
        const helpfulElement = document.getElementById('total-helpful-votes');
        const notHelpfulElement = document.getElementById('total-not-helpful-votes');
        
        if (helpfulElement) helpfulElement.textContent = totalHelpful;
        if (notHelpfulElement) notHelpfulElement.textContent = totalNotHelpful;
        
        // Also update the bottom FAQ summary box
        const faqHelpfulCount = document.getElementById('faq-helpful-count');
        const faqQuestionsCount = document.getElementById('faq-questions-count');
        const faqHelpfulQuestionsCount = document.getElementById('faq-helpful-questions-count');
        
        if (faqHelpfulCount) faqHelpfulCount.textContent = totalHelpful;
        
        // Count of published FAQs (this is static in the demo, but could be dynamic in a real app)
        if (faqQuestionsCount) {
          const faqs = JSON.parse(localStorage.getItem('faqs') || '[]');
          const publishedCount = faqs.filter(faq => faq.published).length || 15; // Default to 15 if no data
          faqQuestionsCount.textContent = publishedCount;
        }
        
        // Count how many questions have received helpful votes (yes votes)
        if (faqHelpfulQuestionsCount) {
          let helpfulQuestionsCount = 0;
          Object.values(helpfulStats).forEach(stat => {
            if (stat.yes > 0) {
              helpfulQuestionsCount++;
            }
          });
          faqHelpfulQuestionsCount.textContent = helpfulQuestionsCount;
        }
      } catch (error) {
        console.error('Error in updateFAQVoteSummary:', error);
      }
    }
    
    // Initialize FAQ voting summary and analytics on page load
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize global variables for FAQ analytics
      window.faqIdToQuestion = {};
      window.faqAnalyticsCharts = {};
      
      setTimeout(updateFAQVoteSummary, 500);
    });

    // FAQ Helpful Buttons Functionality with Supabase integration
    window.markHelpful = async function(faqId, helpful, event) {
      // Use passed event or global event object
      const e = event || window.event;
      
      try {
        // Check if Supabase is available
        if (!window.supabase) {
          console.error('Supabase client not initialized');
          // Fallback to localStorage
          return markHelpfulLocalFallback(faqId, helpful, e);
        }
        
        // Show loading indicator
        const target = e && (e.target || e.srcElement);
        let buttonsContainer = null;
        
        if (target) {
          // Go up the DOM tree until we find the helpful section
          let parent = target;
          while (parent && parent.parentNode) {
            parent = parent.parentNode;
            if (parent.classList && parent.classList.contains('faq-helpful')) {
              buttonsContainer = parent.querySelector('.helpful-buttons');
              if (buttonsContainer) {
                buttonsContainer.innerHTML = `
                  <div class="feedback-thanks" style="color: #6B7280; font-weight: 600;">
                    <span class="loading-indicator">‚è≥ Processing...</span>
                  </div>
                `;
                break;
              }
            }
          }
        }
        
        // Get client info for user tracking
        const clientInfo = {
          userAgent: navigator.userAgent,
          language: navigator.language,
          timestamp: new Date().toISOString()
        };
        
        // Call the Supabase function to record vote with history tracking
        const { data, error } = await supabase.rpc('record_helpful_vote_with_history', {
          p_faq_id: faqId,
          p_is_helpful: helpful,
          p_client_info: JSON.stringify(clientInfo)
        });
        
        if (error) {
          console.error('Error recording vote:', error);
          // Fallback to localStorage
          return markHelpfulLocalFallback(faqId, helpful, e);
        }
        
        console.log('Vote recorded successfully:', data);
        
        // Also store in localStorage to remember user's votes
        const userVotes = JSON.parse(localStorage.getItem('userVotes') || '{}');
        userVotes[faqId] = helpful;
        localStorage.setItem('userVotes', JSON.stringify(userVotes));
        
        // Update UI with server response
        updateHelpfulUI(faqId, data.helpful_count, data.not_helpful_count, buttonsContainer);
        
        // Setup real-time subscription for this FAQ if not already done
        setupHelpfulVoteSubscription(faqId);
        
      } catch (error) {
        console.error('Error in markHelpful:', error);
        // Fallback to localStorage
        return markHelpfulLocalFallback(faqId, helpful, e);
      }
      
      // Prevent form submission
      if (e && e.preventDefault) e.preventDefault();
      return false;
    };
    
    // Fallback to localStorage if Supabase fails
    function markHelpfulLocalFallback(faqId, helpful, event) {
      // Use passed event or global event object
      const e = event || window.event;
      
      // Get existing helpful stats
      const helpfulStats = JSON.parse(localStorage.getItem('helpfulStats') || '{}');
      
      // Check if user already voted for this FAQ
      const userVotes = JSON.parse(localStorage.getItem('userVotes') || '{}');
      if (userVotes[faqId]) {
        // Update existing vote
        if (helpfulStats[faqId]) {
          if (userVotes[faqId] === true && helpful === false) {
            helpfulStats[faqId].yes = Math.max(0, helpfulStats[faqId].yes - 1);
            helpfulStats[faqId].no = (helpfulStats[faqId].no || 0) + 1;
          } else if (userVotes[faqId] === false && helpful === true) {
            helpfulStats[faqId].no = Math.max(0, helpfulStats[faqId].no - 1);
            helpfulStats[faqId].yes = (helpfulStats[faqId].yes || 0) + 1;
          }
        }
      } else {
        // New vote
        if (!helpfulStats[faqId]) {
          helpfulStats[faqId] = { yes: 0, no: 0 };
        }
        
        if (helpful) {
          helpfulStats[faqId].yes = (helpfulStats[faqId].yes || 0) + 1;
        } else {
          helpfulStats[faqId].no = (helpfulStats[faqId].no || 0) + 1;
        }
      }
      
      // Save vote
      userVotes[faqId] = helpful;
      localStorage.setItem('helpfulStats', JSON.stringify(helpfulStats));
      localStorage.setItem('userVotes', JSON.stringify(userVotes));
      
      // Update global vote counts
      updateFAQVoteSummary();
      
      // Find and update the feedback UI immediately
      let buttonsUpdated = false;
      
      try {
        // Method 1: Find through clicked button
        if (e && (e.target || e.srcElement)) {
          const clickedButton = e.target || e.srcElement;
          let parent = clickedButton;
          
          // Go up the DOM tree until we find the helpful section
          while (parent && parent.parentNode) {
            parent = parent.parentNode;
            if (parent.classList && parent.classList.contains('faq-helpful')) {
              const buttons = parent.querySelector('.helpful-buttons');
              if (buttons) {
                buttons.innerHTML = `
                  <div class="feedback-thanks" style="color: #10B981; font-weight: 600;">
                    ‚úÖ Thank you for your feedback! (${helpfulStats[faqId].yes} helpful, ${helpfulStats[faqId].no} not helpful)
                  </div>
                `;
                buttonsUpdated = true;
                break;
              }
            }
          }
        }
        
        // Method 2: Fallback - Find by searching all helpful sections
        if (!buttonsUpdated) {
          const allHelpfulSections = document.querySelectorAll('.faq-helpful');
          for (let i = 0; i < allHelpfulSections.length; i++) {
            const section = allHelpfulSections[i];
            const btnsContainer = section.querySelector('.helpful-buttons');
            if (btnsContainer) {
              const yesBtn = btnsContainer.querySelector(`[onclick*="'${faqId}', true"]`);
              const noBtn = btnsContainer.querySelector(`[onclick*="'${faqId}', false"]`);
              
              if (yesBtn || noBtn) {
                btnsContainer.innerHTML = `
                  <div class="feedback-thanks" style="color: #10B981; font-weight: 600;">
                    ‚úÖ Thank you for your feedback! (${helpfulStats[faqId].yes} helpful, ${helpfulStats[faqId].no} not helpful)
                  </div>
                `;
                buttonsUpdated = true;
                break;
              }
            }
          }
        }
        
      } catch (error) {
        console.error('Error updating helpful UI:', error);
      }
      
      return false;
    }
    
    // Function to update the UI with vote counts from the server
    function updateHelpfulUI(faqId, helpfulCount, notHelpfulCount, specificContainer = null) {
      try {
        let buttonsUpdated = false;
        const message = `
          <div class="feedback-thanks" style="color: #10B981; font-weight: 600;">
            ‚úÖ Thank you for your feedback! (${helpfulCount} helpful, ${notHelpfulCount} not helpful)
          </div>
        `;
        
        // Update specific container if provided
        if (specificContainer) {
          specificContainer.innerHTML = message;
          buttonsUpdated = true;
        }
        
        // Fallback: find by searching all helpful sections
        if (!buttonsUpdated) {
          const allHelpfulSections = document.querySelectorAll('.faq-helpful');
          for (let i = 0; i < allHelpfulSections.length; i++) {
            const section = allHelpfulSections[i];
            const btnsContainer = section.querySelector('.helpful-buttons');
            if (btnsContainer) {
              const yesBtn = btnsContainer.querySelector(`[onclick*="'${faqId}', true"]`);
              if (yesBtn) {
                btnsContainer.innerHTML = message;
                buttonsUpdated = true;
                break;
              }
            }
          }
        }
        
        // Update any counters on the dashboard
        updateFAQVoteSummary();
      } catch (error) {
        console.error('Error updating helpful UI:', error);
      }
    }
    
    // Function to set up real-time subscription for helpful votes
    function setupHelpfulVoteSubscription(faqId) {
      if (!window.supabase) return;
      
      // Store active subscriptions to prevent duplicates
      window.activeHelpfulSubscriptions = window.activeHelpfulSubscriptions || {};
      
      // If already subscribed to this FAQ, don't subscribe again
      if (window.activeHelpfulSubscriptions[faqId]) return;
      
      // Subscribe to changes for this FAQ
      const subscription = supabase
        .channel(`helpful-votes-${faqId}`)
        .on('postgres_changes', { 
          event: '*', 
          schema: 'public', 
          table: 'helpful_votes',
          filter: `faq_id=eq.${faqId}`
        }, payload => {
          console.log('Real-time vote update:', payload);
          // Fetch the latest counts
          fetchHelpfulCounts(faqId);
        })
        .subscribe();
        
      // Store the subscription
      window.activeHelpfulSubscriptions[faqId] = subscription;
    }
    
    // Function to fetch current helpful counts from the database
    async function fetchHelpfulCounts(faqId) {
      try {
        if (!window.supabase) return;
        
        const { data, error } = await supabase
          .from('helpful_votes_summary')
          .select('*')
          .eq('faq_id', faqId)
          .single();
          
        if (error) {
          console.error('Error fetching helpful counts:', error);
          return;
        }
        
        if (data) {
          // Update UI with fresh data
          updateHelpfulUI(faqId, data.helpful_count, data.not_helpful_count);
        }
      } catch (error) {
        console.error('Error in fetchHelpfulCounts:', error);
      }
    }
        
      } catch (error) {
        console.error('Error updating helpful UI:', error);
      }
      
      // Final fallback if neither method worked
      if (!buttonsUpdated) {
        console.log('Could not find buttons to update for FAQ:', faqId);
      }
    }

    // Initialize testimonials on page load
    document.addEventListener('DOMContentLoaded', () => {
      // Make sure first testimonial is shown
      if (testimonials.length > 0) {
        showTestimonial(0);
      }
    });

    // Unsplash Image Search Functions
    window.searchUnsplashImages = () => {
      const query = prompt('Enter search terms for images (e.g., "hostel room", "bedroom", "student accommodation"):');
      if (!query) return;
      
      // Create a modal to show image results
      const modal = document.createElement('div');
      modal.className = 'unsplash-modal';
      modal.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.8);
        z-index: 10000;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem;
      `;
      
      modal.innerHTML = `
        <div style="background: white; border-radius: 15px; max-width: 800px; width: 100%; max-height: 80vh; overflow-y: auto;">
          <div style="display: flex; justify-content: space-between; align-items: center; padding: 1.5rem 2rem; border-bottom: 1px solid #e2e8f0;">
            <h2 style="margin: 0; color: #1a1a1a;">Search Results: ${query}</h2>
            <button onclick="this.closest('.unsplash-modal').remove(); document.body.style.overflow = 'auto';" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #666; padding: 0; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">√ó</button>
          </div>
          <div id="unsplash-results" style="padding: 2rem; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
            <div style="text-align: center; grid-column: 1/-1; padding: 2rem;">Loading images...</div>
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
      document.body.style.overflow = 'hidden';
      
      // Search Unsplash using Youware's unsplash integration
      searchUnsplashAPI(query);
    };

    async function searchUnsplashAPI(query) {
      try {
        // Create form data for the search
        const formData = new FormData();
        formData.append('query', query);
        formData.append('per_page', '12');
        
        // Make the API call using unsplash search function
        const photos = await unsplash__unsplash_search({
          query: query,
          per_page: 12,
          orientation: 'landscape'
        });
        
        if (photos && photos.length > 0) {
          displayUnsplashResults(photos);
        } else {
          throw new Error('No results');
        }
      } catch (error) {
        console.error('Error searching Unsplash:', error);
        // Fallback to demo images
        displayUnsplashResults([
          { urls: { small: 'https://images.unsplash.com/photo-1540518614846-7eded47c6e5d?w=400' }, alt_description: 'Modern hostel room' },
          { urls: { small: 'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400' }, alt_description: 'Student bedroom' },
          { urls: { small: 'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=400' }, alt_description: 'Hostel common area' }
        ]);
      }
    }

    function displayUnsplashResults(images) {
      const container = document.getElementById('unsplash-results');
      if (images.length === 0) {
        container.innerHTML = '<div style="text-align: center; grid-column: 1/-1; padding: 2rem; color: #666;">No images found. Try different search terms.</div>';
        return;
      }
      
      container.innerHTML = images.map(img => `
        <div style="border: 1px solid #e2e8f0; border-radius: 8px; overflow: hidden; cursor: pointer; transition: transform 0.2s;" onclick="selectUnsplashImage('${img.urls.small}', '${img.alt_description || 'Hostel image'}')">
          <img src="${img.urls.small}" alt="${img.alt_description || 'Hostel image'}" style="width: 100%; height: 150px; object-fit: cover;">
          <div style="padding: 0.5rem; font-size: 0.8rem; color: #666; text-align: center;">${img.alt_description || 'Click to use'}</div>
        </div>
      `).join('');
    }

    window.selectUnsplashImage = (imageUrl, altText) => {
      // Add the selected image to the media uploads
      addImageFromURL(imageUrl, altText);
      
      // Close the modal
      document.querySelector('.unsplash-modal').remove();
      document.body.style.overflow = 'auto';
    };

    function addImageFromURL(imageUrl, altText) {
      const container = document.getElementById('media-uploads-container');
      const mediaItem = document.createElement('div');
      mediaItem.className = 'media-upload-item';
      mediaItem.style.cssText = 'border: 1px solid #E2E8F0; border-radius: 8px; padding: 1rem; margin-bottom: 1rem; position: relative;';
      
      mediaItem.innerHTML = `
        <div style="display: flex; align-items: center; gap: 1rem;">
          <img src="${imageUrl}" alt="${altText}" style="width: 80px; height: 60px; object-fit: cover; border-radius: 4px;">
          <div style="flex: 1;">
            <div style="font-weight: 600; margin-bottom: 0.25rem;">Selected from Unsplash</div>
            <div style="font-size: 0.9rem; color: #666;">${altText}</div>
          </div>
          <button type="button" onclick="this.closest('.media-upload-item').remove();" style="background: #EF4444; color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer;">√ó</button>
        </div>
        <input type="hidden" class="unsplash-url" value="${imageUrl}">
      `;
      
      container.appendChild(mediaItem);
    }

    // Google Maps Integration
    window.initMap = () => {
      // This function is called when Google Maps API loads
      console.log('Google Maps API loaded');
    };

    window.showHostelOnMap = (mapUrl, hostelName) => {
      if (!mapUrl) {
        alert('Map location not available for this hostel');
        return;
      }
      
      // Create a modal to show the map
      const modal = document.createElement('div');
      modal.className = 'map-modal';
      modal.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.8);
        z-index: 10000;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem;
      `;
      
      modal.innerHTML = `
        <div style="background: white; border-radius: 15px; max-width: 800px; width: 100%; max-height: 80vh; overflow: hidden;">
          <div style="display: flex; justify-content: space-between; align-items: center; padding: 1.5rem 2rem; border-bottom: 1px solid #e2e8f0;">
            <h2 style="margin: 0; color: #1a1a1a;">üìç ${hostelName} Location</h2>
            <button onclick="this.closest('.map-modal').remove(); document.body.style.overflow = 'auto';" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #666; padding: 0; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">√ó</button>
          </div>
          <div style="padding: 1rem;">
            <iframe src="${mapUrl}" width="100%" height="400" style="border: 0; border-radius: 8px;" allowfullscreen="" loading="lazy"></iframe>
            <div style="text-align: center; margin-top: 1rem;">
              <a href="${mapUrl}" target="_blank" style="background: #8B5CF6; color: white; padding: 0.5rem 1rem; border-radius: 4px; text-decoration: none; display: inline-block;">Open in Google Maps</a>
            </div>
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
      document.body.style.overflow = 'hidden';
      
      // Close modal when clicking outside
      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          modal.remove();
          document.body.style.overflow = 'auto';
        }
      });
    };

    // Phone number formatting
    function formatPhoneInput(input) {
      let value = input.value.replace(/\D/g, '');
      if (value.startsWith('92')) {
        value = '+' + value;
      } else if (value.startsWith('3') && value.length === 10) {
        value = '+92' + value;
      } else if (!value.startsWith('+92') && value.length > 0) {
        value = '+92' + value;
      }
      
      // Format as +92-XXX-XXXXXXX
      if (value.length >= 3) {
        value = value.replace(/(\+92)(\d{3})(\d{7})/, '$1-$2-$3');
      }
      
      input.value = value;
    }

    // Add event listeners for phone formatting
    document.addEventListener('DOMContentLoaded', function() {
      const phoneInputs = document.querySelectorAll('#h-phone, #h-whatsapp, #chat-whatsapp');
      phoneInputs.forEach(input => {
        if (input) {
          input.addEventListener('input', () => formatPhoneInput(input));
        }
      });
    });

  </script>
  <script src="app.js?v=2025-01-02-20:21"></script>
  <!-- 
  Direct sync script is now only loaded in admin area to prevent
  the sync button from appearing on the public home page
  -->
  <script>
    // Only load the direct-sync.js script when in admin mode
    if (window.location.hash.includes('admin')) {
      const syncScript = document.createElement('script');
      syncScript.src = 'direct-data-sync.js?v=2025-01-02-20:21';
      document.body.appendChild(syncScript);
      console.log('Admin mode detected, loading sync script');
    } else {
      console.log('Public mode, skipping sync script');
    }
  </script>
  
  <!-- Force hostel loading for home page -->
  <script>
    // Aggressive hostel loading for home page
    function forceHostelDisplay() {
      const publicList = document.getElementById('public-list');
      
      if (publicList && window.supabase) {
        console.log('üè† Force loading hostels for home page...');
        
        // Direct Supabase query to get all hostels
        window.supabase
          .from('hostels')
          .select('*')
          .order('created_at', { ascending: false })
          .then(({ data, error }) => {
            if (error) {
              console.error('‚ùå Error loading hostels:', error);
              return;
            }
            
            if (data && data.length > 0) {
              console.log('‚úÖ Loaded', data.length, 'hostels:', data.map(h => h.name));
              
              // Clear existing content
              publicList.innerHTML = '';
              
              // Create hostel cards
              data.forEach((hostel, index) => {
                const hostelCard = document.createElement('div');
                hostelCard.className = 'hostel-card';
                
                // Handle image with better fallback
                let imageUrl = hostel.img || hostel.image;
                if (!imageUrl || imageUrl === 'null' || imageUrl === null) {
                  const genderColor = hostel.gender === 'Female' ? 'ff69b4' : hostel.gender === 'Male' ? '4169e1' : '6b7280';
                  imageUrl = `https://via.placeholder.com/300x200/${genderColor}/ffffff?text=${encodeURIComponent(hostel.name || 'Hostel')}`;
                }
                
                const locationDisplay = (hostel.location || 'Location not specified').split(',')[0].trim();
                
                hostelCard.innerHTML = `
                  <div class="hostel-image-container">
                    <img src="${imageUrl}" class="hostel-image" alt="${hostel.name}" 
                         onerror="this.src='https://via.placeholder.com/300x200/6b7280/ffffff?text=Hostel+Image'">
                    <div class="hostel-gender-badge ${hostel.gender ? hostel.gender.toLowerCase() : ''}">
                      ${hostel.gender || 'Any'}
                    </div>
                  </div>
                  <div class="hostel-content">
                    <h3 class="hostel-name">${hostel.name || 'Unnamed Hostel'}</h3>
                    <div class="hostel-location-only">
                      üìç ${locationDisplay}
                    </div>
                    <div class="hostel-contact" style="font-size: 0.9rem; color: #6b7280; margin: 0.5rem 0; display: flex; gap: 1rem;">
                      ${hostel.phone ? `<a href="tel:${hostel.phone}" style="color: #10b981; text-decoration: none; display: flex; align-items: center; gap: 0.25rem;"><i class="hgi-stroke hgi-call" style="color: #10b981;"></i> ${hostel.phone}</a>` : ''}
                      ${hostel.whatsapp ? `<a href="https://wa.me/${hostel.whatsapp.replace(/[^0-9]/g, '')}" target="_blank" style="color: #25d366; text-decoration: none; display: flex; align-items: center; gap: 0.25rem;"><i class="hgi-stroke hgi-whatsapp" style="color: #25d366;"></i> WhatsApp</a>` : ''}
                    </div>
                    <button class="view-details-btn" onclick="showHostelDetails(${JSON.stringify(hostel).replace(/"/g, '&quot;')})">View Details</button>
                  </div>
                `;
                publicList.appendChild(hostelCard);
              });
              
              // Update results count
              const resultsCount = document.getElementById('results-count');
              if (resultsCount) {
                resultsCount.textContent = `${data.length} hostels found`;
              }
              
              console.log('‚úÖ Hostel cards created successfully');
            } else {
              console.log('‚ö†Ô∏è No hostels found in database');
              publicList.innerHTML = '<div style="text-align: center; padding: 2rem; grid-column: 1/-1;"><h3>No hostels available</h3><p>Check back later for new listings.</p></div>';
            }
          })
          .catch(err => {
            console.error('‚ùå Supabase error:', err);
          });
      }
    }
    
    // Global showHostelDetails function for buttons - Smart format based on available data
    window.showHostelDetails = function(hostel) {
      const facilities = hostel.facilities ? 
        (Array.isArray(hostel.facilities) ? hostel.facilities.join(', ') : hostel.facilities) : 
        'Not specified';
      
      // Ensure map URL is properly formatted for Google Maps
      if (hostel.map && !hostel.map.startsWith('http')) {
        hostel.map = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(hostel.map)}`;
      }
      
      // Check if hostel has enhanced data (pricing, policies, etc.)
      const hasEnhancedData = hostel.rent || hostel.monthly_rent || hostel.security_deposit || 
                             hostel.contact_person || hostel.office_hours || hostel.checkin_time ||
                             hostel.other_facilities || hostel.email || hostel.website;
      
      if (hasEnhancedData) {
        // Show enhanced details for hostels with comprehensive information
        // Handle room pricing
        let roomPricing = '';
        if (hostel.room_prices && Array.isArray(hostel.room_prices)) {
          roomPricing = '\n\nüí∞ Room Pricing:\n' + hostel.room_prices.map(price => {
            if (price.type && price.price) {
              return `‚Ä¢ ${price.type}: ${price.price} ${price.currency || 'PKR'}${price.per ? ' per ' + price.per : ''}`;
            }
            return '';
          }).filter(item => item).join('\n');
        }
        
        const details = `
üè† HOSTEL DETAILS (Enhanced Information Available)

üìç Name: ${hostel.name || 'Not specified'}
üë• Gender: ${hostel.gender || 'Any'}
üè† Location: ${hostel.location || 'Not specified'}
üìû Phone: ${hostel.phone || 'Not provided'}
üì± WhatsApp: ${hostel.whatsapp || hostel.phone || 'Not provided'}
üìß Email: ${hostel.email || 'Not provided'}
üåê Website: ${hostel.website || 'Not provided'}

üíµ PRICING & FEES:
‚Ä¢ Monthly Rent: ${hostel.rent || hostel.monthly_rent || 'Contact for pricing'}
‚Ä¢ Security Deposit: ${hostel.security_deposit || 'Contact for details'}
‚Ä¢ Admission Fee: ${hostel.admission_fee || 'Contact for details'}
‚Ä¢ Utilities: ${hostel.utilities_included ? 'Included' : (hostel.utilities_cost || 'Ask hostel')}${roomPricing}

üè¢ FACILITIES & AMENITIES:
‚Ä¢ Basic Facilities: ${facilities}
‚Ä¢ Additional Facilities: ${hostel.other_facilities || 'None mentioned'}
‚Ä¢ Room Type: ${hostel.room_type || 'Standard rooms'}
‚Ä¢ Meals: ${hostel.meals_included ? 'Included' : (hostel.meal_plan || 'Not included')}

üë§ CONTACT PERSON:
‚Ä¢ Contact Person: ${hostel.contact_person || 'Hostel Manager'}
‚Ä¢ Office Hours: ${hostel.office_hours || '9 AM - 6 PM'}
‚Ä¢ Emergency Contact: ${hostel.emergency_contact || hostel.phone || 'Same as main number'}

üìã RULES & POLICIES:
‚Ä¢ Check-in Time: ${hostel.checkin_time || '12:00 PM onwards'}
‚Ä¢ Check-out Time: ${hostel.checkout_time || '11:00 AM'}
‚Ä¢ Visitor Policy: ${hostel.visitor_policy || 'Check with management'}
‚Ä¢ Curfew: ${hostel.curfew || 'Ask hostel for details'}
‚Ä¢ Age Limit: ${hostel.age_limit || '18-30 years'}

üöó TRANSPORTATION:
‚Ä¢ Nearby Universities: ${hostel.nearby_universities || 'Contact for details'}
‚Ä¢ Public Transport: ${hostel.transport_access || 'Available'}
‚Ä¢ Parking: ${hostel.parking || 'Check availability'}

‚ÑπÔ∏è ADDITIONAL INFORMATION:
${hostel.details || 'No additional details provided'}

üìç LOCATION & MAP:
${hostel.map ? 'üó∫Ô∏è View on Google Maps: ' + hostel.map : '‚ùå Map not provided - Ask for address details'}

---
üìù Note: Please contact the hostel directly to confirm all details, pricing, and availability before making any decisions.
        `;
        
        alert(details);
      } else {
        // Show simple format for basic hostels with rooms section
        let roomPricing = '';
        if (hostel.rooms && Array.isArray(hostel.rooms)) {
          roomPricing = '\n\nüí∞ Room Pricing:\n' + hostel.rooms.map(room => {
            return `‚Ä¢ ${room.type}: ${room.price}${room.description ? ' (' + room.description + ')' : ''}`;
          }).join('\n');
        }
        
        const details = `HOSTEL DETAILS

üìç Name: ${hostel.name || 'Not specified'}
üë• Gender: ${hostel.gender || 'Any'}
üè† Location: ${hostel.location || 'Not specified'}

üì± CONTACT:
‚Ä¢ üìû Phone: ${hostel.phone || 'Not provided'} ${hostel.phone ? `(Click to call: tel:${hostel.phone})` : ''}
‚Ä¢ üí¨ WhatsApp: ${hostel.whatsapp || hostel.phone || 'Not provided'} ${hostel.whatsapp ? `(Click to message: https://wa.me/${hostel.whatsapp.replace(/[^0-9]/g, '')})` : ''}

üè¢ Facilities: ${facilities}${roomPricing}

Additional Information:
${hostel.details || 'No additional details'}

${hostel.map ? 'üó∫Ô∏è View on map: ' + hostel.map : '‚ùå Map not provided'}`;
        
        alert(details);
      }
    };
    
    // Enhanced detailed information function (optional for future use)
    window.showHostelDetailsEnhanced = function(hostel) {
      const facilities = hostel.facilities ? 
        (Array.isArray(hostel.facilities) ? hostel.facilities.join(', ') : hostel.facilities) : 
        'Not specified';
      
      // Handle room pricing
      let roomPricing = '';
      if (hostel.room_prices && Array.isArray(hostel.room_prices)) {
        roomPricing = '\n\nüí∞ Room Pricing:\n' + hostel.room_prices.map(price => {
          if (price.type && price.price) {
            return `‚Ä¢ ${price.type}: ${price.price} ${price.currency || 'PKR'}${price.per ? ' per ' + price.per : ''}`;
          }
          return '';
        }).filter(item => item).join('\n');
      }
      
      // Enhanced details with comprehensive information
      const details = `
üè† HOSTEL DETAILS

üìç Name: ${hostel.name || 'Not specified'}
üë• Gender: ${hostel.gender || 'Any'}
üè† Location: ${hostel.location || 'Not specified'}
üìû Phone: ${hostel.phone || 'Not provided'}
üì± WhatsApp: ${hostel.whatsapp || hostel.phone || 'Not provided'}
üìß Email: ${hostel.email || 'Not provided'}
üåê Website: ${hostel.website || 'Not provided'}

üíµ PRICING & FEES:
‚Ä¢ Monthly Rent: ${hostel.rent || hostel.monthly_rent || 'Contact for pricing'}
‚Ä¢ Security Deposit: ${hostel.security_deposit || 'Contact for details'}
‚Ä¢ Admission Fee: ${hostel.admission_fee || 'Contact for details'}
‚Ä¢ Utilities: ${hostel.utilities_included ? 'Included' : (hostel.utilities_cost || 'Ask hostel')}${roomPricing}

üè¢ FACILITIES & AMENITIES:
‚Ä¢ Basic Facilities: ${facilities}
‚Ä¢ Additional Facilities: ${hostel.other_facilities || 'None mentioned'}
‚Ä¢ Room Type: ${hostel.room_type || 'Standard rooms'}
‚Ä¢ Meals: ${hostel.meals_included ? 'Included' : (hostel.meal_plan || 'Not included')}
‚Ä¢ Internet: ${facilities.includes('wifi') ? 'WiFi Available' : 'Check with hostel'}
‚Ä¢ Security: ${facilities.includes('security') ? '24/7 Security' : 'Check with hostel'}

üë§ CONTACT PERSON:
‚Ä¢ Contact Person: ${hostel.contact_person || 'Hostel Manager'}
‚Ä¢ Office Hours: ${hostel.office_hours || '9 AM - 6 PM'}
‚Ä¢ Emergency Contact: ${hostel.emergency_contact || hostel.phone || 'Same as main number'}

üìã RULES & POLICIES:
‚Ä¢ Check-in Time: ${hostel.checkin_time || '12:00 PM onwards'}
‚Ä¢ Check-out Time: ${hostel.checkout_time || '11:00 AM'}
‚Ä¢ Visitor Policy: ${hostel.visitor_policy || 'Check with management'}
‚Ä¢ Curfew: ${hostel.curfew || 'Ask hostel for details'}
‚Ä¢ Age Limit: ${hostel.age_limit || '18-30 years'}

üöó TRANSPORTATION & LOCATION:
‚Ä¢ Nearby Universities: ${hostel.nearby_universities || 'Contact for details'}
‚Ä¢ Public Transport: ${hostel.transport_access || 'Available'}
‚Ä¢ Distance to City Center: ${hostel.city_center_distance || 'Ask hostel'}
‚Ä¢ Parking: ${hostel.parking || 'Check availability'}

‚ÑπÔ∏è ADDITIONAL INFORMATION:
${hostel.details || 'No additional details provided'}

üìç LOCATION & MAP:
${hostel.map ? 'üó∫Ô∏è View on Google Maps: ' + hostel.map : '‚ùå Map not provided - Ask for address details'}

---
üìù Note: Please contact the hostel directly to confirm all details, pricing, and availability before making any decisions.
      `;
      
      alert(details);
    };
    
    // Run multiple times to ensure loading
    setTimeout(forceHostelDisplay, 500);
    setTimeout(forceHostelDisplay, 1500);
    setTimeout(forceHostelDisplay, 3000);
    
    // Also run on page load events
    document.addEventListener('DOMContentLoaded', forceHostelDisplay);
    window.addEventListener('load', forceHostelDisplay);
  </script>
  <!-- Page finalization script -->
  <!-- Enhanced Security and Password Management Scripts -->
  <script src="./password-manager.js?v=2025-01-02-20:21"></script>
  <script src="./security-manager.js?v=2025-01-02-20:21"></script>
  <script src="./enhanced-maps.js?v=2025-01-02-20:21"></script>
  <script src="./notification-manager.js?v=2025-01-02-20:21"></script>
  <script src="./enhanced-mcp-tools.js?v=2025-01-02-20:21"></script>

  <script>
    // Enhanced initialization with comprehensive features
    window.addEventListener('load', async function() {
      console.log('‚úÖ Page fully loaded');
      
      try {
        // Initialize all managers
        await initializeManagers();
        
        // Setup enhanced login functionality
        setupEnhancedLogin();
        
        // Setup security dashboard
        setupSecurityDashboard();
        
        // Setup notification system
        setupNotificationSystem();
        
        // Setup enhanced MCP tools
        setupEnhancedMCPTools();
        
        // Update existing functions with enhanced features
        enhanceExistingFunctions();
        
        console.log('üîí All enhanced features initialized');
      } catch (error) {
        console.error('‚ùå Error initializing enhanced features:', error);
      }
    });

    // Initialize all managers
    async function initializeManagers() {
      // Initialize security manager
      if (window.SecurityManager && typeof window.SecurityManager === 'function') {
        window.securityManager = new window.SecurityManager(supabase);
        await window.securityManager.init();
      }
      
      // Initialize password manager
      if (window.PasswordManager && typeof window.PasswordManager === 'function') {
        window.passwordManager = new window.PasswordManager(supabase);
        await window.passwordManager.init();
      }
      
      // Initialize notification manager
      if (window.NotificationManager && typeof window.NotificationManager === 'function') {
        window.notificationManager = new window.NotificationManager(supabase);
        await window.notificationManager.init();
      }
      
      // Initialize enhanced MCP tools
      if (window.EnhancedMCPTools && typeof window.EnhancedMCPTools === 'function') {
        window.enhancedMCPTools = new window.EnhancedMCPTools(supabase, 'AIzaSyDUDTg2qpuIh3Yf0b80T0aViBmP2Dv1x7s');
        await window.enhancedMCPTools.init();
      }
      
      // Initialize enhanced maps (if separate)
      if (window.enhancedMaps) {
        await window.enhancedMaps.init();
      }
    }

    // Setup notification system
    function setupNotificationSystem() {
      if (!window.notificationManager) return;
      
      // Add notification test button to admin panel (for testing)
      const adminPanel = document.querySelector('.admin-section');
      if (adminPanel && !document.getElementById('notification-test-btn')) {
        const testButton = document.createElement('button');
        testButton.id = 'notification-test-btn';
        testButton.innerHTML = 'üìß Test Notifications';
        testButton.className = 'bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors mt-4';
        testButton.onclick = async function() {
          const userEmail = document.getElementById('login-user').value || 'test@hostall.com';
          const results = await window.notificationManager.testNotifications(userEmail);
          console.log('Notification test results:', results);
          alert('Notification system tested! Check console for details.');
        };
        adminPanel.appendChild(testButton);
      }
      
      // Setup automatic security notifications
      window.sendSecurityNotification = async function(eventType, userEmail, eventData) {
        if (window.notificationManager) {
          return await window.notificationManager.sendSecurityNotification(eventType, userEmail, eventData);
        }
        return { success: false, error: 'Notification manager not available' };
      };
    }

    // Setup enhanced MCP tools
    function setupEnhancedMCPTools() {
      if (!window.enhancedMCPTools) return;
      
      // Make tools globally accessible
      window.showEnhancedHostelDetails = async function(hostel) {
        const detailsContainer = await window.enhancedMCPTools.createEnhancedHostelDetails(hostel);
        
        // Replace existing hostel details with enhanced version
        const existingDetails = document.getElementById('hostel-details-content');
        if (existingDetails) {
          existingDetails.innerHTML = '';
          existingDetails.appendChild(detailsContainer);
        }
      };
      
      window.showEnhancedAboutUs = async function() {
        const aboutContainer = await window.enhancedMCPTools.createEnhancedAboutUs();
        
        // Replace existing about us content with enhanced version
        const aboutSection = document.getElementById('about');
        if (aboutSection) {
          const contentDiv = aboutSection.querySelector('.container') || aboutSection;
          contentDiv.innerHTML = '';
          contentDiv.appendChild(aboutContainer);
        }
      };
    }

    // Enhanced login functionality
    function setupEnhancedLogin() {
      // Update existing admin login to use security manager
      const originalAdminLogin = window.adminLogin;
      window.adminLogin = async function() {
        const email = document.getElementById('login-user').value;
        const password = document.getElementById('login-pass').value;
        
        if (!email || !password) {
          alert('Please enter both email and password.');
          return;
        }
        
        // Use security manager for enhanced login
        if (window.securityManager) {
          const result = await window.securityManager.secureLogin(email, password);
          if (result.success) {
            // Send login notification
            if (window.notificationManager) {
              await window.notificationManager.notifyLoginSuccess(email, {
                device: navigator.userAgent.includes('Mobile') ? 'Mobile Device' : 'Desktop',
                location: 'Lahore, Pakistan', // You can enhance this with actual geolocation
                ip_address: 'Dynamic IP'
              });
            }
            
            // Show security dashboard if admin
            showSecurityDashboard();
          } else {
            // Send failed login notification
            if (window.notificationManager && result.failedAttempts > 2) {
              await window.notificationManager.notifyFailedLogin(email, {
                attempts: result.failedAttempts,
                device: navigator.userAgent.includes('Mobile') ? 'Mobile Device' : 'Desktop',
                location: 'Lahore, Pakistan',
                ip_address: 'Dynamic IP'
              });
            }
            
            if (result.rateLimited) {
              alert(result.error);
            } else {
              alert('Login failed. Please check your credentials.');
            }
          }
        } else {
          // Fallback to original login
          originalAdminLogin();
        }
      };
    }

    // Setup security dashboard
    function setupSecurityDashboard() {
      if (!window.securityManager) return;
      
      const dashboard = document.getElementById('security-dashboard');
      if (!dashboard) return;
      
      // Update security metrics
      function updateSecurityMetrics() {
        const metrics = window.securityManager.getSecurityDashboard();
        const metricsContainer = document.getElementById('security-metrics');
        
        if (metricsContainer) {
          metricsContainer.innerHTML = `
            <div style="text-align: center; padding: 0.75rem; background: white; border-radius: 8px; border: 1px solid #e5e7eb;">
              <div style="font-size: 1.25rem; font-weight: 600; color: #059669;">${metrics.activeSessions}</div>
              <div style="font-size: 0.75rem; color: #6b7280;">Active Sessions</div>
            </div>
            <div style="text-align: center; padding: 0.75rem; background: white; border-radius: 8px; border: 1px solid #e5e7eb;">
              <div style="font-size: 1.25rem; font-weight: 600; color: ${metrics.securityLevel === 'High' ? '#dc2626' : '#059669'};">${metrics.securityLevel}</div>
              <div style="font-size: 0.75rem; color: #6b7280;">Security Level</div>
            </div>
            <div style="text-align: center; padding: 0.75rem; background: white; border-radius: 8px; border: 1px solid #e5e7eb;">
              <div style="font-size: 1.25rem; font-weight: 600; color: #dc2626;">${metrics.failedLogins}</div>
              <div style="font-size: 0.75rem; color: #6b7280;">Failed Logins (24h)</div>
            </div>
          `;
        }
      }
      
      // Update metrics every 30 seconds
      setInterval(updateSecurityMetrics, 30000);
      
      // Force cross-device data sync every 15 seconds
      setInterval(() => {
        if (window.supabase && window.location.hash.includes('admin')) {
          if (typeof loadHostelsFromSupabase === 'function') {
            loadHostelsFromSupabase();
            console.log('üîÑ Cross-device sync completed at', new Date().toLocaleTimeString());
          }
        }
      }, 15000);
    }

    // Show security dashboard for admins
    function showSecurityDashboard() {
      const dashboard = document.getElementById('security-dashboard');
      if (dashboard) {
        dashboard.style.display = 'block';
      }
    }

    // Security Functions
    window.changePassword = function() {
      // Create password change modal
      const modal = document.createElement('div');
      modal.style.cssText = `
        position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
        background: rgba(0,0,0,0.5); display: flex; align-items: center; 
        justify-content: center; z-index: 1000;
      `;
      
      modal.innerHTML = `
        <div style="background: white; padding: 2rem; border-radius: 12px; width: 90%; max-width: 400px; max-height: 90vh; overflow-y: auto;">
          <h3 style="margin: 0 0 1.5rem 0; color: #8B5CF6; text-align: center;">üîë Change Password</h3>
          
          <div style="margin-bottom: 1rem;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Current Password</label>
            <input type="password" id="current-password" style="width: 100%; padding: 0.75rem; border: 1px solid #E2E8F0; border-radius: 6px;">
          </div>
          
          <div style="margin-bottom: 1rem;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">New Password</label>
            <input type="password" id="new-password" style="width: 100%; padding: 0.75rem; border: 1px solid #E2E8F0; border-radius: 6px;">
            <div style="font-size: 0.8rem; color: #6B7280; margin-top: 0.25rem;">Minimum 8 characters</div>
          </div>
          
          <div style="margin-bottom: 1.5rem;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Confirm New Password</label>
            <input type="password" id="confirm-password" style="width: 100%; padding: 0.75rem; border: 1px solid #E2E8F0; border-radius: 6px;">
          </div>
          
          <div style="display: flex; gap: 0.75rem;">
            <button onclick="this.closest('div').parentElement.remove()" style="flex: 1; padding: 0.75rem; background: #6B7280; color: white; border: none; border-radius: 6px; cursor: pointer;">
              Cancel
            </button>
            <button onclick="submitPasswordChange()" style="flex: 1; padding: 0.75rem; background: #8B5CF6; color: white; border: none; border-radius: 6px; cursor: pointer;">
              Update Password
            </button>
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
      
      // Close modal when clicking outside
      modal.addEventListener('click', (e) => {
        if (e.target === modal) modal.remove();
      });
    };

    window.submitPasswordChange = function() {
      const currentPassword = document.getElementById('current-password').value;
      const newPassword = document.getElementById('new-password').value;
      const confirmPassword = document.getElementById('confirm-password').value;
      
      if (!currentPassword || !newPassword || !confirmPassword) {
        alert('Please fill in all fields.');
        return;
      }
      
      if (newPassword.length < 8) {
        alert('New password must be at least 8 characters long.');
        return;
      }
      
      if (newPassword !== confirmPassword) {
        alert('New passwords do not match.');
        return;
      }
      
      // Here you would typically make an API call to change the password
      // For now, we'll simulate success
      alert('Password changed successfully!');
      
      // Add security event
      addSecurityEvent('Password Changed', 'Account password was successfully updated');
      
      document.querySelector('[style*="rgba(0,0,0,0.5)"]').remove();
    };

    window.setup2FA = function() {
      // Create 2FA setup modal
      const modal = document.createElement('div');
      modal.style.cssText = `
        position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
        background: rgba(0,0,0,0.5); display: flex; align-items: center; 
        justify-content: center; z-index: 1000;
      `;
      
      modal.innerHTML = `
        <div style="background: white; padding: 2rem; border-radius: 12px; width: 90%; max-width: 500px; max-height: 90vh; overflow-y: auto;">
          <h3 style="margin: 0 0 1.5rem 0; color: #8B5CF6; text-align: center;">üîê Enable Two-Factor Authentication</h3>
          
          <div style="text-align: center; margin-bottom: 1.5rem;">
            <p style="color: #6B7280; margin-bottom: 1rem;">Scan this QR code with your authenticator app (Google Authenticator, Authy, etc.)</p>
            
            <!-- QR Code placeholder -->
            <div style="width: 200px; height: 200px; background: #F3F4F6; border: 2px dashed #D1D5DB; margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center; border-radius: 8px;">
              <div style="text-align: center; color: #6B7280;">
                <div style="font-size: 3rem; margin-bottom: 0.5rem;">üì±</div>
                <div style="font-size: 0.9rem;">QR Code will be generated here</div>
              </div>
            </div>
            
            <div style="background: #F8F9FA; padding: 1rem; border-radius: 6px; margin-bottom: 1rem;">
              <p style="margin: 0; font-size: 0.9rem; color: #4A5568;">Manual entry code:</p>
              <code style="background: white; padding: 0.5rem; border-radius: 4px; display: block; margin-top: 0.5rem; font-family: monospace;">ABCD EFGH IJKL MNOP</code>
            </div>
          </div>
          
          <div style="margin-bottom: 1.5rem;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Enter verification code from your app:</label>
            <input type="text" id="2fa-code" placeholder="000000" maxlength="6" style="width: 100%; padding: 0.75rem; border: 1px solid #E2E8F0; border-radius: 6px; text-align: center; font-size: 1.1rem; letter-spacing: 0.1rem;">
          </div>
          
          <div style="display: flex; gap: 0.75rem;">
            <button onclick="this.closest('div').parentElement.remove()" style="flex: 1; padding: 0.75rem; background: #6B7280; color: white; border: none; border-radius: 6px; cursor: pointer;">
              Cancel
            </button>
            <button onclick="verify2FA()" style="flex: 1; padding: 0.75rem; background: #8B5CF6; color: white; border: none; border-radius: 6px; cursor: pointer;">
              Enable 2FA
            </button>
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
      
      // Close modal when clicking outside
      modal.addEventListener('click', (e) => {
        if (e.target === modal) modal.remove();
      });
    };

    window.verify2FA = function() {
      const code = document.getElementById('2fa-code').value;
      
      if (!code || code.length !== 6) {
        alert('Please enter a valid 6-digit code.');
        return;
      }
      
      // Here you would typically verify the code with your backend
      // For now, we'll simulate success
      alert('Two-Factor Authentication enabled successfully!');
      
      // Save 2FA status to localStorage
      localStorage.setItem('2fa-enabled', 'true');
      
      // Add security event
      addSecurityEvent('2FA Enabled', 'Two-Factor Authentication was successfully enabled for your account');
      
      // Update the 2FA status in the security section
      const statusElement = document.getElementById('2fa-status');
      if (statusElement) {
        statusElement.textContent = 'Enabled';
        statusElement.style.color = '#10B981';
      }
      
      // Update buttons
      const enableBtn = document.getElementById('enable-2fa-btn');
      const disableBtn = document.getElementById('disable-2fa-btn');
      if (enableBtn) enableBtn.style.display = 'none';
      if (disableBtn) disableBtn.style.display = 'block';
      
      document.querySelector('[style*="rgba(0,0,0,0.5)"]').remove();
    };

    window.disable2FA = function() {
      if (confirm('Are you sure you want to disable Two-Factor Authentication? This will make your account less secure.')) {
        // Here you would typically make an API call to disable 2FA
        alert('Two-Factor Authentication disabled.');
        
        // Save 2FA status to localStorage
        localStorage.setItem('2fa-enabled', 'false');
        
        // Add security event
        addSecurityEvent('2FA Disabled', 'Two-Factor Authentication was disabled for your account');
        
        // Update the 2FA status in the security section
        const statusElement = document.getElementById('2fa-status');
        if (statusElement) {
          statusElement.textContent = 'Disabled';
          statusElement.style.color = '#EF4444';
        }
        
        // Update buttons
        const enableBtn = document.getElementById('enable-2fa-btn');
        const disableBtn = document.getElementById('disable-2fa-btn');
        if (enableBtn) enableBtn.style.display = 'block';
        if (disableBtn) disableBtn.style.display = 'none';
      }
    };

    // Add security event helper function
    window.addSecurityEvent = function(type, description) {
      const securityData = JSON.parse(localStorage.getItem('security-data') || '{"successfulLogins": 0, "failedLogins": 0, "events": []}');
      
      const event = {
        type: type,
        description: description,
        timestamp: new Date().toLocaleString()
      };
      
      securityData.events = securityData.events || [];
      securityData.events.unshift(event); // Add to beginning
      
      // Keep only last 50 events
      if (securityData.events.length > 50) {
        securityData.events = securityData.events.slice(0, 50);
      }
      
      localStorage.setItem('security-data', JSON.stringify(securityData));
      
      // Refresh security metrics if on security page
      if (document.getElementById('admin-security')?.classList.contains('active')) {
        initializeSecurityMetrics();
      }
    };

    // Enhanced password visibility toggle
    function togglePasswordVisibility(inputId) {
      const input = document.getElementById(inputId);
      const toggle = document.getElementById(inputId + '-toggle');
      
      if (input.type === 'password') {
        input.type = 'text';
        if (toggle) toggle.className = 'hgi-stroke hgi-view-off';
      } else {
        input.type = 'password';
        if (toggle) toggle.className = 'hgi-stroke hgi-view';
      }
    }

    // Enhanced functions
    function enhanceExistingFunctions() {
      // Enhanced forgot password
      window.showForgotPassword = function() {
        document.getElementById('forgot-password-modal').style.display = 'flex';
      };
      
      window.closeForgotPassword = function() {
        document.getElementById('forgot-password-modal').style.display = 'none';
      };
      
      window.showResetPassword = function() {
        document.getElementById('reset-password-modal').style.display = 'block';
      };
      
      window.closeResetPassword = function() {
        document.getElementById('reset-password-modal').style.display = 'none';
        document.getElementById('reset-token').value = '';
        document.getElementById('new-password').value = '';
        document.getElementById('confirm-new-password').value = '';
        document.getElementById('reset-password-error').style.display = 'none';
        document.getElementById('reset-password-success').style.display = 'none';
      };
      
      window.resetPasswordWithCode = async () => {
        const resetToken = document.getElementById('reset-token').value;
        const newPassword = document.getElementById('new-password').value;
        const confirmPassword = document.getElementById('confirm-new-password').value;
        const errorDiv = document.getElementById('reset-password-error');
        const successDiv = document.getElementById('reset-password-success');
        const submitButton = document.getElementById('reset-password-submit');
        
        // Clear previous messages
        errorDiv.style.display = 'none';
        successDiv.style.display = 'none';
        
        // Validate inputs
        if (!resetToken) {
          errorDiv.textContent = 'Please enter the reset token from your email';
          errorDiv.style.display = 'block';
          return;
        }
        
        if (!newPassword) {
          errorDiv.textContent = 'Please enter a new password';
          errorDiv.style.display = 'block';
          return;
        }
        
        if (newPassword !== confirmPassword) {
          errorDiv.textContent = 'Passwords do not match';
          errorDiv.style.display = 'block';
          return;
        }
        
        // Validate password strength
        if (newPassword.length < 8) {
          errorDiv.textContent = 'Password must be at least 8 characters long';
          errorDiv.style.display = 'block';
          return;
        }
        
        // Disable submit button
        submitButton.disabled = true;
        submitButton.innerHTML = '<i class="hgi-stroke hgi-loading-01"></i> Updating...';
        
        try {
          // Check reset token
          const resetRequests = JSON.parse(localStorage.getItem('password-reset-requests') || '[]');
          const resetRequest = resetRequests.find(r => r.resetCode === resetToken && !r.used);
          
          if (!resetRequest) {
            errorDiv.textContent = 'Invalid or expired reset token';
            errorDiv.style.display = 'block';
            return;
          }
          
          // Check if token is expired
          const now = new Date();
          const expiry = new Date(resetRequest.expiry);
          if (now > expiry) {
            errorDiv.textContent = 'Reset token has expired. Please request a new one.';
            errorDiv.style.display = 'block';
            return;
          }
          
          // Update admin password
          const admins = JSON.parse(localStorage.getItem('admins') || '[]');
          const adminIndex = admins.findIndex(a => a.user_email === resetRequest.email);
          
          if (adminIndex === -1) {
            errorDiv.textContent = 'Admin account not found';
            errorDiv.style.display = 'block';
            return;
          }
          
          // Hash the new password (in production, use proper hashing)
          const hashedPassword = btoa(newPassword + 'hostall_salt');
          admins[adminIndex].password_hash = hashedPassword;
          admins[adminIndex].updated_at = new Date().toISOString();
          
          // Mark reset request as used
          resetRequest.used = true;
          resetRequest.usedAt = new Date().toISOString();
          
          // Save changes
          localStorage.setItem('admins', JSON.stringify(admins));
          localStorage.setItem('password-reset-requests', JSON.stringify(resetRequests));
          
          // Show success message
          successDiv.innerHTML = `
            <div style="background: #10b981; color: white; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
              <i class="hgi-stroke hgi-check-circle"></i>
              Password updated successfully! You can now login with your new password.
            </div>
          `;
          successDiv.style.display = 'block';
          
          // Clear form
          document.getElementById('reset-token').value = '';
          document.getElementById('new-password').value = '';
          document.getElementById('confirm-new-password').value = '';
          
          // Auto close after 3 seconds
          setTimeout(() => {
            closeResetPassword();
          }, 3000);
          
        } catch (error) {
          errorDiv.textContent = 'An error occurred. Please try again.';
          errorDiv.style.display = 'block';
        } finally {
          // Re-enable submit button
          submitButton.disabled = false;
          submitButton.innerHTML = '<i class="hgi-stroke hgi-checkmark-circle-01"></i> Update Password';
        }
      };
      
      // Enhanced hostel display with MCP tools
      const originalShowHostelDetails = window.showHostelDetails;
      window.showHostelDetails = async function(hostel) {
        if (window.enhancedMCPTools) {
          await window.showEnhancedHostelDetails(hostel);
        } else {
          originalShowHostelDetails(hostel);
        }
      };
      
      // Enhanced about us section
      window.showAboutSection = function() {
        console.log('üîµ showAboutSection called');
        try {
          show('about');
          if (window.enhancedMCPTools) {
            // Delay to ensure section is visible first
            setTimeout(() => window.showEnhancedAboutUs(), 300);
          }
        } catch (error) {
          console.error('‚ùå Error in showAboutSection:', error);
        }
      };
      
      // Enhanced admin functions
      window.showAdminSection = function(section, event) {
        // Check if security manager allows access
        if (window.securityManager && !window.adminManager?.isAuthenticated) {
          window.securityManager.showSecurityAlert('Please log in to access admin features.');
          return;
        }
        
        // Hide all admin sections
        document.querySelectorAll('.admin-section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.admin-nav-item').forEach(item => item.classList.remove('active'));
        
        // Show selected section
        const targetSection = document.getElementById('admin-' + section);
        if (targetSection) {
          targetSection.classList.add('active');
          
          // Initialize security section when shown
          if (section === 'security') {
            initializeSecuritySection();
          }
          
          // Load FAQs when FAQ section is shown
          if (section === 'faq') {
            setTimeout(() => {
              if (typeof window.renderAdminFAQs === 'function') {
                window.renderAdminFAQs();
              }
            }, 100);
          }
        }
        
        if (event && event.target) {
          event.target.classList.add('active');
        }
        
        // Fix for ensuring media controls only appear in hostel section
        const hostelMediaGroups = document.querySelectorAll('.hostel-media-group');
        hostelMediaGroups.forEach(group => {
          group.style.display = section === 'hostels' ? 'block' : 'none';
        });
        
        // Fix for ensuring save button only appears in hostel section
        const hostelSaveButtons = document.querySelectorAll('.hostel-save-button');
        hostelSaveButtons.forEach(button => {
          button.style.display = section === 'hostels' ? 'block' : 'none';
        });
      };

      // Initialize security section
      window.initializeSecuritySection = function() {
        // Initialize 2FA status
        const statusElement = document.getElementById('2fa-status');
        const enableBtn = document.getElementById('enable-2fa-btn');
        const disableBtn = document.getElementById('disable-2fa-btn');
        
        // Check if 2FA is enabled (from localStorage or your backend)
        const twoFAEnabled = localStorage.getItem('2fa-enabled') === 'true';
        
        if (statusElement) {
          statusElement.textContent = twoFAEnabled ? 'Enabled' : 'Disabled';
          statusElement.style.color = twoFAEnabled ? '#10B981' : '#EF4444';
        }
        
        if (enableBtn) {
          enableBtn.style.display = twoFAEnabled ? 'none' : 'block';
          enableBtn.disabled = false;
        }
        
        if (disableBtn) {
          disableBtn.style.display = twoFAEnabled ? 'block' : 'none';
        }
        
        // Initialize security metrics
        initializeSecurityMetrics();
      };

      // Initialize security metrics
      window.initializeSecurityMetrics = function() {
        const successfulLogins = document.getElementById('successful-logins');
        const failedLogins = document.getElementById('failed-logins');
        const securityEventsList = document.getElementById('security-events-list');
        
        // Get security data from localStorage
        const securityData = JSON.parse(localStorage.getItem('security-data') || '{"successfulLogins": 0, "failedLogins": 0, "events": []}');
        
        if (successfulLogins) {
          successfulLogins.textContent = securityData.successfulLogins || 0;
        }
        
        if (failedLogins) {
          failedLogins.textContent = securityData.failedLogins || 0;
        }
        
        if (securityEventsList) {
          if (securityData.events && securityData.events.length > 0) {
            securityEventsList.innerHTML = securityData.events.slice(0, 10).map(event => `
              <div style="padding: 1rem; border-bottom: 1px solid #E2E8F0; display: flex; justify-content: space-between; align-items: start;">
                <div>
                  <div style="font-weight: 600; color: #374151;">${event.type}</div>
                  <div style="font-size: 0.9rem; color: #6B7280;">${event.description}</div>
                </div>
                <div style="font-size: 0.8rem; color: #9CA3AF;">${event.timestamp}</div>
              </div>
            `).join('');
          } else {
            securityEventsList.innerHTML = `
              <div style="text-align: center; color: #6B7280; padding: 2rem;">
                <div style="font-size: 2rem; margin-bottom: 1rem;">üîí</div>
                <div>No security events recorded yet.</div>
                <div style="font-size: 0.9rem; margin-top: 0.5rem;">Events will appear here when security activities occur.</div>
              </div>
            `;
          }
        }
      };
      
      // Enhanced map initialization for hostels
      const originalShowHostelDetails = window.showHostelDetails;
      window.showHostelDetails = async function(hostel) {
        if (originalShowHostelDetails) {
          originalShowHostelDetails(hostel);
        }
        
        // Initialize enhanced map if available
        setTimeout(async () => {
          if (window.enhancedMaps && hostel.map) {
            const mapContainer = document.getElementById('modal-map');
            if (mapContainer) {
              await window.enhancedMaps.initializeHostelMap('modal-map', hostel.location || hostel.map);
            }
          }
        }, 500);
      };
    }

    // CSS for password strength and security features
    const securityStyles = document.createElement('style');
    securityStyles.textContent = `
      .password-strength {
        margin-top: 0.5rem;
        padding: 0.25rem 0.5rem;
        border-radius: 4px;
        font-size: 0.8rem;
        font-weight: 500;
      }
      .password-strength.weak {
        background: #fef2f2;
        color: #dc2626;
        border: 1px solid #fecaca;
      }
      .password-strength.medium {
        background: #fffbeb;
        color: #d97706;
        border: 1px solid #fed7aa;
      }
      .password-strength.strong {
        background: #f0fdf4;
        color: #059669;
        border: 1px solid #bbf7d0;
      }
      .password-match {
        margin-top: 0.5rem;
        padding: 0.25rem 0.5rem;
        border-radius: 4px;
        font-size: 0.8rem;
        font-weight: 500;
      }
      .password-match.match {
        background: #f0fdf4;
        color: #059669;
        border: 1px solid #bbf7d0;
      }
      .password-match.no-match {
        background: #fef2f2;
        color: #dc2626;
        border: 1px solid #fecaca;
      }
      .error-message {
        background: #fef2f2;
        color: #dc2626;
        border: 1px solid #fecaca;
        padding: 0.75rem;
        border-radius: 6px;
        margin: 0.5rem 0;
        font-size: 0.9rem;
      }
      .success-message {
        background: #f0fdf4;
        color: #059669;
        border: 1px solid #bbf7d0;
        padding: 0.75rem;
        border-radius: 6px;
        margin: 0.5rem 0;
        font-size: 0.9rem;
      }
      .hidden { display: none !important; }
      .flex { display: flex; }
      .items-center { align-items: center; }
      .gap-2 { gap: 0.5rem; }
      .relative { position: relative; }
      .absolute { position: absolute; }
      .right-3 { right: 0.75rem; }
      .top-1\/2 { top: 50%; }
      .transform { transform: var(--tw-transform); }
      .-translate-y-1\/2 { transform: translateY(-50%); }
      .w-full { width: 100%; }
    `;
    document.head.appendChild(securityStyles);
  </script>
</body>
</html>